"use strict";(self.webpackChunklumos_data_platform=self.webpackChunklumos_data_platform||[]).push([[290],{48720:function(on,Dt,i){i.r(Dt),i.d(Dt,{default:function(){return Gr}});var nr=i(19632),At=i.n(nr),ar=i(15009),A=i.n(ar),sr=i(99289),re=i.n(sr),ir=i(5574),S=i.n(ir),ur=i(97131),Et=i(45412),kt=i(92016),j=i(45360),Pt=i(40411),fe=i(4393),ze=i(26412),Fe=i(71230),B=i(15746),n=i(67294),ve=i(74250);function or(){return ft.apply(this,arguments)}function ft(){return ft=re()(A()().mark(function h(){return A()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,kt.request)("/api/profile/basic"));case 1:case"end":return a.stop()}},h)})),ft.apply(this,arguments)}function ln(){return vt.apply(this,arguments)}function vt(){return vt=_asyncToGenerator(_regeneratorRuntime().mark(function h(){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/v1/status"));case 1:case"end":return a.stop()}},h)})),vt.apply(this,arguments)}function cn(){return ht.apply(this,arguments)}function ht(){return ht=_asyncToGenerator(_regeneratorRuntime().mark(function h(){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/test/api/v0/data",{method:"GET"}));case 1:case"end":return a.stop()}},h)})),ht.apply(this,arguments)}function dn(h){return gt.apply(this,arguments)}function gt(){return gt=_asyncToGenerator(_regeneratorRuntime().mark(function h(r){var a,c,y,C;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,request("http://127.0.0.1:8000/api/v0/hdf5/list",{method:"GET",params:{current:(a=r==null?void 0:r.current)!==null&&a!==void 0?a:1,pageSize:(c=r==null?void 0:r.pageSize)!==null&&c!==void 0?c:10,keyword:(y=r==null?void 0:r.keyword)!==null&&y!==void 0?y:""}});case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)})),gt.apply(this,arguments)}function fn(h){var r=encodeURIComponent(h);return"http://127.0.0.1:8000/api/v0/hdf5/download?name=".concat(r)}function vn(){return pt.apply(this,arguments)}function pt(){return pt=_asyncToGenerator(_regeneratorRuntime().mark(function h(){var r;return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,request("/config.json",{method:"GET"});case 2:return r=c.sent,c.abrupt("return",r);case 4:case"end":return c.stop()}},h)})),pt.apply(this,arguments)}var lr=i(9783),mt=i.n(lr),cr=i(28846),dr=(0,cr.kc)(function(h){var r=h.token;return{title:{marginBottom:"16px",color:r.colorTextHeading,fontWeight:"500",fontSize:"16px"},headerInfo:mt()({position:"relative",textAlign:"center","& > span":{display:"inline-block",marginBottom:"4px",color:r.colorTextSecondary,fontSize:r.fontSize,lineHeight:"22px"},"& > p":{margin:"0",color:r.colorTextHeading,fontSize:"24px",lineHeight:"32px"},"& > em":{position:"absolute",top:"0",right:"0",width:"1px",height:"56px",backgroundColor:r.colorSplit}},"@media screen and (max-width: ".concat(r.screenSM,"px)"),{marginBottom:"16px","& > em":{display:"none"}}),linearGradientButton:{"> span":{position:"relative"},"&::before":{content:"''",background:"linear-gradient(135deg, #6253e1, #04befe)",position:"absolute",inset:"-1px",opacity:1,transition:"all 0.3s",borderRadius:"inherit"},"&:hover::before":{opacity:0}},loadingMask:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",textAlign:"center"}}}),St=dr,fr=i(97857),He=i.n(fr),vr=i(4913),hr=i(60933),e=i(85893),gr=function(r){var a=r.color,c=a===void 0?16711680:a,y=r.shaftRadius,C=y===void 0?.003:y,b=r.shaftLength,d=b===void 0?.07:b,D=r.headRadius,Z=D===void 0?.005:D,L=r.headLength,M=L===void 0?.03:L,O=r.opacity,$=O===void 0?0:O,ue=d+M;return(0,e.jsxs)("group",{rotation:[Math.PI/2,0,0],children:[(0,e.jsxs)("mesh",{position:[0,d/2,0],children:[(0,e.jsx)("cylinderGeometry",{args:[C,C,d,32]}),(0,e.jsx)("meshBasicMaterial",{color:c,transparent:!0,opacity:$,side:ve.ehD})]}),(0,e.jsxs)("mesh",{position:[0,d+M/2,0],children:[(0,e.jsx)("coneGeometry",{args:[Z,M,32]}),(0,e.jsx)("meshBasicMaterial",{color:c,transparent:!0,opacity:$,side:ve.ehD})]})]})},Tt=gr,pr=(0,n.memo)(function(h){var r=h.pose,a=h.color,c=h.opacity;return(0,e.jsx)("group",{position:r.position,quaternion:r.quaternion,scale:.9,children:(0,e.jsx)(Tt,{color:a,shaftRadius:.003,shaftLength:.07,headRadius:.005,headLength:.03,opacity:c})})}),mr=pr,Sr=function(r){var a=r.currentPose,c=r.history,y=r.trajectoryLength,C=(0,n.useRef)(null),b=new ve.Ilk(16711680),d=1;return(0,n.useEffect)(function(){!a||!C.current||(C.current.position.copy(a.position).multiplyScalar(d),C.current.quaternion.copy(a.quaternion))},[a]),(0,e.jsxs)(hr.Xz,{camera:{position:[.25,.25,.5],fov:70},gl:{preserveDrawingBuffer:!0},children:[(0,e.jsx)("ambientLight",{intensity:.6}),(0,e.jsx)("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0}),(0,e.jsx)("gridHelper",{args:[5,50]}),(0,e.jsx)("axesHelper",{args:[5]}),c.map(function(D,Z){console.log(Z);var L=(Z+1)/Math.min(c.length,y),M=b.clone().multiplyScalar(L),O=.2+L*.8,$=He()(He()({},D),{},{position:new ve.Pa4().copy(D.position).multiplyScalar(d)});return(0,e.jsx)(mr,{pose:$,color:16711680,opacity:O},"history-arrow-".concat(Z))}),a&&(0,e.jsxs)("group",{ref:C,children:[(0,e.jsx)("axesHelper",{args:[.1]}),(0,e.jsx)(Tt,{color:16711680,shaftRadius:.003,shaftLength:.07,headRadius:.005,headLength:.03})]}),(0,e.jsx)(vr.z,{enableDamping:!0,dampingFactor:.05,enableZoom:!0,enablePan:!0})]})},Zt=Sr,ne={wrapper:"wrapper___PkEK_",listContainer:"listContainer___o7zbn",itemContainer:"itemContainer___AKCPD",selected:"selected___sbaet",itemTitle:"itemTitle___AiHnz",itemDesc:"itemDesc___Ww6vs",itemImgWrap:"itemImgWrap___IE41u",disabled:"disabled___lQ3Ok",itemImg:"itemImg___Z7aws",itemInfo:"itemInfo___cRBoQ",selectedMarker:"selectedMarker___wDF94",scaleIn:"scaleIn___DodMH"},yr=i(93967),Cr=i.n(yr),ie=function(h){return h.Portable="Portable",h.FullFunction="FullFunction",h}({}),jr=i.p+"static/fastumipro1.5cbb908d.png",br=i.p+"static/product-full.f87f1597.png",Lt=[{title:"\u4FBF\u643A\u7248\u672C",description:"\u4FBF\u643A\u7248\u672C",url:jr,value:ie.Portable,apiBasePrefix:"/portable"},{title:"\u5168\u529F\u80FD\u7248\u672C",description:"\u5168\u529F\u80FD\u7248\u672C",url:br,value:ie.FullFunction,apiBasePrefix:"/pro"}],Fr=function(r){var a=r.value,c=a===void 0?ie.Portable:a,y=r.onChange,C=r.disabled,b=function(D){C||y&&y(D)};return(0,e.jsx)("div",{className:ne.wrapper,children:(0,e.jsx)(fe.Z,{style:{marginTop:0},title:"\u7248\u672C\u9009\u62E9",children:(0,e.jsx)("div",{className:ne.listContainer,children:Lt.map(function(d){var D=c===d.value;return(0,e.jsxs)("div",{className:Cr()(ne.itemContainer,mt()(mt()({},ne.selected,D),ne.disabled,C&&!D)),onClick:function(){return b(d.value)},children:[(0,e.jsx)("div",{className:ne.itemImgWrap,children:(0,e.jsx)("img",{src:d.url,alt:d.title,className:ne.itemImg})}),(0,e.jsx)("div",{className:ne.itemInfo,children:(0,e.jsx)("h3",{className:ne.itemTitle,children:d.title})}),D&&(0,e.jsx)("div",{className:ne.selectedMarker})]},d.value)})})})})},Br=Fr,Ot=(0,n.createContext)({}),xr=Ot.Provider,hn=function(){return useContext(Ot)},Rr=i(80882),wr=i(48115),Dr=i(28280),It=i(18429),Ar=i(36027),Er=i(9798),P=i(83622),kr=i(83062),Wt=i(34041),Pr=i(96074),Ge=i(42119),Tr=i(85576),Zr=i(74330),Be={countdownWrapper:"countdownWrapper___qaa5S",numberWrapper:"numberWrapper___BduAc",animate:"animate___IOp3D",scaleAnimation:"scaleAnimation___PUFVj"},Lr=i(91742),Or=function(r){var a=r.totalSeconds,c=a===void 0?3:a,y=r.triggerCountdown,C=r.onComplete,b=r.showAnimation,d=b===void 0?!0:b,D=r.animationScale,Z=D===void 0?1.5:D,L=r.animationDuration,M=L===void 0?.5:L,O=r.textColor,$=O===void 0?"#04befe":O,ue=r.backgroundColor,oe=ue===void 0?"rgba(255, 255, 255, 0.9)":ue,xe=r.showCircleBackground,le=xe===void 0?!0:xe,Oe=(0,n.useState)(!1),J=S()(Oe,2),V=J[0],ae=J[1],Ie=(0,n.useState)(!1),pe=S()(Ie,2),p=pe[0],me=pe[1],We=(0,n.useState)(c),he=S()(We,2),q=he[0],Se=he[1],Ye=(0,n.useState)(),Re=S()(Ye,2),ye=Re[0],we=Re[1],ce=(0,n.useRef)(c),z=(0,n.useRef)(null),Ve=(0,Lr.Z)({targetDate:ye,onEnd:function(){C==null||C(),ae(!1),me(!1)}}),De=S()(Ve,1),_=De[0];(0,n.useEffect)(function(){var k=Math.round(_/1e3);k!==ce.current&&k>=0&&k<=c&&(Se(k),d&&z.current&&(z.current.classList.remove(Be.animate),z.current.offsetWidth,z.current.classList.add(Be.animate)),ce.current=k)},[_,c,d]),(0,n.useEffect)(function(){y&&!V&&(ae(!0),me(!0),Se(c),ce.current=c,we(new Date().getTime()+c*1e3))},[y,V,c]);var Ce=(0,n.useCallback)(function(){q===0&&z.current&&z.current.classList.add(Be.final)},[q]),H=(0,n.useCallback)(function(k){return k===0?"Go!":k.toString()},[]),T=(0,n.useCallback)(function(){return q===0?"140px":"120px"},[q]),se=(0,n.useCallback)(function(){var k={};return $&&(k.color=$),oe&&le&&(k.background=oe),k},[$,oe,le]);return V?(0,e.jsx)("div",{className:Be.countdownWrapper,style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:(0,e.jsx)("div",{ref:z,className:"".concat(Be.numberWrapper," ").concat(p?Be.animating:""),style:He()(He()({fontSize:T()},se()),{},{"--animation-scale":Z,"--animation-duration":"".concat(M,"s")}),onAnimationEnd:Ce,children:H(q)})}):null},Ir=Or,Wr=i(96486),ge=i.n(Wr),ke=Er.Z.Text,Nr="localhost",Mr="8887",$r="v0",yt="http://".concat(Nr,":").concat(Mr,"/api/").concat($r),Nt=5,Ur=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(a){setTimeout(function(){a(!0)},r)})},Pe=function(r){var a=r.title,c=r.value,y=r.bordered,C=St(),b=C.styles;return(0,e.jsxs)("div",{className:b.headerInfo,children:[(0,e.jsx)("span",{children:a}),(0,e.jsx)("p",{children:c}),y&&(0,e.jsx)("em",{})]})},Qr=function(r){var a=r.connect,c=r.connOk,y=r.version,C=r.isStarting,b=r.deviceStarted,d=r.recording,D=r.connMode,Z=r.leftSN,L=r.rightSN,M=r.currentStep,O=r.setLeftSN,$=r.setRightSN,ue=r.setRecording,oe=r.setConnect,xe=r.setConnMode,le=r.setVersion,Oe=r.setConnOk,J=r.setIsStarting,V=r.setDeviceStarted,ae=r.setCurrentStep,Ie=St(),pe=Ie.styles,p=(0,n.useState)(!1),me=S()(p,2),We=me[0],he=me[1],q=(0,n.useState)(""),Se=S()(q,2),Ye=Se[0],Re=Se[1],ye=(0,n.useState)(!1),we=S()(ye,2),ce=we[0],z=we[1],Ve=(0,n.useState)(!1),De=S()(Ve,2),_=De[0],Ce=De[1],H=(0,n.useMemo)(function(){var f,g=(f=ge().find(Lt,{value:y}))===null||f===void 0?void 0:f.apiBasePrefix;return console.log("\u5F53\u524D\u7248\u672CAPI\u524D\u7F00\uFF1A",g),"".concat(yt).concat(g)},[y]),T=function(){var f=re()(A()().mark(function g(){var v,s,m,t;return A()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,fetch("".concat(yt,"/pairing/config"),{method:"GET"});case 3:return v=l.sent,l.next=6,v.json();case 6:if(s=l.sent,console.log("\u52A0\u8F7D\u672C\u5730\u914D\u7F6E:",s),!(s!=null&&s.devices)){l.next=12;break}return O(((m=s.devices.device_0)===null||m===void 0?void 0:m.xv_serial)||""),$(((t=s.devices.device_1)===null||t===void 0?void 0:t.xv_serial)||""),l.abrupt("return",!0);case 12:return l.abrupt("return",!1);case 15:return l.prev=15,l.t0=l.catch(0),console.error("\u83B7\u53D6\u8BBE\u5907\u914D\u7F6E\u5931\u8D25:",l.t0),l.abrupt("return",!1);case 19:case"end":return l.stop()}},g,null,[[0,15]])}));return function(){return f.apply(this,arguments)}}(),se=function(){var f=re()(A()().mark(function g(){var v,s,m,t;return A()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,fetch("".concat(yt,"/status"),{method:"GET"});case 3:return v=l.sent,l.next=6,v.json();case 6:return s=l.sent,m=s.xv,t=s.device_version||"Unknown",t==="pro"?le(ie.FullFunction):t==="portable"&&le(ie.Portable),m==="RUNNING"?(V(!0),J(!1)):["STOPPED","CRASHED","STARTUP_FAILED"].includes(m)?(V(!1),J(!1)):m==="STARTING"&&(J(!0),V(!1),j.ZP.warning("\u8BBE\u5907\u542F\u52A8\u4E2D\uFF0C\u8BF7\u7A0D\u7B49\u540E\u5237\u65B0\u9875\u9762",3)),l.abrupt("return",!0);case 14:return l.prev=14,l.t0=l.catch(0),console.error("\u83B7\u53D6\u8BBE\u5907\u72B6\u6001\u5931\u8D25:",l.t0),l.abrupt("return",!1);case 18:case"end":return l.stop()}},g,null,[[0,14]])}));return function(){return f.apply(this,arguments)}}(),k=function(){var f=re()(A()().mark(function g(){var v,s;return A()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(H){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch("".concat(H,"/recording/status"),{method:"GET"});case 5:if(v=t.sent,!v.ok){t.next=12;break}return t.next=9,v.json();case 9:s=t.sent,console.log("\u540C\u6B65\u5F55\u5236\u72B6\u6001:",s),s.is_recording!==void 0&&ue(s.is_recording);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.error("\u83B7\u53D6\u5F55\u5236\u72B6\u6001\u5931\u8D25:",t.t0);case 17:case"end":return t.stop()}},g,null,[[2,14]])}));return function(){return f.apply(this,arguments)}}();(0,n.useEffect)(function(){T(),se(),k()},[]),(0,n.useEffect)(function(){b&&k()},[H,b]);var Ke=function(){var f=re()(A()().mark(function g(){var v,s,m,t,G,l;return A()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return Ce(!0),o.prev=1,o.next=4,fetch("".concat(H,"/pairing/quick_run"),{method:"POST"});case 4:return v=o.sent,o.next=7,v.json();case 7:if(s=o.sent,!(!v.ok||!s.success)){o.next=10;break}throw new Error((s==null?void 0:s.message)||(s==null||(m=s.detail)===null||m===void 0?void 0:m.message)||"\u914D\u5BF9\u5931\u8D25");case 10:if(j.ZP.success(s.message||"\u914D\u5BF9\u6210\u529F\uFF01\u914D\u7F6E\u5DF2\u66F4\u65B0"),!s.data){o.next=16;break}O(((t=s.data.device_0)===null||t===void 0?void 0:t.xv_serial)||""),$(((G=s.data.device_1)===null||G===void 0?void 0:G.xv_serial)||""),o.next=18;break;case 16:return o.next=18,T();case 18:o.next=27;break;case 20:return o.prev=20,o.t0=o.catch(1),j.ZP.warning("\u914D\u5BF9\u5F02\u5E38 (".concat(o.t0.message,")\uFF0C\u5C1D\u8BD5\u518D\u6B21\u52A0\u8F7D\u672C\u5730\u914D\u7F6E..."),3),o.next=25,T();case 25:l=o.sent,l?j.ZP.success("\u5DF2\u52A0\u8F7D\u672C\u5730\u5386\u53F2\u914D\u7F6E"):j.ZP.error("\u65E0\u6CD5\u8FDE\u63A5\u670D\u52A1\u6216\u672C\u5730\u914D\u7F6E\u4E3A\u7A7A");case 27:return o.prev=27,Ce(!1),z(!1),o.finish(27);case 31:case"end":return o.stop()}},g,null,[[1,20,27,31]])}));return function(){return f.apply(this,arguments)}}(),Ct=function(){var f=re()(A()().mark(function g(){var v,s;return A()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b){t.next=3;break}return j.ZP.warning("\u8BBE\u5907\u672A\u542F\u52A8\uFF0C\u65E0\u9700\u4E2D\u65AD",2),t.abrupt("return");case 3:return t.prev=3,j.ZP.loading("\u6B63\u5728\u53D1\u9001\u4E2D\u65AD\u6307\u4EE4\uFF0C\u6E05\u7406\u8FDB\u7A0B...",2),t.next=7,fetch("".concat(H,"/device/stop"),{method:"POST"});case 7:return v=t.sent,t.next=10,v.json();case 10:if(s=t.sent,!v.ok){t.next=19;break}j.ZP.success("\u8BBE\u5907\u5DF2\u6210\u529F\u4E2D\u65AD\uFF1A".concat(s.message),3),oe(!1),V(!1),Oe(!1),xe("idle"),t.next=20;break;case 19:throw new Error(s.detail||"\u4E2D\u65AD\u8BF7\u6C42\u88AB\u62D2\u7EDD");case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(3),j.ZP.error("\u8BBE\u5907\u4E2D\u65AD\u5931\u8D25\uFF1A".concat((t.t0===null||t.t0===void 0?void 0:t.t0.message)||t.t0),4);case 25:case"end":return t.stop()}},g,null,[[3,22]])}));return function(){return f.apply(this,arguments)}}(),Je=function(){var f=re()(A()().mark(function g(){var v,s;return A()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=3;break}return j.ZP.warning("\u8BF7\u5148\u65AD\u5F00\u8FDE\u63A5\u518D\u91CD\u542F\u8BBE\u5907",3),t.abrupt("return");case 3:return J(!0),t.prev=4,j.ZP.loading("\u6B63\u5728\u53D1\u9001\u542F\u52A8\u6307\u4EE4...",1),t.next=8,fetch("".concat(H,"/device/start"),{method:"POST"});case 8:return v=t.sent,t.next=11,v.json();case 11:if(s=t.sent,!v.ok){t.next=17;break}j.ZP.success("\u6307\u4EE4\u53D1\u9001\u6210\u529F\uFF1A".concat(s.message||"\u6B63\u5728\u521D\u59CB\u5316..."),3),V(!0),t.next=18;break;case 17:throw new Error(s.detail||"\u542F\u52A8\u8BF7\u6C42\u88AB\u62D2\u7EDD");case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(4),j.ZP.error("\u542F\u52A8\u5931\u8D25\uFF1A".concat((t.t0===null||t.t0===void 0?void 0:t.t0.message)||t.t0),4),V(!1);case 24:return t.prev=24,J(!1),t.finish(24);case 27:case"end":return t.stop()}},g,null,[[4,20,24,27]])}));return function(){return f.apply(this,arguments)}}(),K=(0,n.useMemo)(function(){return a?c?"\u5DF2\u8FDE\u63A5":"\u8FDE\u63A5\u4E2D\u2026":"\u672A\u8FDE\u63A5"},[a,c,D]),Ae=(0,n.useCallback)(function(){oe(!a)},[a]),Ne=function(){var f=re()(A()().mark(function g(){var v,s;return A()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return he(!0),t.next=3,Ur(Nt*1e3);case 3:return console.log("\u5F00\u59CB\u91C7\u96C6\uFF1A",new Date().toLocaleTimeString()),t.prev=4,t.next=7,fetch("".concat(H,"/recording/start"),{method:"POST"});case 7:return v=t.sent,t.next=10,v.json();case 10:s=t.sent,v!=null&&v.ok?(ue(!0),j.ZP.success("\u5F00\u59CB\u91C7\u96C6\uFF0C\u6587\u4EF6\uFF1A".concat(s.message||""))):j.ZP.error("\u5F00\u59CB\u91C7\u96C6\u5931\u8D25"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),j.ZP.error("\u5F00\u59CB\u91C7\u96C6\u5F02\u5E38\uFF1A".concat((t.t0===null||t.t0===void 0?void 0:t.t0.message)||t.t0));case 17:case"end":return t.stop()}},g,null,[[4,14]])}));return function(){return f.apply(this,arguments)}}(),Me=function(){var f=re()(A()().mark(function g(){var v,s,m,t,G,l;return A()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,fetch("".concat(H,"/recording/stop"),{method:"POST"});case 3:return v=o.sent,o.next=6,v.json();case 6:s=o.sent,s.code===0?(ue(!1),m=s.data||{},t=m.leftPath,G=m.rightPath,l=s.msg||"\u505C\u6B62\u6210\u529F",console.log("\u6570\u636E\u4FDD\u5B58\u8DEF\u5F84:",{leftPath:t,rightPath:G}),j.ZP.success("".concat(l))):j.ZP.error(s.msg||"\u505C\u6B62\u5F55\u5236\u5931\u8D25"),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(0),console.error(o.t0),j.ZP.error("\u505C\u6B62\u8BF7\u6C42\u5F02\u5E38\uFF1A".concat((o.t0===null||o.t0===void 0?void 0:o.t0.message)||o.t0));case 14:case"end":return o.stop()}},g,null,[[0,10]])}));return function(){return f.apply(this,arguments)}}();(0,n.useEffect)(function(){var f=function(s){if(!(s instanceof HTMLElement))return!1;var m=s.tagName.toLowerCase();return m==="input"||m==="textarea"||s.isContentEditable},g=function(s){if(!s.repeat&&!f(s.target)){var m=s.key.toLowerCase();(m===" "||m==="spacebar")&&(s.preventDefault(),a?a&&!d&&Ae():Ae()),m==="y"&&(a&&!d?Ne():d&&Me())}};return window.addEventListener("keydown",g),function(){window.removeEventListener("keydown",g)}},[a,d]);var qe=(0,n.useState)(!1),U=S()(qe,2),ee=U[0],jt=U[1],_e=function(){return console.log("1. \u67E5\u770B\u8FDE\u63A5\u7684\u72B6\u6001")},bt=function(){return console.log("2. \u542F\u52A8ROS")},et=function(){return console.log("3. \u542F\u52A8xvisio")},Ft=function(){return console.log("4. \u626B\u63CF\u53EF\u7528\u57FA\u7AD9")},tt=function(){return console.log("5. \u6807\u5B9A")},Bt=function(){return console.log("6. \u53D1\u5E03\u57FA\u7AD9\u6570\u636E")},rt=function(){return console.log("7. \u505C\u6389\u6240\u6709\u5305\u62ECROS\u670D\u52A1")},$t=(0,n.useMemo)(function(){return y===ie.FullFunction},[y]),nt=function(){return null;switch(y){case ie.FullFunction:return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Fe.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,e.jsx)(B.Z,{span:6,children:(0,e.jsx)(P.ZP,{style:{width:"100%"},onClick:_e,children:"\u67E5\u770B\u8FDE\u63A5\u72B6\u6001"})}),(0,e.jsx)(B.Z,{span:6,children:(0,e.jsx)(P.ZP,{style:{width:"100%"},onClick:bt,children:"\u542F\u52A8ROS"})}),(0,e.jsx)(B.Z,{span:6,children:(0,e.jsx)(P.ZP,{style:{width:"100%"},onClick:et,children:"\u542F\u52A8xvisio"})}),(0,e.jsx)(B.Z,{span:6,children:(0,e.jsx)(P.ZP,{style:{width:"100%"},onClick:Ft,children:"\u626B\u63CF\u53EF\u7528\u57FA\u7AD9"})}),(0,e.jsx)(B.Z,{span:6,children:(0,e.jsx)(P.ZP,{style:{width:"100%"},onClick:tt,children:"\u6807\u5B9A"})}),(0,e.jsx)(B.Z,{span:6,children:(0,e.jsx)(P.ZP,{style:{width:"100%"},onClick:Bt,children:"\u53D1\u5E03\u57FA\u7AD9\u6570\u636E"})}),(0,e.jsx)(B.Z,{span:6,children:(0,e.jsx)(P.ZP,{danger:!0,style:{width:"100%"},onClick:rt,children:"\u505C\u6389\u6240\u6709\u670D\u52A1"})})]})});case ie.Portable:return(0,e.jsx)(e.Fragment,{});default:return(0,e.jsx)(e.Fragment,{})}};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ir,{totalSeconds:Nt,triggerCountdown:We,onComplete:function(){he(!1)}}),(0,e.jsx)(fe.Z,{style:{marginTop:0},title:"\u64CD\u4F5C\u680F",extra:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(kr.Z,{title:ee?"\u5C55\u5F00":"\u6536\u8D77",children:(0,e.jsx)(P.ZP,{type:"text",icon:ee?(0,e.jsx)(Rr.Z,{}):(0,e.jsx)(wr.Z,{}),onClick:function(){return jt(!ee)}})})}),children:!ee&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Fe.Z,{gutter:[48,24],children:[(0,e.jsxs)(B.Z,{lg:12,md:24,sm:24,xs:24,children:[(0,e.jsx)(ke,{style:{display:"block",marginBottom:16,color:"rgba(0, 0, 0, 0.45)"},children:"\u6838\u5FC3\u64CD\u4F5C"}),(0,e.jsxs)(Fe.Z,{gutter:[16,16],children:[(0,e.jsx)(B.Z,{span:12,children:b===!1?(0,e.jsx)(P.ZP,{type:"primary",icon:(0,e.jsx)(Dr.Z,{}),style:{width:"100%",background:"#52c41a",borderColor:"#52c41a"},onClick:Je,loading:C,disabled:a||d,children:"\u542F\u52A8\u8BBE\u5907"}):(0,e.jsx)(P.ZP,{danger:!0,type:"primary",icon:(0,e.jsx)(It.Z,{}),style:{width:"100%"},onClick:Ct,disabled:d,children:"\u5173\u95ED\u8BBE\u5907"})}),(0,e.jsx)(B.Z,{span:12,children:a===!1?(0,e.jsx)(P.ZP,{type:"primary",icon:(0,e.jsx)(Ar.Z,{}),className:pe.linearGradientButton,style:{width:"100%",color:b?"#efefef":"#ffffff"},onClick:Ae,disabled:d||C||!b,children:"\u8FDE\u63A5\u8BBE\u5907"}):(0,e.jsx)(P.ZP,{danger:!0,type:"primary",icon:(0,e.jsx)(It.Z,{}),style:{width:"100%"},onClick:Ae,disabled:d,children:"\u65AD\u5F00\u8FDE\u63A5"})}),(0,e.jsx)(B.Z,{span:12,children:(0,e.jsx)(P.ZP,{type:"primary",style:{width:"100%"},onClick:Ne,disabled:d||!a,children:"\u5F00\u59CB\u91C7\u96C6"})}),(0,e.jsx)(B.Z,{span:12,children:(0,e.jsx)(P.ZP,{danger:!0,style:{width:"100%"},onClick:Me,disabled:!d,children:"\u505C\u6B62\u91C7\u96C6"})})]}),nt()]}),(0,e.jsxs)(B.Z,{lg:12,md:24,sm:24,xs:24,children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,e.jsx)(ke,{style:{color:"rgba(0, 0, 0, 0.45)"},children:"\u8BBE\u5907\u914D\u7F6E"}),(0,e.jsx)(P.ZP,{type:"primary",size:"middle",ghost:!0,onClick:function(){return z(!0)},disabled:a||d||!b,children:"\u270B\u{1F3FB} \u81EA\u52A8\u914D\u5BF9"})]}),(0,e.jsxs)(Fe.Z,{gutter:[16,16],children:[(0,e.jsxs)(B.Z,{lg:12,md:12,sm:24,xs:24,children:[(0,e.jsx)(ke,{strong:!0,children:"\u5DE6\u624B"}),(0,e.jsx)(Wt.Z,{style:{width:"100%",marginTop:8},placeholder:"\u9009\u62E9\u5DE6\u624B\u8BBE\u5907",showSearch:!0,allowClear:!0,disabled:!0,value:Z})]}),(0,e.jsxs)(B.Z,{lg:12,md:12,sm:24,xs:24,children:[(0,e.jsx)(ke,{strong:!0,children:"\u53F3\u624B"}),(0,e.jsx)(Wt.Z,{style:{width:"100%",marginTop:8},placeholder:"\u9009\u62E9\u53F3\u624B\u8BBE\u5907",showSearch:!0,allowClear:!0,disabled:!0,value:L})]})]})]})]}),(0,e.jsx)(Pr.Z,{style:{marginTop:24,marginBottom:24}}),(0,e.jsxs)("div",{children:[(0,e.jsx)(ke,{style:{display:"block",marginBottom:16,color:"rgba(0, 0, 0, 0.45)"},children:"\u72B6\u6001\u76D1\u63A7"}),(0,e.jsxs)(Fe.Z,{gutter:[16,16],align:"top",children:[(0,e.jsx)(B.Z,{lg:9,md:24,sm:24,xs:24,children:(0,e.jsxs)(Ge.Z,{current:M,size:"small",children:[(0,e.jsx)(Ge.Z.Step,{title:"\u672A\u8FDE\u63A5",description:"\u8BBE\u5907\u5DF2\u65AD\u5F00"}),(0,e.jsx)(Ge.Z.Step,{title:"\u5DF2\u8FDE\u63A5",description:"\u7B49\u5F85\u5F00\u59CB\u91C7\u96C6"}),(0,e.jsx)(Ge.Z.Step,{title:"\u91C7\u96C6\u4E2D",description:"\u6570\u636E\u6B63\u5728\u91C7\u96C6\u4E2D"})]})}),(0,e.jsx)(B.Z,{lg:3,md:8,sm:12,xs:24,children:(0,e.jsx)(Pe,{title:"\u8FDE\u63A5\u72B6\u6001",value:K,bordered:!0})}),(0,e.jsx)(B.Z,{lg:3,md:8,sm:12,xs:24,children:(0,e.jsx)(Pe,{title:"\u6FC0\u5149\u4F20\u611F\u5668",value:K,bordered:!0})}),(0,e.jsx)(B.Z,{lg:3,md:8,sm:12,xs:24,children:(0,e.jsx)(Pe,{title:"\u89C6\u89C9\u91CC\u7A0B\u8BA1",value:K,bordered:!0})}),(0,e.jsx)(B.Z,{lg:3,md:8,sm:12,xs:24,children:(0,e.jsx)(Pe,{title:"\u89C6\u9891\u6D41\u72B6\u6001",value:K,bordered:!0})}),(0,e.jsx)(B.Z,{lg:3,md:8,sm:12,xs:24,children:(0,e.jsx)(Pe,{title:"\u6DF1\u5EA6\u4F20\u611F\u5668",value:K,bordered:!0})})]})]})]})}),(0,e.jsx)(Tr.Z,{title:"\u{1F590}\uFE0F \u8BBE\u5907\u81EA\u52A8\u914D\u5BF9\u5411\u5BFC",centered:!0,open:ce,onCancel:function(){return!_&&z(!1)},footer:[(0,e.jsx)(P.ZP,{onClick:function(){return z(!1)},disabled:_,children:"\u53D6\u6D88"},"cancel"),(0,e.jsx)(P.ZP,{type:"primary",loading:_,onClick:Ke,children:_?"\u6B63\u5728\u68C0\u6D4B...":"\u5F00\u59CB\u914D\u5BF9"},"submit")],children:(0,e.jsx)("div",{style:{padding:"20px 0"},children:_?(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(Zr.Z,{size:"large",tip:"\u6B63\u5728\u5206\u6790\u8FD0\u52A8\u6570\u636E..."}),(0,e.jsx)("div",{style:{marginTop:20,fontSize:16,fontWeight:"bold",color:"#1890ff"},children:"\u8BF7\u6301\u7EED\u6447\u6643 \u3010\u5DE6\u624B\u3011 \u8BBE\u5907\uFF01"}),(0,e.jsx)("div",{style:{marginTop:8,color:"#666"},children:"(\u82E5\u53EA\u68C0\u6D4B\u5230\u5355\u8BBE\u5907\uFF0C\u5C06\u81EA\u52A8\u8DF3\u8FC7\u6B64\u6B65\u9AA4)"})]}):(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:"\u6B64\u529F\u80FD\u5C06\u81EA\u52A8\u8BC6\u522B\u5DE6\u624B\u548C\u53F3\u624B\u8BBE\u5907\u3002"}),(0,e.jsxs)("div",{style:{background:"#f5f5f5",padding:15,borderRadius:8},children:[(0,e.jsx)("p",{children:(0,e.jsx)("strong",{children:"\u667A\u80FD\u914D\u5BF9\u903B\u8F91\uFF1A"})}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:"\u5355\u8BBE\u5907\u6A21\u5F0F\uFF1A"}),"\u82E5\u4EC5\u68C0\u6D4B\u5230\u4E00\u53F0\u8BBE\u5907\uFF0C\u81EA\u52A8\u5C06\u5176\u5206\u914D\u4E3A\u5DE6\u624B\u3002"]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:"\u53CC\u8BBE\u5907\u6A21\u5F0F\uFF1A"}),"\u8BF7\u70B9\u51FB\u5F00\u59CB\u540E\uFF0C\u6447\u6643\u5DE6\u624B\u8BBE\u5907\u8FDB\u884C\u533A\u5206\u3002"]})]})]})]})})})]})},zr=Qr,Xe=function(r){return ge().isString(r)?r.length===0:ge().isObject(r)?ge().isEmpty(Object.keys(r)):ge().isArray(r)?ge().isEmpty(r.length):ge().isNil(r)},Te="localhost",Ze="8887",Le="v0",Mt="http://".concat(Te,":").concat(Ze,"/api/").concat(Le),gn=function(r){var a=r.title,c=r.value,y=r.bordered,C=useStyles(),b=C.styles;return _jsxs("div",{className:b.headerInfo,children:[_jsx("span",{children:a}),_jsx("p",{children:c}),y&&_jsx("em",{})]})},Hr=function(){var r=(0,n.useState)(ie.Portable),a=S()(r,2),c=a[0],y=a[1],C=(0,n.useState)([]),b=S()(C,2),d=b[0],D=b[1],Z=(0,n.useRef)(null),L=(0,n.useRef)(null),M=(0,n.useRef)(null),O=(0,n.useRef)(null),$=(0,n.useRef)(0),ue=(0,n.useState)("idle"),oe=S()(ue,2),xe=oe[0],le=oe[1],Oe=(0,n.useState)(!1),J=S()(Oe,2),V=J[0],ae=J[1],Ie=(0,n.useState)(!1),pe=S()(Ie,2),p=pe[0],me=pe[1],We=(0,n.useState)(),he=S()(We,2),q=he[0],Se=he[1],Ye=(0,n.useState)(),Re=S()(Ye,2),ye=Re[0],we=Re[1],ce=(0,n.useRef)(null),z=(0,n.useRef)(null),Ve=(0,n.useRef)(null),De=(0,n.useState)(null),_=S()(De,2),Ce=_[0],H=_[1],T=(0,n.useRef)(null),se=(0,n.useRef)(null),k=(0,n.useState)([]),Ke=S()(k,2),Ct=Ke[0],Je=Ke[1],K=(0,n.useRef)(null),Ae=(0,n.useState)(null),Ne=S()(Ae,2),Me=Ne[0],qe=Ne[1],U=(0,n.useRef)(null),ee=(0,n.useRef)(null),jt=(0,n.useState)(null),_e=S()(jt,2),bt=_e[0],et=_e[1],Ft=(0,n.useState)(null),tt=S()(Ft,2),Bt=tt[0],rt=tt[1],$t=(0,n.useState)([]),nt=S()($t,2),f=nt[0],g=nt[1],v=(0,n.useState)([]),s=S()(v,2),m=s[0],t=s[1],G=(0,n.useRef)(0),l=(0,n.useRef)(null),at=(0,n.useRef)(null),o=(0,n.useRef)(null),xt=(0,n.useRef)(null),Ee=(0,n.useRef)(null),Xr=(0,n.useState)(!1),Ut=S()(Xr,2),st=Ut[0],Yr=Ut[1],Vr=(0,n.useState)(!1),Qt=S()(Vr,2),Rt=Qt[0],Kr=Qt[1],Jr=(0,n.useState)(!1),zt=S()(Jr,2),$e=zt[0],qr=zt[1],_r=St(),je=_r.styles,Ht=(0,kt.useRequest)(function(){return or()}),pn=Ht.data,it=Ht.loading,Ue=(0,n.useMemo)(function(){return function(E){var u,x,X,Y,te,R,I,W=E.timestamp,N=E.data||[],w=new Date(W*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),Q=[{id:"1",name:"\u5750\u6807X",value:((u=N[0])!==null&&u!==void 0?u:0).toFixed(4),time:w},{id:"2",name:"\u5750\u6807Y",value:((x=N[1])!==null&&x!==void 0?x:0).toFixed(4),time:w},{id:"3",name:"\u5750\u6807Z",value:((X=N[2])!==null&&X!==void 0?X:0).toFixed(4),time:w}],de=[{id:"1",name:"QX",value:((Y=N[3])!==null&&Y!==void 0?Y:0).toFixed(4),time:w},{id:"2",name:"QY",value:((te=N[4])!==null&&te!==void 0?te:0).toFixed(4),time:w},{id:"3",name:"QZ",value:((R=N[5])!==null&&R!==void 0?R:0).toFixed(4),time:w},{id:"4",name:"QW",value:((I=N[6])!==null&&I!==void 0?I:0).toFixed(4),time:w}];return{xyz:Q,q:de}}},[]),ut=50,Gt=1,Xt=function(){ce.current&&(ce.current.onerror=null,ce.current.src="")},en=(0,n.useState)(0),Yt=S()(en,2),tn=Yt[0],ot=Yt[1];(0,n.useEffect)(function(){if(!p){Ee.current&&(Ee.current.close(),Ee.current=null),ae(!1),le("idle"),D([]),et(null),g([]),Z.current=null;return}var E="ws://".concat(Te,":").concat(Ze,"/api/").concat(Le,"/ws/slam_stream"),u=new WebSocket(E);return Ee.current=u,le("sse"),ae(!1),u.onopen=function(){console.log("SLAM WebSocket Connected"),ae(!0)},u.onmessage=function(x){try{var X=JSON.parse(x.data);X.type==="slam"&&(Z.current=X)}catch(Y){console.error("Failed to parse SLAM WebSocket message",Y)}},u.onerror=function(x){console.error("SLAM WebSocket Error:",x),j.ZP.error("SLAM WebSocket \u8FDE\u63A5\u5931\u8D25\u3002"),ae(!1)},u.onclose=function(){console.log("SLAM WebSocket Disconnected"),ae(!1),Ee.current=null},function(){u.readyState===WebSocket.OPEN&&u.close(),Ee.current=null}},[p,Ue]),(0,n.useEffect)(function(){if(!p){se.current&&(se.current.close(),se.current=null),T.current&&(URL.revokeObjectURL(T.current),T.current=null),H(null),L.current=null;return}var E="ws://".concat(Te,":").concat(Ze,"/api/").concat(Le,"/ws/tof_stream"),u=new WebSocket(E);return se.current=u,u.binaryType="arraybuffer",u.onopen=function(){console.log("TOF Image WebSocket Connected")},u.onmessage=function(x){L.current=x.data},u.onerror=function(x){console.error("TOF Image WebSocket Error:",x),j.ZP.error("TOF Image WebSocket \u8FDE\u63A5\u5931\u8D25\u3002")},u.onclose=function(){console.log("TOF Image WebSocket Disconnected"),se.current=null},function(){u.readyState===WebSocket.OPEN&&u.close(),se.current=null,T.current&&(URL.revokeObjectURL(T.current),T.current=null)}},[p]),(0,n.useEffect)(function(){if(!p){K.current&&(K.current.close(),K.current=null),Je([]),rt(null),t([]),M.current=null;return}var E="ws://".concat(Te,":").concat(Ze,"/api/").concat(Le,"/ws/right_slam_stream"),u=new WebSocket(E);return K.current=u,u.onopen=function(){console.log("Right SLAM WebSocket Connected")},u.onmessage=function(x){try{var X=JSON.parse(x.data);M.current=X}catch(Y){console.error("Failed to parse Right SLAM WebSocket message",Y)}},u.onerror=function(x){console.error("Right SLAM WebSocket Error:",x),j.ZP.error("Right SLAM WebSocket \u8FDE\u63A5\u5931\u8D25\u3002")},u.onclose=function(){console.log("Right SLAM WebSocket Disconnected"),K.current=null},function(){u.readyState===WebSocket.OPEN&&u.close(),K.current=null}},[p,Ue]),(0,n.useEffect)(function(){if(!p){ee.current&&(ee.current.close(),ee.current=null),U.current&&(URL.revokeObjectURL(U.current),U.current=null),qe(null),O.current=null;return}var E="ws://".concat(Te,":").concat(Ze,"/api/").concat(Le,"/ws/right_tof_stream"),u=new WebSocket(E);return ee.current=u,u.binaryType="arraybuffer",u.onopen=function(){console.log("Right TOF Image WebSocket Connected")},u.onmessage=function(x){O.current=x.data},u.onerror=function(x){console.error("Right TOF Image WebSocket Error:",x),j.ZP.error("Right TOF Image WebSocket \u8FDE\u63A5\u5931\u8D25\u3002")},u.onclose=function(){console.log("Right TOF Image WebSocket Disconnected"),ee.current=null},function(){u.readyState===WebSocket.OPEN&&u.close(),ee.current=null,U.current&&(URL.revokeObjectURL(U.current),U.current=null)}},[p]),(0,n.useEffect)(function(){var E=function(){var Y=re()(A()().mark(function te(R,I,W,N){var w,Q,de,Qe;return A()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!I.current){F.next=3;break}return console.log("[WebRTC ".concat(R,"] Already connected.")),F.abrupt("return");case 3:return console.log("[WebRTC ".concat(R,"] 1. Creating PeerConnection")),w=new RTCPeerConnection,I.current=w,w.ontrack=function(lt){console.log("[WebRTC ".concat(R,"] 4. Received remote track")),W.current&&lt.streams[0]&&(W.current.srcObject=lt.streams[0],console.log("[WebRTC ".concat(R,"] 5. Attached track to <video> element")))},w.onconnectionstatechange=function(){console.log("[WebRTC ".concat(R,"] Connection state: ").concat(w.connectionState)),(w.connectionState==="failed"||w.connectionState==="closed"||w.connectionState==="disconnected")&&u(R,I,W)},F.prev=8,w.addTransceiver("video",{direction:"recvonly"}),console.log("[WebRTC ".concat(R,"] 2. Creating Offer")),F.next=13,w.createOffer();case 13:return Q=F.sent,F.next=16,w.setLocalDescription(Q);case 16:return console.log("[WebRTC ".concat(R,"] 3. Sending Offer to server...")),F.next=19,fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sdp:Q.sdp,type:Q.type})});case 19:if(de=F.sent,de.ok){F.next=22;break}throw new Error("Server responded with ".concat(de.status));case 22:return F.next=24,de.json();case 24:return Qe=F.sent,console.log("[WebRTC ".concat(R,"] 6. Received server Answer")),F.next=28,w.setRemoteDescription(new RTCSessionDescription(Qe));case 28:console.log("[WebRTC ".concat(R,"] 7. Set remote Answer. Connection established!")),F.next=36;break;case 31:F.prev=31,F.t0=F.catch(8),console.error("[WebRTC ".concat(R,"] Failed to start:"),F.t0),j.ZP.error("WebRTC (".concat(R,") connection failed: ").concat(F.t0.message)),u(R,I,W);case 36:case"end":return F.stop()}},te,null,[[8,31]])}));return function(R,I,W,N){return Y.apply(this,arguments)}}(),u=function(te,R,I){var W=R.current;W&&(console.log("[WebRTC ".concat(te,"] Stopping connection...")),W.close(),R.current=null),I.current&&(I.current.srcObject=null)};if(p){var x=window.location.hostname,X=Mt||"http://".concat(x,":8887/api/v0");Xe(q)||E("left",l,o,"".concat(X,"/webrtc/offer/left")),Xe(ye)||E("right",at,xt,"".concat(X,"/webrtc/offer/right"))}return function(){u("left",l,o),u("right",at,xt)}},[p]),(0,n.useEffect)(function(){if(p){var E,u=function x(){$.current+=1;var X=1,Y=$.current%X===0;if(Z.current){var te=Z.current,R={timestamp:te.timestamp,data:te.data},I=Ue(R),W=I.xyz,N=I.q,w=[{X:W[0].value,Y:W[1].value,Z:W[2].value,QX:N[0].value,QY:N[1].value,QZ:N[2].value,QW:N[3].value,time:W[0].time}],Q=w[0],de=new ve.Pa4(parseFloat(Q.Y||"0"),parseFloat(Q.Z||"0"),parseFloat(Q.X||"0")),Qe=new ve._fP(parseFloat(Q.QX||"0"),parseFloat(Q.QY||"0"),parseFloat(Q.QZ||"0"),parseFloat(Q.QW||"1"));if(et({position:de,quaternion:Qe}),Y&&D(w),G.current+=1,G.current%Gt===0){var Kt={position:de,quaternion:Qe};g(function(wt){return[].concat(At()(wt),[Kt]).slice(-ut)})}Z.current=null}if(M.current){var F=M.current,lt={timestamp:F.timestamp,data:F.data},Jt=Ue(lt),ct=Jt.xyz,dt=Jt.q,qt=[{X:ct[0].value,Y:ct[1].value,Z:ct[2].value,QX:dt[0].value,QY:dt[1].value,QZ:dt[2].value,QW:dt[3].value,time:ct[0].time}],be=qt[0],_t=new ve.Pa4(parseFloat(be.Y||"0"),parseFloat(be.Z||"0"),parseFloat(be.X||"0")),er=new ve._fP(parseFloat(be.QX||"0"),parseFloat(be.QY||"0"),parseFloat(be.QZ||"0"),parseFloat(be.QW||"1"));if(rt({position:_t,quaternion:er}),Y&&Je(qt),G.current+=1,G.current%Gt===0){var an={position:_t,quaternion:er};t(function(wt){return[].concat(At()(wt),[an]).slice(-ut)})}M.current=null}if(L.current&&!Xe(q)){var sn=new Blob([L.current],{type:"image/jpeg"}),tr=URL.createObjectURL(sn);H(tr),T.current&&URL.revokeObjectURL(T.current),T.current=tr,L.current=null}if(O.current&&!Xe(ye)){var un=new Blob([O.current],{type:"image/jpeg"}),rr=URL.createObjectURL(un);qe(rr),U.current&&URL.revokeObjectURL(U.current),U.current=rr,O.current=null}E=requestAnimationFrame(x)};return E=requestAnimationFrame(u),function(){cancelAnimationFrame(E),T.current&&URL.revokeObjectURL(T.current),U.current&&URL.revokeObjectURL(U.current)}}},[p,Ue]),(0,n.useEffect)(function(){if(p)p&&!st?ot(1):p&&st&&ot(2);else{Xt(),ot(0);return}return function(){Xt()}},[p,st]);var Vt=[{title:"\u65F6\u95F4",dataIndex:"time",key:"time",align:"left"},{title:"\u5750\u6807X",dataIndex:"X",key:"X",align:"left"},{title:"\u5750\u6807Y",dataIndex:"Y",key:"Y",align:"left"},{title:"\u5750\u6807Z",dataIndex:"Z",key:"Z",align:"left"},{title:"QX",dataIndex:"QX",key:"QX",align:"left"},{title:"QY",dataIndex:"QY",key:"QY",align:"left"},{title:"QZ",dataIndex:"QZ",key:"QZ",align:"left"},{title:"QW",dataIndex:"QW",key:"QW",align:"left"}],mn=function(){console.log("Abnormal Stop button clicked"),j.ZP.error("\u6267\u884C\u5F02\u5E38\u505C\u6B62\uFF01")},rn=(0,e.jsxs)("div",{children:[$e===!1&&(0,e.jsxs)("div",{children:["\u8BBE\u5907\u72B6\u6001\uFF1A\u505C\u6B62 ",(0,e.jsx)(Pt.Z,{status:"error"})]}),$e===!0&&(0,e.jsxs)("div",{children:["\u8BBE\u5907\u72B6\u6001\uFF1A\u6B63\u5E38 ",(0,e.jsx)(Pt.Z,{status:"success"})]})]}),nn=(0,n.useMemo)(function(){return p||it||$e||Rt},[p,it,$e,Rt]);return(0,e.jsx)(xr,{value:{},children:(0,e.jsxs)(ur._z,{title:rn,children:[(0,e.jsx)(Br,{disabled:nn,value:c,onChange:function(u){y(u)}}),(0,e.jsx)(zr,{version:c,connect:p,connMode:xe,connOk:V,isStarting:Rt,deviceStarted:$e,recording:st,currentStep:tn,setConnect:me,setConnMode:le,setConnOk:ae,setIsStarting:Kr,setDeviceStarted:qr,setRecording:Yr,setVersion:y,leftSN:q,setLeftSN:Se,rightSN:ye,setRightSN:we,setCurrentStep:ot}),(0,e.jsxs)(fe.Z,{title:"\u53EF\u89C6\u5316\u533A\u57DF",variant:"borderless",style:{marginTop:8},children:[(0,e.jsx)(fe.Z,{variant:"borderless",style:{marginTop:0},bodyStyle:{padding:0},children:(0,e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",columnGap:0,rowGap:0,gap:24,alignItems:"start"},children:[(0,e.jsxs)(fe.Z,{variant:"borderless",style:{marginTop:0},bodyStyle:{padding:0},children:[(0,e.jsx)(ze.Z,{title:"\u5DE6\u624B-RGB",size:"small",style:{marginBottom:0},styles:{header:{marginBottom:8,padding:"0 8px"},content:{margin:0,padding:0}},children:(0,e.jsxs)("div",{style:{width:"100%",paddingTop:"56.25%",backgroundColor:"black",position:"relative"},children:[(0,e.jsx)("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",display:p?"block":"none"}}),!p&&(0,e.jsx)("div",{className:je.loadingMask,children:(0,e.jsxs)("span",{style:{fontSize:15},children:["\u672A\u8FDE\u63A5.... ",(0,e.jsx)("br",{})," \u70B9\u51FB\u4E0A\u65B9 \u201C\u8FDE\u63A5\u8BBE\u5907\u201D \u5F00\u59CB\u89C6\u9891\u6D41"]})})]})}),(0,e.jsx)(ze.Z,{title:"\u5DE6\u624B-TOF",size:"small",style:{marginBottom:0},styles:{header:{marginBottom:8,padding:"0 8px"},content:{margin:0,padding:0}},children:(0,e.jsx)("div",{style:{width:"100%",paddingTop:"56.25%",backgroundColor:"black",position:"relative"},children:p&&Ce?(0,e.jsx)("img",{alt:"video-1-bottom",src:Ce,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",backgroundColor:"black",display:"block"}}):(0,e.jsx)("div",{className:je.loadingMask,children:(0,e.jsx)("span",{style:{fontSize:15},children:p?"\u7B49\u5F85\u89C6\u9891\u6D41...":"\u672A\u8FDE\u63A5.... \u70B9\u51FB\u4E0A\u65B9 \u201C\u8FDE\u63A5\u8BBE\u5907\u201D \u5F00\u59CB\u89C6\u9891\u6D41"})})})})]}),(0,e.jsxs)(fe.Z,{variant:"borderless",style:{marginTop:0},bodyStyle:{padding:0},children:[(0,e.jsx)(ze.Z,{title:"\u53F3\u624B-RGB",size:"small",style:{marginBottom:0},styles:{header:{marginBottom:8,padding:"0 8px"},content:{margin:0,padding:0}},children:(0,e.jsxs)("div",{style:{width:"100%",paddingTop:"56.25%",backgroundColor:"black",position:"relative"},children:[(0,e.jsx)("video",{ref:xt,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",display:p?"block":"none"}}),!p&&(0,e.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",lineHeight:"1.5",textAlign:"center"},children:(0,e.jsxs)("span",{style:{fontSize:15},children:["\u672A\u8FDE\u63A5.... ",(0,e.jsx)("br",{})," \u70B9\u51FB\u4E0A\u65B9 \u201C\u8FDE\u63A5\u8BBE\u5907\u201D \u5F00\u59CB\u89C6\u9891\u6D41"]})})]})}),(0,e.jsx)(ze.Z,{title:"\u53F3\u624B-TOF",size:"small",style:{marginBottom:0},styles:{header:{marginBottom:8,padding:"0 8px"},content:{margin:0,padding:0}},children:(0,e.jsx)("div",{style:{width:"100%",paddingTop:"56.25%",backgroundColor:"black",position:"relative"},children:p&&Me?(0,e.jsx)("img",{src:Me,alt:"video-3-bottom",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",backgroundColor:"black",display:"block"}}):(0,e.jsx)("div",{className:je.loadingMask,children:(0,e.jsx)("span",{style:{fontSize:15},children:p?"\u7B49\u5F85\u89C6\u9891\u6D41...":"\u672A\u8FDE\u63A5.... \u70B9\u51FB\u4E0A\u65B9 \u201C\u8FDE\u63A5\u8BBE\u5907\u201D \u5F00\u59CB\u89C6\u9891\u6D41"})})})})]})]})}),(0,e.jsxs)(Fe.Z,{gutter:24,children:[(0,e.jsxs)(B.Z,{span:12,children:[(0,e.jsx)("div",{className:je.title,style:{marginTop:24},children:"\u5DE6\u624BSLAM 3D\u4F4D\u59FF"}),(0,e.jsx)(fe.Z,{style:{height:400,marginBottom:24,padding:0},styles:{body:{padding:0,height:"100%"}},children:(0,e.jsx)(Zt,{currentPose:bt,history:f,trajectoryLength:ut})}),(0,e.jsx)("div",{className:je.title,style:{marginTop:24},children:"\u5DE6\u624BSLAM \u6570\u636E"}),(0,e.jsx)(Et.Z,{style:{marginBottom:24,width:"100%"},pagination:!1,search:!1,loading:it,options:!1,toolBarRender:!1,dataSource:d,columns:Vt,rowKey:"time"})]}),(0,e.jsxs)(B.Z,{span:12,children:[(0,e.jsx)("div",{className:je.title,style:{marginTop:24},children:"\u53F3\u624BSLAM 3D\u4F4D\u59FF"}),(0,e.jsx)(fe.Z,{style:{height:400,marginBottom:24,padding:0},styles:{body:{padding:0,height:"100%"}},children:(0,e.jsx)(Zt,{currentPose:Bt,history:m,trajectoryLength:ut})}),(0,e.jsx)("div",{className:je.title,style:{marginTop:24},children:"\u53F3\u624BSLAM \u6570\u636E"}),(0,e.jsx)(Et.Z,{style:{marginBottom:24,width:"100%"},pagination:!1,search:!1,loading:it,options:!1,toolBarRender:!1,dataSource:Ct,columns:Vt,rowKey:"time"})]})]})]})]})})},Gr=Hr}}]);
