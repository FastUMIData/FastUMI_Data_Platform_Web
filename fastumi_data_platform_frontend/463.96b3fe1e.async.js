!(function(){var G0=Object.defineProperty,k0=Object.defineProperties;var W0=Object.getOwnPropertyDescriptors;var sm=Object.getOwnPropertySymbols;var N0=Object.prototype.hasOwnProperty,O0=Object.prototype.propertyIsEnumerable;var D0=Math.pow,P0=(Li,hn,k)=>hn in Li?G0(Li,hn,{enumerable:!0,configurable:!0,writable:!0,value:k}):Li[hn]=k,Qi=(Li,hn)=>{for(var k in hn||(hn={}))N0.call(hn,k)&&P0(Li,k,hn[k]);if(sm)for(var k of sm(hn))O0.call(hn,k)&&P0(Li,k,hn[k]);return Li},cl=(Li,hn)=>k0(Li,W0(hn));var Sp=(Li,hn)=>{var k={};for(var p in Li)N0.call(Li,p)&&hn.indexOf(p)<0&&(k[p]=Li[p]);if(Li!=null&&sm)for(var p of sm(Li))hn.indexOf(p)<0&&O0.call(Li,p)&&(k[p]=Li[p]);return k};var yf=(Li,hn,k)=>new Promise((p,he)=>{var mn=en=>{try{j(k.next(en))}catch(D){he(D)}},Ue=en=>{try{j(k.throw(en))}catch(D){he(D)}},j=en=>en.done?p(en.value):Promise.resolve(en.value).then(mn,Ue);j((k=k.apply(Li,hn)).next())});(self.webpackChunklumos_data_platform=self.webpackChunklumos_data_platform||[]).push([[463],{36027:function(Li,hn,k){"use strict";k.d(hn,{Z:function(){return dn}});var p=k(87462),he=k(67294),mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"},Ue=mn,j=k(84089),en=function(Ei,Mt){return he.createElement(j.Z,(0,p.Z)({},Ei,{ref:Mt,icon:Ue}))},D=he.forwardRef(en),dn=D},18429:function(Li,hn,k){"use strict";k.d(hn,{Z:function(){return dn}});var p=k(87462),he=k(67294),mn={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},Ue=mn,j=k(84089),en=function(Ei,Mt){return he.createElement(j.Z,(0,p.Z)({},Ei,{ref:Mt,icon:Ue}))},D=he.forwardRef(en),dn=D},28280:function(Li,hn,k){"use strict";k.d(hn,{Z:function(){return dn}});var p=k(87462),he=k(67294),mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M705.6 124.9a8 8 0 00-11.6 7.2v64.2c0 5.5 2.9 10.6 7.5 13.6a352.2 352.2 0 0162.2 49.8c32.7 32.8 58.4 70.9 76.3 113.3a355 355 0 0127.9 138.7c0 48.1-9.4 94.8-27.9 138.7a355.92 355.92 0 01-76.3 113.3 353.06 353.06 0 01-113.2 76.4c-43.8 18.6-90.5 28-138.5 28s-94.7-9.4-138.5-28a353.06 353.06 0 01-113.2-76.4A355.92 355.92 0 01184 650.4a355 355 0 01-27.9-138.7c0-48.1 9.4-94.8 27.9-138.7 17.9-42.4 43.6-80.5 76.3-113.3 19-19 39.8-35.6 62.2-49.8 4.7-2.9 7.5-8.1 7.5-13.6V132c0-6-6.3-9.8-11.6-7.2C178.5 195.2 82 339.3 80 506.3 77.2 745.1 272.5 943.5 511.2 944c239 .5 432.8-193.3 432.8-432.4 0-169.2-97-315.7-238.4-386.7zM480 560h64c4.4 0 8-3.6 8-8V88c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8z"}}]},name:"poweroff",theme:"outlined"},Ue=mn,j=k(84089),en=function(Ei,Mt){return he.createElement(j.Z,(0,p.Z)({},Ei,{ref:Mt,icon:Ue}))},D=he.forwardRef(en),dn=D},45412:function(Li,hn,k){"use strict";k.d(hn,{Z:function(){return d}});var p=k(55850),he=k(15861),mn=k(71002),Ue=k(97685),j=k(4942),en=k(74902),D=k(1413),dn=k(91),Kr=k(90814),Ei=k(12795),Mt=k(21532),hi=k(92398),di=k(25378),Xi=k(93967),st=k.n(Xi),ln=k(21770),tn=k(98423),C=k(67294),Nt=k(64847),wn=function(n){var c=n.componentCls,u=n.antCls;return(0,j.Z)({},"".concat(c,"-actions"),(0,j.Z)((0,j.Z)({marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,listStyle:"none",display:"flex",gap:n.marginXS,background:n.colorBgContainer,borderBlockStart:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit),minHeight:42},"& > *",{alignItems:"center",justifyContent:"center",flex:1,display:"flex",cursor:"pointer",color:n.colorTextSecondary,transition:"color 0.3s","&:hover":{color:n.colorPrimaryHover}}),"& > li > div",{flex:1,width:"100%",marginBlock:n.marginSM,marginInline:0,color:n.colorTextSecondary,textAlign:"center",a:{color:n.colorTextSecondary,transition:"color 0.3s","&:hover":{color:n.colorPrimaryHover}},div:(0,j.Z)((0,j.Z)({position:"relative",display:"block",minWidth:32,fontSize:n.fontSize,lineHeight:n.lineHeight,cursor:"pointer","&:hover":{color:n.colorPrimaryHover,transition:"color 0.3s"}},"a:not(".concat(u,`-btn),
            > .anticon`),{display:"inline-block",width:"100%",color:n.colorTextSecondary,lineHeight:"22px",transition:"color 0.3s","&:hover":{color:n.colorPrimaryHover}}),".anticon",{fontSize:n.cardActionIconSize,lineHeight:"22px"}),"&:not(:last-child)":{borderInlineEnd:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)}}))};function Wn(i){return(0,Nt.Xj)("ProCardActions",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i),cardActionIconSize:16});return[wn(c)]})}var O=k(85893),Vi=function(n){var c=n.actions,u=n.prefixCls,h=Wn(u),m=h.wrapSSR,v=h.hashId;return Array.isArray(c)&&c!==null&&c!==void 0&&c.length?m((0,O.jsx)("ul",{className:st()("".concat(u,"-actions"),v),children:c.map(function(y,S){return(0,O.jsx)("li",{style:{width:"".concat(100/c.length,"%"),padding:0,margin:0},className:st()("".concat(u,"-actions-item"),v),children:y},"action-".concat(S))})})):m((0,O.jsx)("ul",{className:st()("".concat(u,"-actions"),v),children:c}))},Pn=Vi,An=k(71230),Dn=k(15746),jt=k(11568),Mr=new jt.E4("card-loading",{"0%":{backgroundPosition:"0 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),Hi=function(n){return(0,j.Z)({},n.componentCls,(0,j.Z)((0,j.Z)({"&-loading":{overflow:"hidden"},"&-loading &-body":{userSelect:"none"}},"".concat(n.componentCls,"-loading-content"),{width:"100%",p:{marginBlock:0,marginInline:0}}),"".concat(n.componentCls,"-loading-block"),{height:"14px",marginBlock:"4px",background:"linear-gradient(90deg, rgba(54, 61, 64, 0.2), rgba(54, 61, 64, 0.4), rgba(54, 61, 64, 0.2))",backgroundSize:"600% 600%",borderRadius:n.borderRadius,animationName:Mr,animationDuration:"1.4s",animationTimingFunction:"ease",animationIterationCount:"infinite"}))};function Rr(i){return(0,Nt.Xj)("ProCardLoading",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[Hi(c)]})}var qt=function(n){var c=n.style,u=n.prefix,h=Rr(u||"ant-pro-card"),m=h.wrapSSR;return m((0,O.jsxs)("div",{className:"".concat(u,"-loading-content"),style:c,children:[(0,O.jsx)(An.Z,{gutter:8,children:(0,O.jsx)(Dn.Z,{span:22,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})})}),(0,O.jsxs)(An.Z,{gutter:8,children:[(0,O.jsx)(Dn.Z,{span:8,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})}),(0,O.jsx)(Dn.Z,{span:15,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})})]}),(0,O.jsxs)(An.Z,{gutter:8,children:[(0,O.jsx)(Dn.Z,{span:6,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})}),(0,O.jsx)(Dn.Z,{span:18,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})})]}),(0,O.jsxs)(An.Z,{gutter:8,children:[(0,O.jsx)(Dn.Z,{span:13,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})}),(0,O.jsx)(Dn.Z,{span:9,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})})]}),(0,O.jsxs)(An.Z,{gutter:8,children:[(0,O.jsx)(Dn.Z,{span:4,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})}),(0,O.jsx)(Dn.Z,{span:3,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})}),(0,O.jsx)(Dn.Z,{span:16,children:(0,O.jsx)("div",{className:"".concat(u,"-loading-block")})})]})]}))},Kn=qt,$n=k(67159),pi=k(50344),ii=k(80334),Er=k(34155),Lr=["tab","children"],Ha=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"];function xt(i){return i.filter(function(n){return n})}function Kt(i,n,c){if(i)return i.map(function(h){return(0,D.Z)((0,D.Z)({},h),{},{children:(0,O.jsx)(ma,(0,D.Z)((0,D.Z)({},c==null?void 0:c.cardProps),{},{children:h.children}))})});(0,ii.ET)(!c,"Tabs.TabPane is deprecated. Please use `items` directly.");var u=(0,pi.Z)(n).map(function(h){if(C.isValidElement(h)){var m=h.key,v=h.props,y=v||{},S=y.tab,b=y.children,T=(0,dn.Z)(y,Lr),w=(0,D.Z)((0,D.Z)({key:String(m)},T),{},{children:(0,O.jsx)(ma,(0,D.Z)((0,D.Z)({},c==null?void 0:c.cardProps),{},{children:b})),label:S});return w}return null});return xt(u)}var En=function(n){var c=(0,C.useContext)(Mt.ZP.ConfigContext),u=c.getPrefixCls;if($n.Z.startsWith("5"))return(0,O.jsx)(O.Fragment,{});var h=n.key,m=n.tab,v=n.tabKey,y=n.disabled,S=n.destroyInactiveTabPane,b=n.children,T=n.className,w=n.style,A=n.cardProps,I=(0,dn.Z)(n,Ha),P=u("pro-card-tabpane"),B=st()(P,T);return(0,O.jsx)(hi.Z.TabPane,(0,D.Z)((0,D.Z)({tabKey:v,tab:m,className:B,style:w,disabled:y,destroyInactiveTabPane:S},I),{},{children:(0,O.jsx)(ma,(0,D.Z)((0,D.Z)({},A),{},{children:b}))}),h)},rn=En,Mn=function(n){return{backgroundColor:n.controlItemBgActive,borderColor:n.controlOutline}},Ci=function(n){var c=n.componentCls;return(0,j.Z)((0,j.Z)((0,j.Z)({},c,(0,D.Z)((0,D.Z)({position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box",width:"100%",marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,backgroundColor:n.colorBgContainer,borderRadius:n.borderRadius,transition:"all 0.3s"},Nt.Wf===null||Nt.Wf===void 0?void 0:(0,Nt.Wf)(n)),{},(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({"&-box-shadow":{boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017",borderColor:"transparent"},"&-col":{width:"100%"},"&-border":{border:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)},"&-hoverable":(0,j.Z)({cursor:"pointer",transition:"box-shadow 0.3s, border-color 0.3s","&:hover":{borderColor:"transparent",boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017"}},"&".concat(c,"-checked:hover"),{borderColor:n.controlOutline}),"&-checked":(0,D.Z)((0,D.Z)({},Mn(n)),{},{"&::after":{visibility:"visible",position:"absolute",insetBlockStart:2,insetInlineEnd:2,opacity:1,width:0,height:0,border:"6px solid ".concat(n.colorPrimary),borderBlockEnd:"6px solid transparent",borderInlineStart:"6px solid transparent",borderStartEndRadius:2,content:'""'}}),"&:focus":(0,D.Z)({},Mn(n)),"&&-ghost":(0,j.Z)({backgroundColor:"transparent"},"> ".concat(c),{"&-header":{paddingInlineEnd:0,paddingBlockEnd:n.padding,paddingInlineStart:0},"&-body":{paddingBlock:0,paddingInline:0,backgroundColor:"transparent"}}),"&&-split > &-body":{paddingBlock:0,paddingInline:0},"&&-contain-card > &-body":{display:"flex"}},"".concat(c,"-body-direction-column"),{flexDirection:"column"}),"".concat(c,"-body-wrap"),{flexWrap:"wrap"}),"&&-collapse",(0,j.Z)({},"> ".concat(c),{"&-header":{paddingBlockEnd:n.padding,borderBlockEnd:0},"&-body":{display:"none"}})),"".concat(c,"-header"),{display:"flex",alignItems:"center",justifyContent:"space-between",paddingInline:n.paddingLG,paddingBlock:n.padding,paddingBlockEnd:0,"&-border":{"&":{paddingBlockEnd:n.padding},borderBlockEnd:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)},"&-collapsible":{cursor:"pointer"}}),"".concat(c,"-title"),{color:n.colorText,fontWeight:500,fontSize:n.fontSizeLG,lineHeight:n.lineHeight}),"".concat(c,"-extra"),{color:n.colorText}),"".concat(c,"-type-inner"),(0,j.Z)({},"".concat(c,"-header"),{backgroundColor:n.colorFillAlter})),"".concat(c,"-collapsible-icon"),{marginInlineEnd:n.marginXS,color:n.colorIconHover,":hover":{color:n.colorPrimaryHover},"& svg":{transition:"transform ".concat(n.motionDurationMid)}}),"".concat(c,"-body"),{display:"block",boxSizing:"border-box",height:"100%",paddingInline:n.paddingLG,paddingBlock:n.padding,"&-center":{display:"flex",alignItems:"center",justifyContent:"center"}}),"&&-size-small",(0,j.Z)((0,j.Z)({},c,{"&-header":{paddingInline:n.paddingSM,paddingBlock:n.paddingXS,paddingBlockEnd:0,"&-border":{paddingBlockEnd:n.paddingXS}},"&-title":{fontSize:n.fontSize},"&-body":{paddingInline:n.paddingSM,paddingBlock:n.paddingSM}}),"".concat(c,"-header").concat(c,"-header-collapsible"),{paddingBlock:n.paddingXS})))),"".concat(c,"-col"),(0,j.Z)((0,j.Z)({},"&".concat(c,"-split-vertical"),{borderInlineEnd:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)}),"&".concat(c,"-split-horizontal"),{borderBlockEnd:"".concat(n.lineWidth,"px ").concat(n.lineType," ").concat(n.colorSplit)})),"".concat(c,"-tabs"),(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({},"".concat(n.antCls,"-tabs-top > ").concat(n.antCls,"-tabs-nav"),(0,j.Z)({marginBlockEnd:0},"".concat(n.antCls,"-tabs-nav-list"),{marginBlockStart:n.marginXS,paddingInlineStart:n.padding})),"".concat(n.antCls,"-tabs-bottom > ").concat(n.antCls,"-tabs-nav"),(0,j.Z)({marginBlockEnd:0},"".concat(n.antCls,"-tabs-nav-list"),{paddingInlineStart:n.padding})),"".concat(n.antCls,"-tabs-left"),(0,j.Z)({},"".concat(n.antCls,"-tabs-content-holder"),(0,j.Z)({},"".concat(n.antCls,"-tabs-content"),(0,j.Z)({},"".concat(n.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(n.antCls,"-tabs-left > ").concat(n.antCls,"-tabs-nav"),(0,j.Z)({marginInlineEnd:0},"".concat(n.antCls,"-tabs-nav-list"),{paddingBlockStart:n.padding})),"".concat(n.antCls,"-tabs-right"),(0,j.Z)({},"".concat(n.antCls,"-tabs-content-holder"),(0,j.Z)({},"".concat(n.antCls,"-tabs-content"),(0,j.Z)({},"".concat(n.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(n.antCls,"-tabs-right > ").concat(n.antCls,"-tabs-nav"),(0,j.Z)({},"".concat(n.antCls,"-tabs-nav-list"),{paddingBlockStart:n.padding})))},Rn=24,sr=function(n,c){var u=c.componentCls;return n===0?(0,j.Z)({},"".concat(u,"-col-0"),{display:"none"}):(0,j.Z)({},"".concat(u,"-col-").concat(n),{flexShrink:0,width:"".concat(n/Rn*100,"%")})},Yr=function(n){return Array(Rn+1).fill(1).map(function(c,u){return sr(u,n)})};function Ir(i){return(0,Nt.Xj)("ProCard",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[Ci(c),Yr(c)]})}var Yi=["className","style","bodyStyle","headStyle","title","subTitle","extra","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","boxShadow","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","colStyle","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],Za=C.forwardRef(function(i,n){var c,u=i.className,h=i.style,m=i.bodyStyle,v=i.headStyle,y=i.title,S=i.subTitle,b=i.extra,T=i.wrap,w=T===void 0?!1:T,A=i.layout,I=i.loading,P=i.gutter,B=P===void 0?0:P,L=i.tooltip,z=i.split,Z=i.headerBordered,W=Z===void 0?!1:Z,J=i.bordered,ue=J===void 0?!1:J,we=i.boxShadow,ie=we===void 0?!1:we,ge=i.children,Me=i.size,de=i.actions,re=i.ghost,ve=re===void 0?!1:re,Oe=i.hoverable,le=Oe===void 0?!1:Oe,Q=i.direction,me=i.collapsed,Ce=i.collapsible,tt=Ce===void 0?!1:Ce,$e=i.collapsibleIconRender,Qe=i.colStyle,ft=i.defaultCollapsed,Dt=ft===void 0?!1:ft,at=i.onCollapse,De=i.checked,je=i.onChecked,et=i.tabs,Re=i.type,be=(0,dn.Z)(i,Yi),Le=(0,C.useContext)(Mt.ZP.ConfigContext),Je=Le.getPrefixCls,Ke=(0,di.Z)()||{lg:!0,md:!0,sm:!0,xl:!1,xs:!1,xxl:!1},Fe=(0,ln.Z)(Dt,{value:me,onChange:at}),Ct=(0,Ue.Z)(Fe,2),ke=Ct[0],Bt=Ct[1],bn=["xxl","xl","lg","md","sm","xs"],Qt=Kt(et==null?void 0:et.items,ge,et),ht=function(wi){var tr=[0,0],zo=Array.isArray(wi)?wi:[wi,0];return zo.forEach(function(or,No){if((0,mn.Z)(or)==="object")for(var xi=0;xi<bn.length;xi+=1){var sl=bn[xi];if(Ke[sl]&&or[sl]!==void 0){tr[No]=or[sl];break}}else tr[No]=or||0}),tr},Ft=function(wi,tr){return wi?tr:{}},In=function(wi){var tr=wi;if((0,mn.Z)(wi)==="object")for(var zo=0;zo<bn.length;zo+=1){var or=bn[zo];if(Ke!=null&&Ke[or]&&(wi==null?void 0:wi[or])!==void 0){tr=wi[or];break}}var No=Ft(typeof tr=="string"&&/\d%|\dpx/i.test(tr),{width:tr,flexShrink:0});return{span:tr,colSpanStyle:No}},vt=Je("pro-card"),On=Ir(vt),_n=On.wrapSSR,Wi=On.hashId,ji=ht(B),za=(0,Ue.Z)(ji,2),ea=za[0],Xs=za[1],ol=!1,Ua=C.Children.toArray(ge),$r=Ua.map(function(xa,wi){var tr;if(xa!=null&&(tr=xa.type)!==null&&tr!==void 0&&tr.isProCard){ol=!0;var zo=xa.props.colSpan,or=In(zo),No=or.span,xi=or.colSpanStyle,sl=st()(["".concat(vt,"-col")],Wi,(0,j.Z)((0,j.Z)((0,j.Z)({},"".concat(vt,"-split-vertical"),z==="vertical"&&wi!==Ua.length-1),"".concat(vt,"-split-horizontal"),z==="horizontal"&&wi!==Ua.length-1),"".concat(vt,"-col-").concat(No),typeof No=="number"&&No>=0&&No<=24)),eu=_n((0,O.jsx)("div",{style:(0,D.Z)((0,D.Z)((0,D.Z)((0,D.Z)({},xi),Ft(ea>0,{paddingInlineEnd:ea/2,paddingInlineStart:ea/2})),Ft(Xs>0,{paddingBlockStart:Xs/2,paddingBlockEnd:Xs/2})),Qe),className:sl,children:C.cloneElement(xa)}));return C.cloneElement(eu,{key:"pro-card-col-".concat((xa==null?void 0:xa.key)||wi)})}return xa}),ja=st()("".concat(vt),u,Wi,(c={},(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)(c,"".concat(vt,"-border"),ue),"".concat(vt,"-box-shadow"),ie),"".concat(vt,"-contain-card"),ol),"".concat(vt,"-loading"),I),"".concat(vt,"-split"),z==="vertical"||z==="horizontal"),"".concat(vt,"-ghost"),ve),"".concat(vt,"-hoverable"),le),"".concat(vt,"-size-").concat(Me),Me),"".concat(vt,"-type-").concat(Re),Re),"".concat(vt,"-collapse"),ke),(0,j.Z)(c,"".concat(vt,"-checked"),De))),Xa=st()("".concat(vt,"-body"),Wi,(0,j.Z)((0,j.Z)((0,j.Z)({},"".concat(vt,"-body-center"),A==="center"),"".concat(vt,"-body-direction-column"),z==="horizontal"||Q==="column"),"".concat(vt,"-body-wrap"),w&&ol)),go=m,Eo=C.isValidElement(I)?I:(0,O.jsx)(Kn,{prefix:vt,style:(m==null?void 0:m.padding)===0||(m==null?void 0:m.padding)==="0px"?{padding:24}:void 0}),oa=tt&&me===void 0&&($e?$e({collapsed:ke}):(0,O.jsx)(Kr.Z,{onClick:function(){tt==="icon"&&Bt(!ke)},rotate:ke?void 0:90,className:"".concat(vt,"-collapsible-icon ").concat(Wi).trim()}));return _n((0,O.jsxs)("div",(0,D.Z)((0,D.Z)({className:ja,style:h,ref:n,onClick:function(wi){var tr;je==null||je(wi),be==null||(tr=be.onClick)===null||tr===void 0||tr.call(be,wi)}},(0,tn.Z)(be,["prefixCls","colSpan"])),{},{children:[(y||b||oa)&&(0,O.jsxs)("div",{className:st()("".concat(vt,"-header"),Wi,(0,j.Z)((0,j.Z)({},"".concat(vt,"-header-border"),W||Re==="inner"),"".concat(vt,"-header-collapsible"),oa)),style:v,onClick:function(){(tt==="header"||tt===!0)&&Bt(!ke)},children:[(0,O.jsxs)("div",{className:"".concat(vt,"-title ").concat(Wi).trim(),children:[oa,(0,O.jsx)(Ei.G,{label:y,tooltip:L,subTitle:S})]}),b&&(0,O.jsx)("div",{className:"".concat(vt,"-extra ").concat(Wi).trim(),onClick:function(wi){return wi.stopPropagation()},children:b})]}),et?(0,O.jsx)("div",{className:"".concat(vt,"-tabs ").concat(Wi).trim(),children:(0,O.jsx)(hi.Z,(0,D.Z)((0,D.Z)({onChange:et.onChange},(0,tn.Z)(et,["cardProps"])),{},{items:Qt,children:I?Eo:ge}))}):(0,O.jsx)("div",{className:Xa,style:go,children:I?Eo:$r}),de?(0,O.jsx)(Pn,{actions:de,prefixCls:vt}):null]})))}),ma=Za,xr=function(n){var c=n.componentCls;return(0,j.Z)({},c,{"&-divider":{flex:"none",width:n.lineWidth,marginInline:n.marginXS,marginBlock:n.marginLG,backgroundColor:n.colorSplit,"&-horizontal":{width:"initial",height:n.lineWidth,marginInline:n.marginLG,marginBlock:n.marginXS}},"&&-size-small &-divider":{marginBlock:n.marginLG,marginInline:n.marginXS,"&-horizontal":{marginBlock:n.marginXS,marginInline:n.marginLG}}})};function ta(i){return(0,Nt.Xj)("ProCardDivider",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[xr(c)]})}var qi=function(n){var c=(0,C.useContext)(Mt.ZP.ConfigContext),u=c.getPrefixCls,h=u("pro-card"),m="".concat(h,"-divider"),v=ta(h),y=v.wrapSSR,S=v.hashId,b=n.className,T=n.style,w=T===void 0?{}:T,A=n.type,I=st()(m,b,S,(0,j.Z)({},"".concat(m,"-").concat(A),A));return y((0,O.jsx)("div",{className:I,style:w}))},Pr=qi,Cr=function(n){return(0,O.jsx)(ma,(0,D.Z)({bodyStyle:{padding:0}},n))},lr=ma;lr.isProCard=!0,lr.Divider=Pr,lr.TabPane=rn,lr.Group=Cr;var ba=lr,la=ba,Ur=k(2514),lo=k(97269),yo=lo.A,nr=k(10915),io=k(84506),X=k(50888),xe=k(45360),It=k(86587),Ht=k(21640),Tn=k(53124),Yn=k(55241),vi=k(86743),ca=k(81643),Gi=k(83622),vr=k(33671),na=k(10110),Nr=k(24457),xo=k(66330),Va=k(83559);const va=i=>{const{componentCls:n,iconCls:c,antCls:u,zIndexPopup:h,colorText:m,colorWarning:v,marginXXS:y,marginXS:S,fontSize:b,fontWeightStrong:T,colorTextHeading:w}=i;return{[n]:{zIndex:h,[`&${u}-popover`]:{fontSize:b},[`${n}-message`]:{marginBottom:S,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n}-message-icon ${c}`]:{color:v,fontSize:b,lineHeight:1,marginInlineEnd:S},[`${n}-title`]:{fontWeight:T,color:w,"&:only-child":{fontWeight:"normal"}},[`${n}-description`]:{marginTop:y,color:m}},[`${n}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:S}}}}},os=i=>{const{zIndexPopupBase:n}=i;return{zIndexPopup:n+60}};var co=(0,Va.I$)("Popconfirm",i=>va(i),os,{resetStyle:!1}),ss=function(i,n){var c={};for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&n.indexOf(u)<0&&(c[u]=i[u]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(i);h<u.length;h++)n.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(i,u[h])&&(c[u[h]]=i[u[h]]);return c};const ua=i=>{const{prefixCls:n,okButtonProps:c,cancelButtonProps:u,title:h,description:m,cancelText:v,okText:y,okType:S="primary",icon:b=C.createElement(Ht.Z,null),showCancel:T=!0,close:w,onConfirm:A,onCancel:I,onPopupClick:P}=i,{getPrefixCls:B}=C.useContext(Tn.E_),[L]=(0,na.Z)("Popconfirm",Nr.Z.Popconfirm),z=(0,ca.Z)(h),Z=(0,ca.Z)(m);return C.createElement("div",{className:`${n}-inner-content`,onClick:P},C.createElement("div",{className:`${n}-message`},b&&C.createElement("span",{className:`${n}-message-icon`},b),C.createElement("div",{className:`${n}-message-text`},z&&C.createElement("div",{className:`${n}-title`},z),Z&&C.createElement("div",{className:`${n}-description`},Z))),C.createElement("div",{className:`${n}-buttons`},T&&C.createElement(Gi.ZP,Object.assign({onClick:I,size:"small"},u),v||(L==null?void 0:L.cancelText)),C.createElement(vi.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,vr.nx)(S)),c),actionFn:A,close:w,prefixCls:B("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},y||(L==null?void 0:L.okText))))};var Ka=i=>{const{prefixCls:n,placement:c,className:u,style:h}=i,m=ss(i,["prefixCls","placement","className","style"]),{getPrefixCls:v}=C.useContext(Tn.E_),y=v("popconfirm",n),[S]=co(y);return S(C.createElement(xo.ZP,{placement:c,className:st()(y,u),style:h,content:C.createElement(ua,Object.assign({prefixCls:y},m))}))},Co=function(i,n){var c={};for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&n.indexOf(u)<0&&(c[u]=i[u]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(i);h<u.length;h++)n.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(i,u[h])&&(c[u[h]]=i[u[h]]);return c};const $o=C.forwardRef((i,n)=>{var c,u;const{prefixCls:h,placement:m="top",trigger:v="click",okType:y="primary",icon:S=C.createElement(Ht.Z,null),children:b,overlayClassName:T,onOpenChange:w,onVisibleChange:A,overlayStyle:I,styles:P,classNames:B}=i,L=Co(i,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:z,className:Z,style:W,classNames:J,styles:ue}=(0,Tn.dj)("popconfirm"),[we,ie]=(0,ln.Z)(!1,{value:(c=i.open)!==null&&c!==void 0?c:i.visible,defaultValue:(u=i.defaultOpen)!==null&&u!==void 0?u:i.defaultVisible}),ge=(Ce,tt)=>{ie(Ce,!0),A==null||A(Ce),w==null||w(Ce,tt)},Me=Ce=>{ge(!1,Ce)},de=Ce=>{var tt;return(tt=i.onConfirm)===null||tt===void 0?void 0:tt.call(void 0,Ce)},re=Ce=>{var tt;ge(!1,Ce),(tt=i.onCancel)===null||tt===void 0||tt.call(void 0,Ce)},ve=(Ce,tt)=>{const{disabled:$e=!1}=i;$e||ge(Ce,tt)},Oe=z("popconfirm",h),le=st()(Oe,Z,T,J.root,B==null?void 0:B.root),Q=st()(J.body,B==null?void 0:B.body),[me]=co(Oe);return me(C.createElement(Yn.Z,Object.assign({},(0,tn.Z)(L,["title"]),{trigger:v,placement:m,onOpenChange:ve,open:we,ref:n,classNames:{root:le,body:Q},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},ue.root),W),I),P==null?void 0:P.root),body:Object.assign(Object.assign({},ue.body),P==null?void 0:P.body)},content:C.createElement(ua,Object.assign({okType:y,icon:S},i,{prefixCls:Oe,close:Me,onConfirm:de,onCancel:re})),"data-popover-inject":!0}),b))});$o._InternalPanelDoNotUseOrYouWillBeFired=Ka;var Zo=$o,Ae=(i,n,c)=>{const u=C.useRef({});function h(m){var v;if(!u.current||u.current.data!==i||u.current.childrenColumnName!==n||u.current.getRowKey!==c){let S=function(b){b.forEach((T,w)=>{const A=c(T,w);y.set(A,T),T&&typeof T=="object"&&n in T&&S(T[n]||[])})};const y=new Map;S(i),u.current={data:i,childrenColumnName:n,kvMap:y,getRowKey:c}}return(v=u.current.kvMap)===null||v===void 0?void 0:v.get(m)}return[h]},Yt=k(88306),zn=k(8880),Ln=k(48171),gr=k(10178),Ni=k(41036),fr=k(27068),qr=k(26369),ho=k(92210),Oa=["map_row_parentKey"],Vo=["map_row_parentKey","map_row_key"],Te=["map_row_key"],_t=function(n){return(xe.ZP.warn||xe.ZP.warning)(n)},Et=function(n){return Array.isArray(n)?n.join(","):n};function lt(i,n){var c,u=i.getRowKey,h=i.row,m=i.data,v=i.childrenColumnName,y=v===void 0?"children":v,S=(c=Et(i.key))===null||c===void 0?void 0:c.toString(),b=new Map;function T(A,I,P){A.forEach(function(B,L){var z=(P||0)*10+L,Z=u(B,z).toString();B&&(0,mn.Z)(B)==="object"&&y in B&&T(B[y]||[],Z,z);var W=(0,D.Z)((0,D.Z)({},B),{},{map_row_key:Z,children:void 0,map_row_parentKey:I});delete W.children,I||delete W.map_row_parentKey,b.set(Z,W)})}n==="top"&&b.set(S,(0,D.Z)((0,D.Z)({},b.get(S)),h)),T(m),n==="update"&&b.set(S,(0,D.Z)((0,D.Z)({},b.get(S)),h)),n==="delete"&&b.delete(S);var w=function(I){var P=new Map,B=[],L=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;I.forEach(function(W){if(W.map_row_parentKey&&!W.map_row_key){var J=W.map_row_parentKey,ue=(0,dn.Z)(W,Oa);if(P.has(J)||P.set(J,[]),Z){var we;(we=P.get(J))===null||we===void 0||we.push(ue)}}})};return L(n==="top"),I.forEach(function(z){if(z.map_row_parentKey&&z.map_row_key){var Z,W=z.map_row_parentKey,J=z.map_row_key,ue=(0,dn.Z)(z,Vo);P.has(J)&&(ue[y]=P.get(J)),P.has(W)||P.set(W,[]),(Z=P.get(W))===null||Z===void 0||Z.push(ue)}}),L(n==="update"),I.forEach(function(z){if(!z.map_row_parentKey){var Z=z.map_row_key,W=(0,dn.Z)(z,Te);if(Z&&P.has(Z)){var J=(0,D.Z)((0,D.Z)({},W),{},(0,j.Z)({},y,P.get(Z)));B.push(J);return}B.push(W)}}),B};return w(b)}function an(i,n){var c=i.recordKey,u=i.onSave,h=i.row,m=i.children,v=i.newLineConfig,y=i.editorType,S=i.tableName,b=(0,C.useContext)(Ni.J),T=It.Z.useFormInstance(),w=(0,ln.Z)(!1),A=(0,Ue.Z)(w,2),I=A[0],P=A[1],B=(0,Ln.J)((0,he.Z)((0,p.Z)().mark(function L(){var z,Z,W,J,ue,we,ie,ge,Me;return(0,p.Z)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,Z=y==="Map",W=[S,Array.isArray(c)?c[0]:c].map(function(ve){return ve==null?void 0:ve.toString()}).flat(1).filter(Boolean),P(!0),re.next=6,T.validateFields(W,{recursive:!0});case 6:return J=(b==null||(z=b.getFieldFormatValue)===null||z===void 0?void 0:z.call(b,W))||T.getFieldValue(W),Array.isArray(c)&&c.length>1&&(ue=(0,io.Z)(c),we=ue.slice(1),ie=(0,Yt.Z)(J,we),(0,zn.Z)(J,we,ie)),ge=Z?(0,zn.Z)({},W,J):J,re.next=11,u==null?void 0:u(c,(0,ho.T)({},h,ge),h,v);case 11:return Me=re.sent,P(!1),re.abrupt("return",Me);case 16:throw re.prev=16,re.t0=re.catch(0),console.log(re.t0),P(!1),re.t0;case 21:case"end":return re.stop()}},L,null,[[0,16]])})));return(0,C.useImperativeHandle)(n,function(){return{save:B}},[B]),(0,O.jsxs)("a",{onClick:function(){var L=(0,he.Z)((0,p.Z)().mark(function z(Z){return(0,p.Z)().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return Z.stopPropagation(),Z.preventDefault(),J.prev=2,J.next=5,B();case 5:J.next=9;break;case 7:J.prev=7,J.t0=J.catch(2);case 9:case"end":return J.stop()}},z,null,[[2,7]])}));return function(z){return L.apply(this,arguments)}}(),children:[I?(0,O.jsx)(X.Z,{style:{marginInlineEnd:8}}):null,m||"\u4FDD\u5B58"]},"save")}var Oi=function(n){var c=n.recordKey,u=n.onDelete,h=n.preEditRowRef,m=n.row,v=n.children,y=n.deletePopconfirmMessage,S=(0,ln.Z)(function(){return!1}),b=(0,Ue.Z)(S,2),T=b[0],w=b[1],A=(0,Ln.J)((0,he.Z)((0,p.Z)().mark(function I(){var P;return(0,p.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,w(!0),L.next=4,u==null?void 0:u(c,m);case 4:return P=L.sent,w(!1),L.abrupt("return",P);case 9:return L.prev=9,L.t0=L.catch(0),console.log(L.t0),w(!1),L.abrupt("return",null);case 14:return L.prev=14,h&&(h.current=null),L.finish(14);case 17:case"end":return L.stop()}},I,null,[[0,9,14,17]])})));return v!==!1?(0,O.jsx)(Zo,{title:y,onConfirm:function(){return A()},children:(0,O.jsxs)("a",{children:[T?(0,O.jsx)(X.Z,{style:{marginInlineEnd:8}}):null,v||"\u5220\u9664"]})},"delete"):null},Br=function(n){var c=n.recordKey,u=n.tableName,h=n.newLineConfig,m=n.editorType,v=n.onCancel,y=n.cancelEditable,S=n.row,b=n.cancelText,T=n.preEditRowRef,w=(0,C.useContext)(Ni.J),A=It.Z.useFormInstance();return(0,O.jsx)("a",{onClick:function(){var I=(0,he.Z)((0,p.Z)().mark(function P(B){var L,z,Z,W,J,ue,we;return(0,p.Z)().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return B.stopPropagation(),B.preventDefault(),z=m==="Map",Z=[u,c].flat(1).filter(Boolean),W=(w==null||(L=w.getFieldFormatValue)===null||L===void 0?void 0:L.call(w,Z))||(A==null?void 0:A.getFieldValue(Z)),J=z?(0,zn.Z)({},Z,W):W,ge.next=8,v==null?void 0:v(c,J,S,h);case 8:return ue=ge.sent,ge.next=11,y(c);case 11:if((T==null?void 0:T.current)===null){ge.next=15;break}A.setFieldsValue((0,zn.Z)({},Z,T==null?void 0:T.current)),ge.next=17;break;case 15:return ge.next=17,(we=n.onDelete)===null||we===void 0?void 0:we.call(n,c,S);case 17:return T&&(T.current=null),ge.abrupt("return",ue);case 19:case"end":return ge.stop()}},P)}));return function(P){return I.apply(this,arguments)}}(),children:b||"\u53D6\u6D88"},"cancel")};function Fr(i,n){var c=n.recordKey,u=n.newLineConfig,h=n.saveText,m=n.deleteText,v=(0,C.forwardRef)(an),y=(0,C.createRef)();return{save:(0,O.jsx)(v,(0,D.Z)((0,D.Z)({},n),{},{row:i,ref:y,children:h}),"save"+c),saveRef:y,delete:(u==null?void 0:u.options.recordKey)!==c?(0,O.jsx)(Oi,(0,D.Z)((0,D.Z)({},n),{},{row:i,children:m}),"delete"+c):void 0,cancel:(0,O.jsx)(Br,(0,D.Z)((0,D.Z)({},n),{},{row:i}),"cancel"+c)}}function _i(i){var n=(0,nr.YB)(),c=(0,C.useRef)(null),u=(0,C.useState)(void 0),h=(0,Ue.Z)(u,2),m=h[0],v=h[1],y=function(){var De=new Map,je=function et(Re,be){Re==null||Re.forEach(function(Le,Je){var Ke,Fe=be==null?Je.toString():be+"_"+Je.toString();De.set(Fe,Et(i.getRowKey(Le,-1))),De.set((Ke=Et(i.getRowKey(Le,-1)))===null||Ke===void 0?void 0:Ke.toString(),Fe),i.childrenColumnName&&Le!==null&&Le!==void 0&&Le[i.childrenColumnName]&&et(Le[i.childrenColumnName],Fe)})};return je(i.dataSource),De},S=(0,C.useMemo)(function(){return y()},[]),b=(0,C.useRef)(S),T=(0,C.useRef)(void 0);(0,fr.Au)(function(){b.current=y()},[i.dataSource]),T.current=m;var w=i.type||"single",A=Ae(i.dataSource,"children",i.getRowKey),I=(0,Ue.Z)(A,1),P=I[0],B=(0,ln.Z)([],{value:i.editableKeys,onChange:i.onChange?function(at){var De,je,et;i==null||(De=i.onChange)===null||De===void 0||De.call(i,(je=at==null?void 0:at.filter(function(Re){return Re!==void 0}))!==null&&je!==void 0?je:[],(et=at==null?void 0:at.map(function(Re){return P(Re)}).filter(function(Re){return Re!==void 0}))!==null&&et!==void 0?et:[])}:void 0}),L=(0,Ue.Z)(B,2),z=L[0],Z=L[1],W=(0,C.useMemo)(function(){var at=w==="single"?z==null?void 0:z.slice(0,1):z;return new Set(at)},[(z||[]).join(","),w]),J=(0,qr.D)(z),ue=(0,Ln.J)(function(at){var De,je,et,Re,be=(De=i.getRowKey(at,at.index))===null||De===void 0||(je=De.toString)===null||je===void 0?void 0:je.call(De),Le=(et=i.getRowKey(at,-1))===null||et===void 0||(Re=et.toString)===null||Re===void 0?void 0:Re.call(et),Je=z==null?void 0:z.map(function(Ct){return Ct==null?void 0:Ct.toString()}),Ke=(J==null?void 0:J.map(function(Ct){return Ct==null?void 0:Ct.toString()}))||[],Fe=i.tableName&&!!(Ke!=null&&Ke.includes(Le))||!!(Ke!=null&&Ke.includes(be));return{recordKey:Le,isEditable:i.tableName&&(Je==null?void 0:Je.includes(Le))||(Je==null?void 0:Je.includes(be)),preIsEditable:Fe}}),we=(0,Ln.J)(function(at,De){var je,et;return W.size>0&&w==="single"&&i.onlyOneLineEditorAlertMessage!==!1?(_t(i.onlyOneLineEditorAlertMessage||n.getMessage("editableTable.onlyOneLineEditor","\u53EA\u80FD\u540C\u65F6\u7F16\u8F91\u4E00\u884C")),!1):(W.add(at),Z(Array.from(W)),c.current=(je=De!=null?De:(et=i.dataSource)===null||et===void 0?void 0:et.find(function(Re,be){return i.getRowKey(Re,be)===at}))!==null&&je!==void 0?je:null,!0)}),ie=(0,Ln.J)(function(){var at=(0,he.Z)((0,p.Z)().mark(function De(je,et){var Re,be;return(0,p.Z)().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(Re=Et(je).toString(),be=b.current.get(Re),!(!W.has(Re)&&be&&(et==null||et)&&i.tableName)){Je.next=5;break}return ie(be,!1),Je.abrupt("return");case 5:return m&&m.options.recordKey===je&&v(void 0),W.delete(Re),W.delete(Et(je)),Z(Array.from(W)),Je.abrupt("return",!0);case 10:case"end":return Je.stop()}},De)}));return function(De,je){return at.apply(this,arguments)}}()),ge=(0,gr.D)((0,he.Z)((0,p.Z)().mark(function at(){var De,je,et,Re,be=arguments;return(0,p.Z)().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:for(je=be.length,et=new Array(je),Re=0;Re<je;Re++)et[Re]=be[Re];(De=i.onValuesChange)===null||De===void 0||De.call.apply(De,[i].concat(et));case 2:case"end":return Je.stop()}},at)})),64),Me=(0,Ln.J)(function(at,De){var je;if(i.onValuesChange){var et=i.dataSource;z==null||z.forEach(function(Ke){if((m==null?void 0:m.options.recordKey)!==Ke){var Fe=Ke.toString(),Ct=(0,Yt.Z)(De,[i.tableName||"",Fe].flat(1).filter(function(ke){return ke||ke===0}));Ct&&(et=lt({data:et,getRowKey:i.getRowKey,row:Ct,key:Fe,childrenColumnName:i.childrenColumnName||"children"},"update"))}});var Re=at,be=(je=Object.keys(Re||{}).pop())===null||je===void 0?void 0:je.toString(),Le=(0,D.Z)((0,D.Z)({},m==null?void 0:m.defaultValue),(0,Yt.Z)(De,[i.tableName||"",be.toString()].flat(1).filter(function(Ke){return Ke||Ke===0}))),Je=b.current.has(Et(be))?et.find(function(Ke,Fe){var Ct,ke=(Ct=i.getRowKey(Ke,Fe))===null||Ct===void 0?void 0:Ct.toString();return ke===be}):Le;ge.run(Je||Le,et)}}),de=(0,C.useRef)(new Map);(0,C.useEffect)(function(){de.current.forEach(function(at,De){W.has(De)||de.current.delete(De)})},[de,W]);var re=(0,Ln.J)(function(){var at=(0,he.Z)((0,p.Z)().mark(function De(je,et){var Re,be,Le,Je;return(0,p.Z)().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(Re=Et(je),be=b.current.get(je.toString()),!(!W.has(Re)&&be&&(et==null||et)&&i.tableName)){Fe.next=6;break}return Fe.next=5,re(be,!1);case 5:return Fe.abrupt("return",Fe.sent);case 6:return Le=de.current.get(Re)||de.current.get(Re.toString()),Fe.prev=7,Fe.next=10,Le==null||(Je=Le.current)===null||Je===void 0?void 0:Je.save();case 10:Fe.next=15;break;case 12:return Fe.prev=12,Fe.t0=Fe.catch(7),Fe.abrupt("return",!1);case 15:return W.delete(Re),W.delete(Re.toString()),Z(Array.from(W)),Fe.abrupt("return",!0);case 19:case"end":return Fe.stop()}},De,null,[[7,12]])}));return function(De,je){return at.apply(this,arguments)}}()),ve=(0,Ln.J)(function(at,De){if(De!=null&&De.parentKey&&!b.current.has(Et(De==null?void 0:De.parentKey).toString()))return console.warn("can't find record by key",De==null?void 0:De.parentKey),!1;if(T.current&&i.onlyAddOneLineAlertMessage!==!1)return _t(i.onlyAddOneLineAlertMessage||n.getMessage("editableTable.onlyAddOneLine","\u53EA\u80FD\u65B0\u589E\u4E00\u884C")),!1;if(W.size>0&&w==="single"&&i.onlyOneLineEditorAlertMessage!==!1)return _t(i.onlyOneLineEditorAlertMessage||n.getMessage("editableTable.onlyOneLineEditor","\u53EA\u80FD\u540C\u65F6\u7F16\u8F91\u4E00\u884C")),!1;var je=i.getRowKey(at,-1);if(!je&&je!==0)throw(0,ii.ET)(!!je,`\u8BF7\u8BBE\u7F6E recordCreatorProps.record \u5E76\u8FD4\u56DE\u4E00\u4E2A\u552F\u4E00\u7684key  
  https://procomponents.ant.design/components/editable-table#editable-%E6%96%B0%E5%BB%BA%E8%A1%8C`),new Error("\u8BF7\u8BBE\u7F6E recordCreatorProps.record \u5E76\u8FD4\u56DE\u4E00\u4E2A\u552F\u4E00\u7684key");if(W.add(je),Z(Array.from(W)),(De==null?void 0:De.newRecordType)==="dataSource"||i.tableName){var et,Re={data:i.dataSource,getRowKey:i.getRowKey,row:(0,D.Z)((0,D.Z)({},at),{},{map_row_parentKey:De!=null&&De.parentKey?(et=Et(De==null?void 0:De.parentKey))===null||et===void 0?void 0:et.toString():void 0}),key:je,childrenColumnName:i.childrenColumnName||"children"};i.setDataSource(lt(Re,(De==null?void 0:De.position)==="top"?"top":"update"))}else v({defaultValue:at,options:(0,D.Z)((0,D.Z)({},De),{},{recordKey:je})});return!0}),Oe=(i==null?void 0:i.saveText)||n.getMessage("editableTable.action.save","\u4FDD\u5B58"),le=(i==null?void 0:i.deleteText)||n.getMessage("editableTable.action.delete","\u5220\u9664"),Q=(i==null?void 0:i.cancelText)||n.getMessage("editableTable.action.cancel","\u53D6\u6D88"),me=(0,Ln.J)(function(){var at=(0,he.Z)((0,p.Z)().mark(function De(je,et,Re,be){var Le,Je,Ke,Fe,Ct,ke,Bt;return(0,p.Z)().wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:return Qt.next=2,i==null||(Le=i.onSave)===null||Le===void 0?void 0:Le.call(i,je,et,Re,be);case 2:return Fe=Qt.sent,Qt.next=5,ie(je);case 5:if(Ct=be||T.current||{},ke=Ct.options,!(!(ke!=null&&ke.parentKey)&&(ke==null?void 0:ke.recordKey)===je)){Qt.next=9;break}return(ke==null?void 0:ke.position)==="top"?i.setDataSource([et].concat((0,en.Z)(i.dataSource))):i.setDataSource([].concat((0,en.Z)(i.dataSource),[et])),Qt.abrupt("return",Fe);case 9:return Bt={data:i.dataSource,getRowKey:i.getRowKey,row:ke?(0,D.Z)((0,D.Z)({},et),{},{map_row_parentKey:(Je=Et((Ke=ke==null?void 0:ke.parentKey)!==null&&Ke!==void 0?Ke:""))===null||Je===void 0?void 0:Je.toString()}):et,key:je,childrenColumnName:i.childrenColumnName||"children"},i.setDataSource(lt(Bt,(ke==null?void 0:ke.position)==="top"?"top":"update")),Qt.next=13,ie(je);case 13:return Qt.abrupt("return",Fe);case 14:case"end":return Qt.stop()}},De)}));return function(De,je,et,Re){return at.apply(this,arguments)}}()),Ce=(0,Ln.J)(function(){var at=(0,he.Z)((0,p.Z)().mark(function De(je,et){var Re,be,Le;return(0,p.Z)().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return be={data:i.dataSource,getRowKey:i.getRowKey,row:et,key:je,childrenColumnName:i.childrenColumnName||"children"},Ke.next=3,i==null||(Re=i.onDelete)===null||Re===void 0?void 0:Re.call(i,je,et);case 3:return Le=Ke.sent,Ke.next=6,ie(je,!1);case 6:return i.setDataSource(lt(be,"delete")),Ke.abrupt("return",Le);case 8:case"end":return Ke.stop()}},De)}));return function(De,je){return at.apply(this,arguments)}}()),tt=(0,Ln.J)(function(){var at=(0,he.Z)((0,p.Z)().mark(function De(je,et,Re,be){var Le,Je;return(0,p.Z)().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,i==null||(Le=i.onCancel)===null||Le===void 0?void 0:Le.call(i,je,et,Re,be);case 2:return Je=Fe.sent,Fe.abrupt("return",Je);case 4:case"end":return Fe.stop()}},De)}));return function(De,je,et,Re){return at.apply(this,arguments)}}()),$e=i.actionRender&&typeof i.actionRender=="function",Qe=$e?i.actionRender:function(){},ft=(0,Ln.J)(Qe),Dt=function(De){var je=i.getRowKey(De,De.index),et={saveText:Oe,cancelText:Q,deleteText:le,addEditRecord:ve,recordKey:je,cancelEditable:ie,index:De.index,tableName:i.tableName,newLineConfig:m,onCancel:tt,onDelete:Ce,onSave:me,editableKeys:z,setEditableRowKeys:Z,preEditRowRef:c,deletePopconfirmMessage:i.deletePopconfirmMessage||"".concat(n.getMessage("deleteThisLine","\u5220\u9664\u6B64\u9879"),"?")},Re=Fr(De,et);return i.tableName?de.current.set(b.current.get(Et(je))||Et(je),Re.saveRef):de.current.set(Et(je),Re.saveRef),$e?ft(De,et,{save:Re.save,delete:Re.delete,cancel:Re.cancel}):[Re.save,Re.delete,Re.cancel]};return{editableKeys:z,setEditableRowKeys:Z,isEditable:ue,actionRender:Dt,startEditable:we,cancelEditable:ie,addEditRecord:ve,saveEditable:re,newLineRecord:m,preEditableKeys:J,onValuesChange:Me,getRealIndex:i.getRealIndex}}var Ai=k(51812),cr=k(53914),Aa=k(78164),yr={},ro="rc-table-internal-hook",Do=k(66680),To=k(8410),Go=k(91881),zr=k(73935);function po(i){var n=C.createContext(void 0),c=function(h){var m=h.value,v=h.children,y=C.useRef(m);y.current=m;var S=C.useState(function(){return{getValue:function(){return y.current},listeners:new Set}}),b=(0,Ue.Z)(S,1),T=b[0];return(0,To.Z)(function(){(0,zr.unstable_batchedUpdates)(function(){T.listeners.forEach(function(w){w(m)})})},[m]),C.createElement(n.Provider,{value:T},v)};return{Context:n,Provider:c,defaultValue:i}}function da(i,n){var c=(0,Do.Z)(typeof n=="function"?n:function(w){if(n===void 0)return w;if(!Array.isArray(n))return w[n];var A={};return n.forEach(function(I){A[I]=w[I]}),A}),u=C.useContext(i==null?void 0:i.Context),h=u||{},m=h.listeners,v=h.getValue,y=C.useRef();y.current=c(u?v():i==null?void 0:i.defaultValue);var S=C.useState({}),b=(0,Ue.Z)(S,2),T=b[1];return(0,To.Z)(function(){if(!u)return;function w(A){var I=c(A);(0,Go.Z)(y.current,I,!0)||T({})}return m.add(w),function(){m.delete(w)}},[u]),y.current}var Di=k(87462),Ya=k(42550);function So(){var i=C.createContext(null);function n(){return C.useContext(i)}function c(h,m){var v=(0,Ya.Yr)(h),y=function(b,T){var w=v?{ref:T}:{},A=C.useRef(0),I=C.useRef(b),P=n();return P!==null?C.createElement(h,(0,Di.Z)({},b,w)):((!m||m(I.current,b))&&(A.current+=1),I.current=b,C.createElement(i.Provider,{value:A.current},C.createElement(h,(0,Di.Z)({},b,w))))};return v?C.forwardRef(y):y}function u(h,m){var v=(0,Ya.Yr)(h),y=function(b,T){var w=v?{ref:T}:{};return n(),C.createElement(h,(0,Di.Z)({},b,w))};return v?C.memo(C.forwardRef(y),m):C.memo(y,m)}return{makeImmutable:c,responseImmutable:u,useImmutableMark:n}}var _a=So(),Es=_a.makeImmutable,Bl=_a.responseImmutable,Cs=_a.useImmutableMark,ls=So(),$s=ls.makeImmutable,Lo=ls.responseImmutable,Ma=ls.useImmutableMark,wo=po(),F=wo;function G(i,n){var c=React.useRef(0);c.current+=1;var u=React.useRef(i),h=[];Object.keys(i||{}).map(function(v){var y;(i==null?void 0:i[v])!==((y=u.current)===null||y===void 0?void 0:y[v])&&h.push(v)}),u.current=i;var m=React.useRef([]);return h.length&&(m.current=h),React.useDebugValue(c.current),React.useDebugValue(m.current.join(", ")),n&&console.log("".concat(n,":"),c.current,m.current),c.current}var ne=null,Ne=null,it=k(56982),Gt=C.createContext({renderWithProps:!1}),Jn=Gt,Zn="RC_TABLE_KEY";function Xt(i){return i==null?[]:Array.isArray(i)?i:[i]}function jn(i){var n=[],c={};return i.forEach(function(u){for(var h=u||{},m=h.key,v=h.dataIndex,y=m||Xt(v).join("-")||Zn;c[y];)y="".concat(y,"_next");c[y]=!0,n.push(y)}),n}function xn(i){return i!=null}function Ut(i){return typeof i=="number"&&!Number.isNaN(i)}function St(i){return i&&(0,mn.Z)(i)==="object"&&!Array.isArray(i)&&!C.isValidElement(i)}function li(i,n,c,u,h,m){var v=C.useContext(Jn),y=Ma(),S=(0,it.Z)(function(){if(xn(u))return[u];var b=n==null||n===""?[]:Array.isArray(n)?n:[n],T=(0,Yt.Z)(i,b),w=T,A=void 0;if(h){var I=h(T,i,c);St(I)?(w=I.children,A=I.props,v.renderWithProps=!0):w=I}return[w,A]},[y,i,u,n,h,c],function(b,T){if(m){var w=(0,Ue.Z)(b,2),A=w[1],I=(0,Ue.Z)(T,2),P=I[1];return m(P,A)}return v.renderWithProps?!0:!(0,Go.Z)(b,T,!0)});return S}function ur(i,n,c,u){var h=i+n-1;return i<=u&&h>=c}function hr(i,n){return da(F,function(c){var u=ur(i,n||1,c.hoverStartRow,c.hoverEndRow);return[u,c.onHover]})}var ki=k(56790),Xn=function(n){var c=n.ellipsis,u=n.rowType,h=n.children,m,v=c===!0?{showTitle:!0}:c;return v&&(v.showTitle||u==="header")&&(typeof h=="string"||typeof h=="number"?m=h.toString():C.isValidElement(h)&&typeof h.props.children=="string"&&(m=h.props.children)),m};function Gn(i){var n,c,u,h,m,v,y,S,b=i.component,T=i.children,w=i.ellipsis,A=i.scope,I=i.prefixCls,P=i.className,B=i.align,L=i.record,z=i.render,Z=i.dataIndex,W=i.renderIndex,J=i.shouldCellUpdate,ue=i.index,we=i.rowType,ie=i.colSpan,ge=i.rowSpan,Me=i.fixLeft,de=i.fixRight,re=i.firstFixLeft,ve=i.lastFixLeft,Oe=i.firstFixRight,le=i.lastFixRight,Q=i.appendNode,me=i.additionalProps,Ce=me===void 0?{}:me,tt=i.isSticky,$e="".concat(I,"-cell"),Qe=da(F,["supportSticky","allColumnsFixedLeft","rowHoverable"]),ft=Qe.supportSticky,Dt=Qe.allColumnsFixedLeft,at=Qe.rowHoverable,De=li(L,Z,W,T,z,J),je=(0,Ue.Z)(De,2),et=je[0],Re=je[1],be={},Le=typeof Me=="number"&&ft,Je=typeof de=="number"&&ft;Le&&(be.position="sticky",be.left=Me),Je&&(be.position="sticky",be.right=de);var Ke=(n=(c=(u=Re==null?void 0:Re.colSpan)!==null&&u!==void 0?u:Ce.colSpan)!==null&&c!==void 0?c:ie)!==null&&n!==void 0?n:1,Fe=(h=(m=(v=Re==null?void 0:Re.rowSpan)!==null&&v!==void 0?v:Ce.rowSpan)!==null&&m!==void 0?m:ge)!==null&&h!==void 0?h:1,Ct=hr(ue,Fe),ke=(0,Ue.Z)(Ct,2),Bt=ke[0],bn=ke[1],Qt=(0,ki.zX)(function(Wi){var ji;L&&bn(ue,ue+Fe-1),Ce==null||(ji=Ce.onMouseEnter)===null||ji===void 0||ji.call(Ce,Wi)}),ht=(0,ki.zX)(function(Wi){var ji;L&&bn(-1,-1),Ce==null||(ji=Ce.onMouseLeave)===null||ji===void 0||ji.call(Ce,Wi)});if(Ke===0||Fe===0)return null;var Ft=(y=Ce.title)!==null&&y!==void 0?y:Xn({rowType:we,ellipsis:w,children:et}),In=st()($e,P,(S={},(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)(S,"".concat($e,"-fix-left"),Le&&ft),"".concat($e,"-fix-left-first"),re&&ft),"".concat($e,"-fix-left-last"),ve&&ft),"".concat($e,"-fix-left-all"),ve&&Dt&&ft),"".concat($e,"-fix-right"),Je&&ft),"".concat($e,"-fix-right-first"),Oe&&ft),"".concat($e,"-fix-right-last"),le&&ft),"".concat($e,"-ellipsis"),w),"".concat($e,"-with-append"),Q),"".concat($e,"-fix-sticky"),(Le||Je)&&tt&&ft),(0,j.Z)(S,"".concat($e,"-row-hover"),!Re&&Bt)),Ce.className,Re==null?void 0:Re.className),vt={};B&&(vt.textAlign=B);var On=(0,D.Z)((0,D.Z)((0,D.Z)((0,D.Z)({},Re==null?void 0:Re.style),be),vt),Ce.style),_n=et;return(0,mn.Z)(_n)==="object"&&!Array.isArray(_n)&&!C.isValidElement(_n)&&(_n=null),w&&(ve||Oe)&&(_n=C.createElement("span",{className:"".concat($e,"-content")},_n)),C.createElement(b,(0,Di.Z)({},Re,Ce,{className:In,style:On,title:Ft,scope:A,onMouseEnter:at?Qt:void 0,onMouseLeave:at?ht:void 0,colSpan:Ke!==1?Ke:null,rowSpan:Fe!==1?Fe:null}),Q,_n)}var gi=C.memo(Gn);function Hr(i,n,c,u,h){var m=c[i]||{},v=c[n]||{},y,S;m.fixed==="left"?y=u.left[h==="rtl"?n:i]:v.fixed==="right"&&(S=u.right[h==="rtl"?i:n]);var b=!1,T=!1,w=!1,A=!1,I=c[n+1],P=c[i-1],B=I&&!I.fixed||P&&!P.fixed||c.every(function(J){return J.fixed==="left"});if(h==="rtl"){if(y!==void 0){var L=P&&P.fixed==="left";A=!L&&B}else if(S!==void 0){var z=I&&I.fixed==="right";w=!z&&B}}else if(y!==void 0){var Z=I&&I.fixed==="left";b=!Z&&B}else if(S!==void 0){var W=P&&P.fixed==="right";T=!W&&B}return{fixLeft:y,fixRight:S,lastFixLeft:b,firstFixRight:T,lastFixRight:w,firstFixLeft:A,isSticky:u.isSticky}}var Tr=C.createContext({}),ir=Tr;function Ea(i){var n=i.className,c=i.index,u=i.children,h=i.colSpan,m=h===void 0?1:h,v=i.rowSpan,y=i.align,S=da(F,["prefixCls","direction"]),b=S.prefixCls,T=S.direction,w=C.useContext(ir),A=w.scrollColumnIndex,I=w.stickyOffsets,P=w.flattenColumns,B=c+m-1,L=B+1===A?m+1:m,z=Hr(c,c+L-1,P,I,T);return C.createElement(gi,(0,Di.Z)({className:n,index:c,component:"td",prefixCls:b,record:null,dataIndex:null,align:y,colSpan:L,rowSpan:v,render:function(){return u}},z))}var Vr=["children"];function Sr(i){var n=i.children,c=(0,dn.Z)(i,Vr);return C.createElement("tr",c,n)}function fa(i){var n=i.children;return n}fa.Row=Sr,fa.Cell=Ea;var ko=fa;function qa(i){var n=i.children,c=i.stickyOffsets,u=i.flattenColumns,h=da(F,"prefixCls"),m=u.length-1,v=u[m],y=C.useMemo(function(){return{stickyOffsets:c,flattenColumns:u,scrollColumnIndex:v!=null&&v.scrollbar?m:null}},[v,u,m,c]);return C.createElement(ir.Provider,{value:y},C.createElement("tfoot",{className:"".concat(h,"-summary")},n))}var Ko=Lo(qa),br=ko,Jr=k(9220),Ao=k(79370),cs=k(74204),Ks=k(64217);function vl(i,n,c,u,h,m,v){var y=m(n,v);i.push({record:n,indent:c,index:v,rowKey:y});var S=h==null?void 0:h.has(y);if(n&&Array.isArray(n[u])&&S)for(var b=0;b<n[u].length;b+=1)vl(i,n[u][b],c+1,u,h,m,b)}function Fl(i,n,c,u){var h=C.useMemo(function(){if(c!=null&&c.size){for(var m=[],v=0;v<(i==null?void 0:i.length);v+=1){var y=i[v];vl(m,y,0,n,c,u,v)}return m}return i==null?void 0:i.map(function(S,b){return{record:S,indent:0,index:b,rowKey:u(S,b)}})},[i,n,c,u]);return h}function Cc(i,n,c,u){var h=da(F,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex","expandedKeys","childrenColumnName","rowExpandable","onRow"]),m=h.flattenColumns,v=h.expandableType,y=h.expandedKeys,S=h.childrenColumnName,b=h.onTriggerExpand,T=h.rowExpandable,w=h.onRow,A=h.expandRowByClick,I=h.rowClassName,P=v==="nest",B=v==="row"&&(!T||T(i)),L=B||P,z=y&&y.has(n),Z=S&&i&&i[S],W=(0,ki.zX)(b),J=w==null?void 0:w(i,c),ue=J==null?void 0:J.onClick,we=function(de){A&&L&&b(i,de);for(var re=arguments.length,ve=new Array(re>1?re-1:0),Oe=1;Oe<re;Oe++)ve[Oe-1]=arguments[Oe];ue==null||ue.apply(void 0,[de].concat(ve))},ie;typeof I=="string"?ie=I:typeof I=="function"&&(ie=I(i,c,u));var ge=jn(m);return(0,D.Z)((0,D.Z)({},h),{},{columnsKey:ge,nestExpandable:P,expanded:z,hasNestChildren:Z,record:i,onTriggerExpand:W,rowSupportExpand:B,expandable:L,rowProps:(0,D.Z)((0,D.Z)({},J),{},{className:st()(ie,J==null?void 0:J.className),onClick:we})})}function mo(i){var n=i.prefixCls,c=i.children,u=i.component,h=i.cellComponent,m=i.className,v=i.expanded,y=i.colSpan,S=i.isEmpty,b=i.stickyOffset,T=b===void 0?0:b,w=da(F,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),A=w.scrollbarSize,I=w.fixHeader,P=w.fixColumn,B=w.componentWidth,L=w.horizonScroll,z=c;return(S?L&&B:P)&&(z=C.createElement("div",{style:{width:B-T-(I&&!S?A:0),position:"sticky",left:T,overflow:"hidden"},className:"".concat(n,"-expanded-row-fixed")},z)),C.createElement(u,{className:m,style:{display:v?null:"none"}},C.createElement(gi,{component:h,prefixCls:n,colSpan:y},z))}var Ra=mo;function Qn(i){var n=i.prefixCls,c=i.record,u=i.onExpand,h=i.expanded,m=i.expandable,v="".concat(n,"-row-expand-icon");if(!m)return C.createElement("span",{className:st()(v,"".concat(n,"-row-spaced"))});var y=function(b){u(c,b),b.stopPropagation()};return C.createElement("span",{className:st()(v,(0,j.Z)((0,j.Z)({},"".concat(n,"-row-expanded"),h),"".concat(n,"-row-collapsed"),!h)),onClick:y})}function dr(i,n,c){var u=[];function h(m){(m||[]).forEach(function(v,y){u.push(n(v,y)),h(v[c])})}return h(i),u}function Ca(i,n,c,u){return typeof i=="string"?i:typeof i=="function"?i(n,c,u):""}function Ys(i,n,c,u,h){var m,v=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[],y=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,S=i.record,b=i.prefixCls,T=i.columnsKey,w=i.fixedInfoList,A=i.expandIconColumnIndex,I=i.nestExpandable,P=i.indentSize,B=i.expandIcon,L=i.expanded,z=i.hasNestChildren,Z=i.onTriggerExpand,W=i.expandable,J=i.expandedKeys,ue=T[c],we=w[c],ie;c===(A||0)&&I&&(ie=C.createElement(C.Fragment,null,C.createElement("span",{style:{paddingLeft:"".concat(P*u,"px")},className:"".concat(b,"-row-indent indent-level-").concat(u)}),B({prefixCls:b,expanded:L,expandable:z,record:S,onExpand:Z})));var ge=((m=n.onCell)===null||m===void 0?void 0:m.call(n,S,h))||{};if(y){var Me=ge.rowSpan,de=Me===void 0?1:Me;if(W&&de&&c<y){for(var re=de,ve=h;ve<h+de;ve+=1){var Oe=v[ve];J.has(Oe)&&(re+=1)}ge.rowSpan=re}}return{key:ue,fixedInfo:we,appendCellNode:ie,additionalCellProps:ge}}function zl(i){var n=i.className,c=i.style,u=i.record,h=i.index,m=i.renderIndex,v=i.rowKey,y=i.rowKeys,S=i.indent,b=S===void 0?0:S,T=i.rowComponent,w=i.cellComponent,A=i.scopeCellComponent,I=i.expandedRowInfo,P=Cc(u,v,h,b),B=P.prefixCls,L=P.flattenColumns,z=P.expandedRowClassName,Z=P.expandedRowRender,W=P.rowProps,J=P.expanded,ue=P.rowSupportExpand,we=C.useRef(!1);we.current||(we.current=J);var ie=Ca(z,u,h,b),ge=C.createElement(T,(0,Di.Z)({},W,{"data-row-key":v,className:st()(n,"".concat(B,"-row"),"".concat(B,"-row-level-").concat(b),W==null?void 0:W.className,(0,j.Z)({},ie,b>=1)),style:(0,D.Z)((0,D.Z)({},c),W==null?void 0:W.style)}),L.map(function(re,ve){var Oe=re.render,le=re.dataIndex,Q=re.className,me=Ys(P,re,ve,b,h,y,I==null?void 0:I.offset),Ce=me.key,tt=me.fixedInfo,$e=me.appendCellNode,Qe=me.additionalCellProps;return C.createElement(gi,(0,Di.Z)({className:Q,ellipsis:re.ellipsis,align:re.align,scope:re.rowScope,component:re.rowScope?A:w,prefixCls:B,key:Ce,record:u,index:h,renderIndex:m,dataIndex:le,render:Oe,shouldCellUpdate:re.shouldCellUpdate},tt,{appendNode:$e,additionalProps:Qe}))})),Me;if(ue&&(we.current||J)){var de=Z(u,h,b+1,J);Me=C.createElement(Ra,{expanded:J,className:st()("".concat(B,"-expanded-row"),"".concat(B,"-expanded-row-level-").concat(b+1),ie),prefixCls:B,component:T,cellComponent:w,colSpan:I?I.colSpan:L.length,stickyOffset:I==null?void 0:I.sticky,isEmpty:!1},de)}return C.createElement(C.Fragment,null,ge,Me)}var Fd=Lo(zl);function xf(i){var n=i.columnKey,c=i.onColumnResize,u=i.prefixCls,h=i.title,m=C.useRef();return(0,To.Z)(function(){m.current&&c(n,m.current.offsetWidth)},[]),C.createElement(Jr.Z,{data:n},C.createElement("th",{ref:m,className:"".concat(u,"-measure-cell")},C.createElement("div",{className:"".concat(u,"-measure-cell-content")},h||"\xA0")))}var Sf=k(5110);function bf(i){var n=i.prefixCls,c=i.columnsKey,u=i.onColumnResize,h=i.columns,m=C.useRef(null),v=da(F,["measureRowRender"]),y=v.measureRowRender,S=C.createElement("tr",{"aria-hidden":"true",className:"".concat(n,"-measure-row"),ref:m,tabIndex:-1},C.createElement(Jr.Z.Collection,{onBatchResize:function(T){(0,Sf.Z)(m.current)&&T.forEach(function(w){var A=w.data,I=w.size;u(A,I.offsetWidth)})}},c.map(function(b){var T=h.find(function(I){return I.key===b}),w=T==null?void 0:T.title,A=C.isValidElement(w)?C.cloneElement(w,{ref:null}):w;return C.createElement(xf,{prefixCls:n,key:b,columnKey:b,onColumnResize:u,title:A})})));return y?y(S):S}function zd(i){var n=i.data,c=i.measureColumnWidth,u=da(F,["prefixCls","getComponent","onColumnResize","flattenColumns","getRowKey","expandedKeys","childrenColumnName","emptyNode","expandedRowOffset","fixedInfoList","colWidths"]),h=u.prefixCls,m=u.getComponent,v=u.onColumnResize,y=u.flattenColumns,S=u.getRowKey,b=u.expandedKeys,T=u.childrenColumnName,w=u.emptyNode,A=u.expandedRowOffset,I=A===void 0?0:A,P=u.colWidths,B=Fl(n,T,b,S),L=C.useMemo(function(){return B.map(function(Me){return Me.rowKey})},[B]),z=C.useRef({renderWithProps:!1}),Z=C.useMemo(function(){for(var Me=y.length-I,de=0,re=0;re<I;re+=1)de+=P[re]||0;return{offset:I,colSpan:Me,sticky:de}},[y.length,I,P]),W=m(["body","wrapper"],"tbody"),J=m(["body","row"],"tr"),ue=m(["body","cell"],"td"),we=m(["body","cell"],"th"),ie;n.length?ie=B.map(function(Me,de){var re=Me.record,ve=Me.indent,Oe=Me.index,le=Me.rowKey;return C.createElement(Fd,{key:le,rowKey:le,rowKeys:L,record:re,index:de,renderIndex:Oe,rowComponent:J,cellComponent:ue,scopeCellComponent:we,indent:ve,expandedRowInfo:Z})}):ie=C.createElement(Ra,{expanded:!0,className:"".concat(h,"-placeholder"),prefixCls:h,component:J,cellComponent:ue,colSpan:y.length,isEmpty:!0},w);var ge=jn(y);return C.createElement(Jn.Provider,{value:z.current},C.createElement(W,{className:"".concat(h,"-tbody")},c&&C.createElement(bf,{prefixCls:h,columnsKey:ge,onColumnResize:v,columns:y}),ie))}var Hd=Lo(zd),Zd=["expandable"],ul="RC_TABLE_INTERNAL_COL_DEFINE";function nd(i){var n=i.expandable,c=(0,dn.Z)(i,Zd),u;return"expandable"in i?u=(0,D.Z)((0,D.Z)({},c),n):u=c,u.showExpandColumn===!1&&(u.expandIconColumnIndex=-1),u}var id=["columnType"];function Vd(i){for(var n=i.colWidths,c=i.columns,u=i.columCount,h=da(F,["tableLayout"]),m=h.tableLayout,v=[],y=u||c.length,S=!1,b=y-1;b>=0;b-=1){var T=n[b],w=c&&c[b],A=void 0,I=void 0;if(w&&(A=w[ul],m==="auto"&&(I=w.minWidth)),T||I||A||S){var P=A||{},B=P.columnType,L=(0,dn.Z)(P,id);v.unshift(C.createElement("col",(0,Di.Z)({key:b,style:{width:T,minWidth:I}},L))),S=!0}}return v.length>0?C.createElement("colgroup",null,v):null}var Iu=Vd,Gd=["className","noData","columns","flattenColumns","colWidths","colGroup","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","scrollX","tableLayout","onScroll","children"];function Hl(i,n){return(0,C.useMemo)(function(){for(var c=[],u=0;u<n;u+=1){var h=i[u];if(h!==void 0)c[u]=h;else return null}return c},[i.join("_"),n])}var rd=C.forwardRef(function(i,n){var c=i.className,u=i.noData,h=i.columns,m=i.flattenColumns,v=i.colWidths,y=i.colGroup,S=i.columCount,b=i.stickyOffsets,T=i.direction,w=i.fixHeader,A=i.stickyTopOffset,I=i.stickyBottomOffset,P=i.stickyClassName,B=i.scrollX,L=i.tableLayout,z=L===void 0?"fixed":L,Z=i.onScroll,W=i.children,J=(0,dn.Z)(i,Gd),ue=da(F,["prefixCls","scrollbarSize","isSticky","getComponent"]),we=ue.prefixCls,ie=ue.scrollbarSize,ge=ue.isSticky,Me=ue.getComponent,de=Me(["header","table"],"table"),re=ge&&!w?0:ie,ve=C.useRef(null),Oe=C.useCallback(function(ft){(0,Ya.mH)(n,ft),(0,Ya.mH)(ve,ft)},[]);C.useEffect(function(){function ft(at){var De=at,je=De.currentTarget,et=De.deltaX;et&&(Z({currentTarget:je,scrollLeft:je.scrollLeft+et}),at.preventDefault())}var Dt=ve.current;return Dt==null||Dt.addEventListener("wheel",ft,{passive:!1}),function(){Dt==null||Dt.removeEventListener("wheel",ft)}},[]);var le=m[m.length-1],Q={fixed:le?le.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(we,"-cell-scrollbar")}}},me=(0,C.useMemo)(function(){return re?[].concat((0,en.Z)(h),[Q]):h},[re,h]),Ce=(0,C.useMemo)(function(){return re?[].concat((0,en.Z)(m),[Q]):m},[re,m]),tt=(0,C.useMemo)(function(){var ft=b.right,Dt=b.left;return(0,D.Z)((0,D.Z)({},b),{},{left:T==="rtl"?[].concat((0,en.Z)(Dt.map(function(at){return at+re})),[0]):Dt,right:T==="rtl"?ft:[].concat((0,en.Z)(ft.map(function(at){return at+re})),[0]),isSticky:ge})},[re,b,ge]),$e=Hl(v,S),Qe=(0,C.useMemo)(function(){var ft=!$e||!$e.length||$e.every(function(Dt){return!Dt});return u||ft},[u,$e]);return C.createElement("div",{style:(0,D.Z)({overflow:"hidden"},ge?{top:A,bottom:I}:{}),ref:Oe,className:st()(c,(0,j.Z)({},P,!!P))},C.createElement(de,{style:{tableLayout:z,minWidth:"100%",width:B}},Qe?y:C.createElement(Iu,{colWidths:[].concat((0,en.Z)($e),[re]),columCount:S+1,columns:Ce}),W((0,D.Z)((0,D.Z)({},J),{},{stickyOffsets:tt,columns:me,flattenColumns:Ce}))))}),kd=C.memo(rd),Tc=function(n){var c=n.cells,u=n.stickyOffsets,h=n.flattenColumns,m=n.rowComponent,v=n.cellComponent,y=n.onHeaderRow,S=n.index,b=da(F,["prefixCls","direction"]),T=b.prefixCls,w=b.direction,A;y&&(A=y(c.map(function(P){return P.column}),S));var I=jn(c.map(function(P){return P.column}));return C.createElement(m,A,c.map(function(P,B){var L=P.column,z=Hr(P.colStart,P.colEnd,h,u,w),Z;return L&&L.onHeaderCell&&(Z=P.column.onHeaderCell(L)),C.createElement(gi,(0,Di.Z)({},P,{scope:L.title?P.colSpan>1?"colgroup":"col":null,ellipsis:L.ellipsis,align:L.align,component:v,prefixCls:T,key:I[B]},z,{additionalProps:Z,rowType:"header"}))}))},Ga=Tc;function Or(i){var n=[];function c(v,y){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;n[S]=n[S]||[];var b=y,T=v.filter(Boolean).map(function(w){var A={key:w.key,className:w.className||"",children:w.title,column:w,colStart:b},I=1,P=w.children;return P&&P.length>0&&(I=c(P,b,S+1).reduce(function(B,L){return B+L},0),A.hasSubColumns=!0),"colSpan"in w&&(I=w.colSpan),"rowSpan"in w&&(A.rowSpan=w.rowSpan),A.colSpan=I,A.colEnd=A.colStart+I-1,n[S].push(A),b+=I,I});return T}c(i,0);for(var u=n.length,h=function(y){n[y].forEach(function(S){!("rowSpan"in S)&&!S.hasSubColumns&&(S.rowSpan=u-y)})},m=0;m<u;m+=1)h(m);return n}var gl=function(n){var c=n.stickyOffsets,u=n.columns,h=n.flattenColumns,m=n.onHeaderRow,v=da(F,["prefixCls","getComponent"]),y=v.prefixCls,S=v.getComponent,b=C.useMemo(function(){return Or(u)},[u]),T=S(["header","wrapper"],"thead"),w=S(["header","row"],"tr"),A=S(["header","cell"],"th");return C.createElement(T,{className:"".concat(y,"-thead")},b.map(function(I,P){var B=C.createElement(Ga,{key:P,flattenColumns:h,cells:I,stickyOffsets:c,rowComponent:w,cellComponent:A,onHeaderRow:m,index:P});return B}))},ad=Lo(gl);function ru(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return typeof n=="number"?n:n.endsWith("%")?i*parseFloat(n)/100:null}function od(i,n,c){return C.useMemo(function(){if(n&&n>0){var u=0,h=0;i.forEach(function(A){var I=ru(n,A.width);I?u+=I:h+=1});var m=Math.max(n,c),v=Math.max(m-u,h),y=h,S=v/h,b=0,T=i.map(function(A){var I=(0,D.Z)({},A),P=ru(n,I.width);if(P)I.width=P;else{var B=Math.floor(S);I.width=y===1?v:B,v-=B,y-=1}return b+=I.width,I});if(b<m){var w=m/b;v=m,T.forEach(function(A,I){var P=Math.floor(A.width*w);A.width=I===T.length-1?v:P,v-=P})}return[T,Math.max(b,m)]}return[i,n]},[i,n,c])}var Ts=["children"],ga=["fixed"];function wc(i){return(0,pi.Z)(i).filter(function(n){return C.isValidElement(n)}).map(function(n){var c=n.key,u=n.props,h=u.children,m=(0,dn.Z)(u,Ts),v=(0,D.Z)({key:c},m);return h&&(v.children=wc(h)),v})}function ic(i){return i.filter(function(n){return n&&(0,mn.Z)(n)==="object"&&!n.hidden}).map(function(n){var c=n.children;return c&&c.length>0?(0,D.Z)((0,D.Z)({},n),{},{children:ic(c)}):n})}function Zl(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key";return i.filter(function(c){return c&&(0,mn.Z)(c)==="object"}).reduce(function(c,u,h){var m=u.fixed,v=m===!0?"left":m,y="".concat(n,"-").concat(h),S=u.children;return S&&S.length>0?[].concat((0,en.Z)(c),(0,en.Z)(Zl(S,y).map(function(b){var T;return(0,D.Z)((0,D.Z)({},b),{},{fixed:(T=b.fixed)!==null&&T!==void 0?T:v})}))):[].concat((0,en.Z)(c),[(0,D.Z)((0,D.Z)({key:y},u),{},{fixed:v})])},[])}function us(i){return i.map(function(n){var c=n.fixed,u=(0,dn.Z)(n,ga),h=c;return c==="left"?h="right":c==="right"&&(h="left"),(0,D.Z)({fixed:h},u)})}function Ri(i,n){var c=i.prefixCls,u=i.columns,h=i.children,m=i.expandable,v=i.expandedKeys,y=i.columnTitle,S=i.getRowKey,b=i.onTriggerExpand,T=i.expandIcon,w=i.rowExpandable,A=i.expandIconColumnIndex,I=i.expandedRowOffset,P=I===void 0?0:I,B=i.direction,L=i.expandRowByClick,z=i.columnWidth,Z=i.fixed,W=i.scrollWidth,J=i.clientWidth,ue=C.useMemo(function(){var le=u||wc(h)||[];return ic(le.slice())},[u,h]),we=C.useMemo(function(){if(m){var le=ue.slice();if(!le.includes(yr)){var Q=A||0,me=Q===0&&Z==="right"?ue.length:Q;me>=0&&le.splice(me,0,yr)}var Ce=le.indexOf(yr);le=le.filter(function(ft,Dt){return ft!==yr||Dt===Ce});var tt=ue[Ce],$e;Z?$e=Z:$e=tt?tt.fixed:null;var Qe=(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({},ul,{className:"".concat(c,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),"title",y),"fixed",$e),"className","".concat(c,"-row-expand-icon-cell")),"width",z),"render",function(Dt,at,De){var je=S(at,De),et=v.has(je),Re=w?w(at):!0,be=T({prefixCls:c,expanded:et,expandable:Re,record:at,onExpand:b});return L?C.createElement("span",{onClick:function(Je){return Je.stopPropagation()}},be):be});return le.map(function(ft,Dt){var at=ft===yr?Qe:ft;return Dt<P?(0,D.Z)((0,D.Z)({},at),{},{fixed:at.fixed||"left"}):at})}return ue.filter(function(ft){return ft!==yr})},[m,ue,S,v,T,B,P]),ie=C.useMemo(function(){var le=we;return n&&(le=n(le)),le.length||(le=[{render:function(){return null}}]),le},[n,we,B]),ge=C.useMemo(function(){return B==="rtl"?us(Zl(ie)):Zl(ie)},[ie,B,W]),Me=C.useMemo(function(){for(var le=-1,Q=ge.length-1;Q>=0;Q-=1){var me=ge[Q].fixed;if(me==="left"||me===!0){le=Q;break}}if(le>=0)for(var Ce=0;Ce<=le;Ce+=1){var tt=ge[Ce].fixed;if(tt!=="left"&&tt!==!0)return!0}var $e=ge.findIndex(function(Dt){var at=Dt.fixed;return at==="right"});if($e>=0)for(var Qe=$e;Qe<ge.length;Qe+=1){var ft=ge[Qe].fixed;if(ft!=="right")return!0}return!1},[ge]),de=od(ge,W,J),re=(0,Ue.Z)(de,2),ve=re[0],Oe=re[1];return[ie,ve,Oe,Me]}var au=Ri;function _f(i,n,c){var u=nd(i),h=u.expandIcon,m=u.expandedRowKeys,v=u.defaultExpandedRowKeys,y=u.defaultExpandAllRows,S=u.expandedRowRender,b=u.onExpand,T=u.onExpandedRowsChange,w=u.childrenColumnName,A=h||Qn,I=w||"children",P=C.useMemo(function(){return S?"row":i.expandable&&i.internalHooks===ro&&i.expandable.__PARENT_RENDER_ICON__||n.some(function(ue){return ue&&(0,mn.Z)(ue)==="object"&&ue[I]})?"nest":!1},[!!S,n]),B=C.useState(function(){return v||(y?dr(n,c,I):[])}),L=(0,Ue.Z)(B,2),z=L[0],Z=L[1],W=C.useMemo(function(){return new Set(m||z||[])},[m,z]),J=C.useCallback(function(ue){var we=c(ue,n.indexOf(ue)),ie,ge=W.has(we);ge?(W.delete(we),ie=(0,en.Z)(W)):ie=[].concat((0,en.Z)(W),[we]),Z(ie),b&&b(!ge,ue),T&&T(ie)},[c,W,n,b,T]);return[u,P,W,A,I,J]}function qs(i,n,c){var u=i.map(function(h,m){return Hr(m,m,i,n,c)});return(0,it.Z)(function(){return u},[u],function(h,m){return!(0,Go.Z)(h,m)})}function ou(i){var n=(0,C.useRef)(i),c=(0,C.useState)({}),u=(0,Ue.Z)(c,2),h=u[1],m=(0,C.useRef)(null),v=(0,C.useRef)([]);function y(S){v.current.push(S);var b=Promise.resolve();m.current=b,b.then(function(){if(m.current===b){var T=v.current,w=n.current;v.current=[],T.forEach(function(A){n.current=A(n.current)}),m.current=null,w!==n.current&&h({})}})}return(0,C.useEffect)(function(){return function(){m.current=null}},[]),[n.current,y]}function Wd(i){var n=(0,C.useRef)(i||null),c=(0,C.useRef)();function u(){window.clearTimeout(c.current)}function h(v){n.current=v,u(),c.current=window.setTimeout(function(){n.current=null,c.current=void 0},100)}function m(){return n.current}return(0,C.useEffect)(function(){return u},[]),[h,m]}function Mf(){var i=C.useState(-1),n=(0,Ue.Z)(i,2),c=n[0],u=n[1],h=C.useState(-1),m=(0,Ue.Z)(h,2),v=m[0],y=m[1],S=C.useCallback(function(b,T){u(b),y(T)},[]);return[c,v,S]}var Ef=k(98924),sd=(0,Ef.Z)()?window:null;function jd(i,n){var c=(0,mn.Z)(i)==="object"?i:{},u=c.offsetHeader,h=u===void 0?0:u,m=c.offsetSummary,v=m===void 0?0:m,y=c.offsetScroll,S=y===void 0?0:y,b=c.getContainer,T=b===void 0?function(){return sd}:b,w=T()||sd,A=!!i;return C.useMemo(function(){return{isSticky:A,stickyClassName:A?"".concat(n,"-sticky-holder"):"",offsetHeader:h,offsetSummary:v,offsetScroll:S,container:w}},[A,S,h,v,n,w])}function Cf(i,n,c){var u=(0,C.useMemo)(function(){var h=n.length,m=function(b,T,w){for(var A=[],I=0,P=b;P!==T;P+=w)A.push(I),n[P].fixed&&(I+=i[P]||0);return A},v=m(0,h,1),y=m(h-1,-1,-1).reverse();return c==="rtl"?{left:y,right:v}:{left:v,right:y}},[i,n,c]);return u}var ld=Cf;function Pu(i){var n=i.className,c=i.children;return C.createElement("div",{className:n},c)}var ao=Pu,Tf=k(64019),Nu=k(75164),cd=k(34203);function su(i){var n=(0,cd.bn)(i),c=n.getBoundingClientRect(),u=document.documentElement;return{left:c.left+(window.pageXOffset||u.scrollLeft)-(u.clientLeft||document.body.clientLeft||0),top:c.top+(window.pageYOffset||u.scrollTop)-(u.clientTop||document.body.clientTop||0)}}var uc=function(n,c){var u,h,m=n.scrollBodyRef,v=n.onScroll,y=n.offsetScroll,S=n.container,b=n.direction,T=da(F,"prefixCls"),w=((u=m.current)===null||u===void 0?void 0:u.scrollWidth)||0,A=((h=m.current)===null||h===void 0?void 0:h.clientWidth)||0,I=w&&A*(A/w),P=C.useRef(),B=ou({scrollLeft:0,isHiddenScrollBar:!0}),L=(0,Ue.Z)(B,2),z=L[0],Z=L[1],W=C.useRef({delta:0,x:0}),J=C.useState(!1),ue=(0,Ue.Z)(J,2),we=ue[0],ie=ue[1],ge=C.useRef(null);C.useEffect(function(){return function(){Nu.Z.cancel(ge.current)}},[]);var Me=function(){ie(!1)},de=function(Q){Q.persist(),W.current.delta=Q.pageX-z.scrollLeft,W.current.x=0,ie(!0),Q.preventDefault()},re=function(Q){var me,Ce=Q||((me=window)===null||me===void 0?void 0:me.event),tt=Ce.buttons;if(!we||tt===0){we&&ie(!1);return}var $e=W.current.x+Q.pageX-W.current.x-W.current.delta,Qe=b==="rtl";$e=Math.max(Qe?I-A:0,Math.min(Qe?0:A-I,$e));var ft=!Qe||Math.abs($e)+Math.abs(I)<A;ft&&(v({scrollLeft:$e/A*(w+2)}),W.current.x=Q.pageX)},ve=function(){Nu.Z.cancel(ge.current),ge.current=(0,Nu.Z)(function(){if(m.current){var Q=su(m.current).top,me=Q+m.current.offsetHeight,Ce=S===window?document.documentElement.scrollTop+window.innerHeight:su(S).top+S.clientHeight;Z(function(tt){return(0,D.Z)((0,D.Z)({},tt),{},{isHiddenScrollBar:me-(0,cs.Z)()<=Ce||Q>=Ce-y})})}})},Oe=function(Q){Z(function(me){return(0,D.Z)((0,D.Z)({},me),{},{scrollLeft:w?Q/w*A:0})})};return C.useImperativeHandle(c,function(){return{setScrollLeft:Oe,checkScrollBarVisible:ve}}),C.useEffect(function(){var le=(0,Tf.Z)(document.body,"mouseup",Me,!1),Q=(0,Tf.Z)(document.body,"mousemove",re,!1);return ve(),function(){le.remove(),Q.remove()}},[I,we]),C.useEffect(function(){if(m.current){for(var le=[],Q=(0,cd.bn)(m.current);Q;)le.push(Q),Q=Q.parentElement;return le.forEach(function(me){return me.addEventListener("scroll",ve,!1)}),window.addEventListener("resize",ve,!1),window.addEventListener("scroll",ve,!1),S.addEventListener("scroll",ve,!1),function(){le.forEach(function(me){return me.removeEventListener("scroll",ve)}),window.removeEventListener("resize",ve),window.removeEventListener("scroll",ve),S.removeEventListener("scroll",ve)}}},[S]),C.useEffect(function(){z.isHiddenScrollBar||Z(function(le){var Q=m.current;return Q?(0,D.Z)((0,D.Z)({},le),{},{scrollLeft:Q.scrollLeft/Q.scrollWidth*Q.clientWidth}):le})},[z.isHiddenScrollBar]),w<=A||!I||z.isHiddenScrollBar?null:C.createElement("div",{style:{height:(0,cs.Z)(),width:A,bottom:y},className:"".concat(T,"-sticky-scroll")},C.createElement("div",{onMouseDown:de,ref:P,className:st()("".concat(T,"-sticky-scroll-bar"),(0,j.Z)({},"".concat(T,"-sticky-scroll-bar-active"),we)),style:{width:"".concat(I,"px"),transform:"translate3d(".concat(z.scrollLeft,"px, 0, 0)")}}))},gs=C.forwardRef(uc);function rr(i){return null}var Ac=rr;function nn(i){return null}var ws=nn,ce="rc-table",ud=[],dd={};function Js(){return"No Data"}function lu(i,n){var c=(0,D.Z)({rowKey:"key",prefixCls:ce,emptyText:Js},i),u=c.prefixCls,h=c.className,m=c.rowClassName,v=c.style,y=c.data,S=c.rowKey,b=c.scroll,T=c.tableLayout,w=c.direction,A=c.title,I=c.footer,P=c.summary,B=c.caption,L=c.id,z=c.showHeader,Z=c.components,W=c.emptyText,J=c.onRow,ue=c.onHeaderRow,we=c.measureRowRender,ie=c.onScroll,ge=c.internalHooks,Me=c.transformColumns,de=c.internalRefs,re=c.tailor,ve=c.getContainerWidth,Oe=c.sticky,le=c.rowHoverable,Q=le===void 0?!0:le,me=y||ud,Ce=!!me.length,tt=ge===ro,$e=C.useCallback(function(sa,Sa){return(0,Yt.Z)(Z,sa)||Sa},[Z]),Qe=C.useMemo(function(){return typeof S=="function"?S:function(sa){var Sa=sa&&sa[S];return Sa}},[S]),ft=$e(["body"]),Dt=Mf(),at=(0,Ue.Z)(Dt,3),De=at[0],je=at[1],et=at[2],Re=_f(c,me,Qe),be=(0,Ue.Z)(Re,6),Le=be[0],Je=be[1],Ke=be[2],Fe=be[3],Ct=be[4],ke=be[5],Bt=b==null?void 0:b.x,bn=C.useState(0),Qt=(0,Ue.Z)(bn,2),ht=Qt[0],Ft=Qt[1],In=au((0,D.Z)((0,D.Z)((0,D.Z)({},c),Le),{},{expandable:!!Le.expandedRowRender,columnTitle:Le.columnTitle,expandedKeys:Ke,getRowKey:Qe,onTriggerExpand:ke,expandIcon:Fe,expandIconColumnIndex:Le.expandIconColumnIndex,direction:w,scrollWidth:tt&&re&&typeof Bt=="number"?Bt:null,clientWidth:ht}),tt?Me:null),vt=(0,Ue.Z)(In,4),On=vt[0],_n=vt[1],Wi=vt[2],ji=vt[3],za=Wi!=null?Wi:Bt,ea=C.useMemo(function(){return{columns:On,flattenColumns:_n}},[On,_n]),Xs=C.useRef(),ol=C.useRef(),Ua=C.useRef(),$r=C.useRef();C.useImperativeHandle(n,function(){return{nativeElement:Xs.current,scrollTo:function(Sa){var Ll;if(Ua.current instanceof HTMLElement){var Ru=Sa.index,Ul=Sa.top,Vh=Sa.key;if(Ut(Ul)){var Sh;(Sh=Ua.current)===null||Sh===void 0||Sh.scrollTo({top:Ul})}else{var bh,xp=Vh!=null?Vh:Qe(me[Ru]);(bh=Ua.current.querySelector('[data-row-key="'.concat(xp,'"]')))===null||bh===void 0||bh.scrollIntoView()}}else(Ll=Ua.current)!==null&&Ll!==void 0&&Ll.scrollTo&&Ua.current.scrollTo(Sa)}}});var ja=C.useRef(),Xa=C.useState(!1),go=(0,Ue.Z)(Xa,2),Eo=go[0],oa=go[1],xa=C.useState(!1),wi=(0,Ue.Z)(xa,2),tr=wi[0],zo=wi[1],or=C.useState(new Map),No=(0,Ue.Z)(or,2),xi=No[0],sl=No[1],eu=jn(_n),Nl=eu.map(function(sa){return xi.get(sa)}),Ol=C.useMemo(function(){return Nl},[Nl.join("_")]),ll=ld(Ol,_n,w),Dl=b&&xn(b.y),nc=b&&xn(za)||!!Le.fixed,as=nc&&_n.some(function(sa){var Sa=sa.fixed;return Sa}),yh=C.useRef(),tu=jd(Oe,u),nu=tu.isSticky,Fh=tu.offsetHeader,xh=tu.offsetSummary,zh=tu.offsetScroll,Hh=tu.stickyClassName,gp=tu.container,Ki=C.useMemo(function(){return P==null?void 0:P(me)},[P,me]),zt=(Dl||nu)&&C.isValidElement(Ki)&&Ki.type===ko&&Ki.props.fixed,yn,mi,_r;Dl&&(mi={overflowY:Ce?"scroll":"auto",maxHeight:b.y}),nc&&(yn={overflowX:"auto"},Dl||(mi={overflowY:"hidden"}),_r={width:za===!0?"auto":za,minWidth:"100%"});var Oo=C.useCallback(function(sa,Sa){sl(function(Ll){if(Ll.get(sa)!==Sa){var Ru=new Map(Ll);return Ru.set(sa,Sa),Ru}return Ll})},[]),Os=Wd(null),Ho=(0,Ue.Z)(Os,2),nm=Ho[0],im=Ho[1];function Zh(sa,Sa){Sa&&(typeof Sa=="function"?Sa(sa):Sa.scrollLeft!==sa&&(Sa.scrollLeft=sa,Sa.scrollLeft!==sa&&setTimeout(function(){Sa.scrollLeft=sa},0)))}var Yf=(0,Do.Z)(function(sa){var Sa=sa.currentTarget,Ll=sa.scrollLeft,Ru=w==="rtl",Ul=typeof Ll=="number"?Ll:Sa.scrollLeft,Vh=Sa||dd;if(!im()||im()===Vh){var Sh;nm(Vh),Zh(Ul,ol.current),Zh(Ul,Ua.current),Zh(Ul,ja.current),Zh(Ul,(Sh=yh.current)===null||Sh===void 0?void 0:Sh.setScrollLeft)}var bh=Sa||ol.current;if(bh){var xp=tt&&re&&typeof za=="number"?za:bh.scrollWidth,y0=bh.clientWidth;if(xp===y0){oa(!1),zo(!1);return}Ru?(oa(-Ul<xp-y0),zo(-Ul>0)):(oa(Ul>0),zo(Ul<xp-y0))}}),iu=(0,Do.Z)(function(sa){Yf(sa),ie==null||ie(sa)}),rm=function(){if(nc&&Ua.current){var Sa;Yf({currentTarget:(0,cd.bn)(Ua.current),scrollLeft:(Sa=Ua.current)===null||Sa===void 0?void 0:Sa.scrollLeft})}else oa(!1),zo(!1)},L0=function(Sa){var Ll,Ru=Sa.width;(Ll=yh.current)===null||Ll===void 0||Ll.checkScrollBarVisible();var Ul=Xs.current?Xs.current.offsetWidth:Ru;tt&&ve&&Xs.current&&(Ul=ve(Xs.current,Ul)||Ul),Ul!==ht&&(rm(),Ft(Ul))},x0=C.useRef(!1);C.useEffect(function(){x0.current&&rm()},[nc,y,On.length]),C.useEffect(function(){x0.current=!0},[]);var U0=C.useState(0),S0=(0,Ue.Z)(U0,2),am=S0[0],b0=S0[1],B0=C.useState(!0),_0=(0,Ue.Z)(B0,2),M0=_0[0],F0=_0[1];(0,To.Z)(function(){(!re||!tt)&&(Ua.current instanceof Element?b0((0,cs.o)(Ua.current).width):b0((0,cs.o)($r.current).width)),F0((0,Ao.G)("position","sticky"))},[]),C.useEffect(function(){tt&&de&&(de.body.current=Ua.current)});var z0=C.useCallback(function(sa){return C.createElement(C.Fragment,null,C.createElement(ad,sa),zt==="top"&&C.createElement(Ko,sa,Ki))},[zt,Ki]),H0=C.useCallback(function(sa){return C.createElement(Ko,sa,Ki)},[Ki]),E0=$e(["table"],"table"),yp=C.useMemo(function(){return T||(as?za==="max-content"?"auto":"fixed":Dl||nu||_n.some(function(sa){var Sa=sa.ellipsis;return Sa})?"fixed":"auto")},[Dl,as,_n,T,nu]),p0,m0={colWidths:Ol,columCount:_n.length,stickyOffsets:ll,onHeaderRow:ue,fixHeader:Dl,scroll:b},C0=C.useMemo(function(){return Ce?null:typeof W=="function"?W():W},[Ce,W]),T0=C.createElement(Hd,{data:me,measureColumnWidth:Dl||nc||nu}),om=C.createElement(Iu,{colWidths:_n.map(function(sa){var Sa=sa.width;return Sa}),columns:_n}),w0=B!=null?C.createElement("caption",{className:"".concat(u,"-caption")},B):void 0,Z0=(0,Ks.Z)(c,{data:!0}),A0=(0,Ks.Z)(c,{aria:!0});if(Dl||nu){var v0;typeof ft=="function"?(v0=ft(me,{scrollbarSize:am,ref:Ua,onScroll:Yf}),m0.colWidths=_n.map(function(sa,Sa){var Ll=sa.width,Ru=Sa===_n.length-1?Ll-am:Ll;return typeof Ru=="number"&&!Number.isNaN(Ru)?Ru:0})):v0=C.createElement("div",{style:(0,D.Z)((0,D.Z)({},yn),mi),onScroll:iu,ref:Ua,className:st()("".concat(u,"-body"))},C.createElement(E0,(0,Di.Z)({style:(0,D.Z)((0,D.Z)({},_r),{},{tableLayout:yp})},A0),w0,om,T0,!zt&&Ki&&C.createElement(Ko,{stickyOffsets:ll,flattenColumns:_n},Ki)));var R0=(0,D.Z)((0,D.Z)((0,D.Z)({noData:!me.length},m0),ea),{},{direction:w,stickyClassName:Hh,scrollX:za,tableLayout:yp,onScroll:Yf});p0=C.createElement(C.Fragment,null,z!==!1&&C.createElement(kd,(0,Di.Z)({},R0,{stickyTopOffset:Fh,className:"".concat(u,"-header"),ref:ol,colGroup:om}),z0),v0,zt&&zt!=="top"&&C.createElement(kd,(0,Di.Z)({},R0,{stickyBottomOffset:xh,className:"".concat(u,"-summary"),ref:ja,colGroup:om}),H0),nu&&Ua.current&&Ua.current instanceof Element&&C.createElement(gs,{ref:yh,offsetScroll:zh,scrollBodyRef:Ua,onScroll:Yf,container:gp,direction:w}))}else p0=C.createElement("div",{style:(0,D.Z)((0,D.Z)({},yn),mi),className:st()("".concat(u,"-content")),onScroll:Yf,ref:Ua},C.createElement(E0,(0,Di.Z)({style:(0,D.Z)((0,D.Z)({},_r),{},{tableLayout:yp})},A0),w0,om,z!==!1&&C.createElement(ad,(0,Di.Z)({},m0,ea)),T0,Ki&&C.createElement(Ko,{stickyOffsets:ll,flattenColumns:_n},Ki)));var g0=C.createElement("div",(0,Di.Z)({className:st()(u,h,(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({},"".concat(u,"-rtl"),w==="rtl"),"".concat(u,"-ping-left"),Eo),"".concat(u,"-ping-right"),tr),"".concat(u,"-layout-fixed"),T==="fixed"),"".concat(u,"-fixed-header"),Dl),"".concat(u,"-fixed-column"),as),"".concat(u,"-fixed-column-gapped"),as&&ji),"".concat(u,"-scroll-horizontal"),nc),"".concat(u,"-has-fix-left"),_n[0]&&_n[0].fixed),"".concat(u,"-has-fix-right"),_n[_n.length-1]&&_n[_n.length-1].fixed==="right")),style:v,id:L,ref:Xs},Z0),A&&C.createElement(ao,{className:"".concat(u,"-title")},A(me)),C.createElement("div",{ref:$r,className:"".concat(u,"-container")},p0),I&&C.createElement(ao,{className:"".concat(u,"-footer")},I(me)));nc&&(g0=C.createElement(Jr.Z,{onResize:L0},g0));var I0=qs(_n,ll,w),V0=C.useMemo(function(){return{scrollX:za,prefixCls:u,getComponent:$e,scrollbarSize:am,direction:w,fixedInfoList:I0,isSticky:nu,supportSticky:M0,componentWidth:ht,fixHeader:Dl,fixColumn:as,horizonScroll:nc,tableLayout:yp,rowClassName:m,expandedRowClassName:Le.expandedRowClassName,expandIcon:Fe,expandableType:Je,expandRowByClick:Le.expandRowByClick,expandedRowRender:Le.expandedRowRender,expandedRowOffset:Le.expandedRowOffset,onTriggerExpand:ke,expandIconColumnIndex:Le.expandIconColumnIndex,indentSize:Le.indentSize,allColumnsFixedLeft:_n.every(function(sa){return sa.fixed==="left"}),emptyNode:C0,columns:On,flattenColumns:_n,onColumnResize:Oo,colWidths:Ol,hoverStartRow:De,hoverEndRow:je,onHover:et,rowExpandable:Le.rowExpandable,onRow:J,getRowKey:Qe,expandedKeys:Ke,childrenColumnName:Ct,rowHoverable:Q,measureRowRender:we}},[za,u,$e,am,w,I0,nu,M0,ht,Dl,as,nc,yp,m,Le.expandedRowClassName,Fe,Je,Le.expandRowByClick,Le.expandedRowRender,Le.expandedRowOffset,ke,Le.expandIconColumnIndex,Le.indentSize,C0,On,_n,Oo,Ol,De,je,et,Le.rowExpandable,J,Qe,Ke,Ct,Q,we]);return C.createElement(F.Provider,{value:V0},g0)}var Xd=C.forwardRef(lu);function wf(i){return $s(Xd,i)}var dl=wf();dl.EXPAND_COLUMN=yr,dl.INTERNAL_HOOKS=ro,dl.Column=Ac,dl.ColumnGroup=ws,dl.Summary=br;var cu=dl,yl=k(87718),dc=po(null),uu=po(null);function qf(i,n,c){var u=n||1;return c[i+u]-(c[i]||0)}function Rc(i){var n=i.rowInfo,c=i.column,u=i.colIndex,h=i.indent,m=i.index,v=i.component,y=i.renderIndex,S=i.record,b=i.style,T=i.className,w=i.inverse,A=i.getHeight,I=c.render,P=c.dataIndex,B=c.className,L=c.width,z=da(uu,["columnsOffset"]),Z=z.columnsOffset,W=Ys(n,c,u,h,m),J=W.key,ue=W.fixedInfo,we=W.appendCellNode,ie=W.additionalCellProps,ge=ie.style,Me=ie.colSpan,de=Me===void 0?1:Me,re=ie.rowSpan,ve=re===void 0?1:re,Oe=u-1,le=qf(Oe,de,Z),Q=de>1?L-le:0,me=(0,D.Z)((0,D.Z)((0,D.Z)({},ge),b),{},{flex:"0 0 ".concat(le,"px"),width:"".concat(le,"px"),marginRight:Q,pointerEvents:"auto"}),Ce=C.useMemo(function(){return w?ve<=1:de===0||ve===0||ve>1},[ve,de,w]);Ce?me.visibility="hidden":w&&(me.height=A==null?void 0:A(ve));var tt=Ce?function(){return null}:I,$e={};return(ve===0||de===0)&&($e.rowSpan=1,$e.colSpan=1),C.createElement(gi,(0,Di.Z)({className:st()(B,T),ellipsis:c.ellipsis,align:c.align,scope:c.rowScope,component:v,prefixCls:n.prefixCls,key:J,record:S,index:m,renderIndex:y,dataIndex:P,render:tt,shouldCellUpdate:c.shouldCellUpdate},ue,{appendNode:we,additionalProps:(0,D.Z)((0,D.Z)({},ie),{},{style:me},$e)}))}var ys=Rc,Af=["data","index","className","rowKey","style","extra","getHeight"],ka=C.forwardRef(function(i,n){var c=i.data,u=i.index,h=i.className,m=i.rowKey,v=i.style,y=i.extra,S=i.getHeight,b=(0,dn.Z)(i,Af),T=c.record,w=c.indent,A=c.index,I=da(F,["prefixCls","flattenColumns","fixColumn","componentWidth","scrollX"]),P=I.scrollX,B=I.flattenColumns,L=I.prefixCls,z=I.fixColumn,Z=I.componentWidth,W=da(dc,["getComponent"]),J=W.getComponent,ue=Cc(T,m,u,w),we=J(["body","row"],"div"),ie=J(["body","cell"],"div"),ge=ue.rowSupportExpand,Me=ue.expanded,de=ue.rowProps,re=ue.expandedRowRender,ve=ue.expandedRowClassName,Oe;if(ge&&Me){var le=re(T,u,w+1,Me),Q=Ca(ve,T,u,w),me={};z&&(me={style:(0,j.Z)({},"--virtual-width","".concat(Z,"px"))});var Ce="".concat(L,"-expanded-row-cell");Oe=C.createElement(we,{className:st()("".concat(L,"-expanded-row"),"".concat(L,"-expanded-row-level-").concat(w+1),Q)},C.createElement(gi,{component:ie,prefixCls:L,className:st()(Ce,(0,j.Z)({},"".concat(Ce,"-fixed"),z)),additionalProps:me},le))}var tt=(0,D.Z)((0,D.Z)({},v),{},{width:P});y&&(tt.position="absolute",tt.pointerEvents="none");var $e=C.createElement(we,(0,Di.Z)({},de,b,{"data-row-key":m,ref:ge?null:n,className:st()(h,"".concat(L,"-row"),de==null?void 0:de.className,(0,j.Z)({},"".concat(L,"-row-extra"),y)),style:(0,D.Z)((0,D.Z)({},tt),de==null?void 0:de.style)}),B.map(function(Qe,ft){return C.createElement(ys,{key:ft,component:ie,rowInfo:ue,column:Qe,colIndex:ft,indent:w,index:u,renderIndex:A,record:T,inverse:y,getHeight:S})}));return ge?C.createElement("div",{ref:n},$e,Oe):$e}),Vl=Lo(ka),xs=Vl,xl=C.forwardRef(function(i,n){var c=i.data,u=i.onScroll,h=da(F,["flattenColumns","onColumnResize","getRowKey","prefixCls","expandedKeys","childrenColumnName","scrollX","direction"]),m=h.flattenColumns,v=h.onColumnResize,y=h.getRowKey,S=h.expandedKeys,b=h.prefixCls,T=h.childrenColumnName,w=h.scrollX,A=h.direction,I=da(dc),P=I.sticky,B=I.scrollY,L=I.listItemHeight,z=I.getComponent,Z=I.onScroll,W=C.useRef(),J=Fl(c,T,S,y),ue=C.useMemo(function(){var Oe=0;return m.map(function(le){var Q=le.width,me=le.minWidth,Ce=le.key,tt=Math.max(Q||0,me||0);return Oe+=tt,[Ce,tt,Oe]})},[m]),we=C.useMemo(function(){return ue.map(function(Oe){return Oe[2]})},[ue]);C.useEffect(function(){ue.forEach(function(Oe){var le=(0,Ue.Z)(Oe,2),Q=le[0],me=le[1];v(Q,me)})},[ue]),C.useImperativeHandle(n,function(){var Oe,le={scrollTo:function(me){var Ce;(Ce=W.current)===null||Ce===void 0||Ce.scrollTo(me)},nativeElement:(Oe=W.current)===null||Oe===void 0?void 0:Oe.nativeElement};return Object.defineProperty(le,"scrollLeft",{get:function(){var me;return((me=W.current)===null||me===void 0?void 0:me.getScrollInfo().x)||0},set:function(me){var Ce;(Ce=W.current)===null||Ce===void 0||Ce.scrollTo({left:me})}}),Object.defineProperty(le,"scrollTop",{get:function(){var me;return((me=W.current)===null||me===void 0?void 0:me.getScrollInfo().y)||0},set:function(me){var Ce;(Ce=W.current)===null||Ce===void 0||Ce.scrollTo({top:me})}}),le});var ie=function(le,Q){var me,Ce=(me=J[Q])===null||me===void 0?void 0:me.record,tt=le.onCell;if(tt){var $e,Qe=tt(Ce,Q);return($e=Qe==null?void 0:Qe.rowSpan)!==null&&$e!==void 0?$e:1}return 1},ge=function(le){var Q=le.start,me=le.end,Ce=le.getSize,tt=le.offsetY;if(me<0)return null;for(var $e=m.filter(function(Ke){return ie(Ke,Q)===0}),Qe=Q,ft=function(Fe){if($e=$e.filter(function(Ct){return ie(Ct,Fe)===0}),!$e.length)return Qe=Fe,1},Dt=Q;Dt>=0&&!ft(Dt);Dt-=1);for(var at=m.filter(function(Ke){return ie(Ke,me)!==1}),De=me,je=function(Fe){if(at=at.filter(function(Ct){return ie(Ct,Fe)!==1}),!at.length)return De=Math.max(Fe-1,me),1},et=me;et<J.length&&!je(et);et+=1);for(var Re=[],be=function(Fe){var Ct=J[Fe];if(!Ct)return 1;m.some(function(ke){return ie(ke,Fe)>1})&&Re.push(Fe)},Le=Qe;Le<=De;Le+=1)be(Le);var Je=Re.map(function(Ke){var Fe=J[Ke],Ct=y(Fe.record,Ke),ke=function(Qt){var ht=Ke+Qt-1,Ft=y(J[ht].record,ht),In=Ce(Ct,Ft);return In.bottom-In.top},Bt=Ce(Ct);return C.createElement(xs,{key:Ke,data:Fe,rowKey:Ct,index:Ke,style:{top:-tt+Bt.top},extra:!0,getHeight:ke})});return Je},Me=C.useMemo(function(){return{columnsOffset:we}},[we]),de="".concat(b,"-tbody"),re=z(["body","wrapper"]),ve={};return P&&(ve.position="sticky",ve.bottom=0,(0,mn.Z)(P)==="object"&&P.offsetScroll&&(ve.bottom=P.offsetScroll)),C.createElement(uu.Provider,{value:Me},C.createElement(yl.Z,{fullHeight:!1,ref:W,prefixCls:"".concat(de,"-virtual"),styles:{horizontalScrollBar:ve},className:de,height:B,itemHeight:L||24,data:J,itemKey:function(le){return y(le.record)},component:re,scrollWidth:w,direction:A,onVirtualScroll:function(le){var Q,me=le.x;u({currentTarget:(Q=W.current)===null||Q===void 0?void 0:Q.nativeElement,scrollLeft:me})},onScroll:Z,extraRender:ge},function(Oe,le,Q){var me=y(Oe.record,le);return C.createElement(xs,{data:Oe,rowKey:me,index:le,style:Q.style})}))}),Gl=Lo(xl),$d=Gl,kl=function(n,c){var u=c.ref,h=c.onScroll;return C.createElement($d,{ref:u,data:n,onScroll:h})};function Qs(i,n){var c=i.data,u=i.columns,h=i.scroll,m=i.sticky,v=i.prefixCls,y=v===void 0?ce:v,S=i.className,b=i.listItemHeight,T=i.components,w=i.onScroll,A=h||{},I=A.x,P=A.y;typeof I!="number"&&(I=1),typeof P!="number"&&(P=500);var B=(0,ki.zX)(function(Z,W){return(0,Yt.Z)(T,Z)||W}),L=(0,ki.zX)(w),z=C.useMemo(function(){return{sticky:m,scrollY:P,listItemHeight:b,getComponent:B,onScroll:L}},[m,P,b,B,L]);return C.createElement(dc.Provider,{value:z},C.createElement(cu,(0,Di.Z)({},i,{className:st()(S,"".concat(y,"-virtual")),scroll:(0,D.Z)((0,D.Z)({},h),{},{x:I}),components:(0,D.Z)((0,D.Z)({},T),{},{body:c!=null&&c.length?kl:void 0}),columns:u,internalHooks:ro,tailor:!0,ref:n})))}var Rf=C.forwardRef(Qs);function rc(i){return $s(Rf,i)}var oo=rc(),so=null,du=i=>null,If=i=>null,Sl=k(80882),fd=k(10225),Uo=k(17341),As=k(1089);function Ds(i){const[n,c]=(0,C.useState)(null);return[(0,C.useCallback)((m,v,y)=>{const S=n!=null?n:m,b=Math.min(S||0,m),T=Math.max(S||0,m),w=v.slice(b,T+1).map(P=>i(P)),A=w.some(P=>!y.has(P)),I=[];return w.forEach(P=>{A?(y.has(P)||I.push(P),y.add(P)):(y.delete(P),I.push(P))}),c(A?T:null),I},[n]),m=>{c(m)}]}var Pc=k(27288),el=k(84567),Ro=k(85418),fc=k(78045);const Ia={},bl="SELECT_ALL",_l="SELECT_INVERT",hc="SELECT_NONE",Ou=[],tl=(i,n,c=[])=>((n||[]).forEach(u=>{c.push(u),u&&typeof u=="object"&&i in u&&tl(i,u[i],c)}),c);var Du=(i,n)=>{const{preserveSelectedRowKeys:c,selectedRowKeys:u,defaultSelectedRowKeys:h,getCheckboxProps:m,getTitleCheckboxProps:v,onChange:y,onSelect:S,onSelectAll:b,onSelectInvert:T,onSelectNone:w,onSelectMultiple:A,columnWidth:I,type:P,selections:B,fixed:L,renderCell:z,hideSelectAll:Z,checkStrictly:W=!0}=n||{},{prefixCls:J,data:ue,pageData:we,getRecordByKey:ie,getRowKey:ge,expandType:Me,childrenColumnName:de,locale:re,getPopupContainer:ve}=i,Oe=(0,Pc.ln)("Table"),[le,Q]=Ds(Fe=>Fe),[me,Ce]=(0,ln.Z)(u||h||Ou,{value:u}),tt=C.useRef(new Map),$e=(0,C.useCallback)(Fe=>{if(c){const Ct=new Map;Fe.forEach(ke=>{let Bt=ie(ke);!Bt&&tt.current.has(ke)&&(Bt=tt.current.get(ke)),Ct.set(ke,Bt)}),tt.current=Ct}},[ie,c]);C.useEffect(()=>{$e(me)},[me]);const Qe=(0,C.useMemo)(()=>tl(de,we),[de,we]),{keyEntities:ft}=(0,C.useMemo)(()=>{if(W)return{keyEntities:null};let Fe=ue;if(c){const Ct=new Set(Qe.map((Bt,bn)=>ge(Bt,bn))),ke=Array.from(tt.current).reduce((Bt,[bn,Qt])=>Ct.has(bn)?Bt:Bt.concat(Qt),[]);Fe=[].concat((0,en.Z)(Fe),(0,en.Z)(ke))}return(0,As.I8)(Fe,{externalGetKey:ge,childrenPropName:de})},[ue,ge,W,de,c,Qe]),Dt=(0,C.useMemo)(()=>{const Fe=new Map;return Qe.forEach((Ct,ke)=>{const Bt=ge(Ct,ke),bn=(m?m(Ct):null)||{};Fe.set(Bt,bn)}),Fe},[Qe,ge,m]),at=(0,C.useCallback)(Fe=>{const Ct=ge(Fe);let ke;return Dt.has(Ct)?ke=Dt.get(ge(Fe)):ke=m?m(Fe):void 0,!!(ke!=null&&ke.disabled)},[Dt,ge]),[De,je]=(0,C.useMemo)(()=>{if(W)return[me||[],[]];const{checkedKeys:Fe,halfCheckedKeys:Ct}=(0,Uo.S)(me,!0,ft,at);return[Fe||[],Ct]},[me,W,ft,at]),et=(0,C.useMemo)(()=>{const Fe=P==="radio"?De.slice(0,1):De;return new Set(Fe)},[De,P]),Re=(0,C.useMemo)(()=>P==="radio"?new Set:new Set(je),[je,P]);C.useEffect(()=>{n||Ce(Ou)},[!!n]);const be=(0,C.useCallback)((Fe,Ct)=>{let ke,Bt;$e(Fe),c?(ke=Fe,Bt=Fe.map(bn=>tt.current.get(bn))):(ke=[],Bt=[],Fe.forEach(bn=>{const Qt=ie(bn);Qt!==void 0&&(ke.push(bn),Bt.push(Qt))})),Ce(ke),y==null||y(ke,Bt,{type:Ct})},[Ce,ie,y,c]),Le=(0,C.useCallback)((Fe,Ct,ke,Bt)=>{if(S){const bn=ke.map(Qt=>ie(Qt));S(ie(Fe),Ct,bn,Bt)}be(ke,"single")},[S,ie,be]),Je=(0,C.useMemo)(()=>!B||Z?null:(B===!0?[bl,_l,hc]:B).map(Ct=>Ct===bl?{key:"all",text:re.selectionAll,onSelect(){be(ue.map((ke,Bt)=>ge(ke,Bt)).filter(ke=>{const Bt=Dt.get(ke);return!(Bt!=null&&Bt.disabled)||et.has(ke)}),"all")}}:Ct===_l?{key:"invert",text:re.selectInvert,onSelect(){const ke=new Set(et);we.forEach((bn,Qt)=>{const ht=ge(bn,Qt),Ft=Dt.get(ht);Ft!=null&&Ft.disabled||(ke.has(ht)?ke.delete(ht):ke.add(ht))});const Bt=Array.from(ke);T&&(Oe.deprecated(!1,"onSelectInvert","onChange"),T(Bt)),be(Bt,"invert")}}:Ct===hc?{key:"none",text:re.selectNone,onSelect(){w==null||w(),be(Array.from(et).filter(ke=>{const Bt=Dt.get(ke);return Bt==null?void 0:Bt.disabled}),"none")}}:Ct).map(Ct=>Object.assign(Object.assign({},Ct),{onSelect:(...ke)=>{var Bt,bn;(bn=Ct.onSelect)===null||bn===void 0||(Bt=bn).call.apply(Bt,[Ct].concat(ke)),Q(null)}})),[B,et,we,ge,T,be]);return[(0,C.useCallback)(Fe=>{var Ct;if(!n)return Fe.filter($r=>$r!==Ia);let ke=(0,en.Z)(Fe);const Bt=new Set(et),bn=Qe.map(ge).filter($r=>!Dt.get($r).disabled),Qt=bn.every($r=>Bt.has($r)),ht=bn.some($r=>Bt.has($r)),Ft=()=>{const $r=[];Qt?bn.forEach(Xa=>{Bt.delete(Xa),$r.push(Xa)}):bn.forEach(Xa=>{Bt.has(Xa)||(Bt.add(Xa),$r.push(Xa))});const ja=Array.from(Bt);b==null||b(!Qt,ja.map(Xa=>ie(Xa)),$r.map(Xa=>ie(Xa))),be(ja,"all"),Q(null)};let In,vt;if(P!=="radio"){let $r;if(Je){const tr={getPopupContainer:ve,items:Je.map((zo,or)=>{const{key:No,text:xi,onSelect:sl}=zo;return{key:No!=null?No:or,onClick:()=>{sl==null||sl(bn)},label:xi}})};$r=C.createElement("div",{className:`${J}-selection-extra`},C.createElement(Ro.Z,{menu:tr,getPopupContainer:ve},C.createElement("span",null,C.createElement(Sl.Z,null))))}const ja=Qe.map((tr,zo)=>{const or=ge(tr,zo),No=Dt.get(or)||{};return Object.assign({checked:Bt.has(or)},No)}).filter(({disabled:tr})=>tr),Xa=!!ja.length&&ja.length===Qe.length,go=Xa&&ja.every(({checked:tr})=>tr),Eo=Xa&&ja.some(({checked:tr})=>tr),oa=(v==null?void 0:v())||{},{onChange:xa,disabled:wi}=oa;vt=C.createElement(el.Z,Object.assign({"aria-label":$r?"Custom selection":"Select all"},oa,{checked:Xa?go:!!Qe.length&&Qt,indeterminate:Xa?!go&&Eo:!Qt&&ht,onChange:tr=>{Ft(),xa==null||xa(tr)},disabled:wi!=null?wi:Qe.length===0||Xa,skipGroup:!0})),In=!Z&&C.createElement("div",{className:`${J}-selection`},vt,$r)}let On;P==="radio"?On=($r,ja,Xa)=>{const go=ge(ja,Xa),Eo=Bt.has(go),oa=Dt.get(go);return{node:C.createElement(fc.ZP,Object.assign({},oa,{checked:Eo,onClick:xa=>{var wi;xa.stopPropagation(),(wi=oa==null?void 0:oa.onClick)===null||wi===void 0||wi.call(oa,xa)},onChange:xa=>{var wi;Bt.has(go)||Le(go,!0,[go],xa.nativeEvent),(wi=oa==null?void 0:oa.onChange)===null||wi===void 0||wi.call(oa,xa)}})),checked:Eo}}:On=($r,ja,Xa)=>{var go;const Eo=ge(ja,Xa),oa=Bt.has(Eo),xa=Re.has(Eo),wi=Dt.get(Eo);let tr;return Me==="nest"?tr=xa:tr=(go=wi==null?void 0:wi.indeterminate)!==null&&go!==void 0?go:xa,{node:C.createElement(el.Z,Object.assign({},wi,{indeterminate:tr,checked:oa,skipGroup:!0,onClick:zo=>{var or;zo.stopPropagation(),(or=wi==null?void 0:wi.onClick)===null||or===void 0||or.call(wi,zo)},onChange:zo=>{var or;const{nativeEvent:No}=zo,{shiftKey:xi}=No,sl=bn.indexOf(Eo),eu=De.some(Nl=>bn.includes(Nl));if(xi&&W&&eu){const Nl=le(sl,bn,Bt),Ol=Array.from(Bt);A==null||A(!oa,Ol.map(ll=>ie(ll)),Nl.map(ll=>ie(ll))),be(Ol,"multiple")}else{const Nl=De;if(W){const Ol=oa?(0,fd._5)(Nl,Eo):(0,fd.L0)(Nl,Eo);Le(Eo,!oa,Ol,No)}else{const Ol=(0,Uo.S)([].concat((0,en.Z)(Nl),[Eo]),!0,ft,at),{checkedKeys:ll,halfCheckedKeys:Dl}=Ol;let nc=ll;if(oa){const as=new Set(ll);as.delete(Eo),nc=(0,Uo.S)(Array.from(as),{checked:!1,halfCheckedKeys:Dl},ft,at).checkedKeys}Le(Eo,!oa,nc,No)}}Q(oa?null:sl),(or=wi==null?void 0:wi.onChange)===null||or===void 0||or.call(wi,zo)}})),checked:oa}};const _n=($r,ja,Xa)=>{const{node:go,checked:Eo}=On($r,ja,Xa);return z?z(Eo,ja,Xa,go):go};if(!ke.includes(Ia))if(ke.findIndex($r=>{var ja;return((ja=$r[ul])===null||ja===void 0?void 0:ja.columnType)==="EXPAND_COLUMN"})===0){const[$r,...ja]=ke;ke=[$r,Ia].concat((0,en.Z)(ja))}else ke=[Ia].concat((0,en.Z)(ke));const Wi=ke.indexOf(Ia);ke=ke.filter(($r,ja)=>$r!==Ia||ja===Wi);const ji=ke[Wi-1],za=ke[Wi+1];let ea=L;ea===void 0&&((za==null?void 0:za.fixed)!==void 0?ea=za.fixed:(ji==null?void 0:ji.fixed)!==void 0&&(ea=ji.fixed)),ea&&ji&&((Ct=ji[ul])===null||Ct===void 0?void 0:Ct.columnType)==="EXPAND_COLUMN"&&ji.fixed===void 0&&(ji.fixed=ea);const Xs=st()(`${J}-selection-col`,{[`${J}-selection-col-with-dropdown`]:B&&P==="checkbox"}),ol=()=>n!=null&&n.columnTitle?typeof n.columnTitle=="function"?n.columnTitle(vt):n.columnTitle:In,Ua={fixed:ea,width:I,className:`${J}-selection-column`,title:ol(),render:_n,onCell:n.onCell,align:n.align,[ul]:{className:Xs}};return ke.map($r=>$r===Ia?Ua:$r)},[ge,Qe,n,De,et,Re,I,Je,Me,Dt,A,Le,at]),et]};function hu(i,n){return i._antProxy=i._antProxy||{},Object.keys(n).forEach(c=>{if(!(c in i._antProxy)){const u=i[c];i._antProxy[c]=u,i[c]=n[c]}}),i}function pu(i,n){return(0,C.useImperativeHandle)(i,()=>{const c=n(),{nativeElement:u}=c;return typeof Proxy!="undefined"?new Proxy(u,{get(h,m){return c[m]?c[m]:Reflect.get(h,m)}}):hu(u,c)})}function Lu(i,n,c,u){const h=c-n;return i/=u/2,i<1?h/2*i*i*i+n:h/2*((i-=2)*i*i+2)+n}function Io(i){return i!=null&&i===i.window}var Uu=i=>{var n,c;if(typeof window=="undefined")return 0;let u=0;return Io(i)?u=i.pageYOffset:i instanceof Document?u=i.documentElement.scrollTop:(i instanceof HTMLElement||i)&&(u=i.scrollTop),i&&!Io(i)&&typeof u!="number"&&(u=(c=((n=i.ownerDocument)!==null&&n!==void 0?n:i).documentElement)===null||c===void 0?void 0:c.scrollTop),u};function mu(i,n={}){const{getContainer:c=()=>window,callback:u,duration:h=450}=n,m=c(),v=Uu(m),y=Date.now(),S=()=>{const T=Date.now()-y,w=Lu(T>h?h:T,v,i,h);Io(m)?m.scrollTo(window.pageXOffset,w):m instanceof Document||m.constructor.name==="HTMLDocument"?m.documentElement.scrollTop=w:m.scrollTop=w,T<h?(0,Nu.Z)(S):typeof u=="function"&&u()};(0,Nu.Z)(S)}var pc=k(88258),Kd=k(35792),hd=k(98675),Bu=k(84611),Oc=k(74330),Ui=k(29691);function oc(i){return n=>{const{prefixCls:c,onExpand:u,record:h,expanded:m,expandable:v}=n,y=`${c}-row-expand-icon`;return C.createElement("button",{type:"button",onClick:S=>{u(h,S),S.stopPropagation()},className:st()(y,{[`${y}-spaced`]:!v,[`${y}-expanded`]:v&&m,[`${y}-collapsed`]:v&&!m}),"aria-label":m?i.collapse:i.expand,"aria-expanded":m})}}var fl=oc;function Pf(i){return(c,u)=>{const h=c.querySelector(`.${i}-container`);let m=u;if(h){const v=getComputedStyle(h),y=Number.parseInt(v.borderLeftWidth,10),S=Number.parseInt(v.borderRightWidth,10);m=u-y-S}return m}}const mc=(i,n)=>"key"in i&&i.key!==void 0&&i.key!==null?i.key:i.dataIndex?Array.isArray(i.dataIndex)?i.dataIndex.join("."):i.dataIndex:n;function Ls(i,n){return n?`${n}-${i}`:`${i}`}const Us=(i,n)=>typeof i=="function"?i(n):i,Bs=(i,n)=>{const c=Us(i,n);return Object.prototype.toString.call(c)==="[object Object]"?"":c};var Ta={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},pd=Ta,bo=k(84089),Wl=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:pd}))},Jf=C.forwardRef(Wl),Nf=Jf,Dc=k(38780),sc=k(57838);function g(i){const n=C.useRef(i),c=(0,sc.Z)();return[()=>n.current,u=>{n.current=u,c()}]}var R=k(32983),_=k(50136),U=k(76529),q=k(70593),$=k(26911),fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},ae=fe,rt=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:ae}))},ze=C.forwardRef(rt),ut=ze,Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},Ie=Se,He=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:Ie}))},At=C.forwardRef(He),Pe=At,ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},V=ee,ct=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:V}))},Ye=C.forwardRef(ct),Ee=Ye,bt=k(33603),qe=k(40561);const yt=4;function kt(i){const{dropPosition:n,dropLevelOffset:c,prefixCls:u,indent:h,direction:m="ltr"}=i,v=m==="ltr"?"left":"right",y=m==="ltr"?"right":"left",S={[v]:-c*h+yt,[y]:0};switch(n){case-1:S.top=-3;break;case 1:S.bottom=-3;break;default:S.bottom=-3,S[v]=h+yt;break}return C.createElement("div",{style:S,className:`${u}-drop-indicator`})}var se=kt,oe=k(23797),Tt=C.forwardRef((i,n)=>{var c;const{getPrefixCls:u,direction:h,virtual:m,tree:v}=C.useContext(Tn.E_),{prefixCls:y,className:S,showIcon:b=!1,showLine:T,switcherIcon:w,switcherLoadingIcon:A,blockNode:I=!1,children:P,checkable:B=!1,selectable:L=!0,draggable:z,motion:Z,style:W}=i,J=u("tree",y),ue=u(),we=Z!=null?Z:Object.assign(Object.assign({},(0,bt.Z)(ue)),{motionAppear:!1}),ie=Object.assign(Object.assign({},i),{checkable:B,selectable:L,showIcon:b,motion:we,blockNode:I,showLine:!!T,dropIndicatorRender:se}),[ge,Me,de]=(0,qe.ZP)(J),[,re]=(0,Ui.ZP)(),ve=re.paddingXS/2+(((c=re.Tree)===null||c===void 0?void 0:c.titleHeight)||re.controlHeightSM),Oe=C.useMemo(()=>{if(!z)return!1;let Q={};switch(typeof z){case"function":Q.nodeDraggable=z;break;case"object":Q=Object.assign({},z);break;default:break}return Q.icon!==!1&&(Q.icon=Q.icon||C.createElement(Ee,null)),Q},[z]),le=Q=>C.createElement(oe.Z,{prefixCls:J,switcherIcon:w,switcherLoadingIcon:A,treeNodeProps:Q,showLine:T});return ge(C.createElement(q.ZP,Object.assign({itemHeight:ve,ref:n,virtual:m},ie,{style:Object.assign(Object.assign({},v==null?void 0:v.style),W),prefixCls:J,className:st()({[`${J}-icon-hide`]:!b,[`${J}-block-node`]:I,[`${J}-unselectable`]:!L,[`${J}-rtl`]:h==="rtl"},v==null?void 0:v.className,S,Me,de),direction:h,checkable:B&&C.createElement("span",{className:`${J}-checkbox-inner`}),selectable:L,switcherIcon:le,draggable:Oe}),P))});const Jt=0,ot=1,Zt=2;function Lt(i,n,c){const{key:u,children:h}=c;function m(v){const y=v[u],S=v[h];n(y,v)!==!1&&Lt(S||[],n,c)}i.forEach(m)}function vn({treeData:i,expandedKeys:n,startKey:c,endKey:u,fieldNames:h}){const m=[];let v=Jt;if(c&&c===u)return[c];if(!c||!u)return[];function y(S){return S===c||S===u}return Lt(i,S=>{if(v===Zt)return!1;if(y(S)){if(m.push(S),v===Jt)v=ot;else if(v===ot)return v=Zt,!1}else v===ot&&m.push(S);return n.includes(S)},(0,As.w$)(h)),m}function Rt(i,n,c){const u=(0,en.Z)(n),h=[];return Lt(i,(m,v)=>{const y=u.indexOf(m);return y!==-1&&(h.push(v),u.splice(y,1)),!!u.length},(0,As.w$)(c)),h}var ei=function(i,n){var c={};for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&n.indexOf(u)<0&&(c[u]=i[u]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(i);h<u.length;h++)n.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(i,u[h])&&(c[u[h]]=i[u[h]]);return c};function Bi(i){const{isLeaf:n,expanded:c}=i;return n?C.createElement($.Z,null):c?C.createElement(ut,null):C.createElement(Pe,null)}function sn({treeData:i,children:n}){return i||(0,As.zn)(n)}const Zr=(i,n)=>{var{defaultExpandAll:c,defaultExpandParent:u,defaultExpandedKeys:h}=i,m=ei(i,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const v=C.useRef(null),y=C.useRef(null),S=()=>{const{keyEntities:ge}=(0,As.I8)(sn(m));let Me;return c?Me=Object.keys(ge):u?Me=(0,fd.r7)(m.expandedKeys||h||[],ge):Me=m.expandedKeys||h||[],Me},[b,T]=C.useState(m.selectedKeys||m.defaultSelectedKeys||[]),[w,A]=C.useState(()=>S());C.useEffect(()=>{"selectedKeys"in m&&T(m.selectedKeys)},[m.selectedKeys]),C.useEffect(()=>{"expandedKeys"in m&&A(m.expandedKeys)},[m.expandedKeys]);const I=(ge,Me)=>{var de;return"expandedKeys"in m||A(ge),(de=m.onExpand)===null||de===void 0?void 0:de.call(m,ge,Me)},P=(ge,Me)=>{var de;const{multiple:re,fieldNames:ve}=m,{node:Oe,nativeEvent:le}=Me,{key:Q=""}=Oe,me=sn(m),Ce=Object.assign(Object.assign({},Me),{selected:!0}),tt=(le==null?void 0:le.ctrlKey)||(le==null?void 0:le.metaKey),$e=le==null?void 0:le.shiftKey;let Qe;re&&tt?(Qe=ge,v.current=Q,y.current=Qe,Ce.selectedNodes=Rt(me,Qe,ve)):re&&$e?(Qe=Array.from(new Set([].concat((0,en.Z)(y.current||[]),(0,en.Z)(vn({treeData:me,expandedKeys:w,startKey:Q,endKey:v.current,fieldNames:ve}))))),Ce.selectedNodes=Rt(me,Qe,ve)):(Qe=[Q],v.current=Q,y.current=Qe,Ce.selectedNodes=Rt(me,Qe,ve)),(de=m.onSelect)===null||de===void 0||de.call(m,Qe,Ce),"selectedKeys"in m||T(Qe)},{getPrefixCls:B,direction:L}=C.useContext(Tn.E_),{prefixCls:z,className:Z,showIcon:W=!0,expandAction:J="click"}=m,ue=ei(m,["prefixCls","className","showIcon","expandAction"]),we=B("tree",z),ie=st()(`${we}-directory`,{[`${we}-directory-rtl`]:L==="rtl"},Z);return C.createElement(Tt,Object.assign({icon:Bi,ref:n,blockNode:!0},ue,{showIcon:W,expandAction:J,prefixCls:we,className:ie,expandedKeys:w,selectedKeys:b,onSelect:P,onExpand:I}))};var ar=C.forwardRef(Zr);const Gr=Tt;Gr.DirectoryTree=ar,Gr.TreeNode=q.OF;var Vt=Gr,Pt=k(68795),si=k(82586),yi=i=>{const{value:n,filterSearch:c,tablePrefixCls:u,locale:h,onChange:m}=i;return c?C.createElement("div",{className:`${u}-filter-dropdown-search`},C.createElement(si.Z,{prefix:C.createElement(Pt.Z,null),placeholder:h.filterSearchPlaceholder,onChange:m,value:n,htmlSize:1,className:`${u}-filter-dropdown-search-input`})):null},kr=k(15105);const ds=i=>{const{keyCode:n}=i;n===kr.Z.ENTER&&i.stopPropagation()};var Ja=C.forwardRef((i,n)=>C.createElement("div",{className:i.className,onClick:c=>c.stopPropagation(),onKeyDown:ds,ref:n},i.children));function Fi(i){let n=[];return(i||[]).forEach(({value:c,children:u})=>{n.push(c),u&&(n=[].concat((0,en.Z)(n),(0,en.Z)(Fi(u))))}),n}function Wt(i){return i.some(({children:n})=>n)}function ai(i,n){return typeof n=="string"||typeof n=="number"?n==null?void 0:n.toString().toLowerCase().includes(i.trim().toLowerCase()):!1}function Dr({filters:i,prefixCls:n,filteredKeys:c,filterMultiple:u,searchValue:h,filterSearch:m}){return i.map((v,y)=>{const S=String(v.value);if(v.children)return{key:S||y,label:v.text,popupClassName:`${n}-dropdown-submenu`,children:Dr({filters:v.children,prefixCls:n,filteredKeys:c,filterMultiple:u,searchValue:h,filterSearch:m})};const b=u?el.Z:fc.ZP,T={key:v.value!==void 0?S:y,label:C.createElement(C.Fragment,null,C.createElement(b,{checked:c.includes(S)}),C.createElement("span",null,v.text))};return h.trim()?typeof m=="function"?m(h,v)?T:null:ai(h,v.text)?T:null:T})}function oi(i){return i||[]}var ha=i=>{var n,c,u,h;const{tablePrefixCls:m,prefixCls:v,column:y,dropdownPrefixCls:S,columnKey:b,filterOnClose:T,filterMultiple:w,filterMode:A="menu",filterSearch:I=!1,filterState:P,triggerFilter:B,locale:L,children:z,getPopupContainer:Z,rootClassName:W}=i,{filterResetToDefaultFilteredValue:J,defaultFilteredValue:ue,filterDropdownProps:we={},filterDropdownOpen:ie,filterDropdownVisible:ge,onFilterDropdownVisibleChange:Me,onFilterDropdownOpenChange:de}=y,[re,ve]=C.useState(!1),Oe=!!(P&&(!((n=P.filteredKeys)===null||n===void 0)&&n.length||P.forceFiltered)),le=vt=>{var On;ve(vt),(On=we.onOpenChange)===null||On===void 0||On.call(we,vt),de==null||de(vt),Me==null||Me(vt)},Q=(h=(u=(c=we.open)!==null&&c!==void 0?c:ie)!==null&&u!==void 0?u:ge)!==null&&h!==void 0?h:re,me=P==null?void 0:P.filteredKeys,[Ce,tt]=g(oi(me)),$e=({selectedKeys:vt})=>{tt(vt)},Qe=(vt,{node:On,checked:_n})=>{$e(w?{selectedKeys:vt}:{selectedKeys:_n&&On.key?[On.key]:[]})};C.useEffect(()=>{re&&$e({selectedKeys:oi(me)})},[me]);const[ft,Dt]=C.useState([]),at=vt=>{Dt(vt)},[De,je]=C.useState(""),et=vt=>{const{value:On}=vt.target;je(On)};C.useEffect(()=>{re||je("")},[re]);const Re=vt=>{const On=vt!=null&&vt.length?vt:null;if(On===null&&(!P||!P.filteredKeys)||(0,Go.Z)(On,P==null?void 0:P.filteredKeys,!0))return null;B({column:y,key:b,filteredKeys:On})},be=()=>{le(!1),Re(Ce())},Le=({confirm:vt,closeDropdown:On}={confirm:!1,closeDropdown:!1})=>{vt&&Re([]),On&&le(!1),je(""),tt(J?(ue||[]).map(_n=>String(_n)):[])},Je=({closeDropdown:vt}={closeDropdown:!0})=>{vt&&le(!1),Re(Ce())},Ke=(vt,On)=>{On.source==="trigger"&&(vt&&me!==void 0&&tt(oi(me)),le(vt),!vt&&!y.filterDropdown&&T&&be())},Fe=st()({[`${S}-menu-without-submenu`]:!Wt(y.filters||[])}),Ct=vt=>{if(vt.target.checked){const On=Fi(y==null?void 0:y.filters).map(_n=>String(_n));tt(On)}else tt([])},ke=({filters:vt})=>(vt||[]).map((On,_n)=>{const Wi=String(On.value),ji={title:On.text,key:On.value!==void 0?Wi:String(_n)};return On.children&&(ji.children=ke({filters:On.children})),ji}),Bt=vt=>{var On;return Object.assign(Object.assign({},vt),{text:vt.title,value:vt.key,children:((On=vt.children)===null||On===void 0?void 0:On.map(_n=>Bt(_n)))||[]})};let bn;const{direction:Qt,renderEmpty:ht}=C.useContext(Tn.E_);if(typeof y.filterDropdown=="function")bn=y.filterDropdown({prefixCls:`${S}-custom`,setSelectedKeys:vt=>$e({selectedKeys:vt}),selectedKeys:Ce(),confirm:Je,clearFilters:Le,filters:y.filters,visible:Q,close:()=>{le(!1)}});else if(y.filterDropdown)bn=y.filterDropdown;else{const vt=Ce()||[],On=()=>{var Wi,ji;const za=(Wi=ht==null?void 0:ht("Table.filter"))!==null&&Wi!==void 0?Wi:C.createElement(R.Z,{image:R.Z.PRESENTED_IMAGE_SIMPLE,description:L.filterEmptyText,styles:{image:{height:24}},style:{margin:0,padding:"16px 0"}});if((y.filters||[]).length===0)return za;if(A==="tree")return C.createElement(C.Fragment,null,C.createElement(yi,{filterSearch:I,value:De,onChange:et,tablePrefixCls:m,locale:L}),C.createElement("div",{className:`${m}-filter-dropdown-tree`},w?C.createElement(el.Z,{checked:vt.length===Fi(y.filters).length,indeterminate:vt.length>0&&vt.length<Fi(y.filters).length,className:`${m}-filter-dropdown-checkall`,onChange:Ct},(ji=L==null?void 0:L.filterCheckall)!==null&&ji!==void 0?ji:L==null?void 0:L.filterCheckAll):null,C.createElement(Vt,{checkable:!0,selectable:!1,blockNode:!0,multiple:w,checkStrictly:!w,className:`${S}-menu`,onCheck:Qe,checkedKeys:vt,selectedKeys:vt,showIcon:!1,treeData:ke({filters:y.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:De.trim()?ol=>typeof I=="function"?I(De,Bt(ol)):ai(De,ol.title):void 0})));const ea=Dr({filters:y.filters||[],filterSearch:I,prefixCls:v,filteredKeys:Ce(),filterMultiple:w,searchValue:De}),Xs=ea.every(ol=>ol===null);return C.createElement(C.Fragment,null,C.createElement(yi,{filterSearch:I,value:De,onChange:et,tablePrefixCls:m,locale:L}),Xs?za:C.createElement(_.Z,{selectable:!0,multiple:w,prefixCls:`${S}-menu`,className:Fe,onSelect:$e,onDeselect:$e,selectedKeys:vt,getPopupContainer:Z,openKeys:ft,onOpenChange:at,items:ea}))},_n=()=>J?(0,Go.Z)((ue||[]).map(Wi=>String(Wi)),vt,!0):vt.length===0;bn=C.createElement(C.Fragment,null,On(),C.createElement("div",{className:`${v}-dropdown-btns`},C.createElement(Gi.ZP,{type:"link",size:"small",disabled:_n(),onClick:()=>Le()},L.filterReset),C.createElement(Gi.ZP,{type:"primary",size:"small",onClick:be},L.filterConfirm)))}y.filterDropdown&&(bn=C.createElement(U.J,{selectable:void 0},bn)),bn=C.createElement(Ja,{className:`${v}-dropdown`},bn);const Ft=()=>{let vt;return typeof y.filterIcon=="function"?vt=y.filterIcon(Oe):y.filterIcon?vt=y.filterIcon:vt=C.createElement(Nf,null),C.createElement("span",{role:"button",tabIndex:-1,className:st()(`${v}-trigger`,{active:Oe}),onClick:On=>{On.stopPropagation()}},vt)},In=(0,Dc.Z)({trigger:["click"],placement:Qt==="rtl"?"bottomLeft":"bottomRight",children:Ft(),getPopupContainer:Z},Object.assign(Object.assign({},we),{rootClassName:st()(W,we.rootClassName),open:Q,onOpenChange:Ke,popupRender:()=>typeof(we==null?void 0:we.dropdownRender)=="function"?we.dropdownRender(bn):bn}));return C.createElement("div",{className:`${v}-column`},C.createElement("span",{className:`${m}-column-title`},z),C.createElement(Ro.Z,Object.assign({},In)))};const Wr=(i,n,c)=>{let u=[];return(i||[]).forEach((h,m)=>{var v;const y=Ls(m,c),S=h.filterDropdown!==void 0;if(h.filters||S||"onFilter"in h)if("filteredValue"in h){let b=h.filteredValue;S||(b=(v=b==null?void 0:b.map(String))!==null&&v!==void 0?v:b),u.push({column:h,key:mc(h,y),filteredKeys:b,forceFiltered:h.filtered})}else u.push({column:h,key:mc(h,y),filteredKeys:n&&h.defaultFilteredValue?h.defaultFilteredValue:void 0,forceFiltered:h.filtered});"children"in h&&(u=[].concat((0,en.Z)(u),(0,en.Z)(Wr(h.children,n,y))))}),u};function te(i,n,c,u,h,m,v,y,S){return c.map((b,T)=>{const w=Ls(T,y),{filterOnClose:A=!0,filterMultiple:I=!0,filterMode:P,filterSearch:B}=b;let L=b;if(L.filters||L.filterDropdown){const z=mc(L,w),Z=u.find(({key:W})=>z===W);L=Object.assign(Object.assign({},L),{title:W=>C.createElement(ha,{tablePrefixCls:i,prefixCls:`${i}-filter`,dropdownPrefixCls:n,column:L,columnKey:z,filterState:Z,filterOnClose:A,filterMultiple:I,filterMode:P,filterSearch:B,triggerFilter:m,locale:h,getPopupContainer:v,rootClassName:S},Us(b.title,W))})}return"children"in L&&(L=Object.assign(Object.assign({},L),{children:te(i,n,L.children,u,h,m,v,w,S)})),L})}const H=i=>{const n={};return i.forEach(({key:c,filteredKeys:u,column:h})=>{const m=c,{filters:v,filterDropdown:y}=h;if(y)n[m]=u||null;else if(Array.isArray(u)){const S=Fi(v);n[m]=S.filter(b=>u.includes(String(b)))}else n[m]=null}),n},We=(i,n,c)=>n.reduce((h,m)=>{const{column:{onFilter:v,filters:y},filteredKeys:S}=m;return v&&S&&S.length?h.map(b=>Object.assign({},b)).filter(b=>S.some(T=>{const w=Fi(y),A=w.findIndex(P=>String(P)===String(T)),I=A!==-1?w[A]:T;return b[c]&&(b[c]=We(b[c],n,c)),v(I,b)})):h},i),wt=i=>i.flatMap(n=>"children"in n?[n].concat((0,en.Z)(wt(n.children||[]))):[n]);var gt=i=>{const{prefixCls:n,dropdownPrefixCls:c,mergedColumns:u,onFilterChange:h,getPopupContainer:m,locale:v,rootClassName:y}=i,S=(0,Pc.ln)("Table"),b=C.useMemo(()=>wt(u||[]),[u]),[T,w]=C.useState(()=>Wr(b,!0)),A=C.useMemo(()=>{const L=Wr(b,!1);if(L.length===0)return L;let z=!0,Z=!0;if(L.forEach(({filteredKeys:W})=>{W!==void 0?z=!1:Z=!1}),z){const W=(b||[]).map((J,ue)=>mc(J,Ls(ue)));return T.filter(({key:J})=>W.includes(J)).map(J=>{const ue=b[W.indexOf(J.key)];return Object.assign(Object.assign({},J),{column:Object.assign(Object.assign({},J.column),ue),forceFiltered:ue.filtered})})}return L},[b,T]),I=C.useMemo(()=>H(A),[A]),P=L=>{const z=A.filter(({key:Z})=>Z!==L.key);z.push(L),w(z),h(H(z),z)};return[L=>te(n,c,L,A,v,P,m,void 0,y),A,I]},ti=function(i,n){var c={};for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&n.indexOf(u)<0&&(c[u]=i[u]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(i);h<u.length;h++)n.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(i,u[h])&&(c[u[h]]=i[u[h]]);return c};const Cn=10;function ci(i,n){const c={current:i.current,pageSize:i.pageSize};return Object.keys(n&&typeof n=="object"?n:{}).forEach(h=>{const m=i[h];typeof m!="function"&&(c[h]=m)}),c}function fi(i,n,c){const u=c&&typeof c=="object"?c:{},{total:h=0}=u,m=ti(u,["total"]),[v,y]=(0,C.useState)(()=>({current:"defaultCurrent"in m?m.defaultCurrent:1,pageSize:"defaultPageSize"in m?m.defaultPageSize:Cn})),S=(0,Dc.Z)(v,m,{total:h>0?h:i}),b=Math.ceil((h||i)/S.pageSize);S.current>b&&(S.current=b||1);const T=(A,I)=>{y({current:A!=null?A:1,pageSize:I||S.pageSize})},w=(A,I)=>{var P;c&&((P=c.onChange)===null||P===void 0||P.call(c,A,I)),T(A,I),n(A,I||(S==null?void 0:S.pageSize))};return c===!1?[{},()=>{}]:[Object.assign(Object.assign({},S),{onChange:w}),T]}var gn=fi,Vn=k(39398),Ii=k(10010),Un=k(83062);const Fn="ascend",Pi="descend",_e=i=>typeof i.sorter=="object"&&typeof i.sorter.multiple=="number"?i.sorter.multiple:!1,pn=i=>typeof i=="function"?i:i&&typeof i=="object"&&i.compare?i.compare:!1,Nn=(i,n)=>n?i[i.indexOf(n)+1]:i[0],ni=(i,n,c)=>{let u=[];const h=(m,v)=>{u.push({column:m,key:mc(m,v),multiplePriority:_e(m),sortOrder:m.sortOrder})};return(i||[]).forEach((m,v)=>{const y=Ls(v,c);m.children?("sortOrder"in m&&h(m,y),u=[].concat((0,en.Z)(u),(0,en.Z)(ni(m.children,n,y)))):m.sorter&&("sortOrder"in m?h(m,y):n&&m.defaultSortOrder&&u.push({column:m,key:mc(m,y),multiplePriority:_e(m),sortOrder:m.defaultSortOrder}))}),u},cn=(i,n,c,u,h,m,v,y)=>(n||[]).map((b,T)=>{const w=Ls(T,y);let A=b;if(A.sorter){const I=A.sortDirections||h,P=A.showSorterTooltip===void 0?v:A.showSorterTooltip,B=mc(A,w),L=c.find(({key:Me})=>Me===B),z=L?L.sortOrder:null,Z=Nn(I,z);let W;if(b.sortIcon)W=b.sortIcon({sortOrder:z});else{const Me=I.includes(Fn)&&C.createElement(Ii.Z,{className:st()(`${i}-column-sorter-up`,{active:z===Fn})}),de=I.includes(Pi)&&C.createElement(Vn.Z,{className:st()(`${i}-column-sorter-down`,{active:z===Pi})});W=C.createElement("span",{className:st()(`${i}-column-sorter`,{[`${i}-column-sorter-full`]:!!(Me&&de)})},C.createElement("span",{className:`${i}-column-sorter-inner`,"aria-hidden":"true"},Me,de))}const{cancelSort:J,triggerAsc:ue,triggerDesc:we}=m||{};let ie=J;Z===Pi?ie=we:Z===Fn&&(ie=ue);const ge=typeof P=="object"?Object.assign({title:ie},P):{title:ie};A=Object.assign(Object.assign({},A),{className:st()(A.className,{[`${i}-column-sort`]:z}),title:Me=>{const de=`${i}-column-sorters`,re=C.createElement("span",{className:`${i}-column-title`},Us(b.title,Me)),ve=C.createElement("div",{className:de},re,W);return P?typeof P!="boolean"&&(P==null?void 0:P.target)==="sorter-icon"?C.createElement("div",{className:`${de} ${i}-column-sorters-tooltip-target-sorter`},re,C.createElement(Un.Z,Object.assign({},ge),W)):C.createElement(Un.Z,Object.assign({},ge),ve):ve},onHeaderCell:Me=>{var de;const re=((de=b.onHeaderCell)===null||de===void 0?void 0:de.call(b,Me))||{},ve=re.onClick,Oe=re.onKeyDown;re.onClick=me=>{u({column:b,key:B,sortOrder:Z,multiplePriority:_e(b)}),ve==null||ve(me)},re.onKeyDown=me=>{me.keyCode===kr.Z.ENTER&&(u({column:b,key:B,sortOrder:Z,multiplePriority:_e(b)}),Oe==null||Oe(me))};const le=Bs(b.title,{}),Q=le==null?void 0:le.toString();return z&&(re["aria-sort"]=z==="ascend"?"ascending":"descending"),re["aria-label"]=Q||"",re.className=st()(re.className,`${i}-column-has-sorters`),re.tabIndex=0,b.ellipsis&&(re.title=(le!=null?le:"").toString()),re}})}return"children"in A&&(A=Object.assign(Object.assign({},A),{children:cn(i,A.children,c,u,h,m,v,w)})),A}),$t=i=>{const{column:n,sortOrder:c}=i;return{column:n,order:c,field:n.dataIndex,columnKey:n.key}},ui=i=>{const n=i.filter(({sortOrder:c})=>c).map($t);if(n.length===0&&i.length){const c=i.length-1;return Object.assign(Object.assign({},$t(i[c])),{column:void 0,order:void 0,field:void 0,columnKey:void 0})}return n.length<=1?n[0]||{}:n},Ji=(i,n,c)=>{const u=n.slice().sort((v,y)=>y.multiplePriority-v.multiplePriority),h=i.slice(),m=u.filter(({column:{sorter:v},sortOrder:y})=>pn(v)&&y);return m.length?h.sort((v,y)=>{for(let S=0;S<m.length;S+=1){const b=m[S],{column:{sorter:T},sortOrder:w}=b,A=pn(T);if(A&&w){const I=A(v,y,w);if(I!==0)return w===Fn?I:-I}}return 0}).map(v=>{const y=v[c];return y?Object.assign(Object.assign({},v),{[c]:Ji(y,n,c)}):v}):h};var ia=i=>{const{prefixCls:n,mergedColumns:c,sortDirections:u,tableLocale:h,showSorterTooltip:m,onSorterChange:v}=i,[y,S]=C.useState(()=>ni(c,!0)),b=(B,L)=>{const z=[];return B.forEach((Z,W)=>{const J=Ls(W,L);if(z.push(mc(Z,J)),Array.isArray(Z.children)){const ue=b(Z.children,J);z.push.apply(z,(0,en.Z)(ue))}}),z},T=C.useMemo(()=>{let B=!0;const L=ni(c,!1);if(!L.length){const J=b(c);return y.filter(({key:ue})=>J.includes(ue))}const z=[];function Z(J){B?z.push(J):z.push(Object.assign(Object.assign({},J),{sortOrder:null}))}let W=null;return L.forEach(J=>{W===null?(Z(J),J.sortOrder&&(J.multiplePriority===!1?B=!1:W=!0)):(W&&J.multiplePriority!==!1||(B=!1),Z(J))}),z},[c,y]),w=C.useMemo(()=>{var B,L;const z=T.map(({column:Z,sortOrder:W})=>({column:Z,order:W}));return{sortColumns:z,sortColumn:(B=z[0])===null||B===void 0?void 0:B.column,sortOrder:(L=z[0])===null||L===void 0?void 0:L.order}},[T]),A=B=>{let L;B.multiplePriority===!1||!T.length||T[0].multiplePriority===!1?L=[B]:L=[].concat((0,en.Z)(T.filter(({key:z})=>z!==B.key)),[B]),S(L),v(ui(L),L)};return[B=>cn(n,B,T,A,u,h,m),T,w,()=>ui(T)]};const fs=(i,n)=>i.map(u=>{const h=Object.assign({},u);return h.title=Us(u.title,n),"children"in h&&(h.children=fs(h.children,n)),h});var Yd=i=>[C.useCallback(c=>fs(c,i),[i])],vc=wf((i,n)=>{const{_renderTimes:c}=i,{_renderTimes:u}=n;return c!==u}),qd=rc((i,n)=>{const{_renderTimes:c}=i,{_renderTimes:u}=n;return c!==u}),Ml=k(15063),gu=k(14747),lc=k(83262),Jd=i=>{const{componentCls:n,lineWidth:c,lineType:u,tableBorderColor:h,tableHeaderBg:m,tablePaddingVertical:v,tablePaddingHorizontal:y,calc:S}=i,b=`${(0,jt.bf)(c)} ${u} ${h}`,T=(w,A,I)=>({[`&${n}-${w}`]:{[`> ${n}-container`]:{[`> ${n}-content, > ${n}-body`]:{"\n            > table > tbody > tr > th,\n            > table > tbody > tr > td\n          ":{[`> ${n}-expanded-row-fixed`]:{margin:`${(0,jt.bf)(S(A).mul(-1).equal())}
              ${(0,jt.bf)(S(S(I).add(c)).mul(-1).equal())}`}}}}}});return{[`${n}-wrapper`]:{[`${n}${n}-bordered`]:Object.assign(Object.assign(Object.assign({[`> ${n}-title`]:{border:b,borderBottom:0},[`> ${n}-container`]:{borderInlineStart:b,borderTop:b,[`
            > ${n}-content,
            > ${n}-header,
            > ${n}-body,
            > ${n}-summary
          `]:{"> table":{"\n                > thead > tr > th,\n                > thead > tr > td,\n                > tbody > tr > th,\n                > tbody > tr > td,\n                > tfoot > tr > th,\n                > tfoot > tr > td\n              ":{borderInlineEnd:b},"> thead":{"> tr:not(:last-child) > th":{borderBottom:b},"> tr > th::before":{backgroundColor:"transparent !important"}},"\n                > thead > tr,\n                > tbody > tr,\n                > tfoot > tr\n              ":{[`> ${n}-cell-fix-right-first::after`]:{borderInlineEnd:b}},"\n                > tbody > tr > th,\n                > tbody > tr > td\n              ":{[`> ${n}-expanded-row-fixed`]:{margin:`${(0,jt.bf)(S(v).mul(-1).equal())} ${(0,jt.bf)(S(S(y).add(c)).mul(-1).equal())}`,"&::after":{position:"absolute",top:0,insetInlineEnd:c,bottom:0,borderInlineEnd:b,content:'""'}}}}}},[`&${n}-scroll-horizontal`]:{[`> ${n}-container > ${n}-body`]:{"> table > tbody":{[`
                > tr${n}-expanded-row,
                > tr${n}-placeholder
              `]:{"> th, > td":{borderInlineEnd:0}}}}}},T("middle",i.tablePaddingVerticalMiddle,i.tablePaddingHorizontalMiddle)),T("small",i.tablePaddingVerticalSmall,i.tablePaddingHorizontalSmall)),{[`> ${n}-footer`]:{border:b,borderTop:0}}),[`${n}-cell`]:{[`${n}-container:first-child`]:{borderTop:0},"&-scrollbar:not([rowspan])":{boxShadow:`0 ${(0,jt.bf)(c)} 0 ${(0,jt.bf)(c)} ${m}`}},[`${n}-bordered ${n}-cell-scrollbar`]:{borderInlineEnd:b}}}},md=i=>{const{componentCls:n}=i;return{[`${n}-wrapper`]:{[`${n}-cell-ellipsis`]:Object.assign(Object.assign({},gu.vS),{wordBreak:"keep-all",[`
          &${n}-cell-fix-left-last,
          &${n}-cell-fix-right-first
        `]:{overflow:"visible",[`${n}-cell-content`]:{display:"block",overflow:"hidden",textOverflow:"ellipsis"}},[`${n}-column-title`]:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"keep-all"}})}}},vd=i=>{const{componentCls:n}=i;return{[`${n}-wrapper`]:{[`${n}-tbody > tr${n}-placeholder`]:{textAlign:"center",color:i.colorTextDisabled,"\n          &:hover > th,\n          &:hover > td,\n        ":{background:i.colorBgContainer}}}}},Lc=i=>{const{componentCls:n,antCls:c,motionDurationSlow:u,lineWidth:h,paddingXS:m,lineType:v,tableBorderColor:y,tableExpandIconBg:S,tableExpandColumnWidth:b,borderRadius:T,tablePaddingVertical:w,tablePaddingHorizontal:A,tableExpandedRowBg:I,paddingXXS:P,expandIconMarginTop:B,expandIconSize:L,expandIconHalfInner:z,expandIconScale:Z,calc:W}=i,J=`${(0,jt.bf)(h)} ${v} ${y}`,ue=W(P).sub(h).equal();return{[`${n}-wrapper`]:{[`${n}-expand-icon-col`]:{width:b},[`${n}-row-expand-icon-cell`]:{textAlign:"center",[`${n}-row-expand-icon`]:{display:"inline-flex",float:"none",verticalAlign:"sub"}},[`${n}-row-indent`]:{height:1,float:"left"},[`${n}-row-expand-icon`]:Object.assign(Object.assign({},(0,gu.Nd)(i)),{position:"relative",float:"left",width:L,height:L,color:"inherit",lineHeight:(0,jt.bf)(L),background:S,border:J,borderRadius:T,transform:`scale(${Z})`,"&:focus, &:hover, &:active":{borderColor:"currentcolor"},"&::before, &::after":{position:"absolute",background:"currentcolor",transition:`transform ${u} ease-out`,content:'""'},"&::before":{top:z,insetInlineEnd:ue,insetInlineStart:ue,height:h},"&::after":{top:ue,bottom:ue,insetInlineStart:z,width:h,transform:"rotate(90deg)"},"&-collapsed::before":{transform:"rotate(-180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"},"&-spaced":{"&::before, &::after":{display:"none",content:"none"},background:"transparent",border:0,visibility:"hidden"}}),[`${n}-row-indent + ${n}-row-expand-icon`]:{marginTop:B,marginInlineEnd:m},[`tr${n}-expanded-row`]:{"&, &:hover":{"> th, > td":{background:I}},[`${c}-descriptions-view`]:{display:"flex",table:{flex:"auto",width:"100%"}}},[`${n}-expanded-row-fixed`]:{position:"relative",margin:`${(0,jt.bf)(W(w).mul(-1).equal())} ${(0,jt.bf)(W(A).mul(-1).equal())}`,padding:`${(0,jt.bf)(w)} ${(0,jt.bf)(A)}`}}}},Be=i=>{const{componentCls:n,antCls:c,iconCls:u,tableFilterDropdownWidth:h,tableFilterDropdownSearchWidth:m,paddingXXS:v,paddingXS:y,colorText:S,lineWidth:b,lineType:T,tableBorderColor:w,headerIconColor:A,fontSizeSM:I,tablePaddingHorizontal:P,borderRadius:B,motionDurationSlow:L,colorIcon:z,colorPrimary:Z,tableHeaderFilterActiveBg:W,colorTextDisabled:J,tableFilterDropdownBg:ue,tableFilterDropdownHeight:we,controlItemBgHover:ie,controlItemBgActive:ge,boxShadowSecondary:Me,filterDropdownMenuBg:de,calc:re}=i,ve=`${c}-dropdown`,Oe=`${n}-filter-dropdown`,le=`${c}-tree`,Q=`${(0,jt.bf)(b)} ${T} ${w}`;return[{[`${n}-wrapper`]:{[`${n}-filter-column`]:{display:"flex",justifyContent:"space-between"},[`${n}-filter-trigger`]:{position:"relative",display:"flex",alignItems:"center",marginBlock:re(v).mul(-1).equal(),marginInline:`${(0,jt.bf)(v)} ${(0,jt.bf)(re(P).div(2).mul(-1).equal())}`,padding:`0 ${(0,jt.bf)(v)}`,color:A,fontSize:I,borderRadius:B,cursor:"pointer",transition:`all ${L}`,"&:hover":{color:z,background:W},"&.active":{color:Z}}}},{[`${c}-dropdown`]:{[Oe]:Object.assign(Object.assign({},(0,gu.Wf)(i)),{minWidth:h,backgroundColor:ue,borderRadius:B,boxShadow:Me,overflow:"hidden",[`${ve}-menu`]:{maxHeight:we,overflowX:"hidden",border:0,boxShadow:"none",borderRadius:"unset",backgroundColor:de,"&:empty::after":{display:"block",padding:`${(0,jt.bf)(y)} 0`,color:J,fontSize:I,textAlign:"center",content:'"Not Found"'}},[`${Oe}-tree`]:{paddingBlock:`${(0,jt.bf)(y)} 0`,paddingInline:y,[le]:{padding:0},[`${le}-treenode ${le}-node-content-wrapper:hover`]:{backgroundColor:ie},[`${le}-treenode-checkbox-checked ${le}-node-content-wrapper`]:{"&, &:hover":{backgroundColor:ge}}},[`${Oe}-search`]:{padding:y,borderBottom:Q,"&-input":{input:{minWidth:m},[u]:{color:J}}},[`${Oe}-checkall`]:{width:"100%",marginBottom:v,marginInlineStart:v},[`${Oe}-btns`]:{display:"flex",justifyContent:"space-between",padding:`${(0,jt.bf)(re(y).sub(b).equal())} ${(0,jt.bf)(y)}`,overflow:"hidden",borderTop:Q}})}},{[`${c}-dropdown ${Oe}, ${Oe}-submenu`]:{[`${c}-checkbox-wrapper + span`]:{paddingInlineStart:y,color:S},"> ul":{maxHeight:"calc(100vh - 130px)",overflowX:"hidden",overflowY:"auto"}}}]},dt=i=>{const{componentCls:n,lineWidth:c,colorSplit:u,motionDurationSlow:h,zIndexTableFixed:m,tableBg:v,zIndexTableSticky:y,calc:S}=i,b=u;return{[`${n}-wrapper`]:{[`
        ${n}-cell-fix-left,
        ${n}-cell-fix-right
      `]:{position:"sticky !important",zIndex:m,background:v},[`
        ${n}-cell-fix-left-first::after,
        ${n}-cell-fix-left-last::after
      `]:{position:"absolute",top:0,right:{_skip_check_:!0,value:0},bottom:S(c).mul(-1).equal(),width:30,transform:"translateX(100%)",transition:`box-shadow ${h}`,content:'""',pointerEvents:"none",willChange:"transform"},[`${n}-cell-fix-left-all::after`]:{display:"none"},[`
        ${n}-cell-fix-right-first::after,
        ${n}-cell-fix-right-last::after
      `]:{position:"absolute",top:0,bottom:S(c).mul(-1).equal(),left:{_skip_check_:!0,value:0},width:30,transform:"translateX(-100%)",transition:`box-shadow ${h}`,content:'""',pointerEvents:"none"},[`${n}-container`]:{position:"relative","&::before, &::after":{position:"absolute",top:0,bottom:0,zIndex:S(y).add(1).equal({unit:!1}),width:30,transition:`box-shadow ${h}`,content:'""',pointerEvents:"none"},"&::before":{insetInlineStart:0},"&::after":{insetInlineEnd:0}},[`${n}-ping-left`]:{[`&:not(${n}-has-fix-left) ${n}-container::before`]:{boxShadow:`inset 10px 0 8px -8px ${b}`},[`
          ${n}-cell-fix-left-first::after,
          ${n}-cell-fix-left-last::after
        `]:{boxShadow:`inset 10px 0 8px -8px ${b}`},[`${n}-cell-fix-left-last::before`]:{backgroundColor:"transparent !important"}},[`${n}-ping-right`]:{[`&:not(${n}-has-fix-right) ${n}-container::after`]:{boxShadow:`inset -10px 0 8px -8px ${b}`},[`
          ${n}-cell-fix-right-first::after,
          ${n}-cell-fix-right-last::after
        `]:{boxShadow:`inset -10px 0 8px -8px ${b}`}},[`${n}-fixed-column-gapped`]:{[`
        ${n}-cell-fix-left-first::after,
        ${n}-cell-fix-left-last::after,
        ${n}-cell-fix-right-first::after,
        ${n}-cell-fix-right-last::after
      `]:{boxShadow:"none"}}}}},un=i=>{const{componentCls:n,antCls:c,margin:u}=i;return{[`${n}-wrapper ${n}-pagination${c}-pagination`]:{margin:`${(0,jt.bf)(u)} 0`}}},ri=i=>{const{componentCls:n,tableRadius:c}=i;return{[`${n}-wrapper`]:{[n]:{[`${n}-title, ${n}-header`]:{borderRadius:`${(0,jt.bf)(c)} ${(0,jt.bf)(c)} 0 0`},[`${n}-title + ${n}-container`]:{borderStartStartRadius:0,borderStartEndRadius:0,[`${n}-header, table`]:{borderRadius:0},"table > thead > tr:first-child":{"th:first-child, th:last-child, td:first-child, td:last-child":{borderRadius:0}}},"&-container":{borderStartStartRadius:c,borderStartEndRadius:c,"table > thead > tr:first-child":{"> *:first-child":{borderStartStartRadius:c},"> *:last-child":{borderStartEndRadius:c}}},"&-footer":{borderRadius:`0 0 ${(0,jt.bf)(c)} ${(0,jt.bf)(c)}`}}}}},Mi=i=>{const{componentCls:n}=i;return{[`${n}-wrapper-rtl`]:{direction:"rtl",table:{direction:"rtl"},[`${n}-pagination-left`]:{justifyContent:"flex-end"},[`${n}-pagination-right`]:{justifyContent:"flex-start"},[`${n}-row-expand-icon`]:{float:"right","&::after":{transform:"rotate(-90deg)"},"&-collapsed::before":{transform:"rotate(180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"}},[`${n}-container`]:{"&::before":{insetInlineStart:"unset",insetInlineEnd:0},"&::after":{insetInlineStart:0,insetInlineEnd:"unset"},[`${n}-row-indent`]:{float:"right"}}}}},Si=i=>{const{componentCls:n,antCls:c,iconCls:u,fontSizeIcon:h,padding:m,paddingXS:v,headerIconColor:y,headerIconHoverColor:S,tableSelectionColumnWidth:b,tableSelectedRowBg:T,tableSelectedRowHoverBg:w,tableRowHoverBg:A,tablePaddingHorizontal:I,calc:P}=i;return{[`${n}-wrapper`]:{[`${n}-selection-col`]:{width:b,[`&${n}-selection-col-with-dropdown`]:{width:P(b).add(h).add(P(m).div(4)).equal()}},[`${n}-bordered ${n}-selection-col`]:{width:P(b).add(P(v).mul(2)).equal(),[`&${n}-selection-col-with-dropdown`]:{width:P(b).add(h).add(P(m).div(4)).add(P(v).mul(2)).equal()}},[`
        table tr th${n}-selection-column,
        table tr td${n}-selection-column,
        ${n}-selection-column
      `]:{paddingInlineEnd:i.paddingXS,paddingInlineStart:i.paddingXS,textAlign:"center",[`${c}-radio-wrapper`]:{marginInlineEnd:0}},[`table tr th${n}-selection-column${n}-cell-fix-left`]:{zIndex:P(i.zIndexTableFixed).add(1).equal({unit:!1})},[`table tr th${n}-selection-column::after`]:{backgroundColor:"transparent !important"},[`${n}-selection`]:{position:"relative",display:"inline-flex",flexDirection:"column"},[`${n}-selection-extra`]:{position:"absolute",top:0,zIndex:1,cursor:"pointer",transition:`all ${i.motionDurationSlow}`,marginInlineStart:"100%",paddingInlineStart:(0,jt.bf)(P(I).div(4).equal()),[u]:{color:y,fontSize:h,verticalAlign:"baseline","&:hover":{color:S}}},[`${n}-tbody`]:{[`${n}-row`]:{[`&${n}-row-selected`]:{[`> ${n}-cell`]:{background:T,"&-row-hover":{background:w}}},[`> ${n}-cell-row-hover`]:{background:A}}}}}},wa=i=>{const{componentCls:n,tableExpandColumnWidth:c,calc:u}=i,h=(m,v,y,S)=>({[`${n}${n}-${m}`]:{fontSize:S,[`
        ${n}-title,
        ${n}-footer,
        ${n}-cell,
        ${n}-thead > tr > th,
        ${n}-tbody > tr > th,
        ${n}-tbody > tr > td,
        tfoot > tr > th,
        tfoot > tr > td
      `]:{padding:`${(0,jt.bf)(v)} ${(0,jt.bf)(y)}`},[`${n}-filter-trigger`]:{marginInlineEnd:(0,jt.bf)(u(y).div(2).mul(-1).equal())},[`${n}-expanded-row-fixed`]:{margin:`${(0,jt.bf)(u(v).mul(-1).equal())} ${(0,jt.bf)(u(y).mul(-1).equal())}`},[`${n}-tbody`]:{[`${n}-wrapper:only-child ${n}`]:{marginBlock:(0,jt.bf)(u(v).mul(-1).equal()),marginInline:`${(0,jt.bf)(u(c).sub(y).equal())} ${(0,jt.bf)(u(y).mul(-1).equal())}`}},[`${n}-selection-extra`]:{paddingInlineStart:(0,jt.bf)(u(y).div(4).equal())}}});return{[`${n}-wrapper`]:Object.assign(Object.assign({},h("middle",i.tablePaddingVerticalMiddle,i.tablePaddingHorizontalMiddle,i.tableFontSizeMiddle)),h("small",i.tablePaddingVerticalSmall,i.tablePaddingHorizontalSmall,i.tableFontSizeSmall))}},Da=i=>{const{componentCls:n,marginXXS:c,fontSizeIcon:u,headerIconColor:h,headerIconHoverColor:m}=i;return{[`${n}-wrapper`]:{[`${n}-thead th${n}-column-has-sorters`]:{outline:"none",cursor:"pointer",transition:`all ${i.motionDurationSlow}, left 0s`,"&:hover":{background:i.tableHeaderSortHoverBg,"&::before":{backgroundColor:"transparent !important"}},"&:focus-visible":{color:i.colorPrimary},[`
          &${n}-cell-fix-left:hover,
          &${n}-cell-fix-right:hover
        `]:{background:i.tableFixedHeaderSortActiveBg}},[`${n}-thead th${n}-column-sort`]:{background:i.tableHeaderSortBg,"&::before":{backgroundColor:"transparent !important"}},[`td${n}-column-sort`]:{background:i.tableBodySortBg},[`${n}-column-title`]:{position:"relative",zIndex:1,flex:1,minWidth:0},[`${n}-column-sorters`]:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between","&::after":{position:"absolute",inset:0,width:"100%",height:"100%",content:'""'}},[`${n}-column-sorters-tooltip-target-sorter`]:{"&::after":{content:"none"}},[`${n}-column-sorter`]:{marginInlineStart:c,color:h,fontSize:0,transition:`color ${i.motionDurationSlow}`,"&-inner":{display:"inline-flex",flexDirection:"column",alignItems:"center"},"&-up, &-down":{fontSize:u,"&.active":{color:i.colorPrimary}},[`${n}-column-sorter-up + ${n}-column-sorter-down`]:{marginTop:"-0.3em"}},[`${n}-column-sorters:hover ${n}-column-sorter`]:{color:m}}}},Ti=i=>{const{componentCls:n,opacityLoading:c,tableScrollThumbBg:u,tableScrollThumbBgHover:h,tableScrollThumbSize:m,tableScrollBg:v,zIndexTableSticky:y,stickyScrollBarBorderRadius:S,lineWidth:b,lineType:T,tableBorderColor:w}=i,A=`${(0,jt.bf)(b)} ${T} ${w}`;return{[`${n}-wrapper`]:{[`${n}-sticky`]:{"&-holder":{position:"sticky",zIndex:y,background:i.colorBgContainer},"&-scroll":{position:"sticky",bottom:0,height:`${(0,jt.bf)(m)} !important`,zIndex:y,display:"flex",alignItems:"center",background:v,borderTop:A,opacity:c,"&:hover":{transformOrigin:"center bottom"},"&-bar":{height:m,backgroundColor:u,borderRadius:S,transition:`all ${i.motionDurationSlow}, transform 0s`,position:"absolute",bottom:0,"&:hover, &-active":{backgroundColor:h}}}}}}},Qr=i=>{const{componentCls:n,lineWidth:c,tableBorderColor:u,calc:h}=i,m=`${(0,jt.bf)(c)} ${i.lineType} ${u}`;return{[`${n}-wrapper`]:{[`${n}-summary`]:{position:"relative",zIndex:i.zIndexTableFixed,background:i.tableBg,"> tr":{"> th, > td":{borderBottom:m}}},[`div${n}-summary`]:{boxShadow:`0 ${(0,jt.bf)(h(c).mul(-1).equal())} 0 ${u}`}}}},Uc=i=>{const{componentCls:n,motionDurationMid:c,lineWidth:u,lineType:h,tableBorderColor:m,calc:v}=i,y=`${(0,jt.bf)(u)} ${h} ${m}`,S=`${n}-expanded-row-cell`;return{[`${n}-wrapper`]:{[`${n}-tbody-virtual`]:{[`${n}-tbody-virtual-holder-inner`]:{[`
            & > ${n}-row, 
            & > div:not(${n}-row) > ${n}-row
          `]:{display:"flex",boxSizing:"border-box",width:"100%"}},[`${n}-cell`]:{borderBottom:y,transition:`background ${c}`},[`${n}-expanded-row`]:{[`${S}${S}-fixed`]:{position:"sticky",insetInlineStart:0,overflow:"hidden",width:`calc(var(--virtual-width) - ${(0,jt.bf)(u)})`,borderInlineEnd:"none"}}},[`${n}-bordered`]:{[`${n}-tbody-virtual`]:{"&:after":{content:'""',insetInline:0,bottom:0,borderBottom:y,position:"absolute"},[`${n}-cell`]:{borderInlineEnd:y,[`&${n}-cell-fix-right-first:before`]:{content:'""',position:"absolute",insetBlock:0,insetInlineStart:v(u).mul(-1).equal(),borderInlineStart:y}}},[`&${n}-virtual`]:{[`${n}-placeholder ${n}-cell`]:{borderInlineEnd:y,borderBottom:y}}}}}};const il=i=>{const{componentCls:n,fontWeightStrong:c,tablePaddingVertical:u,tablePaddingHorizontal:h,tableExpandColumnWidth:m,lineWidth:v,lineType:y,tableBorderColor:S,tableFontSize:b,tableBg:T,tableRadius:w,tableHeaderTextColor:A,motionDurationMid:I,tableHeaderBg:P,tableHeaderCellSplitColor:B,tableFooterTextColor:L,tableFooterBg:z,calc:Z}=i,W=`${(0,jt.bf)(v)} ${y} ${S}`;return{[`${n}-wrapper`]:Object.assign(Object.assign({clear:"both",maxWidth:"100%","--rc-virtual-list-scrollbar-bg":i.tableScrollBg},(0,gu.dF)()),{[n]:Object.assign(Object.assign({},(0,gu.Wf)(i)),{fontSize:b,background:T,borderRadius:`${(0,jt.bf)(w)} ${(0,jt.bf)(w)} 0 0`,scrollbarColor:`${i.tableScrollThumbBg} ${i.tableScrollBg}`}),table:{width:"100%",textAlign:"start",borderRadius:`${(0,jt.bf)(w)} ${(0,jt.bf)(w)} 0 0`,borderCollapse:"separate",borderSpacing:0},[`
          ${n}-cell,
          ${n}-thead > tr > th,
          ${n}-tbody > tr > th,
          ${n}-tbody > tr > td,
          tfoot > tr > th,
          tfoot > tr > td
        `]:{position:"relative",padding:`${(0,jt.bf)(u)} ${(0,jt.bf)(h)}`,overflowWrap:"break-word"},[`${n}-title`]:{padding:`${(0,jt.bf)(u)} ${(0,jt.bf)(h)}`},[`${n}-thead`]:{"\n          > tr > th,\n          > tr > td\n        ":{position:"relative",color:A,fontWeight:c,textAlign:"start",background:P,borderBottom:W,transition:`background ${I} ease`,"&[colspan]:not([colspan='1'])":{textAlign:"center"},[`&:not(:last-child):not(${n}-selection-column):not(${n}-row-expand-icon-cell):not([colspan])::before`]:{position:"absolute",top:"50%",insetInlineEnd:0,width:1,height:"1.6em",backgroundColor:B,transform:"translateY(-50%)",transition:`background-color ${I}`,content:'""'}},"> tr:not(:last-child) > th[colspan]":{borderBottom:0}},[`${n}-tbody`]:{"> tr":{"> th, > td":{transition:`background ${I}, border-color ${I}`,borderBottom:W,[`
              > ${n}-wrapper:only-child,
              > ${n}-expanded-row-fixed > ${n}-wrapper:only-child
            `]:{[n]:{marginBlock:(0,jt.bf)(Z(u).mul(-1).equal()),marginInline:`${(0,jt.bf)(Z(m).sub(h).equal())}
                ${(0,jt.bf)(Z(h).mul(-1).equal())}`,[`${n}-tbody > tr:last-child > td`]:{borderBottomWidth:0,"&:first-child, &:last-child":{borderRadius:0}}}}},"> th":{position:"relative",color:A,fontWeight:c,textAlign:"start",background:P,borderBottom:W,transition:`background ${I} ease`},[`& > ${n}-measure-cell`]:{paddingBlock:"0 !important",borderBlock:"0 !important",[`${n}-measure-cell-content`]:{height:0,overflow:"hidden",pointerEvents:"none"}}}},[`${n}-footer`]:{padding:`${(0,jt.bf)(u)} ${(0,jt.bf)(h)}`,color:L,background:z}})}},yu=i=>{const{colorFillAlter:n,colorBgContainer:c,colorTextHeading:u,colorFillSecondary:h,colorFillContent:m,controlItemBgActive:v,controlItemBgActiveHover:y,padding:S,paddingSM:b,paddingXS:T,colorBorderSecondary:w,borderRadiusLG:A,controlHeight:I,colorTextPlaceholder:P,fontSize:B,fontSizeSM:L,lineHeight:z,lineWidth:Z,colorIcon:W,colorIconHover:J,opacityLoading:ue,controlInteractiveSize:we}=i,ie=new Ml.t(h).onBackground(c).toHexString(),ge=new Ml.t(m).onBackground(c).toHexString(),Me=new Ml.t(n).onBackground(c).toHexString(),de=new Ml.t(W),re=new Ml.t(J),ve=we/2-Z,Oe=ve*2+Z*3;return{headerBg:Me,headerColor:u,headerSortActiveBg:ie,headerSortHoverBg:ge,bodySortBg:Me,rowHoverBg:Me,rowSelectedBg:v,rowSelectedHoverBg:y,rowExpandedBg:n,cellPaddingBlock:S,cellPaddingInline:S,cellPaddingBlockMD:b,cellPaddingInlineMD:T,cellPaddingBlockSM:T,cellPaddingInlineSM:T,borderColor:w,headerBorderRadius:A,footerBg:Me,footerColor:u,cellFontSize:B,cellFontSizeMD:B,cellFontSizeSM:B,headerSplitColor:w,fixedHeaderSortActiveBg:ie,headerFilterHoverBg:m,filterDropdownMenuBg:c,filterDropdownBg:c,expandIconBg:c,selectionColumnWidth:I,stickyScrollBarBg:P,stickyScrollBarBorderRadius:100,expandIconMarginTop:(B*z-Z*3)/2-Math.ceil((L*1.4-Z*3)/2),headerIconColor:de.clone().setA(de.a*ue).toRgbString(),headerIconHoverColor:re.clone().setA(re.a*ue).toRgbString(),expandIconHalfInner:ve,expandIconSize:Oe,expandIconScale:we/Oe}},Ba=2;var zs=(0,Va.I$)("Table",i=>{const{colorTextHeading:n,colorSplit:c,colorBgContainer:u,controlInteractiveSize:h,headerBg:m,headerColor:v,headerSortActiveBg:y,headerSortHoverBg:S,bodySortBg:b,rowHoverBg:T,rowSelectedBg:w,rowSelectedHoverBg:A,rowExpandedBg:I,cellPaddingBlock:P,cellPaddingInline:B,cellPaddingBlockMD:L,cellPaddingInlineMD:z,cellPaddingBlockSM:Z,cellPaddingInlineSM:W,borderColor:J,footerBg:ue,footerColor:we,headerBorderRadius:ie,cellFontSize:ge,cellFontSizeMD:Me,cellFontSizeSM:de,headerSplitColor:re,fixedHeaderSortActiveBg:ve,headerFilterHoverBg:Oe,filterDropdownBg:le,expandIconBg:Q,selectionColumnWidth:me,stickyScrollBarBg:Ce,calc:tt}=i,$e=(0,lc.IX)(i,{tableFontSize:ge,tableBg:u,tableRadius:ie,tablePaddingVertical:P,tablePaddingHorizontal:B,tablePaddingVerticalMiddle:L,tablePaddingHorizontalMiddle:z,tablePaddingVerticalSmall:Z,tablePaddingHorizontalSmall:W,tableBorderColor:J,tableHeaderTextColor:v,tableHeaderBg:m,tableFooterTextColor:we,tableFooterBg:ue,tableHeaderCellSplitColor:re,tableHeaderSortBg:y,tableHeaderSortHoverBg:S,tableBodySortBg:b,tableFixedHeaderSortActiveBg:ve,tableHeaderFilterActiveBg:Oe,tableFilterDropdownBg:le,tableRowHoverBg:T,tableSelectedRowBg:w,tableSelectedRowHoverBg:A,zIndexTableFixed:Ba,zIndexTableSticky:tt(Ba).add(1).equal({unit:!1}),tableFontSizeMiddle:Me,tableFontSizeSmall:de,tableSelectionColumnWidth:me,tableExpandIconBg:Q,tableExpandColumnWidth:tt(h).add(tt(i.padding).mul(2)).equal(),tableExpandedRowBg:I,tableFilterDropdownWidth:120,tableFilterDropdownHeight:264,tableFilterDropdownSearchWidth:140,tableScrollThumbSize:8,tableScrollThumbBg:Ce,tableScrollThumbBgHover:n,tableScrollBg:c});return[il($e),un($e),Qr($e),Da($e),Be($e),Jd($e),ri($e),Lc($e),Qr($e),vd($e),Si($e),dt($e),Ti($e),md($e),wa($e),Mi($e),Uc($e)]},yu,{unitless:{expandIconScale:!0}});const Hs=[],qo=(i,n)=>{var c,u;const{prefixCls:h,className:m,rootClassName:v,style:y,size:S,bordered:b,dropdownPrefixCls:T,dataSource:w,pagination:A,rowSelection:I,rowKey:P="key",rowClassName:B,columns:L,children:z,childrenColumnName:Z,onChange:W,getPopupContainer:J,loading:ue,expandIcon:we,expandable:ie,expandedRowRender:ge,expandIconColumnIndex:Me,indentSize:de,scroll:re,sortDirections:ve,locale:Oe,showSorterTooltip:le={target:"full-header"},virtual:Q}=i,me=(0,Pc.ln)("Table"),Ce=C.useMemo(()=>L||wc(z),[L,z]),tt=C.useMemo(()=>Ce.some(Ki=>Ki.responsive),[Ce]),$e=(0,di.Z)(tt),Qe=C.useMemo(()=>{const Ki=new Set(Object.keys($e).filter(zt=>$e[zt]));return Ce.filter(zt=>!zt.responsive||zt.responsive.some(yn=>Ki.has(yn)))},[Ce,$e]),ft=(0,tn.Z)(i,["className","style","columns"]),{locale:Dt=Nr.Z,direction:at,table:De,renderEmpty:je,getPrefixCls:et,getPopupContainer:Re}=C.useContext(Tn.E_),be=(0,hd.Z)(S),Le=Object.assign(Object.assign({},Dt.Table),Oe),Je=w||Hs,Ke=et("table",h),Fe=et("dropdown",T),[,Ct]=(0,Ui.ZP)(),ke=(0,Kd.Z)(Ke),[Bt,bn,Qt]=zs(Ke,ke),ht=Object.assign(Object.assign({childrenColumnName:Z,expandIconColumnIndex:Me},ie),{expandIcon:(c=ie==null?void 0:ie.expandIcon)!==null&&c!==void 0?c:(u=De==null?void 0:De.expandable)===null||u===void 0?void 0:u.expandIcon}),{childrenColumnName:Ft="children"}=ht,In=C.useMemo(()=>Je.some(Ki=>Ki==null?void 0:Ki[Ft])?"nest":ge||ie!=null&&ie.expandedRowRender?"row":null,[Je]),vt={body:C.useRef(null)},On=Pf(Ke),_n=C.useRef(null),Wi=C.useRef(null);pu(n,()=>Object.assign(Object.assign({},Wi.current),{nativeElement:_n.current}));const ji=C.useMemo(()=>typeof P=="function"?P:Ki=>Ki==null?void 0:Ki[P],[P]),[za]=Ae(Je,Ft,ji),ea={},Xs=(Ki,zt,yn=!1)=>{var mi,_r,Oo,Os;const Ho=Object.assign(Object.assign({},ea),Ki);yn&&((mi=ea.resetPagination)===null||mi===void 0||mi.call(ea),!((_r=Ho.pagination)===null||_r===void 0)&&_r.current&&(Ho.pagination.current=1),A&&((Oo=A.onChange)===null||Oo===void 0||Oo.call(A,1,(Os=Ho.pagination)===null||Os===void 0?void 0:Os.pageSize))),re&&re.scrollToFirstRowOnChange!==!1&&vt.body.current&&mu(0,{getContainer:()=>vt.body.current}),W==null||W(Ho.pagination,Ho.filters,Ho.sorter,{currentDataSource:We(Ji(Je,Ho.sorterStates,Ft),Ho.filterStates,Ft),action:zt})},ol=(Ki,zt)=>{Xs({sorter:Ki,sorterStates:zt},"sort",!1)},[Ua,$r,ja,Xa]=ia({prefixCls:Ke,mergedColumns:Qe,onSorterChange:ol,sortDirections:ve||["ascend","descend"],tableLocale:Le,showSorterTooltip:le}),go=C.useMemo(()=>Ji(Je,$r,Ft),[Je,$r]);ea.sorter=Xa(),ea.sorterStates=$r;const Eo=(Ki,zt)=>{Xs({filters:Ki,filterStates:zt},"filter",!0)},[oa,xa,wi]=gt({prefixCls:Ke,locale:Le,dropdownPrefixCls:Fe,mergedColumns:Qe,onFilterChange:Eo,getPopupContainer:J||Re,rootClassName:st()(v,ke)}),tr=We(go,xa,Ft);ea.filters=wi,ea.filterStates=xa;const zo=C.useMemo(()=>{const Ki={};return Object.keys(wi).forEach(zt=>{wi[zt]!==null&&(Ki[zt]=wi[zt])}),Object.assign(Object.assign({},ja),{filters:Ki})},[ja,wi]),[or]=Yd(zo),No=(Ki,zt)=>{Xs({pagination:Object.assign(Object.assign({},ea.pagination),{current:Ki,pageSize:zt})},"paginate")},[xi,sl]=gn(tr.length,No,A);ea.pagination=A===!1?{}:ci(xi,A),ea.resetPagination=sl;const eu=C.useMemo(()=>{if(A===!1||!xi.pageSize)return tr;const{current:Ki=1,total:zt,pageSize:yn=Cn}=xi;return tr.length<zt?tr.length>yn?tr.slice((Ki-1)*yn,Ki*yn):tr:tr.slice((Ki-1)*yn,Ki*yn)},[!!A,tr,xi==null?void 0:xi.current,xi==null?void 0:xi.pageSize,xi==null?void 0:xi.total]),[Nl,Ol]=Du({prefixCls:Ke,data:tr,pageData:eu,getRowKey:ji,getRecordByKey:za,expandType:In,childrenColumnName:Ft,locale:Le,getPopupContainer:J||Re},I),ll=(Ki,zt,yn)=>{let mi;return typeof B=="function"?mi=st()(B(Ki,zt,yn)):mi=st()(B),st()({[`${Ke}-row-selected`]:Ol.has(ji(Ki,zt))},mi)};ht.__PARENT_RENDER_ICON__=ht.expandIcon,ht.expandIcon=ht.expandIcon||we||fl(Le),In==="nest"&&ht.expandIconColumnIndex===void 0?ht.expandIconColumnIndex=I?1:0:ht.expandIconColumnIndex>0&&I&&(ht.expandIconColumnIndex-=1),typeof ht.indentSize!="number"&&(ht.indentSize=typeof de=="number"?de:15);const Dl=C.useCallback(Ki=>or(Nl(oa(Ua(Ki)))),[Ua,oa,Nl]),nc=()=>{if(A===!1||!(xi!=null&&xi.total))return{};const Ki=()=>xi.size||(be==="small"||be==="middle"?"small":void 0),zt=iu=>{const rm=iu==="left"?"start":iu==="right"?"end":iu;return C.createElement(Bu.Z,Object.assign({},xi,{align:xi.align||rm,className:st()(`${Ke}-pagination`,xi.className),size:Ki()}))},yn=at==="rtl"?"left":"right",mi=xi.position;if(mi===null||!Array.isArray(mi))return{bottom:zt(yn)};const _r=mi.find(iu=>typeof iu=="string"&&iu.toLowerCase().includes("top")),Oo=mi.find(iu=>typeof iu=="string"&&iu.toLowerCase().includes("bottom")),Os=mi.every(iu=>`${iu}`=="none"),Ho=_r?_r.toLowerCase().replace("top",""):"",nm=Oo?Oo.toLowerCase().replace("bottom",""):"",im=!_r&&!Oo&&!Os,Zh=()=>Ho?zt(Ho):void 0,Yf=()=>{if(nm)return zt(nm);if(im)return zt(yn)};return{top:Zh(),bottom:Yf()}},as=C.useMemo(()=>typeof ue=="boolean"?{spinning:ue}:typeof ue=="object"&&ue!==null?Object.assign({spinning:!0},ue):void 0,[ue]),yh=st()(Qt,ke,`${Ke}-wrapper`,De==null?void 0:De.className,{[`${Ke}-wrapper-rtl`]:at==="rtl"},m,v,bn),tu=Object.assign(Object.assign({},De==null?void 0:De.style),y),nu=C.useMemo(()=>as!=null&&as.spinning&&Je===Hs?null:typeof(Oe==null?void 0:Oe.emptyText)!="undefined"?Oe.emptyText:(je==null?void 0:je("Table"))||C.createElement(pc.Z,{componentName:"Table"}),[as==null?void 0:as.spinning,Je,Oe==null?void 0:Oe.emptyText,je]),Fh=Q?qd:vc,xh={},zh=C.useMemo(()=>{const{fontSize:Ki,lineHeight:zt,lineWidth:yn,padding:mi,paddingXS:_r,paddingSM:Oo}=Ct,Os=Math.floor(Ki*zt);switch(be){case"middle":return Oo*2+Os+yn;case"small":return _r*2+Os+yn;default:return mi*2+Os+yn}},[Ct,be]);Q&&(xh.listItemHeight=zh);const{top:Hh,bottom:gp}=nc();return Bt(C.createElement("div",{ref:_n,className:yh,style:tu},C.createElement(Oc.Z,Object.assign({spinning:!1},as),Hh,C.createElement(Fh,Object.assign({},xh,ft,{ref:Wi,columns:Qe,direction:at,expandable:ht,prefixCls:Ke,className:st()({[`${Ke}-middle`]:be==="middle",[`${Ke}-small`]:be==="small",[`${Ke}-bordered`]:b,[`${Ke}-empty`]:Je.length===0},Qt,ke,bn),data:eu,rowKey:ji,rowClassName:ll,emptyText:nu,internalHooks:ro,internalRefs:vt,transformColumns:Dl,getContainerWidth:On,measureRowRender:Ki=>C.createElement(Mt.ZP,{getPopupContainer:zt=>zt},Ki)})),gp)))};var Rs=C.forwardRef(qo);const Fu=(i,n)=>{const c=C.useRef(0);return c.current+=1,C.createElement(Rs,Object.assign({},i,{ref:n,_renderTimes:c.current}))},jr=C.forwardRef(Fu);jr.SELECTION_COLUMN=Ia,jr.EXPAND_COLUMN=yr,jr.SELECTION_ALL=bl,jr.SELECTION_INVERT=_l,jr.SELECTION_NONE=hc,jr.Column=du,jr.ColumnGroup=If,jr.Summary=br;var th=jr,xu=th,gd=k(72764),zu=k(1851),Hu=(0,zu.Z)(Object.keys,Object),_h=Hu,ef=Object.prototype,nh=ef.hasOwnProperty;function Gh(i){if(!(0,gd.Z)(i))return _h(i);var n=[];for(var c in Object(i))nh.call(i,c)&&c!="constructor"&&n.push(c);return n}var yd=Gh,Su=k(62508),xd=k(66092),ih=(0,Su.Z)(xd.Z,"DataView"),Ss=ih,Of=k(86183),Zu=(0,Su.Z)(xd.Z,"Promise"),Bc=Zu,kh=(0,Su.Z)(xd.Z,"Set"),Vu=kh,Sd=(0,Su.Z)(xd.Z,"WeakMap"),Is=Sd,Zs=k(93589),Wo=k(90019),Df="[object Map]",Wh="[object Object]",tf="[object Promise]",nf="[object Set]",bs="[object WeakMap]",Lf="[object DataView]",Mh=(0,Wo.Z)(Ss),jh=(0,Wo.Z)(Of.Z),hl=(0,Wo.Z)(Bc),bu=(0,Wo.Z)(Vu),rf=(0,Wo.Z)(Is),gc=Zs.Z;(Ss&&gc(new Ss(new ArrayBuffer(1)))!=Lf||Of.Z&&gc(new Of.Z)!=Df||Bc&&gc(Bc.resolve())!=tf||Vu&&gc(new Vu)!=nf||Is&&gc(new Is)!=bs)&&(gc=function(i){var n=(0,Zs.Z)(i),c=n==Wh?i.constructor:void 0,u=c?(0,Wo.Z)(c):"";if(u)switch(u){case Mh:return Lf;case jh:return Df;case hl:return tf;case bu:return nf;case rf:return bs}return n});var rh=gc,ah=k(29169),hs=k(27771),Fc=k(50585),rl=k(77008),Jo=k(70908),oh="[object Map]",Qo="[object Set]",zc=Object.prototype,Gu=zc.hasOwnProperty;function af(i){if(i==null)return!0;if((0,Fc.Z)(i)&&((0,hs.Z)(i)||typeof i=="string"||typeof i.splice=="function"||(0,rl.Z)(i)||(0,Jo.Z)(i)||(0,ah.Z)(i)))return!i.length;var n=rh(i);if(n==oh||n==Qo)return!i.size;if((0,gd.Z)(i))return!yd(i).length;for(var c in i)if(Gu.call(i,c))return!1;return!0}var Vs=af,Ps=k(31667),Hc=k(37834),yc="__lodash_hash_undefined__";function Gs(i){return this.__data__.set(i,yc),this}var es=Gs;function bd(i){return this.__data__.has(i)}var Zc=bd;function ks(i){var n=-1,c=i==null?0:i.length;for(this.__data__=new Hc.Z;++n<c;)this.add(i[n])}ks.prototype.add=ks.prototype.push=es,ks.prototype.has=Zc;var Ws=ks;function _s(i,n){for(var c=-1,u=i==null?0:i.length;++c<u;)if(n(i[c],c,i))return!0;return!1}var ya=_s;function El(i,n){return i.has(n)}var Cl=El,_d=1,Tl=2;function ku(i,n,c,u,h,m){var v=c&_d,y=i.length,S=n.length;if(y!=S&&!(v&&S>y))return!1;var b=m.get(i),T=m.get(n);if(b&&T)return b==n&&T==i;var w=-1,A=!0,I=c&Tl?new Ws:void 0;for(m.set(i,n),m.set(n,i);++w<y;){var P=i[w],B=n[w];if(u)var L=v?u(B,P,w,n,i,m):u(P,B,w,i,n,m);if(L!==void 0){if(L)continue;A=!1;break}if(I){if(!ya(n,function(z,Z){if(!Cl(I,Z)&&(P===z||h(P,z,c,u,m)))return I.push(Z)})){A=!1;break}}else if(!(P===B||h(P,B,c,u,m))){A=!1;break}}return m.delete(i),m.delete(n),A}var of=ku,sf=k(17685),Wu=k(84073),Md=k(79651);function Uf(i){var n=-1,c=Array(i.size);return i.forEach(function(u,h){c[++n]=[h,u]}),c}var sh=Uf;function Ed(i){var n=-1,c=Array(i.size);return i.forEach(function(u){c[++n]=u}),c}var lf=Ed,lh=1,Vc=2,Gc="[object Boolean]",Xl="[object Date]",ju="[object Error]",_u="[object Map]",Mu="[object Number]",Cd="[object RegExp]",Xu="[object Set]",Eu="[object String]",kc="[object Symbol]",Td="[object ArrayBuffer]",Ns="[object DataView]",wd=sf.Z?sf.Z.prototype:void 0,Wc=wd?wd.valueOf:void 0;function Ad(i,n,c,u,h,m,v){switch(c){case Ns:if(i.byteLength!=n.byteLength||i.byteOffset!=n.byteOffset)return!1;i=i.buffer,n=n.buffer;case Td:return!(i.byteLength!=n.byteLength||!m(new Wu.Z(i),new Wu.Z(n)));case Gc:case Xl:case Mu:return(0,Md.Z)(+i,+n);case ju:return i.name==n.name&&i.message==n.message;case Cd:case Eu:return i==n+"";case _u:var y=sh;case Xu:var S=u&lh;if(y||(y=lf),i.size!=n.size&&!S)return!1;var b=v.get(i);if(b)return b==n;u|=Vc,v.set(i,n);var T=of(y(i),y(n),u,h,m,v);return v.delete(i),T;case kc:if(Wc)return Wc.call(i)==Wc.call(n)}return!1}var al=Ad;function $l(i,n){for(var c=-1,u=n.length,h=i.length;++c<u;)i[h+c]=n[c];return i}var jo=$l;function xc(i,n,c){var u=n(i);return(0,hs.Z)(i)?u:jo(u,c(i))}var Ar=xc;function Fa(i,n){for(var c=-1,u=i==null?0:i.length,h=0,m=[];++c<u;){var v=i[c];n(v,c,i)&&(m[h++]=v)}return m}var ts=Fa;function Bf(){return[]}var Rd=Bf,cc=Object.prototype,Ff=cc.propertyIsEnumerable,Id=Object.getOwnPropertySymbols,Pd=Id?function(i){return i==null?[]:(i=Object(i),ts(Id(i),function(n){return Ff.call(i,n)}))}:Rd,Xh=Pd,$u=k(87668);function Kl(i){return(0,Fc.Z)(i)?(0,$u.Z)(i):yd(i)}var Cu=Kl;function Sc(i){return Ar(i,Cu,Xh)}var jc=Sc,cf=1,zf=Object.prototype,Hf=zf.hasOwnProperty;function Xo(i,n,c,u,h,m){var v=c&cf,y=jc(i),S=y.length,b=jc(n),T=b.length;if(S!=T&&!v)return!1;for(var w=S;w--;){var A=y[w];if(!(v?A in n:Hf.call(n,A)))return!1}var I=m.get(i),P=m.get(n);if(I&&P)return I==n&&P==i;var B=!0;m.set(i,n),m.set(n,i);for(var L=v;++w<S;){A=y[w];var z=i[A],Z=n[A];if(u)var W=v?u(Z,z,A,n,i,m):u(z,Z,A,i,n,m);if(!(W===void 0?z===Z||h(z,Z,c,u,m):W)){B=!1;break}L||(L=A=="constructor")}if(B&&!L){var J=i.constructor,ue=n.constructor;J!=ue&&"constructor"in i&&"constructor"in n&&!(typeof J=="function"&&J instanceof J&&typeof ue=="function"&&ue instanceof ue)&&(B=!1)}return m.delete(i),m.delete(n),B}var Zf=Xo,Ku=1,pl="[object Arguments]",bc="[object Array]",uf="[object Object]",Yu=Object.prototype,Nd=Yu.hasOwnProperty;function Bo(i,n,c,u,h,m){var v=(0,hs.Z)(i),y=(0,hs.Z)(n),S=v?bc:rh(i),b=y?bc:rh(n);S=S==pl?uf:S,b=b==pl?uf:b;var T=S==uf,w=b==uf,A=S==b;if(A&&(0,rl.Z)(i)){if(!(0,rl.Z)(n))return!1;v=!0,T=!1}if(A&&!T)return m||(m=new Ps.Z),v||(0,Jo.Z)(i)?of(i,n,c,u,h,m):al(i,n,S,c,u,h,m);if(!(c&Ku)){var I=T&&Nd.call(i,"__wrapped__"),P=w&&Nd.call(n,"__wrapped__");if(I||P){var B=I?i.value():i,L=P?n.value():n;return m||(m=new Ps.Z),h(B,L,c,u,m)}}return A?(m||(m=new Ps.Z),Zf(i,n,c,u,h,m)):!1}var Eh=Bo,Tu=k(18533);function _c(i,n,c,u,h){return i===n?!0:i==null||n==null||!(0,Tu.Z)(i)&&!(0,Tu.Z)(n)?i!==i&&n!==n:Eh(i,n,c,u,_c,h)}var Fo=_c;function ch(i,n){return Fo(i,n)}var Ch=ch,ps=k(65330),$h=function(n){return n!=null};function ns(i,n,c){var u,h;if(i===!1)return!1;var m=n.total,v=n.current,y=n.pageSize,S=n.setPageInfo,b=(0,mn.Z)(i)==="object"?i:{};return(0,D.Z)((0,D.Z)({showTotal:function(w,A){return"".concat(c.getMessage("pagination.total.range","\u7B2C")," ").concat(A[0],"-").concat(A[1]," ").concat(c.getMessage("pagination.total.total","\u6761/\u603B\u5171")," ").concat(w," ").concat(c.getMessage("pagination.total.item","\u6761"))},total:m},b),{},{current:i!==!0&&i&&(u=i.current)!==null&&u!==void 0?u:v,pageSize:i!==!0&&i&&(h=i.pageSize)!==null&&h!==void 0?h:y,onChange:function(w,A){var I=i,P=I.onChange;P==null||P(w,A||20),(A!==y||v!==w)&&S({pageSize:A,current:w})}})}function wl(i,n,c){var u=(0,D.Z)((0,D.Z)({},c.editableUtils),{},{pageInfo:n.pageInfo,reload:function(){var h=(0,he.Z)((0,p.Z)().mark(function v(y){return(0,p.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!y){b.next=3;break}return b.next=3,n.setPageInfo({current:1});case 3:return b.next=5,n==null?void 0:n.reload();case 5:case"end":return b.stop()}},v)}));function m(v){return h.apply(this,arguments)}return m}(),reloadAndRest:function(){var h=(0,he.Z)((0,p.Z)().mark(function v(){return(0,p.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c.onCleanSelected(),S.next=3,n.setPageInfo({current:1});case 3:return S.next=5,n==null?void 0:n.reload();case 5:case"end":return S.stop()}},v)}));function m(){return h.apply(this,arguments)}return m}(),reset:function(){var h=(0,he.Z)((0,p.Z)().mark(function v(){var y;return(0,p.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,c.resetAll();case 2:return b.next=4,n==null||(y=n.reset)===null||y===void 0?void 0:y.call(n);case 4:return b.next=6,n==null?void 0:n.reload();case 6:case"end":return b.stop()}},v)}));function m(){return h.apply(this,arguments)}return m}(),fullScreen:function(){return c.fullScreen()},clearSelected:function(){return c.onCleanSelected()},setPageInfo:function(m){return n.setPageInfo(m)}});i.current=u}function Al(i,n){return n.filter(function(c){return c}).length<1?i:n.reduce(function(c,u){return u(c)},i)}var qu=function(n,c){return c===void 0?!1:typeof c=="boolean"?c:c[n]},Th=function(n){var c;return n&&(0,mn.Z)(n)==="object"&&(n==null||(c=n.props)===null||c===void 0?void 0:c.colSpan)},Rl=function(n,c){return n?Array.isArray(n)?n.join("-"):n.toString():"".concat(c)};function Vf(i){return Array.isArray(i)?i.join(","):i==null?void 0:i.toString()}function Qa(i){var n={},c={};return i.forEach(function(u){var h=Vf(u.dataIndex);if(h){if(u.filters){var m=u.defaultFilteredValue;m===void 0?n[h]=null:n[h]=u.defaultFilteredValue}u.sorter&&u.defaultSortOrder&&(c[h]=u.defaultSortOrder)}}),{sort:c,filter:n}}function Xc(){var i,n,c,u,h,m,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=(0,C.useRef)(),S=(0,C.useRef)(null),b=(0,C.useRef)(),T=(0,C.useRef)(),w=(0,C.useState)(""),A=(0,Ue.Z)(w,2),I=A[0],P=A[1],B=(0,C.useRef)([]),L=(0,ln.Z)(function(){return v.size||v.defaultSize||"middle"},{value:v.size,onChange:v.onSizeChange}),z=(0,Ue.Z)(L,2),Z=z[0],W=z[1],J=(0,C.useMemo)(function(){var re,ve;if(v!=null&&(re=v.columnsState)!==null&&re!==void 0&&re.defaultValue)return v.columnsState.defaultValue;var Oe={};return(ve=v.columns)===null||ve===void 0||ve.forEach(function(le,Q){var me=le.key,Ce=le.dataIndex,tt=le.fixed,$e=le.disable,Qe=Rl(me!=null?me:Ce,Q);Qe&&(Oe[Qe]={show:!0,fixed:tt,disable:$e})}),Oe},[v.columns]),ue=(0,ln.Z)(function(){var re,ve,Oe=v.columnsState||{},le=Oe.persistenceType,Q=Oe.persistenceKey;if(Q&&le&&typeof window!="undefined"){var me=window[le];try{var Ce=me==null?void 0:me.getItem(Q);if(Ce){var tt;if(v!=null&&(tt=v.columnsState)!==null&&tt!==void 0&&tt.defaultValue){var $e;return(0,ps.Z)({},v==null||($e=v.columnsState)===null||$e===void 0?void 0:$e.defaultValue,JSON.parse(Ce))}return JSON.parse(Ce)}}catch(Qe){console.warn(Qe)}}return v.columnsStateMap||((re=v.columnsState)===null||re===void 0?void 0:re.value)||((ve=v.columnsState)===null||ve===void 0?void 0:ve.defaultValue)||J},{value:((i=v.columnsState)===null||i===void 0?void 0:i.value)||v.columnsStateMap,onChange:((n=v.columnsState)===null||n===void 0?void 0:n.onChange)||v.onColumnsStateChange}),we=(0,Ue.Z)(ue,2),ie=we[0],ge=we[1];(0,C.useEffect)(function(){var re=v.columnsState||{},ve=re.persistenceType,Oe=re.persistenceKey;if(Oe&&ve&&typeof window!="undefined"){var le=window[ve];try{var Q=le==null?void 0:le.getItem(Oe);if(Q){var me;if(v!=null&&(me=v.columnsState)!==null&&me!==void 0&&me.defaultValue){var Ce;ge((0,ps.Z)({},v==null||(Ce=v.columnsState)===null||Ce===void 0?void 0:Ce.defaultValue,JSON.parse(Q)))}else ge(JSON.parse(Q))}else ge(J)}catch(tt){console.warn(tt)}}},[(c=v.columnsState)===null||c===void 0?void 0:c.persistenceKey,(u=v.columnsState)===null||u===void 0?void 0:u.persistenceType,J]),(0,ii.ET)(!v.columnsStateMap,"columnsStateMap\u5DF2\u7ECF\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 columnsState.value \u66FF\u6362"),(0,ii.ET)(!v.columnsStateMap,"columnsStateMap has been discarded, please use columnsState.value replacement");var Me=(0,C.useCallback)(function(){var re=v.columnsState||{},ve=re.persistenceType,Oe=re.persistenceKey;if(!(!Oe||!ve||typeof window=="undefined")){var le=window[ve];try{le==null||le.removeItem(Oe)}catch(Q){console.warn(Q)}}},[v.columnsState]);(0,C.useEffect)(function(){var re,ve;if(!(!((re=v.columnsState)!==null&&re!==void 0&&re.persistenceKey)||!((ve=v.columnsState)!==null&&ve!==void 0&&ve.persistenceType))&&typeof window!="undefined"){var Oe=v.columnsState,le=Oe.persistenceType,Q=Oe.persistenceKey,me=window[le];try{me==null||me.setItem(Q,JSON.stringify(ie))}catch(Ce){console.warn(Ce),Me()}}},[(h=v.columnsState)===null||h===void 0?void 0:h.persistenceKey,ie,(m=v.columnsState)===null||m===void 0?void 0:m.persistenceType]);var de={action:y.current,setAction:function(ve){y.current=ve},sortKeyColumns:B.current,setSortKeyColumns:function(ve){B.current=ve},propsRef:T,columnsMap:ie,keyWords:I,setKeyWords:function(ve){return P(ve)},setTableSize:W,tableSize:Z,prefixName:b.current,setPrefixName:function(ve){b.current=ve},setColumnsMap:ge,columns:v.columns,rootDomRef:S,clearPersistenceStorage:Me,defaultColumnKeyMap:J};return Object.defineProperty(de,"prefixName",{get:function(){return b.current}}),Object.defineProperty(de,"sortKeyColumns",{get:function(){return B.current}}),Object.defineProperty(de,"action",{get:function(){return y.current}}),de}var Yl=(0,C.createContext)({}),wu=function(n){var c=Xc(n.initValue);return(0,O.jsx)(Yl.Provider,{value:c,children:n.children})},$c=k(78957),Wa=function(n){return(0,j.Z)({},n.componentCls,{marginBlockEnd:16,backgroundColor:(0,Nt.uK)(n.colorTextBase,.02),borderRadius:n.borderRadius,border:"none","&-container":{paddingBlock:n.paddingSM,paddingInline:n.paddingLG},"&-info":{display:"flex",alignItems:"center",transition:"all 0.3s",color:n.colorTextTertiary,"&-content":{flex:1},"&-option":{minWidth:48,paddingInlineStart:16}}})};function La(i){return(0,Nt.Xj)("ProTableAlert",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[Wa(c)]})}var Xr=function(n){var c=n.intl,u=n.onCleanSelected;return[(0,O.jsx)("a",{onClick:u,children:c.getMessage("alert.clear","\u6E05\u7A7A")},"0")]};function ra(i){var n=i.selectedRowKeys,c=n===void 0?[]:n,u=i.onCleanSelected,h=i.alwaysShowAlert,m=i.selectedRows,v=i.alertInfoRender,y=v===void 0?function(W){var J=W.intl;return(0,O.jsxs)($c.Z,{children:[J.getMessage("alert.selected","\u5DF2\u9009\u62E9"),c.length,J.getMessage("alert.item","\u9879"),"\xA0\xA0"]})}:v,S=i.alertOptionRender,b=S===void 0?Xr:S,T=(0,nr.YB)(),w=b&&b({onCleanSelected:u,selectedRowKeys:c,selectedRows:m,intl:T}),A=(0,C.useContext)(Mt.ZP.ConfigContext),I=A.getPrefixCls,P=I("pro-table-alert"),B=La(P),L=B.wrapSSR,z=B.hashId;if(y===!1)return null;var Z=y({intl:T,selectedRowKeys:c,selectedRows:m,onCleanSelected:u});return Z===!1||c.length<1&&!h?null:L((0,O.jsx)("div",{className:"".concat(P," ").concat(z).trim(),children:(0,O.jsx)("div",{className:"".concat(P,"-container ").concat(z).trim(),children:(0,O.jsxs)("div",{className:"".concat(P,"-info ").concat(z).trim(),children:[(0,O.jsx)("div",{className:"".concat(P,"-info-content ").concat(z).trim(),children:Z}),w?(0,O.jsx)("div",{className:"".concat(P,"-info-option ").concat(z).trim(),children:w}):null]})})}))}var eo=ra,Ms=k(43144),ql=k(15671),ml=k(97326),Gf=k(60136),is=k(29388),Mo=k(60249);function Kc(){var i=(0,C.useState)(!0),n=(0,Ue.Z)(i,2),c=n[1],u=(0,C.useCallback)(function(){return c(function(h){return!h})},[]);return u}function Mc(i,n){var c=(0,C.useMemo)(function(){var u={current:n};return new Proxy(u,{set:function(m,v,y){return Object.is(m[v],y)||(m[v]=y,i(c)),!0}})},[]);return c}function uh(i){var n=Kc(),c=Mc(n,i);return c}var Il=k(51280),ms=k(22270),Yc=k(74138),js=k(12044),qc=k(73177),Od=k(85265),Jl=k(78733),kf=function(n){return(0,j.Z)({},n.componentCls,{"&-sidebar-dragger":{width:"5px",cursor:"ew-resize",padding:"4px 0 0",borderTop:"1px solid transparent",position:"absolute",top:0,left:0,bottom:0,zIndex:100,backgroundColor:"transparent","&-min-disabled":{cursor:"w-resize"},"&-max-disabled":{cursor:"e-resize"}}})};function Ql(i){return(0,Nt.Xj)("DrawerForm",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[kf(c)]})}var Ju=["children","trigger","onVisibleChange","drawerProps","onFinish","submitTimeout","title","width","resize","onOpenChange","visible","open"];function Ec(i){var n,c,u=i.children,h=i.trigger,m=i.onVisibleChange,v=i.drawerProps,y=i.onFinish,S=i.submitTimeout,b=i.title,T=i.width,w=i.resize,A=i.onOpenChange,I=i.visible,P=i.open,B=(0,dn.Z)(i,Ju);(0,ii.ET)(!B.footer||!(v!=null&&v.footer),"DrawerForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var L=C.useMemo(function(){var Qt,ht,Ft,In={onResize:function(){},maxWidth:(0,js.j)()?window.innerWidth*.8:void 0,minWidth:300};return typeof w=="boolean"?w?In:{}:(0,Ai.Y)({onResize:(Qt=w==null?void 0:w.onResize)!==null&&Qt!==void 0?Qt:In.onResize,maxWidth:(ht=w==null?void 0:w.maxWidth)!==null&&ht!==void 0?ht:In.maxWidth,minWidth:(Ft=w==null?void 0:w.minWidth)!==null&&Ft!==void 0?Ft:In.minWidth})},[w]),z=(0,C.useContext)(Mt.ZP.ConfigContext),Z=z.getPrefixCls("pro-form-drawer"),W=Ql(Z),J=W.wrapSSR,ue=W.hashId,we=function(ht){return"".concat(Z,"-").concat(ht," ").concat(ue)},ie=(0,C.useState)([]),ge=(0,Ue.Z)(ie,2),Me=ge[1],de=(0,C.useState)(!1),re=(0,Ue.Z)(de,2),ve=re[0],Oe=re[1],le=(0,C.useState)(!1),Q=(0,Ue.Z)(le,2),me=Q[0],Ce=Q[1],tt=(0,C.useState)(T||(w?L==null?void 0:L.minWidth:800)),$e=(0,Ue.Z)(tt,2),Qe=$e[0],ft=$e[1],Dt=(0,ln.Z)(!!I,{value:P||I,onChange:A||m}),at=(0,Ue.Z)(Dt,2),De=at[0],je=at[1],et=(0,C.useRef)(null),Re=(0,C.useCallback)(function(Qt){et.current===null&&Qt&&Me([]),et.current=Qt},[]),be=(0,C.useRef)(),Le=(0,C.useCallback)(function(){var Qt,ht,Ft,In=(Qt=(ht=(Ft=B.formRef)===null||Ft===void 0?void 0:Ft.current)!==null&&ht!==void 0?ht:B.form)!==null&&Qt!==void 0?Qt:be.current;In&&v!==null&&v!==void 0&&v.destroyOnClose&&In.resetFields()},[v==null?void 0:v.destroyOnClose,B.form,B.formRef]);(0,C.useEffect)(function(){De&&(P||I)&&(A==null||A(!0),m==null||m(!0)),me&&ft(L==null?void 0:L.minWidth)},[I,De,me]),(0,C.useImperativeHandle)(B.formRef,function(){return be.current},[be.current]);var Je=(0,C.useMemo)(function(){return h?C.cloneElement(h,(0,D.Z)((0,D.Z)({key:"trigger"},h.props),{},{onClick:function(){var Qt=(0,he.Z)((0,p.Z)().mark(function Ft(In){var vt,On;return(0,p.Z)().wrap(function(Wi){for(;;)switch(Wi.prev=Wi.next){case 0:je(!De),Ce(!Object.keys(L)),(vt=h.props)===null||vt===void 0||(On=vt.onClick)===null||On===void 0||On.call(vt,In);case 3:case"end":return Wi.stop()}},Ft)}));function ht(Ft){return Qt.apply(this,arguments)}return ht}()})):null},[je,h,De,Ce,me]),Ke=(0,C.useMemo)(function(){var Qt,ht,Ft,In,vt;return B.submitter===!1?!1:(0,zn.T)({searchConfig:{submitText:(Qt=(ht=z.locale)===null||ht===void 0||(ht=ht.Modal)===null||ht===void 0?void 0:ht.okText)!==null&&Qt!==void 0?Qt:"\u786E\u8BA4",resetText:(Ft=(In=z.locale)===null||In===void 0||(In=In.Modal)===null||In===void 0?void 0:In.cancelText)!==null&&Ft!==void 0?Ft:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:S?ve:void 0,onClick:function(_n){var Wi;je(!1),v==null||(Wi=v.onClose)===null||Wi===void 0||Wi.call(v,_n)}}},(vt=B.submitter)!==null&&vt!==void 0?vt:{})},[B.submitter,(n=z.locale)===null||n===void 0||(n=n.Modal)===null||n===void 0?void 0:n.okText,(c=z.locale)===null||c===void 0||(c=c.Modal)===null||c===void 0?void 0:c.cancelText,S,ve,je,v]),Fe=(0,C.useCallback)(function(Qt,ht){return(0,O.jsxs)(O.Fragment,{children:[Qt,et.current&&ht?(0,O.jsx)(C.Fragment,{children:(0,zr.createPortal)(ht,et.current)},"submitter"):ht]})},[]),Ct=(0,Ln.J)(function(){var Qt=(0,he.Z)((0,p.Z)().mark(function ht(Ft){var In,vt,On;return(0,p.Z)().wrap(function(Wi){for(;;)switch(Wi.prev=Wi.next){case 0:return In=y==null?void 0:y(Ft),S&&In instanceof Promise&&(Oe(!0),vt=setTimeout(function(){return Oe(!1)},S),In.finally(function(){clearTimeout(vt),Oe(!1)})),Wi.next=4,In;case 4:return On=Wi.sent,On&&je(!1),Wi.abrupt("return",On);case 7:case"end":return Wi.stop()}},ht)}));return function(ht){return Qt.apply(this,arguments)}}()),ke=(0,qc.X)(De,m),Bt=(0,C.useCallback)(function(Qt){var ht,Ft,In=(document.body.offsetWidth||1e3)-(Qt.clientX-document.body.offsetLeft),vt=(ht=L==null?void 0:L.minWidth)!==null&&ht!==void 0?ht:T||800,On=(Ft=L==null?void 0:L.maxWidth)!==null&&Ft!==void 0?Ft:window.innerWidth*.8;if(In<vt){ft(vt);return}if(In>On){ft(On);return}ft(In)},[L==null?void 0:L.maxWidth,L==null?void 0:L.minWidth,T]),bn=(0,C.useCallback)(function(){document.removeEventListener("mousemove",Bt),document.removeEventListener("mouseup",bn)},[Bt]);return J((0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(Od.Z,(0,D.Z)((0,D.Z)((0,D.Z)({title:b,width:Qe},v),ke),{},{afterOpenChange:function(ht){var Ft;ht||Le(),v==null||(Ft=v.afterOpenChange)===null||Ft===void 0||Ft.call(v,ht)},onClose:function(ht){var Ft;S&&ve||(je(!1),v==null||(Ft=v.onClose)===null||Ft===void 0||Ft.call(v,ht))},footer:B.submitter!==!1&&(0,O.jsx)("div",{ref:Re,style:{display:"flex",justifyContent:"flex-end"}}),children:[w?(0,O.jsx)("div",{className:st()(we("sidebar-dragger"),ue,(0,j.Z)((0,j.Z)({},we("sidebar-dragger-min-disabled"),Qe===(L==null?void 0:L.minWidth)),we("sidebar-dragger-max-disabled"),Qe===(L==null?void 0:L.maxWidth))),onMouseDown:function(ht){var Ft;L==null||(Ft=L.onResize)===null||Ft===void 0||Ft.call(L),ht.stopPropagation(),ht.preventDefault(),document.addEventListener("mousemove",Bt),document.addEventListener("mouseup",bn),Ce(!0)}}):null,(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(Jl.I,(0,D.Z)((0,D.Z)({formComponentType:"DrawerForm",layout:"vertical"},B),{},{formRef:be,onInit:function(ht,Ft){var In;B.formRef&&(B.formRef.current=Ft),B==null||(In=B.onInit)===null||In===void 0||In.call(B,ht,Ft),be.current=Ft},submitter:Ke,onFinish:function(){var Qt=(0,he.Z)((0,p.Z)().mark(function ht(Ft){var In;return(0,p.Z)().wrap(function(On){for(;;)switch(On.prev=On.next){case 0:return On.next=2,Ct(Ft);case 2:return In=On.sent,On.abrupt("return",In);case 4:case"end":return On.stop()}},ht)}));return function(ht){return Qt.apply(this,arguments)}}(),contentRender:Fe,children:u}))})]})),Je]}))}var Au={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},Dd=Au,Wf=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:Dd}))},Ld=C.forwardRef(Wf),jf=Ld,a=k(2122),l=k(1336),f=function(n){return(0,j.Z)({},n.componentCls,{lineHeight:"30px","&::before":{display:"block",height:0,visibility:"hidden",content:"'.'"},"&-small":{lineHeight:n.lineHeight},"&-container":{display:"flex",flexWrap:"wrap",gap:n.marginXS},"&-item":(0,j.Z)({whiteSpace:"nowrap"},"".concat(n.antCls,"-form-item"),{marginBlock:0}),"&-line":{minWidth:"198px"},"&-line:not(:first-child)":{marginBlockStart:"16px",marginBlockEnd:8},"&-collapse-icon":{width:n.controlHeight,height:n.controlHeight,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},"&-effective":(0,j.Z)({},"".concat(n.componentCls,"-collapse-icon"),{backgroundColor:n.colorBgTextHover})})};function x(i){return(0,Nt.Xj)("LightFilter",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[f(c)]})}var E=["size","collapse","collapseLabel","initialValues","onValuesChange","form","placement","formRef","bordered","ignoreRules","footerRender"],N=function(n){var c=n.items,u=n.prefixCls,h=n.size,m=h===void 0?"middle":h,v=n.collapse,y=n.collapseLabel,S=n.onValuesChange,b=n.bordered,T=n.values,w=n.footerRender,A=n.placement,I=(0,nr.YB)(),P="".concat(u,"-light-filter"),B=x(P),L=B.wrapSSR,z=B.hashId,Z=(0,C.useState)(!1),W=(0,Ue.Z)(Z,2),J=W[0],ue=W[1],we=(0,C.useState)(function(){return(0,D.Z)({},T)}),ie=(0,Ue.Z)(we,2),ge=ie[0],Me=ie[1];(0,C.useEffect)(function(){Me((0,D.Z)({},T))},[T]);var de=(0,C.useMemo)(function(){var le=[],Q=[];return c.forEach(function(me){var Ce=me.props||{},tt=Ce.secondary;tt||v?le.push(me):Q.push(me)}),{collapseItems:le,outsideItems:Q}},[n.items]),re=de.collapseItems,ve=de.outsideItems,Oe=function(){return y||(v?(0,O.jsx)(jf,{className:"".concat(P,"-collapse-icon ").concat(z).trim()}):(0,O.jsx)(a.Q,{size:m,label:I.getMessage("form.lightFilter.more","\u66F4\u591A\u7B5B\u9009")}))};return L((0,O.jsx)("div",{className:st()(P,z,"".concat(P,"-").concat(m),(0,j.Z)({},"".concat(P,"-effective"),Object.keys(T).some(function(le){return Array.isArray(T[le])?T[le].length>0:T[le]}))),children:(0,O.jsxs)("div",{className:"".concat(P,"-container ").concat(z).trim(),children:[ve.map(function(le,Q){if(!(le!=null&&le.props))return le;var me=le.key,Ce=(le==null?void 0:le.props)||{},tt=Ce.fieldProps,$e=tt!=null&&tt.placement?tt==null?void 0:tt.placement:A;return(0,O.jsx)("div",{className:"".concat(P,"-item ").concat(z).trim(),children:C.cloneElement(le,{fieldProps:(0,D.Z)((0,D.Z)({},le.props.fieldProps),{},{placement:$e}),proFieldProps:(0,D.Z)((0,D.Z)({},le.props.proFieldProps),{},{light:!0,label:le.props.label,bordered:b}),bordered:b})},me||Q)}),re.length?(0,O.jsx)("div",{className:"".concat(P,"-item ").concat(z).trim(),children:(0,O.jsx)(l.M,{padding:24,open:J,onOpenChange:function(Q){ue(Q)},placement:A,label:Oe(),footerRender:w,footer:{onConfirm:function(){S((0,D.Z)({},ge)),ue(!1)},onClear:function(){var Q={};re.forEach(function(me){var Ce=me.props.name;Q[Ce]=void 0}),S(Q)}},children:re.map(function(le){var Q=le.key,me=le.props,Ce=me.name,tt=me.fieldProps,$e=(0,D.Z)((0,D.Z)({},tt),{},{onChange:function(Dt){return Me((0,D.Z)((0,D.Z)({},ge),{},(0,j.Z)({},Ce,Dt!=null&&Dt.target?Dt.target.value:Dt))),!1}});ge.hasOwnProperty(Ce)&&($e[le.props.valuePropName||"value"]=ge[Ce]);var Qe=tt!=null&&tt.placement?tt==null?void 0:tt.placement:A;return(0,O.jsx)("div",{className:"".concat(P,"-line ").concat(z).trim(),children:C.cloneElement(le,{fieldProps:(0,D.Z)((0,D.Z)({},$e),{},{placement:Qe})})},Q)})})},"more"):null]})}))};function K(i){var n=i.size,c=i.collapse,u=i.collapseLabel,h=i.initialValues,m=i.onValuesChange,v=i.form,y=i.placement,S=i.formRef,b=i.bordered,T=i.ignoreRules,w=i.footerRender,A=(0,dn.Z)(i,E),I=(0,C.useContext)(Mt.ZP.ConfigContext),P=I.getPrefixCls,B=P("pro-form"),L=(0,C.useState)(function(){return(0,D.Z)({},h)}),z=(0,Ue.Z)(L,2),Z=z[0],W=z[1],J=(0,C.useRef)();return(0,C.useImperativeHandle)(S,function(){return J.current},[J.current]),(0,O.jsx)(Jl.I,(0,D.Z)((0,D.Z)({size:n,initialValues:h,form:v,contentRender:function(we){return(0,O.jsx)(N,{prefixCls:B,items:we==null?void 0:we.flatMap(function(ie){var ge;return!ie||!(ie!=null&&ie.type)?ie:(ie==null||(ge=ie.type)===null||ge===void 0?void 0:ge.displayName)==="ProForm-Group"?ie.props.children:ie}),size:n,bordered:b,collapse:c,collapseLabel:u,placement:y,values:Z||{},footerRender:w,onValuesChange:function(ge){var Me,de,re=(0,D.Z)((0,D.Z)({},Z),ge);W(re),(Me=J.current)===null||Me===void 0||Me.setFieldsValue(re),(de=J.current)===null||de===void 0||de.submit(),m&&m(ge,re)}})},formRef:J,formItemProps:{colon:!1,labelAlign:"left"},fieldProps:{style:{width:void 0}}},(0,tn.Z)(A,["labelWidth"])),{},{onValuesChange:function(we,ie){var ge;W(ie),m==null||m(we,ie),(ge=J.current)===null||ge===void 0||ge.submit()}}))}var pe=k(85576),Xe=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function Ot(i){var n,c,u=i.children,h=i.trigger,m=i.onVisibleChange,v=i.onOpenChange,y=i.modalProps,S=i.onFinish,b=i.submitTimeout,T=i.title,w=i.width,A=i.visible,I=i.open,P=(0,dn.Z)(i,Xe);(0,ii.ET)(!P.footer||!(y!=null&&y.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var B=(0,C.useContext)(Mt.ZP.ConfigContext),L=(0,C.useState)([]),z=(0,Ue.Z)(L,2),Z=z[1],W=(0,C.useState)(!1),J=(0,Ue.Z)(W,2),ue=J[0],we=J[1],ie=(0,ln.Z)(!!A,{value:I||A,onChange:v||m}),ge=(0,Ue.Z)(ie,2),Me=ge[0],de=ge[1],re=(0,C.useRef)(null),ve=(0,C.useCallback)(function(Qe){re.current===null&&Qe&&Z([]),re.current=Qe},[]),Oe=(0,C.useRef)(),le=(0,C.useCallback)(function(){var Qe,ft,Dt,at=(Qe=(ft=P.form)!==null&&ft!==void 0?ft:(Dt=P.formRef)===null||Dt===void 0?void 0:Dt.current)!==null&&Qe!==void 0?Qe:Oe.current;at&&y!==null&&y!==void 0&&y.destroyOnClose&&at.resetFields()},[y==null?void 0:y.destroyOnClose,P.form,P.formRef]);(0,C.useImperativeHandle)(P.formRef,function(){return Oe.current},[Oe.current]),(0,C.useEffect)(function(){(I||A)&&(v==null||v(!0),m==null||m(!0))},[A,I]);var Q=(0,C.useMemo)(function(){return h?C.cloneElement(h,(0,D.Z)((0,D.Z)({key:"trigger"},h.props),{},{onClick:function(){var Qe=(0,he.Z)((0,p.Z)().mark(function Dt(at){var De,je;return(0,p.Z)().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:de(!Me),(De=h.props)===null||De===void 0||(je=De.onClick)===null||je===void 0||je.call(De,at);case 2:case"end":return Re.stop()}},Dt)}));function ft(Dt){return Qe.apply(this,arguments)}return ft}()})):null},[de,h,Me]),me=(0,C.useMemo)(function(){var Qe,ft,Dt,at,De,je,et;return P.submitter===!1?!1:(0,zn.T)({searchConfig:{submitText:(Qe=(ft=y==null?void 0:y.okText)!==null&&ft!==void 0?ft:(Dt=B.locale)===null||Dt===void 0||(Dt=Dt.Modal)===null||Dt===void 0?void 0:Dt.okText)!==null&&Qe!==void 0?Qe:"\u786E\u8BA4",resetText:(at=(De=y==null?void 0:y.cancelText)!==null&&De!==void 0?De:(je=B.locale)===null||je===void 0||(je=je.Modal)===null||je===void 0?void 0:je.cancelText)!==null&&at!==void 0?at:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:b?ue:void 0,onClick:function(be){var Le;de(!1),y==null||(Le=y.onCancel)===null||Le===void 0||Le.call(y,be)}}},(et=P.submitter)!==null&&et!==void 0?et:{})},[(n=B.locale)===null||n===void 0||(n=n.Modal)===null||n===void 0?void 0:n.cancelText,(c=B.locale)===null||c===void 0||(c=c.Modal)===null||c===void 0?void 0:c.okText,y,P.submitter,de,ue,b]),Ce=(0,C.useCallback)(function(Qe,ft){return(0,O.jsxs)(O.Fragment,{children:[Qe,re.current&&ft?(0,O.jsx)(C.Fragment,{children:(0,zr.createPortal)(ft,re.current)},"submitter"):ft]})},[]),tt=(0,C.useCallback)(function(){var Qe=(0,he.Z)((0,p.Z)().mark(function ft(Dt){var at,De,je;return(0,p.Z)().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return at=S==null?void 0:S(Dt),b&&at instanceof Promise&&(we(!0),De=setTimeout(function(){return we(!1)},b),at.finally(function(){clearTimeout(De),we(!1)})),Re.next=4,at;case 4:return je=Re.sent,je&&de(!1),Re.abrupt("return",je);case 7:case"end":return Re.stop()}},ft)}));return function(ft){return Qe.apply(this,arguments)}}(),[S,de,b]),$e=(0,qc.X)(Me);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(pe.Z,(0,D.Z)((0,D.Z)((0,D.Z)({title:T,width:w||800},y),$e),{},{onCancel:function(ft){var Dt;b&&ue||(de(!1),y==null||(Dt=y.onCancel)===null||Dt===void 0||Dt.call(y,ft))},afterClose:function(){var ft;le(),Me&&de(!1),y==null||(ft=y.afterClose)===null||ft===void 0||ft.call(y)},footer:P.submitter!==!1?(0,O.jsx)("div",{ref:ve,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,O.jsx)(Jl.I,(0,D.Z)((0,D.Z)({formComponentType:"ModalForm",layout:"vertical"},P),{},{onInit:function(ft,Dt){var at;P.formRef&&(P.formRef.current=Dt),P==null||(at=P.onInit)===null||at===void 0||at.call(P,ft,Dt),Oe.current=Dt},formRef:Oe,submitter:me,onFinish:function(){var Qe=(0,he.Z)((0,p.Z)().mark(function ft(Dt){var at;return(0,p.Z)().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,tt(Dt);case 2:return at=je.sent,je.abrupt("return",at);case 4:case"end":return je.stop()}},ft)}));return function(ft){return Qe.apply(this,arguments)}}(),contentRender:Ce,children:u}))})),Q]})}var Sn=function(n){if(n&&n!==!0)return n},kn=function(n,c,u,h){return n?(0,O.jsxs)(O.Fragment,{children:[u.getMessage("tableForm.collapsed","\u5C55\u5F00"),h&&"(".concat(h,")"),(0,O.jsx)(Sl.Z,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(n?0:.5,"turn)")}})]}):(0,O.jsxs)(O.Fragment,{children:[u.getMessage("tableForm.expand","\u6536\u8D77"),(0,O.jsx)(Sl.Z,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(n?0:.5,"turn)")}})]})},Hn=function(n){var c=n.setCollapsed,u=n.collapsed,h=u===void 0?!1:u,m=n.submitter,v=n.style,y=n.hiddenNum,S=(0,C.useContext)(Mt.ZP.ConfigContext),b=S.getPrefixCls,T=(0,nr.YB)(),w=(0,C.useContext)(nr.L_),A=w.hashId,I=Sn(n.collapseRender)||kn;return(0,O.jsxs)($c.Z,{style:v,size:16,children:[m,n.collapseRender!==!1&&(0,O.jsx)("a",{className:"".concat(b("pro-query-filter-collapse-button")," ").concat(A).trim(),onClick:function(){return c(!h)},children:I==null?void 0:I(h,n,T,y)})]})},pr=Hn,Pl=function(n){return(0,j.Z)({},n.componentCls,(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({"&&":{padding:24}},"".concat(n.antCls,"-form-item"),{marginBlock:0}),"".concat(n.proComponentsCls,"-form-group-title"),{marginBlock:0}),"&-row",{rowGap:24,"&-split":(0,j.Z)((0,j.Z)({},"".concat(n.proComponentsCls,"-form-group"),{display:"flex",alignItems:"center",gap:n.marginXS}),"&:last-child",{marginBlockEnd:12}),"&-split-line":{"&:after":{position:"absolute",width:"100%",content:'""',height:1,insetBlockEnd:-12,borderBlockEnd:"1px dashed ".concat(n.colorSplit)}}}),"&-collapse-button",{display:"flex",alignItems:"center",color:n.colorPrimary}))};function Qu(i){return(0,Nt.Xj)("QueryFilter",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[Pl(c)]})}var Jc=["collapsed","layout","defaultCollapsed","defaultColsNumber","defaultFormItemsNumber","span","searchGutter","searchText","resetText","optionRender","collapseRender","onReset","onCollapse","labelWidth","style","split","preserve","ignoreRules","showHiddenNum","submitterColSpanProps"],nt,Ge={xs:513,sm:513,md:785,lg:992,xl:1057,xxl:1/0},mt={vertical:[[513,1,"vertical"],[785,2,"vertical"],[1057,3,"vertical"],[1/0,4,"vertical"]],default:[[513,1,"vertical"],[701,2,"vertical"],[1062,3,"horizontal"],[1352,3,"horizontal"],[1/0,4,"horizontal"]]},fn=function(n,c,u){if(u&&typeof u=="number")return{span:u,layout:n};var h=u?["xs","sm","md","lg","xl","xxl"].map(function(v){return[Ge[v],24/u[v],"horizontal"]}):mt[n||"default"],m=(h||mt.default).find(function(v){return c<v[0]+16});return m?{span:24/m[1],layout:m==null?void 0:m[2]}:{span:8,layout:"horizontal"}},bi=function(n,c){return n==null?void 0:n.flatMap(function(u){var h,m;if((u==null||(h=u.type)===null||h===void 0?void 0:h.displayName)==="ProForm-Group"&&!((m=u.props)!==null&&m!==void 0&&m.title))return u.props.children;if(c&&C.isValidElement(u)){var v;return C.cloneElement(u,(0,D.Z)((0,D.Z)({},u.props),{},{formItemProps:(0,D.Z)((0,D.Z)({},(v=u.props)===null||v===void 0?void 0:v.formItemProps),{},{rules:[]})}))}return u})},to=function(n){var c,u,h,m,v=(0,nr.YB)(),y=(0,C.useContext)(nr.L_),S=y.hashId,b=n.resetText||v.getMessage("tableForm.reset","\u91CD\u7F6E"),T=n.searchText||v.getMessage("tableForm.search","\u641C\u7D22"),w=(0,ln.Z)(function(){return n.defaultCollapsed&&!!n.submitter},{value:n.collapsed,onChange:n.onCollapse}),A=(0,Ue.Z)(w,2),I=A[0],P=A[1],B=n.optionRender,L=n.collapseRender,z=n.split,Z=n.items,W=n.spanSize,J=n.showLength,ue=n.searchGutter,we=n.showHiddenNum,ie=(0,C.useMemo)(function(){return!n.submitter||B===!1?null:C.cloneElement(n.submitter,(0,D.Z)({searchConfig:{resetText:b,submitText:T},render:B&&function(Qe,ft){return B((0,D.Z)((0,D.Z)({},n),{},{resetText:b,searchText:T}),n,ft)}},n.submitter.props))},[n,b,T,B]),ge=0,Me=0,de=!1,re=0,ve=0,Oe=bi(Z,n.ignoreRules).map(function(Qe,ft){var Dt,at,De,je,et=C.isValidElement(Qe)&&(Dt=Qe==null||(at=Qe.props)===null||at===void 0?void 0:at.colSize)!==null&&Dt!==void 0?Dt:1,Re=Math.min(W.span*(et||1),24);if(ge+=Re,re+=et,ft===0){var be;de=Re===24&&!(Qe!=null&&(be=Qe.props)!==null&&be!==void 0&&be.hidden)}var Le=(Qe==null||(De=Qe.props)===null||De===void 0?void 0:De.hidden)||I&&(de||re>J)&&!!ft;Me+=1;var Je=C.isValidElement(Qe)&&(Qe.key||"".concat((je=Qe.props)===null||je===void 0?void 0:je.name))||ft;return C.isValidElement(Qe)&&Le?n.preserve?{itemDom:C.cloneElement(Qe,{hidden:!0,key:Je||ft}),hidden:!0,colSpan:Re}:{itemDom:null,colSpan:0,hidden:!0}:{itemDom:Qe,colSpan:Re,hidden:!1}}),le=Oe.map(function(Qe,ft){var Dt,at,De=Qe.itemDom,je=Qe.colSpan,et=De==null||(Dt=De.props)===null||Dt===void 0?void 0:Dt.hidden;if(et)return De;var Re=C.isValidElement(De)&&(De.key||"".concat((at=De.props)===null||at===void 0?void 0:at.name))||ft;return 24-ve%24<je&&(ge+=24-ve%24,ve+=24-ve%24),ve+=je,z&&ve%24===0&&ft<Me-1?(0,O.jsx)(Dn.Z,{span:je,className:"".concat(n.baseClassName,"-row-split-line ").concat(n.baseClassName,"-row-split ").concat(S).trim(),children:De},Re):(0,O.jsx)(Dn.Z,{className:"".concat(n.baseClassName,"-row-split ").concat(S).trim(),span:je,children:De},Re)}),Q=we&&Oe.filter(function(Qe){return Qe.hidden}).length,me=(0,C.useMemo)(function(){return!(ge<24||re<=J)},[re,J,ge]),Ce=(0,C.useMemo)(function(){var Qe,ft,Dt=ve%24+((Qe=(ft=n.submitterColSpanProps)===null||ft===void 0?void 0:ft.span)!==null&&Qe!==void 0?Qe:W.span);if(Dt>24){var at,De;return 24-((at=(De=n.submitterColSpanProps)===null||De===void 0?void 0:De.span)!==null&&at!==void 0?at:W.span)}return 24-Dt},[ve,ve%24+((c=(u=n.submitterColSpanProps)===null||u===void 0?void 0:u.span)!==null&&c!==void 0?c:W.span),(h=n.submitterColSpanProps)===null||h===void 0?void 0:h.span]),tt=(0,C.useContext)(Mt.ZP.ConfigContext),$e=tt.getPrefixCls("pro-query-filter");return(0,O.jsxs)(An.Z,{gutter:ue,justify:"start",className:st()("".concat($e,"-row"),S),children:[le,ie&&(0,O.jsx)(Dn.Z,(0,D.Z)((0,D.Z)({span:W.span,offset:Ce,className:st()((m=n.submitterColSpanProps)===null||m===void 0?void 0:m.className)},n.submitterColSpanProps),{},{style:{textAlign:"end"},children:(0,O.jsx)(It.Z.Item,{label:" ",colon:!1,shouldUpdate:!1,className:"".concat($e,"-actions ").concat(S).trim(),children:(0,O.jsx)(pr,{hiddenNum:Q,collapsed:I,collapseRender:me?L:!1,submitter:ie,setCollapsed:P},"pro-form-query-filter-actions")})}),"submitter")]},"resize-observer-row")},$i=(0,js.j)()?(nt=document)===null||nt===void 0||(nt=nt.body)===null||nt===void 0?void 0:nt.clientWidth:1024;function mr(i){var n=i.collapsed,c=i.layout,u=i.defaultCollapsed,h=u===void 0?!0:u,m=i.defaultColsNumber,v=i.defaultFormItemsNumber,y=i.span,S=i.searchGutter,b=S===void 0?24:S,T=i.searchText,w=i.resetText,A=i.optionRender,I=i.collapseRender,P=i.onReset,B=i.onCollapse,L=i.labelWidth,z=L===void 0?"80":L,Z=i.style,W=i.split,J=i.preserve,ue=J===void 0?!0:J,we=i.ignoreRules,ie=i.showHiddenNum,ge=ie===void 0?!1:ie,Me=i.submitterColSpanProps,de=(0,dn.Z)(i,Jc),re=(0,C.useContext)(Mt.ZP.ConfigContext),ve=re.getPrefixCls("pro-query-filter"),Oe=Qu(ve),le=Oe.wrapSSR,Q=Oe.hashId,me=(0,ln.Z)(function(){return typeof(Z==null?void 0:Z.width)=="number"?Z==null?void 0:Z.width:$i}),Ce=(0,Ue.Z)(me,2),tt=Ce[0],$e=Ce[1],Qe=(0,C.useMemo)(function(){return fn(c,tt+16,y)},[c,tt,y]),ft=(0,C.useMemo)(function(){if(v!==void 0)return v;if(m!==void 0){var at=24/Qe.span-1;return m>at?at:m}return Math.max(1,24/Qe.span-1)},[m,v,Qe.span]),Dt=(0,C.useMemo)(function(){if(z&&Qe.layout!=="vertical"&&z!=="auto")return{labelCol:{flex:"0 0 ".concat(z,"px")},wrapperCol:{style:{maxWidth:"calc(100% - ".concat(z,"px)")}},style:{flexWrap:"nowrap"}}},[Qe.layout,z]);return le((0,O.jsx)(Jr.Z,{onResize:function(De){tt!==De.width&&De.width>17&&$e(De.width)},children:(0,O.jsx)("div",{className:"".concat(ve,"-container ").concat(Q),style:i.containerStyle,children:(0,O.jsx)(Jl.I,(0,D.Z)((0,D.Z)({isKeyPressSubmit:!0,preserve:ue},de),{},{className:st()(ve,Q,de.className),onReset:P,style:Z,layout:Qe.layout,fieldProps:{style:{width:"100%"}},formItemProps:Dt,groupProps:{titleStyle:{display:"inline-block",marginInlineEnd:16}},contentRender:function(De,je,et){return(0,O.jsx)(to,{spanSize:Qe,collapsed:n,form:et,submitterColSpanProps:Me,collapseRender:I,defaultCollapsed:h,onCollapse:B,optionRender:A,submitter:je,items:De,split:W,baseClassName:ve,resetText:i.resetText,searchText:i.searchText,searchGutter:b,preserve:ue,ignoreRules:we,showLength:ft,showHiddenNum:ge})}}))})},"resize-observer"))}var no=k(1977),aa=k(42119),ec=["onFinish","step","formRef","title","stepProps"];function wh(i){var n=(0,C.useRef)(),c=(0,C.useContext)(bp),u=(0,C.useContext)(Qc),h=(0,D.Z)((0,D.Z)({},i),u),m=h.onFinish,v=h.step,y=h.formRef,S=h.title,b=h.stepProps,T=(0,dn.Z)(h,ec);return(0,ii.ET)(!T.submitter,"StepForm \u4E0D\u5305\u542B\u63D0\u4EA4\u6309\u94AE\uFF0C\u8BF7\u5728 StepsForm \u4E0A"),(0,C.useImperativeHandle)(y,function(){return n.current},[y==null?void 0:y.current]),(0,C.useEffect)(function(){if(h.name||h.step){var w=(h.name||h.step).toString();return c==null||c.regForm(w,h),function(){c==null||c.unRegForm(w)}}},[]),c&&c!==null&&c!==void 0&&c.formArrayRef&&(c.formArrayRef.current[v||0]=n),(0,O.jsx)(Jl.I,(0,D.Z)({formRef:n,onFinish:function(){var w=(0,he.Z)((0,p.Z)().mark(function A(I){var P;return(0,p.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(T.name&&(c==null||c.onFormFinish(T.name,I)),!m){L.next=9;break}return c==null||c.setLoading(!0),L.next=5,m==null?void 0:m(I);case 5:return P=L.sent,P&&(c==null||c.next()),c==null||c.setLoading(!1),L.abrupt("return");case 9:c!=null&&c.lastStep||c==null||c.next();case 10:case"end":return L.stop()}},A)}));return function(A){return w.apply(this,arguments)}}(),onInit:function(A,I){var P;n.current=I,c&&c!==null&&c!==void 0&&c.formArrayRef&&(c.formArrayRef.current[v||0]=n),T==null||(P=T.onInit)===null||P===void 0||P.call(T,A,I)},layout:"vertical"},(0,tn.Z)(T,["layoutType","columns"])))}var dh=wh,df=function(n){return(0,j.Z)({},n.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":(0,j.Z)({maxWidth:"1160px",margin:"auto"},"".concat(n.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}})};function fh(i){return(0,Nt.Xj)("StepsForm",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[df(c)]})}var hh=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],bp=C.createContext(void 0),lm={horizontal:function(n){var c=n.stepsDom,u=n.formDom;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(An.Z,{gutter:{xs:8,sm:16,md:24},children:(0,O.jsx)(Dn.Z,{span:24,children:c})}),(0,O.jsx)(An.Z,{gutter:{xs:8,sm:16,md:24},children:(0,O.jsx)(Dn.Z,{span:24,children:u})})]})},vertical:function(n){var c=n.stepsDom,u=n.formDom;return(0,O.jsxs)(An.Z,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[(0,O.jsx)(Dn.Z,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:C.cloneElement(c,{style:{height:"100%"}})}),(0,O.jsx)(Dn.Z,{children:(0,O.jsx)("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:u})})]})}},Qc=C.createContext(null);function Kh(i){var n=(0,C.useContext)(Mt.ZP.ConfigContext),c=n.getPrefixCls,u=c("pro-steps-form"),h=fh(u),m=h.wrapSSR,v=h.hashId,y=i.current,S=i.onCurrentChange,b=i.submitter,T=i.stepsFormRender,w=i.stepsRender,A=i.stepFormRender,I=i.stepsProps,P=i.onFinish,B=i.formProps,L=i.containerStyle,z=i.formRef,Z=i.formMapRef,W=i.layoutRender,J=(0,dn.Z)(i,hh),ue=(0,C.useRef)(new Map),we=(0,C.useRef)(new Map),ie=(0,C.useRef)([]),ge=(0,C.useState)([]),Me=(0,Ue.Z)(ge,2),de=Me[0],re=Me[1],ve=(0,C.useState)(!1),Oe=(0,Ue.Z)(ve,2),le=Oe[0],Q=Oe[1],me=(0,nr.YB)(),Ce=(0,ln.Z)(0,{value:i.current,onChange:i.onCurrentChange}),tt=(0,Ue.Z)(Ce,2),$e=tt[0],Qe=tt[1],ft=(0,C.useMemo)(function(){return lm[(I==null?void 0:I.direction)||"horizontal"]},[I==null?void 0:I.direction]),Dt=(0,C.useMemo)(function(){return $e===de.length-1},[de.length,$e]),at=(0,C.useCallback)(function(ht,Ft){we.current.has(ht)||re(function(In){return[].concat((0,en.Z)(In),[ht])}),we.current.set(ht,Ft)},[]),De=(0,C.useCallback)(function(ht){re(function(Ft){return Ft.filter(function(In){return In!==ht})}),we.current.delete(ht),ue.current.delete(ht)},[]);(0,C.useImperativeHandle)(Z,function(){return ie.current},[ie.current]),(0,C.useImperativeHandle)(z,function(){var ht;return(ht=ie.current[$e||0])===null||ht===void 0?void 0:ht.current},[$e,ie.current]);var je=(0,C.useCallback)(function(){var ht=(0,he.Z)((0,p.Z)().mark(function Ft(In,vt){var On,_n;return(0,p.Z)().wrap(function(ji){for(;;)switch(ji.prev=ji.next){case 0:if(ue.current.set(In,vt),!(!Dt||!P)){ji.next=3;break}return ji.abrupt("return");case 3:return Q(!0),On=ho.T.apply(void 0,[{}].concat((0,en.Z)(Array.from(ue.current.values())))),ji.prev=5,ji.next=8,P(On);case 8:_n=ji.sent,_n&&(Qe(0),ie.current.forEach(function(za){var ea;return(ea=za.current)===null||ea===void 0?void 0:ea.resetFields()})),ji.next=15;break;case 12:ji.prev=12,ji.t0=ji.catch(5),console.log(ji.t0);case 15:return ji.prev=15,Q(!1),ji.finish(15);case 18:case"end":return ji.stop()}},Ft,null,[[5,12,15,18]])}));return function(Ft,In){return ht.apply(this,arguments)}}(),[Dt,P,Q,Qe]),et=(0,C.useMemo)(function(){var ht=(0,no.n)($n.Z,"4.24.0")>-1,Ft=ht?{items:de.map(function(In){var vt=we.current.get(In);return(0,D.Z)({key:In,title:vt==null?void 0:vt.title},vt==null?void 0:vt.stepProps)})}:{};return(0,O.jsx)("div",{className:"".concat(u,"-steps-container ").concat(v).trim(),style:{maxWidth:Math.min(de.length*320,1160)},children:(0,O.jsx)(aa.Z,(0,D.Z)((0,D.Z)((0,D.Z)({},I),Ft),{},{current:$e,onChange:void 0,children:!ht&&de.map(function(In){var vt=we.current.get(In);return(0,O.jsx)(aa.Z.Step,(0,D.Z)({title:vt==null?void 0:vt.title},vt==null?void 0:vt.stepProps),In)})}))})},[de,v,u,$e,I]),Re=(0,Ln.J)(function(){var ht,Ft=ie.current[$e];(ht=Ft.current)===null||ht===void 0||ht.submit()}),be=(0,Ln.J)(function(){$e<1||Qe($e-1)}),Le=(0,C.useMemo)(function(){return b!==!1&&(0,O.jsx)(Gi.ZP,(0,D.Z)((0,D.Z)({type:"primary",loading:le},b==null?void 0:b.submitButtonProps),{},{onClick:function(){var Ft;b==null||(Ft=b.onSubmit)===null||Ft===void 0||Ft.call(b),Re()},children:me.getMessage("stepsForm.next","\u4E0B\u4E00\u6B65")}),"next")},[me,le,Re,b]),Je=(0,C.useMemo)(function(){return b!==!1&&(0,O.jsx)(Gi.ZP,(0,D.Z)((0,D.Z)({},b==null?void 0:b.resetButtonProps),{},{onClick:function(){var Ft;be(),b==null||(Ft=b.onReset)===null||Ft===void 0||Ft.call(b)},children:me.getMessage("stepsForm.prev","\u4E0A\u4E00\u6B65")}),"pre")},[me,be,b]),Ke=(0,C.useMemo)(function(){return b!==!1&&(0,O.jsx)(Gi.ZP,(0,D.Z)((0,D.Z)({type:"primary",loading:le},b==null?void 0:b.submitButtonProps),{},{onClick:function(){var Ft;b==null||(Ft=b.onSubmit)===null||Ft===void 0||Ft.call(b),Re()},children:me.getMessage("stepsForm.submit","\u63D0\u4EA4")}),"submit")},[me,le,Re,b]),Fe=(0,Ln.J)(function(){$e>de.length-2||Qe($e+1)}),Ct=(0,C.useMemo)(function(){var ht=[],Ft=$e||0;if(Ft<1?de.length===1?ht.push(Ke):ht.push(Le):Ft+1===de.length?ht.push(Je,Ke):ht.push(Je,Le),ht=ht.filter(C.isValidElement),b&&b.render){var In,vt={form:(In=ie.current[$e])===null||In===void 0?void 0:In.current,onSubmit:Re,step:$e,onPre:be};return b.render(vt,ht)}return b&&(b==null?void 0:b.render)===!1?null:ht},[de.length,Le,Re,Je,be,$e,Ke,b]),ke=(0,C.useMemo)(function(){return(0,pi.Z)(i.children).map(function(ht,Ft){var In=ht.props,vt=In.name||"".concat(Ft),On=$e===Ft,_n=On?{contentRender:A,submitter:!1}:{};return(0,O.jsx)("div",{className:st()("".concat(u,"-step"),v,(0,j.Z)({},"".concat(u,"-step-active"),On)),children:(0,O.jsx)(Qc.Provider,{value:(0,D.Z)((0,D.Z)((0,D.Z)((0,D.Z)({},_n),B),In),{},{name:vt,step:Ft}),children:ht})},vt)})},[B,v,u,i.children,$e,A]),Bt=(0,C.useMemo)(function(){return w?w(de.map(function(ht){var Ft;return{key:ht,title:(Ft=we.current.get(ht))===null||Ft===void 0?void 0:Ft.title}}),et):et},[de,et,w]),bn=(0,C.useMemo)(function(){return(0,O.jsxs)("div",{className:"".concat(u,"-container ").concat(v).trim(),style:L,children:[ke,T?null:(0,O.jsx)($c.Z,{children:Ct})]})},[L,ke,v,u,T,Ct]),Qt=(0,C.useMemo)(function(){var ht={stepsDom:Bt,formDom:bn};return T?T(W?W(ht):ft(ht),Ct):W?W(ht):ft(ht)},[Bt,bn,ft,T,Ct,W]);return m((0,O.jsx)("div",{className:st()(u,v),children:(0,O.jsx)(It.Z.Provider,(0,D.Z)((0,D.Z)({},J),{},{children:(0,O.jsx)(bp.Provider,{value:{loading:le,setLoading:Q,regForm:at,keyArray:de,next:Fe,formArrayRef:ie,formMapRef:we,lastStep:Dt,unRegForm:De,onFormFinish:je},children:Qt})}))}))}function ph(i){return(0,O.jsx)(nr._Y,{needDeps:!0,children:(0,O.jsx)(Kh,(0,D.Z)({},i))})}ph.StepForm=dh,ph.useForm=It.Z.useForm;var tc=["steps","columns","forceUpdate","grid"],ed=function(n){var c=n.steps,u=n.columns,h=n.forceUpdate,m=n.grid,v=(0,dn.Z)(n,tc),y=(0,Il.d)(v),S=(0,C.useCallback)(function(T){var w,A;(w=(A=y.current).onCurrentChange)===null||w===void 0||w.call(A,T),h([])},[h,y]),b=(0,C.useMemo)(function(){return c==null?void 0:c.map(function(T,w){return(0,C.createElement)(ip,(0,D.Z)((0,D.Z)({grid:m},T),{},{key:w,layoutType:"StepForm",columns:u[w]}))})},[u,m,c]);return(0,O.jsx)(ph,(0,D.Z)((0,D.Z)({},v),{},{onCurrentChange:S,children:b}))},cm=ed,td=function(n){var c=n.children;return(0,O.jsx)(O.Fragment,{children:c})},um=td,_p=k(97462),Xf=function(n,c){if(n.valueType==="dependency"){var u,h,m,v=(u=n.getFieldProps)===null||u===void 0?void 0:u.call(n);return(0,ii.ET)(Array.isArray((h=n.name)!==null&&h!==void 0?h:v==null?void 0:v.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),(0,ii.ET)(typeof n.columns=="function",'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray((m=n.name)!==null&&m!==void 0?m:v==null?void 0:v.name)?(0,C.createElement)(_p.Z,(0,D.Z)((0,D.Z)({name:n.name},v),{},{key:n.key}),function(y){return!n.columns||typeof n.columns!="function"?null:c.genItems(n.columns(y))}):null}return!0},mh=k(96074),dm=function(n){if(n.valueType==="divider"){var c;return(0,C.createElement)(mh.Z,(0,D.Z)((0,D.Z)({},(c=n.getFieldProps)===null||c===void 0?void 0:c.call(n)),{},{key:n.key}))}return!0},Ah=k(88748),fm=["key"],Ud=function(n,c){var u=c.action,h=c.formRef,m=c.type,v=c.originItem,y=(0,D.Z)((0,D.Z)({},(0,tn.Z)(n,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:n.name||n.key||n.dataIndex,width:n.width,render:n!=null&&n.render?function(w,A,I){var P,B,L,z;return n==null||(P=n.render)===null||P===void 0?void 0:P.call(n,w,A,I,u==null?void 0:u.current,(0,D.Z)((0,D.Z)({type:m},n),{},{key:(B=n.key)===null||B===void 0?void 0:B.toString(),formItemProps:(L=n.getFormItemProps)===null||L===void 0?void 0:L.call(n),fieldProps:(z=n.getFieldProps)===null||z===void 0?void 0:z.call(n)}))}:void 0}),S=function(){var A=y.key,I=(0,dn.Z)(y,fm);return(0,O.jsx)(Ah.Z,(0,D.Z)((0,D.Z)({},I),{},{ignoreFormItem:!0}),A)},b=n!=null&&n.renderFormItem?function(w,A){var I,P,B,L,z=(0,Ai.Y)((0,D.Z)((0,D.Z)({},A),{},{onChange:void 0}));return n==null||(I=n.renderFormItem)===null||I===void 0?void 0:I.call(n,(0,D.Z)((0,D.Z)({type:m},n),{},{key:(P=n.key)===null||P===void 0?void 0:P.toString(),formItemProps:(B=n.getFormItemProps)===null||B===void 0?void 0:B.call(n),fieldProps:(L=n.getFieldProps)===null||L===void 0?void 0:L.call(n),originProps:v}),(0,D.Z)((0,D.Z)({},z),{},{defaultRender:S,type:m}),h.current)}:void 0,T=function(){if(n!=null&&n.renderFormItem){var A=b==null?void 0:b(null,{});if(!A||n.ignoreFormItem)return A}return(0,C.createElement)(Ah.Z,(0,D.Z)((0,D.Z)({},y),{},{key:[n.key,n.index||0].join("-"),renderFormItem:b}))};return n.dependencies?(0,O.jsx)(_p.Z,{name:n.dependencies||[],children:T},n.key):T()},Mp=k(97940),Yh=function(n,c){var u=c.genItems;if(n.valueType==="formList"&&n.dataIndex){var h,m;return!n.columns||!Array.isArray(n.columns)?null:(0,C.createElement)(Mp.u,(0,D.Z)((0,D.Z)({},(h=n.getFormItemProps)===null||h===void 0?void 0:h.call(n)),{},{key:n.key,name:n.dataIndex,label:n.label,initialValue:n.initialValue,colProps:n.colProps,rowProps:n.rowProps},(m=n.getFieldProps)===null||m===void 0?void 0:m.call(n)),u(n.columns))}return!0},qh=k(25278),Ep=k(90789),Jh=["children","value","valuePropName","onChange","fieldProps","space","type","transform","convertValue","lightProps"],hm=["children","space","valuePropName"],Cp={space:$c.Z,group:qh.Z.Group};function Tp(i){var n=arguments.length<=1?void 0:arguments[1];return n&&n.target&&i in n.target?n.target[i]:n}var vh=function(n){var c=n.children,u=n.value,h=u===void 0?[]:u,m=n.valuePropName,v=n.onChange,y=n.fieldProps,S=n.space,b=n.type,T=b===void 0?"space":b,w=n.transform,A=n.convertValue,I=n.lightProps,P=(0,dn.Z)(n,Jh),B=(0,Ln.J)(function(ie,ge){var Me,de=(0,en.Z)(h);de[ge]=Tp(m||"value",ie),v==null||v(de),y==null||(Me=y.onChange)===null||Me===void 0||Me.call(y,de)}),L=-1,z=(0,pi.Z)((0,ms.h)(c,h,n)).map(function(ie){if(C.isValidElement(ie)){var ge,Me,de;L+=1;var re=L,ve=(ie==null||(ge=ie.type)===null||ge===void 0?void 0:ge.displayName)==="ProFormComponent"||(ie==null||(Me=ie.props)===null||Me===void 0?void 0:Me.readonly),Oe=ve?(0,D.Z)((0,D.Z)({key:re,ignoreFormItem:!0},ie.props||{}),{},{fieldProps:(0,D.Z)((0,D.Z)({},ie==null||(de=ie.props)===null||de===void 0?void 0:de.fieldProps),{},{onChange:function(){B(arguments.length<=0?void 0:arguments[0],re)}}),value:h==null?void 0:h[re],onChange:void 0}):(0,D.Z)((0,D.Z)({key:re},ie.props||{}),{},{value:h==null?void 0:h[re],onChange:function(Q){var me,Ce;B(Q,re),(me=(Ce=ie.props).onChange)===null||me===void 0||me.call(Ce,Q)}});return C.cloneElement(ie,Oe)}return ie}),Z=Cp[T],W=(0,Ur.zx)(P),J=W.RowWrapper,ue=(0,C.useMemo)(function(){return(0,D.Z)({},T==="group"?{compact:!0}:{})},[T]),we=(0,C.useCallback)(function(ie){var ge=ie.children;return(0,O.jsx)(Z,(0,D.Z)((0,D.Z)((0,D.Z)({},ue),S),{},{align:"start",wrap:!0,children:ge}))},[Z,S,ue]);return(0,O.jsx)(J,{Wrapper:we,children:z})},Qh=C.forwardRef(function(i,n){var c=i.children,u=i.space,h=i.valuePropName,m=(0,dn.Z)(i,hm);return(0,C.useImperativeHandle)(n,function(){return{}}),(0,O.jsx)(vh,(0,D.Z)((0,D.Z)((0,D.Z)({space:u,valuePropName:h},m.fieldProps),{},{onChange:void 0},m),{},{children:c}))}),pm=(0,Ep.G)(Qh),wp=pm,ep=function(n,c){var u=c.genItems;if(n.valueType==="formSet"&&n.dataIndex){var h,m;return!n.columns||!Array.isArray(n.columns)?null:(0,C.createElement)(wp,(0,D.Z)((0,D.Z)({},(h=n.getFormItemProps)===null||h===void 0?void 0:h.call(n)),{},{key:n.key,initialValue:n.initialValue,name:n.dataIndex,label:n.label,colProps:n.colProps,rowProps:n.rowProps},(m=n.getFieldProps)===null||m===void 0?void 0:m.call(n)),u(n.columns))}return!0},mm=lo.A.Group,Ap=function(n,c){var u=c.genItems;if(n.valueType==="group"){var h;return!n.columns||!Array.isArray(n.columns)?null:(0,O.jsx)(mm,(0,D.Z)((0,D.Z)({label:n.label,colProps:n.colProps,rowProps:n.rowProps},(h=n.getFieldProps)===null||h===void 0?void 0:h.call(n)),{},{children:u(n.columns)}),n.key)}return!0},Rp=function(n){return n.valueType&&typeof n.valueType=="string"&&["index","indexBorder","option"].includes(n==null?void 0:n.valueType)?null:!0},tp=[Rp,Ap,Yh,ep,dm,Xf],Ip=function(n,c){for(var u=0;u<tp.length;u++){var h=tp[u],m=h(n,c);if(m!==!0)return m}return Ud(n,c)},Pp=["columns","layoutType","type","action","shouldUpdate","formRef"],Rh={DrawerForm:Ec,QueryFilter:mr,LightFilter:K,StepForm:ph.StepForm,StepsForm:cm,ModalForm:Ot,Embed:um,Form:lo.A};function np(i){var n=i.columns,c=i.layoutType,u=c===void 0?"Form":c,h=i.type,m=h===void 0?"form":h,v=i.action,y=i.shouldUpdate,S=y===void 0?function(le,Q){return(0,cr.ZP)(le)!==(0,cr.ZP)(Q)}:y,b=i.formRef,T=(0,dn.Z)(i,Pp),w=Rh[u]||lo.A,A=It.Z.useForm(),I=(0,Ue.Z)(A,1),P=I[0],B=It.Z.useFormInstance(),L=(0,C.useState)([]),z=(0,Ue.Z)(L,2),Z=z[1],W=(0,C.useState)(function(){return[]}),J=(0,Ue.Z)(W,2),ue=J[0],we=J[1],ie=uh(i.form||B||P),ge=(0,C.useRef)(),Me=(0,Il.d)(i),de=(0,Ln.J)(function(le){return le.filter(function(Q){return!(Q.hideInForm&&m==="form")}).sort(function(Q,me){return me.order||Q.order?(me.order||0)-(Q.order||0):(me.index||0)-(Q.index||0)}).map(function(Q,me){var Ce=(0,ms.h)(Q.title,Q,"form",(0,O.jsx)(Ei.G,{label:Q.title,tooltip:Q.tooltip||Q.tip})),tt=(0,Ai.Y)({title:Ce,label:Ce,name:Q.name,valueType:(0,ms.h)(Q.valueType,{}),key:Q.key||Q.dataIndex||me,columns:Q.columns,valueEnum:Q.valueEnum,dataIndex:Q.dataIndex||Q.key,initialValue:Q.initialValue,width:Q.width,index:Q.index,readonly:Q.readonly,colSize:Q.colSize,colProps:Q.colProps,rowProps:Q.rowProps,className:Q.className,tooltip:Q.tooltip||Q.tip,dependencies:Q.dependencies,proFieldProps:Q.proFieldProps,ignoreFormItem:Q.ignoreFormItem,getFieldProps:Q.fieldProps?function(){return(0,ms.h)(Q.fieldProps,ie.current,Q)}:void 0,getFormItemProps:Q.formItemProps?function(){return(0,ms.h)(Q.formItemProps,ie.current,Q)}:void 0,render:Q.render,renderFormItem:Q.renderFormItem,renderText:Q.renderText,request:Q.request,params:Q.params,transform:Q.transform,convertValue:Q.convertValue,debounceTime:Q.debounceTime,defaultKeyWords:Q.defaultKeyWords});return Ip(tt,{action:v,type:m,originItem:Q,formRef:ie,genItems:de})}).filter(function(Q){return!!Q})}),re=(0,C.useCallback)(function(le,Q){var me=Me.current.onValuesChange;(S===!0||typeof S=="function"&&S(Q,ge.current))&&we([]),ge.current=Q,me==null||me(le,Q)},[Me,S]),ve=(0,Yc.Z)(function(){if(ie.current&&!(n.length&&Array.isArray(n[0])))return de(n)},[n,T==null?void 0:T.open,v,m,ue]),Oe=(0,Yc.Z)(function(){return u==="StepsForm"?{forceUpdate:Z,columns:n}:{}},[n,u]);return(0,C.useImperativeHandle)(b,function(){return ie.current},[ie.current]),(0,O.jsx)(w,(0,D.Z)((0,D.Z)((0,D.Z)({},Oe),T),{},{onInit:function(Q,me){var Ce;b&&(b.current=me),T==null||(Ce=T.onInit)===null||Ce===void 0||Ce.call(T,Q,me),ie.current=me},form:i.form||P,formRef:ie,onValuesChange:re,children:ve}))}var ip=np;function Np(i){var n=i.replace(/[A-Z]/g,function(c){return"-".concat(c.toLowerCase())});return n.startsWith("-")&&(n=n.slice(1)),n}var vm=function(n,c){return!n&&c!==!1?(c==null?void 0:c.filterType)==="light"?"LightFilter":"QueryFilter":"Form"},gm=function(n,c,u){return!n&&u==="LightFilter"?(0,tn.Z)((0,D.Z)({},c),["labelWidth","defaultCollapsed","filterType"]):n?{}:(0,tn.Z)((0,D.Z)({labelWidth:c?c==null?void 0:c.labelWidth:void 0,defaultCollapsed:!0},c),["filterType"])},Op=function(n,c){return n?(0,tn.Z)(c,["ignoreRules"]):(0,D.Z)({ignoreRules:!0},c)},Dp=function(n){var c=n.onSubmit,u=n.formRef,h=n.dateFormatter,m=h===void 0?"string":h,v=n.type,y=n.columns,S=n.action,b=n.ghost,T=n.manualRequest,w=n.onReset,A=n.submitButtonLoading,I=n.search,P=n.form,B=n.bordered,L=(0,C.useContext)(nr.L_),z=L.hashId,Z=v==="form",W=function(){var re=(0,he.Z)((0,p.Z)().mark(function ve(Oe,le){return(0,p.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:c&&c(Oe,le);case 1:case"end":return me.stop()}},ve)}));return function(Oe,le){return re.apply(this,arguments)}}(),J=(0,C.useContext)(Mt.ZP.ConfigContext),ue=J.getPrefixCls,we=(0,C.useMemo)(function(){return y.filter(function(re){return!(re===xu.EXPAND_COLUMN||re===xu.SELECTION_COLUMN||(re.hideInSearch||re.search===!1)&&v!=="form"||v==="form"&&re.hideInForm)}).map(function(re){var ve,Oe=!re.valueType||["textarea","jsonCode","code"].includes(re==null?void 0:re.valueType)&&v==="table"?"text":re==null?void 0:re.valueType,le=(re==null?void 0:re.key)||(re==null||(ve=re.dataIndex)===null||ve===void 0?void 0:ve.toString());return(0,D.Z)((0,D.Z)((0,D.Z)({},re),{},{width:void 0},re.search&&(0,mn.Z)(re.search)==="object"?re.search:{}),{},{valueType:Oe,proFieldProps:(0,D.Z)((0,D.Z)({},re.proFieldProps),{},{proFieldKey:le?"table-field-".concat(le):void 0})})})},[y,v]),ie=ue("pro-table-search"),ge=ue("pro-table-form"),Me=(0,C.useMemo)(function(){return vm(Z,I)},[I,Z]),de=(0,C.useMemo)(function(){return{submitter:{submitButtonProps:{loading:A}}}},[A]);return(0,O.jsx)("div",{className:st()(z,(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({},ue("pro-card"),!0),"".concat(ue("pro-card"),"-border"),!!B),"".concat(ue("pro-card"),"-bordered"),!!B),"".concat(ue("pro-card"),"-ghost"),!!b),ie,!0),ge,Z),ue("pro-table-search-".concat(Np(Me))),!0),"".concat(ie,"-ghost"),b),I==null?void 0:I.className,I!==!1&&(I==null?void 0:I.className))),children:(0,O.jsx)(ip,(0,D.Z)((0,D.Z)((0,D.Z)((0,D.Z)({layoutType:Me,columns:we,type:v},de),gm(Z,I,Me)),Op(Z,P||{})),{},{formRef:u,action:S,dateFormatter:m,onInit:function(ve,Oe){if(u.current=Oe,v!=="form"){var le,Q,me,Ce=(le=S.current)===null||le===void 0?void 0:le.pageInfo,tt=ve,$e=tt.current,Qe=$e===void 0?Ce==null?void 0:Ce.current:$e,ft=tt.pageSize,Dt=ft===void 0?Ce==null?void 0:Ce.pageSize:ft;if((Q=S.current)===null||Q===void 0||(me=Q.setPageInfo)===null||me===void 0||me.call(Q,(0,D.Z)((0,D.Z)({},Ce),{},{current:parseInt(Qe,10),pageSize:parseInt(Dt,10)})),T)return;W(ve,!0)}},onReset:function(ve){w==null||w(ve)},onFinish:function(ve){W(ve,!1)},initialValues:P==null?void 0:P.initialValues}))})},rp=Dp,ym=function(i){(0,Gf.Z)(c,i);var n=(0,is.Z)(c);function c(){var u;(0,ql.Z)(this,c);for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return u=n.call.apply(n,[this].concat(m)),(0,j.Z)((0,ml.Z)(u),"onSubmit",function(y,S){var b=u.props,T=b.pagination,w=b.beforeSearchSubmit,A=w===void 0?function(ue){return ue}:w,I=b.action,P=b.onSubmit,B=b.onFormSearchSubmit,L=T?(0,Ai.Y)({current:T.current,pageSize:T.pageSize}):{},z=(0,D.Z)((0,D.Z)({},y),{},{_timestamp:Date.now()},L),Z=(0,tn.Z)(A(z),Object.keys(L));if(B(Z),!S){var W,J;(W=I.current)===null||W===void 0||(J=W.setPageInfo)===null||J===void 0||J.call(W,{current:1})}P&&!S&&(P==null||P(y))}),(0,j.Z)((0,ml.Z)(u),"onReset",function(y){var S,b,T=u.props,w=T.pagination,A=T.beforeSearchSubmit,I=A===void 0?function(W){return W}:A,P=T.action,B=T.onFormSearchSubmit,L=T.onReset,z=w?(0,Ai.Y)({current:w.current,pageSize:w.pageSize}):{},Z=(0,tn.Z)(I((0,D.Z)((0,D.Z)({},y),z)),Object.keys(z));B(Z),(S=P.current)===null||S===void 0||(b=S.setPageInfo)===null||b===void 0||b.call(S,{current:1}),L==null||L()}),(0,j.Z)((0,ml.Z)(u),"isEqual",function(y){var S=u.props,b=S.columns,T=S.loading,w=S.formRef,A=S.type,I=S.cardBordered,P=S.dateFormatter,B=S.form,L=S.search,z=S.manualRequest,Z={columns:b,loading:T,formRef:w,type:A,cardBordered:I,dateFormatter:P,form:B,search:L,manualRequest:z};return!(0,Mo.A)(Z,{columns:y.columns,formRef:y.formRef,loading:y.loading,type:y.type,cardBordered:y.cardBordered,dateFormatter:y.dateFormatter,form:y.form,search:y.search,manualRequest:y.manualRequest})}),(0,j.Z)((0,ml.Z)(u),"shouldComponentUpdate",function(y){return u.isEqual(y)}),(0,j.Z)((0,ml.Z)(u),"render",function(){var y=u.props,S=y.columns,b=y.loading,T=y.formRef,w=y.type,A=y.action,I=y.cardBordered,P=y.dateFormatter,B=y.form,L=y.search,z=y.pagination,Z=y.ghost,W=y.manualRequest,J=z?(0,Ai.Y)({current:z.current,pageSize:z.pageSize}):{};return(0,O.jsx)(rp,{submitButtonLoading:b,columns:S,type:w,ghost:Z,formRef:T,onSubmit:u.onSubmit,manualRequest:W,onReset:u.onReset,dateFormatter:P,search:L,form:(0,D.Z)((0,D.Z)({autoFocusFirstInput:!1},B),{},{extraUrlParams:(0,D.Z)((0,D.Z)({},J),B==null?void 0:B.extraUrlParams)}),action:A,bordered:qu("search",I)})}),u}return(0,Ms.Z)(c)}(C.Component),Ih=ym,ap={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},xm=ap,Lp=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:xm}))},Up=C.forwardRef(Lp),ff=Up,Sm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"},bm=Sm,Bp=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:bm}))},hf=C.forwardRef(Bp),op=hf,_m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zm-353.6-74.7c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zm11.4 225.4a7.14 7.14 0 00-11.3 0L405.6 752.3a7.23 7.23 0 005.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z"}}]},name:"vertical-align-middle",theme:"outlined"},pf=_m,mf=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:pf}))},Mm=C.forwardRef(mf),Fp=Mm,vf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}}]},name:"vertical-align-bottom",theme:"outlined"},zp=vf,Em=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:zp}))},gf=C.forwardRef(Em),Cm=gf,Tm=k(42952),sp=k(9798),lp=function(n){return(0,j.Z)((0,j.Z)((0,j.Z)({},n.componentCls,{width:"auto","&-title":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px"},"&-overlay":(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({},"".concat(n.antCls,"-popover-inner-content"),{width:"200px",paddingBlock:0,paddingInline:0,paddingBlockEnd:8}),"".concat(n.antCls,"-tree-node-content-wrapper:hover"),{backgroundColor:"transparent"}),"".concat(n.antCls,"-tree-draggable-icon"),{cursor:"grab"}),"".concat(n.antCls,"-tree-treenode"),(0,j.Z)((0,j.Z)({alignItems:"center","&:hover":(0,j.Z)({},"".concat(n.componentCls,"-list-item-option"),{display:"block"})},"".concat(n.antCls,"-tree-checkbox"),{marginInlineEnd:"4px"}),"".concat(n.antCls,"-tree-title"),{width:"100%"}))}),"".concat(n.componentCls,"-action-rest-button"),{color:n.colorPrimary}),"".concat(n.componentCls,"-list"),(0,j.Z)((0,j.Z)((0,j.Z)({display:"flex",flexDirection:"column",width:"100%",paddingBlockStart:8},"&".concat(n.componentCls,"-list-group"),{paddingBlockStart:0}),"&-title",{marginBlockStart:"6px",marginBlockEnd:"6px",paddingInlineStart:"24px",color:n.colorTextSecondary,fontSize:"12px"}),"&-item",{display:"flex",alignItems:"center",maxHeight:24,justifyContent:"space-between","&-title":{flex:1,maxWidth:80,textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"},"&-option":{display:"none",float:"right",cursor:"pointer","> span":{"> span.anticon":{color:n.colorPrimary}},"> span + span":{marginInlineStart:4}}}))};function wm(i){return(0,Nt.Xj)("ColumnSetting",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[lp(c)]})}var cp=["key","dataIndex","children"],Am=["disabled"],up=function(n){var c=n.title,u=n.show,h=n.children,m=n.columnKey,v=n.fixed,y=(0,C.useContext)(Yl),S=y.columnsMap,b=y.setColumnsMap;return u?(0,O.jsx)(Un.Z,{title:c,children:(0,O.jsx)("span",{onClick:function(w){w.stopPropagation(),w.preventDefault();var A=S[m]||{},I=(0,D.Z)((0,D.Z)({},S),{},(0,j.Z)({},m,(0,D.Z)((0,D.Z)({},A),{},{fixed:v})));b(I)},children:h})}):null},Rm=function(n){var c=n.columnKey,u=n.isLeaf,h=n.title,m=n.className,v=n.fixed,y=n.showListItemOption,S=(0,nr.YB)(),b=(0,C.useContext)(nr.L_),T=b.hashId,w=(0,O.jsxs)("span",{className:"".concat(m,"-list-item-option ").concat(T).trim(),children:[(0,O.jsx)(up,{columnKey:c,fixed:"left",title:S.getMessage("tableToolBar.leftPin","\u56FA\u5B9A\u5728\u5217\u9996"),show:v!=="left",children:(0,O.jsx)(op,{})}),(0,O.jsx)(up,{columnKey:c,fixed:void 0,title:S.getMessage("tableToolBar.noPin","\u4E0D\u56FA\u5B9A"),show:!!v,children:(0,O.jsx)(Fp,{})}),(0,O.jsx)(up,{columnKey:c,fixed:"right",title:S.getMessage("tableToolBar.rightPin","\u56FA\u5B9A\u5728\u5217\u5C3E"),show:v!=="right",children:(0,O.jsx)(Cm,{})})]});return(0,O.jsxs)("span",{className:"".concat(m,"-list-item ").concat(T).trim(),children:[(0,O.jsx)("div",{className:"".concat(m,"-list-item-title ").concat(T).trim(),children:h}),y&&!u?w:null]},c)},dp=function(n){var c,u,h,m=n.list,v=n.draggable,y=n.checkable,S=n.showListItemOption,b=n.className,T=n.showTitle,w=T===void 0?!0:T,A=n.title,I=n.listHeight,P=I===void 0?280:I,B=(0,C.useContext)(nr.L_),L=B.hashId,z=(0,C.useContext)(Yl),Z=z.columnsMap,W=z.setColumnsMap,J=z.sortKeyColumns,ue=z.setSortKeyColumns,we=m&&m.length>0,ie=(0,C.useMemo)(function(){if(!we)return{};var re=[],ve=new Map,Oe=function le(Q,me){return Q.map(function(Ce){var tt,$e=Ce.key,Qe=Ce.dataIndex,ft=Ce.children,Dt=(0,dn.Z)(Ce,cp),at=Rl($e,[me==null?void 0:me.columnKey,Dt.index].filter(Boolean).join("-")),De=Z[at||"null"]||{show:!0};De.show!==!1&&!ft&&re.push(at);var je=(0,D.Z)((0,D.Z)({key:at},(0,tn.Z)(Dt,["className"])),{},{selectable:!1,disabled:De.disable===!0,disableCheckbox:typeof De.disable=="boolean"?De.disable:(tt=De.disable)===null||tt===void 0?void 0:tt.checkbox,isLeaf:me?!0:void 0});if(ft){var et;je.children=le(ft,(0,D.Z)((0,D.Z)({},De),{},{columnKey:at})),(et=je.children)!==null&&et!==void 0&&et.every(function(Re){return re==null?void 0:re.includes(Re.key)})&&re.push(at)}return ve.set($e,je),je})};return{list:Oe(m),keys:re,map:ve}},[Z,m,we]),ge=(0,Ln.J)(function(re,ve,Oe){var le=(0,D.Z)({},Z),Q=(0,en.Z)(J),me=Q.findIndex(function(Qe){return Qe===re}),Ce=Q.findIndex(function(Qe){return Qe===ve}),tt=Oe>=me;if(!(me<0)){var $e=Q[me];Q.splice(me,1),Oe===0?Q.unshift($e):Q.splice(tt?Ce:Ce+1,0,$e),Q.forEach(function(Qe,ft){le[Qe]=(0,D.Z)((0,D.Z)({},le[Qe]||{}),{},{order:ft})}),W(le),ue(Q)}}),Me=(0,Ln.J)(function(re){var ve=(0,D.Z)({},Z),Oe=function le(Q){var me,Ce=(0,D.Z)({},ve[Q]);if(Ce.show=re.checked,(me=ie.map)!==null&&me!==void 0&&(me=me.get(Q))!==null&&me!==void 0&&me.children){var tt;(tt=ie.map.get(Q))===null||tt===void 0||(tt=tt.children)===null||tt===void 0||tt.forEach(function($e){return le($e.key)})}ve[Q]=Ce};Oe(re.node.key),W((0,D.Z)({},ve))});if(!we)return null;var de=(0,O.jsx)(Vt,{itemHeight:24,draggable:v&&!!((c=ie.list)!==null&&c!==void 0&&c.length)&&((u=ie.list)===null||u===void 0?void 0:u.length)>1,checkable:y,onDrop:function(ve){var Oe=ve.node.key,le=ve.dragNode.key,Q=ve.dropPosition,me=ve.dropToGap,Ce=Q===-1||!me?Q+1:Q;ge(le,Oe,Ce)},blockNode:!0,onCheck:function(ve,Oe){return Me(Oe)},checkedKeys:ie.keys,showLine:!1,titleRender:function(ve){var Oe=(0,D.Z)((0,D.Z)({},ve),{},{children:void 0});if(!Oe.title)return null;var le=(0,ms.h)(Oe.title,Oe),Q=(0,O.jsx)(sp.Z.Text,{style:{width:80},ellipsis:{tooltip:le},children:le});return(0,O.jsx)(Rm,(0,D.Z)((0,D.Z)({className:b},(0,tn.Z)(Oe,["key"])),{},{showListItemOption:S,title:Q,columnKey:Oe.key}))},height:P,treeData:(h=ie.list)===null||h===void 0?void 0:h.map(function(re){var ve=re.disabled,Oe=(0,dn.Z)(re,Am);return Oe})});return(0,O.jsxs)(O.Fragment,{children:[w&&(0,O.jsx)("span",{className:"".concat(b,"-list-title ").concat(L).trim(),children:A}),de]})},Im=function(n){var c=n.localColumns,u=n.className,h=n.draggable,m=n.checkable,v=n.showListItemOption,y=n.listsHeight,S=(0,C.useContext)(nr.L_),b=S.hashId,T=[],w=[],A=[],I=(0,nr.YB)();c.forEach(function(L){if(!L.hideInSetting){var z=L.fixed;if(z==="left"){w.push(L);return}if(z==="right"){T.push(L);return}A.push(L)}});var P=T&&T.length>0,B=w&&w.length>0;return(0,O.jsxs)("div",{className:st()("".concat(u,"-list"),b,(0,j.Z)({},"".concat(u,"-list-group"),P||B)),children:[(0,O.jsx)(dp,{title:I.getMessage("tableToolBar.leftFixedTitle","\u56FA\u5B9A\u5728\u5DE6\u4FA7"),list:w,draggable:h,checkable:m,showListItemOption:v,className:u,listHeight:y}),(0,O.jsx)(dp,{list:A,draggable:h,checkable:m,showListItemOption:v,title:I.getMessage("tableToolBar.noFixedTitle","\u4E0D\u56FA\u5B9A"),showTitle:B||P,className:u,listHeight:y}),(0,O.jsx)(dp,{title:I.getMessage("tableToolBar.rightFixedTitle","\u56FA\u5B9A\u5728\u53F3\u4FA7"),list:T,draggable:h,checkable:m,showListItemOption:v,className:u,listHeight:y})]})};function Pm(i){var n,c,u,h,m=(0,C.useRef)(null),v=(0,C.useContext)(Yl),y=i.columns,S=i.checkedReset,b=S===void 0?!0:S,T=v.columnsMap,w=v.setColumnsMap,A=v.clearPersistenceStorage;(0,C.useEffect)(function(){var Me;if((Me=v.propsRef.current)!==null&&Me!==void 0&&(Me=Me.columnsState)!==null&&Me!==void 0&&Me.value){var de;m.current=JSON.parse(JSON.stringify(((de=v.propsRef.current)===null||de===void 0||(de=de.columnsState)===null||de===void 0?void 0:de.value)||{}))}},[]);var I=(0,Ln.J)(function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,de={},re=function ve(Oe){Oe.forEach(function(le){var Q=le.key,me=le.fixed,Ce=le.index,tt=le.children,$e=le.disable,Qe=Rl(Q,Ce);if(Qe){var ft,Dt;de[Qe]={show:$e?(ft=T[Qe])===null||ft===void 0?void 0:ft.show:Me,fixed:me,disable:$e,order:(Dt=T[Qe])===null||Dt===void 0?void 0:Dt.order}}tt&&ve(tt)})};re(y),w(de)}),P=(0,Ln.J)(function(Me){Me.target.checked?I():I(!1)}),B=(0,Ln.J)(function(){var Me;A==null||A(),w(((Me=v.propsRef.current)===null||Me===void 0||(Me=Me.columnsState)===null||Me===void 0?void 0:Me.defaultValue)||m.current||v.defaultColumnKeyMap)}),L=Object.values(T).filter(function(Me){return!Me||Me.show===!1}),z=L.length>0&&L.length!==y.length,Z=(0,nr.YB)(),W=(0,C.useContext)(Mt.ZP.ConfigContext),J=W.getPrefixCls,ue=J("pro-table-column-setting"),we=wm(ue),ie=we.wrapSSR,ge=we.hashId;return ie((0,O.jsx)(Yn.Z,{arrow:!1,title:(0,O.jsxs)("div",{className:"".concat(ue,"-title ").concat(ge).trim(),children:[i.checkable===!1?(0,O.jsx)("div",{}):(0,O.jsx)(el.Z,{indeterminate:z,checked:L.length===0&&L.length!==y.length,onChange:function(de){P(de)},children:Z.getMessage("tableToolBar.columnDisplay","\u5217\u5C55\u793A")}),b?(0,O.jsx)("a",{onClick:B,className:"".concat(ue,"-action-rest-button ").concat(ge).trim(),children:Z.getMessage("tableToolBar.reset","\u91CD\u7F6E")}):null,i!=null&&i.extra?(0,O.jsx)($c.Z,{size:12,align:"center",children:i.extra}):null]}),overlayClassName:"".concat(ue,"-overlay ").concat(ge).trim(),trigger:"click",placement:"bottomRight",content:(0,O.jsx)(Im,{checkable:(n=i.checkable)!==null&&n!==void 0?n:!0,draggable:(c=i.draggable)!==null&&c!==void 0?c:!0,showListItemOption:(u=i.showListItemOption)!==null&&u!==void 0?u:!0,className:ue,localColumns:y,listsHeight:i.listsHeight}),children:i.children||(0,O.jsx)(Un.Z,{title:Z.getMessage("tableToolBar.columnSetting","\u5217\u8BBE\u7F6E"),children:(h=i.settingIcon)!==null&&h!==void 0?h:(0,O.jsx)(Tm.Z,{})})}))}var Nm=Pm,Hp=function(n){var c=(0,no.n)((0,qc.b)(),"4.24.0")>-1?{menu:n}:{overlay:(0,O.jsx)(_.Z,(0,D.Z)({},n))};return(0,Ai.Y)(c)},Na=function(n){var c=(0,C.useContext)(nr.L_),u=c.hashId,h=n.items,m=h===void 0?[]:h,v=n.type,y=v===void 0?"inline":v,S=n.prefixCls,b=n.activeKey,T=n.defaultActiveKey,w=(0,ln.Z)(b||T,{value:b,onChange:n.onChange}),A=(0,Ue.Z)(w,2),I=A[0],P=A[1];if(m.length<1)return null;var B=m.find(function(z){return z.key===I})||m[0];if(y==="inline")return(0,O.jsx)("div",{className:st()("".concat(S,"-menu"),"".concat(S,"-inline-menu"),u),children:m.map(function(z,Z){return(0,O.jsx)("div",{onClick:function(){P(z.key)},className:st()("".concat(S,"-inline-menu-item"),B.key===z.key?"".concat(S,"-inline-menu-item-active"):void 0,u),children:z.label},z.key||Z)})});if(y==="tab")return(0,O.jsx)(hi.Z,{items:m.map(function(z){var Z;return(0,D.Z)((0,D.Z)({},z),{},{key:(Z=z.key)===null||Z===void 0?void 0:Z.toString()})}),activeKey:B.key,onTabClick:function(Z){return P(Z)},children:(0,no.n)($n.Z,"4.23.0")<0?m==null?void 0:m.map(function(z,Z){return(0,C.createElement)(hi.Z.TabPane,(0,D.Z)((0,D.Z)({},z),{},{key:z.key||Z,tab:z.label}))}):null});var L=Hp({selectedKeys:[B.key],onClick:function(Z){P(Z.key)},items:m.map(function(z,Z){return{key:z.key||Z,disabled:z.disabled,label:z.label}})});return(0,O.jsx)("div",{className:st()("".concat(S,"-menu"),"".concat(S,"-dropdownmenu")),children:(0,O.jsx)(Ro.Z,(0,D.Z)((0,D.Z)({trigger:["click"]},L),{},{children:(0,O.jsxs)($c.Z,{className:"".concat(S,"-dropdownmenu-label"),children:[B.label,(0,O.jsx)(Sl.Z,{})]})}))})},Om=Na,Zp=function(n){return(0,j.Z)({},n.componentCls,(0,j.Z)((0,j.Z)((0,j.Z)({lineHeight:"1","&-container":{display:"flex",justifyContent:"space-between",paddingBlock:n.padding,paddingInline:0,"&-mobile":{flexDirection:"column"}},"&-title":{display:"flex",alignItems:"center",justifyContent:"flex-start",color:n.colorTextHeading,fontWeight:"500",fontSize:n.fontSizeLG},"&-search:not(:last-child)":{display:"flex",alignItems:"center",justifyContent:"flex-start"},"&-setting-item":{marginBlock:0,marginInline:4,color:n.colorIconHover,fontSize:n.fontSizeLG,cursor:"pointer","> span":{display:"block",width:"100%",height:"100%"},"&:hover":{color:n.colorPrimary}},"&-left":(0,j.Z)((0,j.Z)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:n.marginXS,justifyContent:"flex-start",maxWidth:"calc(100% - 200px)"},"".concat(n.antCls,"-tabs"),{width:"100%"}),"&-has-tabs",{overflow:"hidden"}),"&-right":{flex:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:n.marginXS},"&-extra-line":{marginBlockEnd:n.margin},"&-setting-items":{display:"flex",gap:n.marginXS,lineHeight:"32px",alignItems:"center"},"&-filter":(0,j.Z)({"&:not(:last-child)":{marginInlineEnd:n.margin},display:"flex",alignItems:"center"},"div$".concat(n.antCls,"-pro-table-search"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0}),"&-inline-menu-item":{display:"inline-block",marginInlineEnd:n.marginLG,cursor:"pointer",opacity:"0.75","&-active":{fontWeight:"bold",opacity:"1"}}},"".concat(n.antCls,"-tabs-top > ").concat(n.antCls,"-tabs-nav"),(0,j.Z)({marginBlockEnd:0,"&::before":{borderBlockEnd:0}},"".concat(n.antCls,"-tabs-nav-list"),{marginBlockStart:0,"${token.antCls}-tabs-tab":{paddingBlockStart:0}})),"&-dropdownmenu-label",{fontWeight:"bold",fontSize:n.fontSizeIcon,textAlign:"center",cursor:"pointer"}),"@media (max-width: 768px)",(0,j.Z)({},n.componentCls,{"&-container":{display:"flex",flexWrap:"wrap",flexDirection:"column"},"&-left":{marginBlockEnd:"16px",maxWidth:"100%"}})))};function Dm(i){return(0,Nt.Xj)("ProTableListToolBar",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[Zp(c)]})}function Lm(i){if(C.isValidElement(i))return i;if(i){var n=i,c=n.icon,u=n.tooltip,h=n.onClick,m=n.key;return c&&u?(0,O.jsx)(Un.Z,{title:u,children:(0,O.jsx)("span",{onClick:function(){h&&h(m)},children:c},m)}):(0,O.jsx)("span",{onClick:function(){h&&h(m)},children:c},m)}return null}var Um=function(n){var c,u=n.prefixCls,h=n.tabs,m=n.multipleLine,v=n.filtersNode;return m?(0,O.jsx)("div",{className:"".concat(u,"-extra-line"),children:h!=null&&h.items&&h!==null&&h!==void 0&&h.items.length?(0,O.jsx)(hi.Z,{style:{width:"100%"},defaultActiveKey:h.defaultActiveKey,activeKey:h.activeKey,items:h.items.map(function(y,S){var b;return(0,D.Z)((0,D.Z)({label:y.tab},y),{},{key:((b=y.key)===null||b===void 0?void 0:b.toString())||(S==null?void 0:S.toString())})}),onChange:h.onChange,tabBarExtraContent:v,children:(c=h.items)===null||c===void 0?void 0:c.map(function(y,S){return(0,no.n)($n.Z,"4.23.0")<0?(0,C.createElement)(hi.Z.TabPane,(0,D.Z)((0,D.Z)({},y),{},{key:y.key||S,tab:y.tab})):null})}):v}):null},fp=function(n){var c=n.prefixCls,u=n.title,h=n.subTitle,m=n.tooltip,v=n.className,y=n.style,S=n.search,b=n.onSearch,T=n.multipleLine,w=T===void 0?!1:T,A=n.filter,I=n.actions,P=I===void 0?[]:I,B=n.settings,L=B===void 0?[]:B,z=n.tabs,Z=n.menu,W=(0,C.useContext)(Mt.ZP.ConfigContext),J=W.getPrefixCls,ue=Nt.Ow.useToken(),we=ue.token,ie=J("pro-table-list-toolbar",c),ge=Dm(ie),Me=ge.wrapSSR,de=ge.hashId,re=(0,nr.YB)(),ve=(0,C.useState)(!1),Oe=(0,Ue.Z)(ve,2),le=Oe[0],Q=Oe[1],me=re.getMessage("tableForm.inputPlaceholder","\u8BF7\u8F93\u5165"),Ce=(0,C.useMemo)(function(){return S?C.isValidElement(S)?S:(0,O.jsx)(qh.Z.Search,(0,D.Z)((0,D.Z)({style:{width:200},placeholder:me},S),{},{onSearch:(0,he.Z)((0,p.Z)().mark(function et(){var Re,be,Le,Je,Ke,Fe,Ct=arguments;return(0,p.Z)().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:for(Le=Ct.length,Je=new Array(Le),Ke=0;Ke<Le;Ke++)Je[Ke]=Ct[Ke];return Bt.next=3,(Re=(be=S).onSearch)===null||Re===void 0?void 0:Re.call.apply(Re,[be].concat(Je));case 3:Fe=Bt.sent,Fe!==!1&&(b==null||b(Je==null?void 0:Je[0]));case 5:case"end":return Bt.stop()}},et)}))})):null},[me,b,S]),tt=(0,C.useMemo)(function(){return A?(0,O.jsx)("div",{className:"".concat(ie,"-filter ").concat(de).trim(),children:A}):null},[A,de,ie]),$e=(0,C.useMemo)(function(){return Z||u||h||m},[Z,h,u,m]),Qe=(0,C.useMemo)(function(){return Array.isArray(P)?P.length<1?null:(0,O.jsx)("div",{style:{display:"flex",alignItems:"center",gap:we.marginXS},children:P.map(function(et,Re){return C.isValidElement(et)?C.cloneElement(et,(0,D.Z)({key:Re},et==null?void 0:et.props)):(0,O.jsx)(C.Fragment,{children:et},Re)})}):P},[P]),ft=(0,C.useMemo)(function(){return!!($e&&Ce||!w&&tt||Qe||L!=null&&L.length)},[Qe,tt,$e,w,Ce,L==null?void 0:L.length]),Dt=(0,C.useMemo)(function(){return m||u||h||Z||!$e&&Ce},[$e,Z,Ce,h,u,m]),at=(0,C.useMemo)(function(){return!Dt&&ft?(0,O.jsx)("div",{className:"".concat(ie,"-left ").concat(de).trim()}):!Z&&($e||!Ce)?(0,O.jsx)("div",{className:"".concat(ie,"-left ").concat(de).trim(),children:(0,O.jsx)("div",{className:"".concat(ie,"-title ").concat(de).trim(),children:(0,O.jsx)(Ei.G,{tooltip:m,label:u,subTitle:h})})}):(0,O.jsxs)("div",{className:st()("".concat(ie,"-left"),de,(0,j.Z)((0,j.Z)((0,j.Z)({},"".concat(ie,"-left-has-tabs"),(Z==null?void 0:Z.type)==="tab"),"".concat(ie,"-left-has-dropdown"),(Z==null?void 0:Z.type)==="dropdown"),"".concat(ie,"-left-has-inline-menu"),(Z==null?void 0:Z.type)==="inline")),children:[$e&&!Z&&(0,O.jsx)("div",{className:"".concat(ie,"-title ").concat(de).trim(),children:(0,O.jsx)(Ei.G,{tooltip:m,label:u,subTitle:h})}),Z&&(0,O.jsx)(Om,(0,D.Z)((0,D.Z)({},Z),{},{prefixCls:ie})),!$e&&Ce?(0,O.jsx)("div",{className:"".concat(ie,"-search ").concat(de).trim(),children:Ce}):null]})},[Dt,ft,$e,de,Z,ie,Ce,h,u,m]),De=(0,C.useMemo)(function(){return ft?(0,O.jsxs)("div",{className:"".concat(ie,"-right ").concat(de).trim(),style:le?{}:{alignItems:"center"},children:[w?null:tt,$e&&Ce?(0,O.jsx)("div",{className:"".concat(ie,"-search ").concat(de).trim(),children:Ce}):null,Qe,L!=null&&L.length?(0,O.jsx)("div",{className:"".concat(ie,"-setting-items ").concat(de).trim(),children:L.map(function(et,Re){var be=Lm(et);return(0,O.jsx)("div",{className:"".concat(ie,"-setting-item ").concat(de).trim(),children:be},Re)})}):null]}):null},[ft,ie,de,le,$e,Ce,w,tt,Qe,L]),je=(0,C.useMemo)(function(){if(!ft&&!Dt)return null;var et=st()("".concat(ie,"-container"),de,(0,j.Z)({},"".concat(ie,"-container-mobile"),le));return(0,O.jsxs)("div",{className:et,children:[at,De]})},[Dt,ft,de,le,at,ie,De]);return Me((0,O.jsx)(Jr.Z,{onResize:function(Re){Re.width<375!==le&&Q(Re.width<375)},children:(0,O.jsxs)("div",{style:y,className:st()(ie,de,v),children:[je,(0,O.jsx)(Um,{filtersNode:tt,prefixCls:ie,tabs:z,multipleLine:w})]})}))},Bm=fp,Fm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M840 836H184c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h656c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm0-724H184c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h656c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM610.8 378c6 0 9.4-7 5.7-11.7L515.7 238.7a7.14 7.14 0 00-11.3 0L403.6 366.3a7.23 7.23 0 005.7 11.7H476v268h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H548V378h62.8z"}}]},name:"column-height",theme:"outlined"},zm=Fm,Hm=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:zm}))},Vp=C.forwardRef(Hm),Zm=Vp,Gp=function(n){var c=n.icon,u=c===void 0?(0,O.jsx)(Zm,{}):c,h=(0,C.useContext)(Yl),m=(0,nr.YB)(),v=Hp({selectedKeys:[h.tableSize],onClick:function(S){var b,T=S.key;(b=h.setTableSize)===null||b===void 0||b.call(h,T)},style:{width:80},items:[{key:"large",label:m.getMessage("tableToolBar.densityLarger","\u5BBD\u677E")},{key:"middle",label:m.getMessage("tableToolBar.densityMiddle","\u4E2D\u7B49")},{key:"small",label:m.getMessage("tableToolBar.densitySmall","\u7D27\u51D1")}]});return(0,O.jsx)(Ro.Z,(0,D.Z)((0,D.Z)({},v),{},{trigger:["click"],children:(0,O.jsx)(Un.Z,{title:m.getMessage("tableToolBar.density","\u8868\u683C\u5BC6\u5EA6"),children:u})}))},hp=C.memo(Gp),Vm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},Gm=Vm,km=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:Gm}))},Wm=C.forwardRef(km),pp=Wm,kp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},jm=kp,Wp=function(n,c){return C.createElement(bo.Z,(0,Di.Z)({},n,{ref:c,icon:jm}))},Ph=C.forwardRef(Wp),$f=Ph,Kf=function(){var n=(0,nr.YB)(),c=(0,C.useState)(!1),u=(0,Ue.Z)(c,2),h=u[0],m=u[1];return(0,C.useEffect)(function(){(0,js.j)()&&(document.onfullscreenchange=function(){m(!!document.fullscreenElement)})},[]),h?(0,O.jsx)(Un.Z,{title:n.getMessage("tableToolBar.exitFullScreen","\u5168\u5C4F"),children:(0,O.jsx)(pp,{})}):(0,O.jsx)(Un.Z,{title:n.getMessage("tableToolBar.fullScreen","\u5168\u5C4F"),children:(0,O.jsx)($f,{})})},Nh=C.memo(Kf),Xm=["headerTitle","tooltip","toolBarRender","action","options","selectedRowKeys","selectedRows","toolbar","onSearch","columns","optionsRender"];function $m(i,n){var c,u=i.intl;return{reload:{text:u.getMessage("tableToolBar.reload","\u5237\u65B0"),icon:(c=n.reloadIcon)!==null&&c!==void 0?c:(0,O.jsx)(ff,{})},density:{text:u.getMessage("tableToolBar.density","\u8868\u683C\u5BC6\u5EA6"),icon:(0,O.jsx)(hp,{icon:n.densityIcon})},fullScreen:{text:u.getMessage("tableToolBar.fullScreen","\u5168\u5C4F"),icon:(0,O.jsx)(Nh,{})}}}function Km(i,n,c,u){return Object.keys(i).filter(function(h){return h}).map(function(h){var m=i[h];if(!m)return null;var v=m===!0?n[h]:function(S){m==null||m(S,c.current)};if(typeof v!="function"&&(v=function(){}),h==="setting")return(0,C.createElement)(Nm,(0,D.Z)((0,D.Z)({},i[h]),{},{columns:u,key:h}));if(h==="fullScreen")return(0,O.jsx)("span",{onClick:v,children:(0,O.jsx)(Nh,{})},h);var y=$m(n,i)[h];return y?(0,O.jsx)("span",{onClick:v,children:(0,O.jsx)(Un.Z,{title:y.text,children:y.icon})},h):null}).filter(function(h){return h})}function jp(i){var n=i.headerTitle,c=i.tooltip,u=i.toolBarRender,h=i.action,m=i.options,v=i.selectedRowKeys,y=i.selectedRows,S=i.toolbar,b=i.onSearch,T=i.columns,w=i.optionsRender,A=(0,dn.Z)(i,Xm),I=(0,C.useContext)(Yl),P=(0,nr.YB)(),B=(0,C.useMemo)(function(){var Z={reload:function(){var we;return h==null||(we=h.current)===null||we===void 0?void 0:we.reload()},density:!0,setting:!0,search:!1,fullScreen:function(){var we,ie;return h==null||(we=h.current)===null||we===void 0||(ie=we.fullScreen)===null||ie===void 0?void 0:ie.call(we)}};if(m===!1)return[];var W=(0,D.Z)((0,D.Z)({},Z),{},{fullScreen:!1},m),J=Km(W,(0,D.Z)((0,D.Z)({},Z),{},{intl:P}),h,T);return w?w((0,D.Z)({headerTitle:n,tooltip:c,toolBarRender:u,action:h,options:m,selectedRowKeys:v,selectedRows:y,toolbar:S,onSearch:b,columns:T,optionsRender:w},A),J):J},[h,T,n,P,b,w,m,A,v,y,u,S,c]),L=u?u(h==null?void 0:h.current,{selectedRowKeys:v,selectedRows:y}):[],z=(0,C.useMemo)(function(){if(!m||!m.search)return!1;var Z={value:I.keyWords,onChange:function(J){return I.setKeyWords(J.target.value)}};return m.search===!0?Z:(0,D.Z)((0,D.Z)({},Z),m.search)},[I,m]);return(0,C.useEffect)(function(){I.keyWords===void 0&&(b==null||b(""))},[I.keyWords,b]),(0,O.jsx)(Bm,(0,D.Z)({title:n,tooltip:c||A.tip,search:z,onSearch:b,actions:L,settings:B},S))}var Ym=function(i){(0,Gf.Z)(c,i);var n=(0,is.Z)(c);function c(){var u;(0,ql.Z)(this,c);for(var h=arguments.length,m=new Array(h),v=0;v<h;v++)m[v]=arguments[v];return u=n.call.apply(n,[this].concat(m)),(0,j.Z)((0,ml.Z)(u),"onSearch",function(y){var S,b,T,w,A=u.props,I=A.options,P=A.onFormSearchSubmit,B=A.actionRef;if(!(!I||!I.search)){var L=I.search===!0?{}:I.search,z=L.name,Z=z===void 0?"keyword":z,W=(S=I.search)===null||S===void 0||(b=S.onSearch)===null||b===void 0?void 0:b.call(S,y);W!==!1&&(B==null||(T=B.current)===null||T===void 0||(w=T.setPageInfo)===null||w===void 0||w.call(T,{current:1}),P((0,Ai.Y)((0,j.Z)({_timestamp:Date.now()},Z,y))))}}),(0,j.Z)((0,ml.Z)(u),"isEquals",function(y){var S=u.props,b=S.hideToolbar,T=S.tableColumn,w=S.options,A=S.tooltip,I=S.toolbar,P=S.selectedRows,B=S.selectedRowKeys,L=S.headerTitle,z=S.actionRef,Z=S.toolBarRender;return(0,Mo.A)({hideToolbar:b,tableColumn:T,options:w,tooltip:A,toolbar:I,selectedRows:P,selectedRowKeys:B,headerTitle:L,actionRef:z,toolBarRender:Z},{hideToolbar:y.hideToolbar,tableColumn:y.tableColumn,options:y.options,tooltip:y.tooltip,toolbar:y.toolbar,selectedRows:y.selectedRows,selectedRowKeys:y.selectedRowKeys,headerTitle:y.headerTitle,actionRef:y.actionRef,toolBarRender:y.toolBarRender},["render","renderFormItem"])}),(0,j.Z)((0,ml.Z)(u),"shouldComponentUpdate",function(y){return y.searchNode?!0:!u.isEquals(y)}),(0,j.Z)((0,ml.Z)(u),"render",function(){var y=u.props,S=y.hideToolbar,b=y.tableColumn,T=y.options,w=y.searchNode,A=y.tooltip,I=y.toolbar,P=y.selectedRows,B=y.selectedRowKeys,L=y.headerTitle,z=y.actionRef,Z=y.toolBarRender,W=y.optionsRender;return S?null:(0,O.jsx)(jp,{tooltip:A,columns:b,options:T,headerTitle:L,action:z,onSearch:u.onSearch,selectedRows:P,selectedRowKeys:B,toolBarRender:Z,toolbar:(0,D.Z)({filter:w},I),optionsRender:W})}),u}return(0,Ms.Z)(c)}(C.Component),Bd=Ym,Oh=new jt.E4("turn",{"0%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(90deg)"},"50%":{transform:"rotate(180deg)"},"75%":{transform:"rotate(270deg)"},"100%":{transform:"rotate(360deg)"}}),mp=function(n){return(0,j.Z)((0,j.Z)((0,j.Z)({},n.componentCls,(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({zIndex:1},"".concat(n.antCls,"-table-wrapper ").concat(n.antCls,"-table-pagination").concat(n.antCls,"-pagination"),{marginBlockEnd:0}),"&:not(:root):fullscreen",{minHeight:"100vh",overflow:"auto",background:n.colorBgContainer}),"&-extra",{marginBlockEnd:16}),"&-polling",(0,j.Z)({},"".concat(n.componentCls,"-list-toolbar-setting-item"),{".anticon.anticon-reload":{transform:"rotate(0deg)",animationName:Oh,animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite"}})),"td".concat(n.antCls,"-table-cell"),{">a":{fontSize:n.fontSize}}),"".concat(n.antCls,"-table").concat(n.antCls,"-table-tbody").concat(n.antCls,"-table-wrapper:only-child").concat(n.antCls,"-table"),{marginBlock:0,marginInline:0}),"".concat(n.antCls,"-table").concat(n.antCls,"-table-middle ").concat(n.componentCls),(0,j.Z)({marginBlock:0,marginInline:-8},"".concat(n.proComponentsCls,"-card"),{backgroundColor:"initial"})),"& &-search",(0,j.Z)((0,j.Z)((0,j.Z)((0,j.Z)({marginBlockEnd:"16px",background:n.colorBgContainer,"&-ghost":{background:"transparent"}},"&".concat(n.componentCls,"-form"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:16,overflow:"unset"}),"&-light-filter",{marginBlockEnd:0,paddingBlock:0,paddingInline:0}),"&-form-option",(0,j.Z)((0,j.Z)((0,j.Z)({},"".concat(n.antCls,"-form-item"),{}),"".concat(n.antCls,"-form-item-label"),{}),"".concat(n.antCls,"-form-item-control-input"),{})),"@media (max-width: 575px)",(0,j.Z)({},n.componentCls,(0,j.Z)({height:"auto !important",paddingBlockEnd:"24px"},"".concat(n.antCls,"-form-item-label"),{minWidth:"80px",textAlign:"start"})))),"&-toolbar",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"64px",paddingInline:24,paddingBlock:0,"&-option":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"&-title":{flex:"1",color:n.colorTextLabel,fontWeight:"500",fontSize:"16px",lineHeight:"24px",opacity:"0.85"}})),"@media (max-width: ".concat(n.screenXS,")px"),(0,j.Z)({},n.componentCls,(0,j.Z)({},"".concat(n.antCls,"-table"),{width:"100%",overflowX:"auto","&-thead > tr,&-tbody > tr":{"> th,> td":{whiteSpace:"pre",">span":{display:"block"}}}}))),"@media (max-width: 575px)",(0,j.Z)({},"".concat(n.componentCls,"-toolbar"),{flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",height:"auto",marginBlockEnd:"16px",marginInlineStart:"16px",paddingBlock:8,paddingInline:8,paddingBlockStart:"16px",lineHeight:"normal","&-title":{marginBlockEnd:16},"&-option":{display:"flex",justifyContent:"space-between",width:"100%"},"&-default-option":{display:"flex",flex:"1",alignItems:"center",justifyContent:"flex-end"}}))};function qm(i){return(0,Nt.Xj)("ProTable",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[mp(c)]})}var Xp=["data","success","total"],Jm=function(n){var c=n.pageInfo;if(c){var u=c.current,h=c.defaultCurrent,m=c.pageSize,v=c.defaultPageSize;return{current:u||h||1,total:0,pageSize:m||v||20}}return{current:1,total:0,pageSize:20}},Qm=function(n,c,u){var h,m=(0,C.useRef)(!1),v=(0,C.useRef)(null),y=u||{},S=y.onLoad,b=y.manual,T=y.polling,w=y.onRequestError,A=y.debounceTime,I=A===void 0?20:A,P=y.effects,B=P===void 0?[]:P,L=(0,C.useRef)(b),z=(0,C.useRef)(),Z=(0,ln.Z)(c,{value:u==null?void 0:u.dataSource,onChange:u==null?void 0:u.onDataSourceChange}),W=(0,Ue.Z)(Z,2),J=W[0],ue=W[1],we=(0,ln.Z)(!1,{value:(0,mn.Z)(u==null?void 0:u.loading)==="object"?u==null||(h=u.loading)===null||h===void 0?void 0:h.spinning:u==null?void 0:u.loading,onChange:u==null?void 0:u.onLoadingChange}),ie=(0,Ue.Z)(we,2),ge=ie[0],Me=ie[1],de=(0,ln.Z)(function(){return Jm(u)},{onChange:u==null?void 0:u.onPageInfoChange}),re=(0,Ue.Z)(de,2),ve=re[0],Oe=re[1],le=(0,Ln.J)(function(Re){(Re.current!==ve.current||Re.pageSize!==ve.pageSize||Re.total!==ve.total)&&Oe(Re)}),Q=(0,ln.Z)(!1),me=(0,Ue.Z)(Q,2),Ce=me[0],tt=me[1],$e=function(be,Le){(0,zr.unstable_batchedUpdates)(function(){ue(be),(ve==null?void 0:ve.total)!==Le&&le((0,D.Z)((0,D.Z)({},ve),{},{total:Le||be.length}))})},Qe=(0,qr.D)(ve==null?void 0:ve.current),ft=(0,qr.D)(ve==null?void 0:ve.pageSize),Dt=(0,qr.D)(T),at=(0,Ln.J)(function(){(0,zr.unstable_batchedUpdates)(function(){Me(!1),tt(!1)})}),De=function(){var Re=(0,he.Z)((0,p.Z)().mark(function be(Le){var Je,Ke,Fe,Ct,ke,Bt,bn,Qt,ht,Ft,In,vt;return(0,p.Z)().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:if(!L.current){_n.next=3;break}return L.current=!1,_n.abrupt("return");case 3:return Le?tt(!0):Me(!0),Je=ve||{},Ke=Je.pageSize,Fe=Je.current,_n.prev=5,Ct=(u==null?void 0:u.pageInfo)!==!1?{current:Fe,pageSize:Ke}:void 0,_n.next=9,n==null?void 0:n(Ct);case 9:if(_n.t0=_n.sent,_n.t0){_n.next=12;break}_n.t0={};case 12:if(ke=_n.t0,Bt=ke.data,bn=Bt===void 0?[]:Bt,Qt=ke.success,ht=ke.total,Ft=ht===void 0?0:ht,In=(0,dn.Z)(ke,Xp),Qt!==!1){_n.next=21;break}return _n.abrupt("return",[]);case 21:return vt=Al(bn,[u.postData].filter(function(Wi){return Wi})),$e(vt,Ft),S==null||S(vt,In),_n.abrupt("return",vt);case 27:if(_n.prev=27,_n.t1=_n.catch(5),w!==void 0){_n.next=31;break}throw new Error(_n.t1);case 31:J===void 0&&ue([]),w(_n.t1);case 33:return _n.prev=33,at(),_n.finish(33);case 36:return _n.abrupt("return",[]);case 37:case"end":return _n.stop()}},be,null,[[5,27,33,36]])}));return function(Le){return Re.apply(this,arguments)}}(),je=(0,gr.D)(function(){var Re=(0,he.Z)((0,p.Z)().mark(function be(Le){var Je,Ke,Fe;return(0,p.Z)().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(z.current&&clearTimeout(z.current),n){ke.next=3;break}return ke.abrupt("return");case 3:return Je=new AbortController,v.current=Je,ke.prev=5,ke.next=8,Promise.race([De(Le),new Promise(function(Bt,bn){var Qt,ht;(Qt=v.current)===null||Qt===void 0||(Qt=Qt.signal)===null||Qt===void 0||(ht=Qt.addEventListener)===null||ht===void 0||ht.call(Qt,"abort",function(){bn("aborted"),je.cancel(),at()})})]);case 8:if(Ke=ke.sent,!Je.signal.aborted){ke.next=11;break}return ke.abrupt("return");case 11:return Fe=(0,ms.h)(T,Ke),Fe&&!m.current&&(z.current=setTimeout(function(){je.run(Fe)},Math.max(Fe,2e3))),ke.abrupt("return",Ke);case 16:if(ke.prev=16,ke.t0=ke.catch(5),ke.t0!=="aborted"){ke.next=20;break}return ke.abrupt("return");case 20:throw ke.t0;case 21:case"end":return ke.stop()}},be,null,[[5,16]])}));return function(be){return Re.apply(this,arguments)}}(),I||30),et=function(){var be;(be=v.current)===null||be===void 0||be.abort(),je.cancel(),at()};return(0,C.useEffect)(function(){return T||clearTimeout(z.current),!Dt&&T&&je.run(!0),function(){clearTimeout(z.current)}},[T]),(0,C.useEffect)(function(){return m.current=!1,function(){m.current=!0}},[]),(0,C.useEffect)(function(){var Re=ve||{},be=Re.current,Le=Re.pageSize;(!Qe||Qe===be)&&(!ft||ft===Le)||u.pageInfo&&J&&(J==null?void 0:J.length)>Le||be!==void 0&&J&&J.length<=Le&&(et(),je.run(!1))},[ve==null?void 0:ve.current]),(0,C.useEffect)(function(){ft&&(et(),je.run(!1))},[ve==null?void 0:ve.pageSize]),(0,fr.KW)(function(){return et(),je.run(!1),b||(L.current=!1),function(){et()}},[].concat((0,en.Z)(B),[b])),{dataSource:J,setDataSource:ue,loading:(0,mn.Z)(u==null?void 0:u.loading)==="object"?(0,D.Z)((0,D.Z)({},u==null?void 0:u.loading),{},{spinning:ge}):ge,reload:function(){var Re=(0,he.Z)((0,p.Z)().mark(function Le(){return(0,p.Z)().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return et(),Ke.abrupt("return",je.run(!1));case 2:case"end":return Ke.stop()}},Le)}));function be(){return Re.apply(this,arguments)}return be}(),pageInfo:ve,pollingLoading:Ce,reset:function(){var Re=(0,he.Z)((0,p.Z)().mark(function Le(){var Je,Ke,Fe,Ct,ke,Bt,bn,Qt;return(0,p.Z)().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:Je=u||{},Ke=Je.pageInfo,Fe=Ke||{},Ct=Fe.defaultCurrent,ke=Ct===void 0?1:Ct,Bt=Fe.defaultPageSize,bn=Bt===void 0?20:Bt,Qt={current:ke,total:0,pageSize:bn},le(Qt);case 4:case"end":return Ft.stop()}},Le)}));function be(){return Re.apply(this,arguments)}return be}(),setPageInfo:function(){var Re=(0,he.Z)((0,p.Z)().mark(function Le(Je){return(0,p.Z)().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:le((0,D.Z)((0,D.Z)({},ve),Je));case 1:case"end":return Fe.stop()}},Le)}));function be(Le){return Re.apply(this,arguments)}return be}()}},$p=Qm,Kp=function(n){return function(c,u){var h,m,v=c.fixed,y=c.index,S=u.fixed,b=u.index;if(v==="left"&&S!=="left"||S==="right"&&v!=="right")return-2;if(S==="left"&&v!=="left"||v==="right"&&S!=="right")return 2;var T=c.key||"".concat(y),w=u.key||"".concat(b);if((h=n[T])!==null&&h!==void 0&&h.order||(m=n[w])!==null&&m!==void 0&&m.order){var A,I;return(((A=n[T])===null||A===void 0?void 0:A.order)||0)-(((I=n[w])===null||I===void 0?void 0:I.order)||0)}return(c.index||0)-(u.index||0)}},e0=k(60692),t0=function(n){var c={};return Object.keys(n||{}).forEach(function(u){var h;Array.isArray(n[u])&&((h=n[u])===null||h===void 0?void 0:h.length)===0||n[u]!==void 0&&(c[u]=n[u])}),c},n0=function(n){var c;return!!(n!=null&&(c=n.valueType)!==null&&c!==void 0&&c.toString().startsWith("date")||(n==null?void 0:n.valueType)==="select"||n!=null&&n.valueEnum)},Yp=function(n){var c;return((c=n.ellipsis)===null||c===void 0?void 0:c.showTitle)===!1?!1:n.ellipsis},Dh=function(n,c,u){if(c.copyable||c.ellipsis){var h=c.copyable&&u?{text:u,tooltips:["",""]}:void 0,m=n0(c),v=Yp(c)&&u?{tooltip:(c==null?void 0:c.tooltip)!==!1&&m?(0,O.jsx)("div",{className:"pro-table-tooltip-text",children:n}):u}:!1;return(0,O.jsx)(sp.Z.Text,{style:{width:"100%",margin:0,padding:0},title:"",copyable:h,ellipsis:v,children:n})}return n},qp=k(74763),i0=k(66758),Lh=function(n){var c="".concat(n.antCls,"-progress-bg");return(0,j.Z)({},n.componentCls,{"&-multiple":{paddingBlockStart:6,paddingBlockEnd:12,paddingInline:8},"&-progress":{"&-success":(0,j.Z)({},c,{backgroundColor:n.colorSuccess}),"&-error":(0,j.Z)({},c,{backgroundColor:n.colorError}),"&-warning":(0,j.Z)({},c,{backgroundColor:n.colorWarning})},"&-rule":{display:"flex",alignItems:"center","&-icon":{"&-default":{display:"flex",alignItems:"center",justifyContent:"center",width:"14px",height:"22px","&-circle":{width:"6px",height:"6px",backgroundColor:n.colorTextSecondary,borderRadius:"4px"}},"&-loading":{color:n.colorPrimary},"&-error":{color:n.colorError},"&-success":{color:n.colorSuccess}},"&-text":{color:n.colorText}}})};function rs(i){return(0,Nt.Xj)("InlineErrorFormItem",function(n){var c=(0,D.Z)((0,D.Z)({},n),{},{componentCls:".".concat(i)});return[Lh(c)]})}var r0=["rules","name","children","popoverProps"],vs=["errorType","rules","name","popoverProps","children"],gh={marginBlockStart:-5,marginBlockEnd:-5,marginInlineStart:0,marginInlineEnd:0},a0=function(n){var c=n.inputProps,u=n.input,h=n.extra,m=n.errorList,v=n.popoverProps,y=(0,C.useState)(!1),S=(0,Ue.Z)(y,2),b=S[0],T=S[1],w=(0,C.useState)([]),A=(0,Ue.Z)(w,2),I=A[0],P=A[1],B=(0,C.useContext)(Mt.ZP.ConfigContext),L=B.getPrefixCls,z=L(),Z=(0,Nt.dQ)(),W=rs("".concat(z,"-form-item-with-help")),J=W.wrapSSR,ue=W.hashId;(0,C.useEffect)(function(){c.validateStatus!=="validating"&&P(c.errors)},[c.errors,c.validateStatus]);var we=(0,qc.X)(I.length<1?!1:b,function(ge){ge!==b&&T(ge)}),ie=c.validateStatus==="validating";return(0,O.jsx)(Yn.Z,(0,D.Z)((0,D.Z)((0,D.Z)({trigger:(v==null?void 0:v.trigger)||["click"],placement:(v==null?void 0:v.placement)||"topLeft"},we),{},{getPopupContainer:v==null?void 0:v.getPopupContainer,getTooltipContainer:v==null?void 0:v.getTooltipContainer,content:J((0,O.jsx)("div",{className:"".concat(z,"-form-item ").concat(ue," ").concat(Z.hashId).trim(),style:{margin:0,padding:0},children:(0,O.jsxs)("div",{className:"".concat(z,"-form-item-with-help ").concat(ue," ").concat(Z.hashId).trim(),children:[ie?(0,O.jsx)(X.Z,{}):null,m]})}))},v),{},{children:(0,O.jsxs)(O.Fragment,{children:[u,h]})}),"popover")},o0=function(n){var c=n.rules,u=n.name,h=n.children,m=n.popoverProps,v=(0,dn.Z)(n,r0);return(0,O.jsx)(It.Z.Item,(0,D.Z)((0,D.Z)({name:u,rules:c,hasFeedback:!1,shouldUpdate:function(S,b){if(S===b)return!1;var T=[u].flat(1);T.length>1&&T.pop();try{return JSON.stringify((0,Yt.Z)(S,T))!==JSON.stringify((0,Yt.Z)(b,T))}catch(w){return!0}},_internalItemRender:{mark:"pro_table_render",render:function(S,b){return(0,O.jsx)(a0,(0,D.Z)({inputProps:S,popoverProps:m},b))}}},v),{},{style:(0,D.Z)((0,D.Z)({},gh),v==null?void 0:v.style),children:h}))},s0=function(n){var c=n.errorType,u=n.rules,h=n.name,m=n.popoverProps,v=n.children,y=(0,dn.Z)(n,vs);return h&&u!==null&&u!==void 0&&u.length&&c==="popover"?(0,O.jsx)(o0,(0,D.Z)((0,D.Z)({name:h,rules:u,popoverProps:m},y),{},{children:v})):(0,O.jsx)(It.Z.Item,(0,D.Z)((0,D.Z)({rules:u,shouldUpdate:h?function(S,b){if(S===b)return!1;var T=[h].flat(1);T.length>1&&T.pop();try{return JSON.stringify((0,Yt.Z)(S,T))!==JSON.stringify((0,Yt.Z)(b,T))}catch(w){return!0}}:void 0},y),{},{style:(0,D.Z)((0,D.Z)({},gh),y.style),name:h,children:v}))},Uh=function(n,c,u){return c===void 0?n:(0,ms.h)(n,c,u)},Bh=["children"],vp=["",null,void 0],Jp=function(){for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return c.filter(function(h){return h!==void 0}).map(function(h){return typeof h=="number"?h.toString():h}).flat(1)},l0=function(n){var c=(0,C.useContext)(i0.z),u=n.columnProps,h=n.prefixName,m=n.text,v=n.counter,y=n.rowData,S=n.index,b=n.recordKey,T=n.subName,w=n.proFieldProps,A=n.editableUtils,I=lo.A.useFormInstance(),P=b||S,B=(0,C.useMemo)(function(){var ge,Me;return(ge=A==null||(Me=A.getRealIndex)===null||Me===void 0?void 0:Me.call(A,y))!==null&&ge!==void 0?ge:S},[A,S,y]),L=(0,C.useState)(function(){var ge,Me;return Jp(h,h?T:[],h?B:P,(ge=(Me=u==null?void 0:u.key)!==null&&Me!==void 0?Me:u==null?void 0:u.dataIndex)!==null&&ge!==void 0?ge:S)}),z=(0,Ue.Z)(L,2),Z=z[0],W=z[1],J=(0,C.useMemo)(function(){return Z.slice(0,-1)},[Z]);(0,C.useEffect)(function(){var ge,Me,de=Jp(h,h?T:[],h?B:P,(ge=(Me=u==null?void 0:u.key)!==null&&Me!==void 0?Me:u==null?void 0:u.dataIndex)!==null&&ge!==void 0?ge:S);de.join("-")!==Z.join("-")&&W(de)},[u==null?void 0:u.dataIndex,u==null?void 0:u.key,S,b,h,P,T,Z,B]);var ue=(0,C.useMemo)(function(){return[I,(0,D.Z)((0,D.Z)({},u),{},{rowKey:J,rowIndex:S,isEditable:!0})]},[u,I,S,J]),we=(0,C.useCallback)(function(ge){var Me=ge.children,de=(0,dn.Z)(ge,Bh);return(0,O.jsx)(s0,(0,D.Z)((0,D.Z)({popoverProps:{getPopupContainer:c.getPopupContainer||function(){return v.rootDomRef.current||document.body}},errorType:"popover",name:Z},de),{},{children:Me}),P)},[P,Z]),ie=(0,C.useCallback)(function(){var ge,Me,de=(0,D.Z)({},Uh.apply(void 0,[u==null?void 0:u.formItemProps].concat((0,en.Z)(ue))));de.messageVariables=(0,D.Z)({label:(u==null?void 0:u.title)||"\u6B64\u9879",type:(u==null?void 0:u.valueType)||"\u6587\u672C"},de==null?void 0:de.messageVariables),de.initialValue=(ge=(Me=h?null:m)!==null&&Me!==void 0?Me:de==null?void 0:de.initialValue)!==null&&ge!==void 0?ge:u==null?void 0:u.initialValue;var re=(0,O.jsx)(Ah.Z,(0,D.Z)({cacheForSwr:!0,name:Z,proFormFieldKey:P,ignoreFormItem:!0,fieldProps:Uh.apply(void 0,[u==null?void 0:u.fieldProps].concat((0,en.Z)(ue)))},w),Z.join("-"));return u!=null&&u.renderFormItem&&(re=u.renderFormItem((0,D.Z)((0,D.Z)({},u),{},{index:S,isEditable:!0,type:"table"}),{defaultRender:function(){return(0,O.jsx)(O.Fragment,{children:re})},type:"form",recordKey:b,record:(0,D.Z)((0,D.Z)({},y),I==null?void 0:I.getFieldValue([P])),isEditable:!0},I,n.editableUtils),u.ignoreFormItem)?(0,O.jsx)(O.Fragment,{children:re}):(0,O.jsx)(we,(0,D.Z)((0,D.Z)({},de),{},{children:re}),Z.join("-"))},[u,ue,h,m,P,Z,w,we,S,b,y,I,n.editableUtils]);return Z.length===0?null:typeof(u==null?void 0:u.renderFormItem)=="function"||typeof(u==null?void 0:u.fieldProps)=="function"||typeof(u==null?void 0:u.formItemProps)=="function"?(0,O.jsx)(It.Z.Item,{noStyle:!0,shouldUpdate:function(Me,de){if(Me===de)return!1;var re=[J].flat(1);try{return JSON.stringify((0,Yt.Z)(Me,re))!==JSON.stringify((0,Yt.Z)(de,re))}catch(ve){return!0}},children:function(){return ie()}}):ie()};function Qp(i){var n,c,u=i.text,h=i.valueType,m=i.rowData,v=i.columnProps,y=i.index;if((!h||["textarea","text"].includes(h.toString()))&&!(v!=null&&v.valueEnum)&&i.mode==="read")return vp.includes(u)?i.columnEmptyText:u;if(typeof h=="function"&&m)return Qp((0,D.Z)((0,D.Z)({},i),{},{valueType:h(m,i.type)||"text"}));var S=(v==null?void 0:v.key)||(v==null||(n=v.dataIndex)===null||n===void 0?void 0:n.toString()),b=v!=null&&v.dependencies?[i.prefixName,i.prefixName?y==null?void 0:y.toString():(c=i.recordKey)===null||c===void 0?void 0:c.toString(),v==null?void 0:v.dependencies].filter(Boolean).flat(1):[],T={valueEnum:(0,ms.h)(v==null?void 0:v.valueEnum,m),request:v==null?void 0:v.request,dependencies:v!=null&&v.dependencies?[b]:void 0,originDependencies:v!=null&&v.dependencies?[v==null?void 0:v.dependencies]:void 0,params:(0,ms.h)(v==null?void 0:v.params,m,v),readonly:v==null?void 0:v.readonly,text:h==="index"||h==="indexBorder"?i.index:u,mode:i.mode,renderFormItem:void 0,valueType:h,record:m,proFieldProps:{emptyText:i.columnEmptyText,proFieldKey:S?"table-field-".concat(S):void 0}};return i.mode!=="edit"?(0,O.jsx)(Ah.Z,(0,D.Z)({mode:"read",ignoreFormItem:!0,fieldProps:Uh(v==null?void 0:v.fieldProps,null,v)},T)):(0,O.jsx)(l0,(0,D.Z)((0,D.Z)({},i),{},{proFieldProps:T}),i.recordKey)}var c0=Qp,u0=function(n){var c,u=n.title,h=typeof(n==null?void 0:n.ellipsis)=="boolean"?n==null?void 0:n.ellipsis:n==null||(c=n.ellipsis)===null||c===void 0?void 0:c.showTitle;return u&&typeof u=="function"?u(n,"table",(0,O.jsx)(Ei.G,{label:null,tooltip:n.tooltip||n.tip})):(0,O.jsx)(Ei.G,{label:u,tooltip:n.tooltip||n.tip,ellipsis:h})};function d0(i,n,c,u){return typeof u=="boolean"?u===!1:(u==null?void 0:u(i,n,c))===!1}var f0=function(n,c,u){var h=Array.isArray(u)?(0,Yt.Z)(c,u):c[u],m=String(h);return String(m)===String(n)};function em(i){var n=i.columnProps,c=i.text,u=i.rowData,h=i.index,m=i.columnEmptyText,v=i.counter,y=i.type,S=i.subName,b=i.marginSM,T=i.editableUtils,w=v.action,A=v.prefixName,I=T.isEditable((0,D.Z)((0,D.Z)({},u),{},{index:h})),P=I.isEditable,B=I.recordKey,L=n.renderText,z=L===void 0?function(ge){return ge}:L,Z=z(c,u,h,w),W=P&&!d0(c,u,h,n==null?void 0:n.editable)?"edit":"read",J=c0({text:Z,valueType:n.valueType||"text",index:h,rowData:u,subName:S,columnProps:(0,D.Z)((0,D.Z)({},n),{},{entry:u,entity:u}),counter:v,columnEmptyText:m,type:y,recordKey:B,mode:W,prefixName:A,editableUtils:T}),ue=W==="edit"?J:Dh(J,n,Z);if(W==="edit")return n.valueType==="option"?(0,O.jsx)("div",{style:{display:"flex",alignItems:"center",gap:b,justifyContent:n.align==="center"?"center":"flex-start"},children:T.actionRender((0,D.Z)((0,D.Z)({},u),{},{index:n.index||h}))}):ue;if(!n.render){var we=C.isValidElement(ue)||["string","number"].includes((0,mn.Z)(ue));return!(0,qp.k)(ue)&&we?ue:null}var ie=n.render(ue,u,h,(0,D.Z)((0,D.Z)({},w),T),(0,D.Z)((0,D.Z)({},n),{},{isEditable:P,type:"table"}));return Th(ie)?ie:ie&&n.valueType==="option"&&Array.isArray(ie)?(0,O.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8},children:ie}):ie}function tm(i,n){var c,u=i.columns,h=i.counter,m=i.columnEmptyText,v=i.type,y=i.editableUtils,S=i.marginSM,b=i.rowKey,T=b===void 0?"id":b,w=i.childrenColumnName,A=w===void 0?"children":w,I=i.proFilter,P=I===void 0?{}:I,B=i.proSort,L=new Map;return u==null||(c=u.map(function(z,Z){if(z===xu.EXPAND_COLUMN||z===xu.SELECTION_COLUMN)return z;var W=z,J=W.key,ue=W.dataIndex,we=W.valueEnum,ie=W.valueType,ge=ie===void 0?"text":ie,Me=W.children,de=W.onFilter,re=W.filters,ve=re===void 0?[]:re,Oe=W.sorter,le=W.filteredValue,Q=Rl(J||(ue==null?void 0:ue.toString()),[n==null?void 0:n.key,Z].filter(Boolean).join("-")),me=!we&&!ge&&!Me;if(me)return(0,D.Z)({index:Z},z);var Ce=h.columnsMap[Q]||{fixed:z.fixed},tt=function(){return de===!0?function(De,je){return f0(De,je,ue)}:Sn(de)},$e=Q&&(P==null?void 0:P[Q])!==void 0?P==null?void 0:P[Q]:null,Qe=Q&&B[Q]!==void 0?B[Q]:null,ft=T,Dt=(0,D.Z)((0,D.Z)({index:Z,key:Q},z),{},{title:u0(z),valueEnum:we,filters:ve===!0?(0,e0.NA)((0,ms.h)(we,void 0)).filter(function(at){return at&&at.value!=="all"}):ve,onFilter:tt(),filteredValue:le!==void 0?le:ve&&tt()==null?$e:void 0,sortOrder:Oe===!0?Qe:void 0,fixed:Ce.fixed,width:z.width||(z.fixed?200:void 0),children:z.children?tm((0,D.Z)((0,D.Z)({},i),{},{columns:(z==null?void 0:z.children)||[]}),(0,D.Z)((0,D.Z)({},z),{},{key:Q})):void 0,render:function(De,je,et){typeof T=="function"&&(ft=T(je,et));var Re;if((0,mn.Z)(je)==="object"&&je!==null&&Reflect.has(je,ft)){var be;Re=je[ft];var Le=L.get(Re)||[];(be=je[A])===null||be===void 0||be.forEach(function(Ke){var Fe=Ke[ft];L.has(Fe)||L.set(Fe,Le.concat([et,A]))})}var Je={columnProps:z,text:De,rowData:je,index:et,columnEmptyText:m,counter:h,type:v,marginSM:S,subName:L.get(Re),editableUtils:y};return em(Je)}});return t0(Dt)}))===null||c===void 0?void 0:c.filter(function(z){return!z.hideInTable})}var h0=["rowKey","tableClassName","defaultClassName","action","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","hideToolbar","searchNode","style","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey"],M=["cardBordered","request","className","params","defaultData","headerTitle","postData","ghost","pagination","actionRef","columns","toolBarRender","optionsRender","onLoad","onRequestError","style","cardProps","tableStyle","tableClassName","columnsStateMap","onColumnsStateChange","options","search","name","onLoadingChange","rowSelection","beforeSearchSubmit","tableAlertRender","defaultClassName","formRef","type","columnEmptyText","toolbar","rowKey","manualRequest","polling","tooltip","revalidateOnFocus","searchFormRender"];function e(i){var n=i.rowKey,c=i.tableClassName,u=i.defaultClassName,h=i.action,m=i.tableColumn,v=i.type,y=i.pagination,S=i.rowSelection,b=i.size,T=i.defaultSize,w=i.tableStyle,A=i.toolbarDom,I=i.hideToolbar,P=i.searchNode,B=i.style,L=i.cardProps,z=i.alertDom,Z=i.name,W=i.onSortChange,J=i.onFilterChange,ue=i.options,we=i.isLightFilter,ie=i.className,ge=i.cardBordered,Me=i.editableUtils,de=i.getRowKey,re=(0,dn.Z)(i,h0),ve=(0,C.useContext)(Yl),Oe=(0,C.useMemo)(function(){var De=function je(et){return et.map(function(Re){var be=Rl(Re.key,Re.index),Le=ve.columnsMap[be];return Le&&Le.show===!1?!1:Re.children?(0,D.Z)((0,D.Z)({},Re),{},{children:je(Re.children)}):Re}).filter(Boolean)};return De(m)},[ve.columnsMap,m]),le=function(je){var et=Me.newLineRecord||{},Re=et.options,be=et.defaultValue,Le=(Re==null?void 0:Re.position)==="top";if(Re!=null&&Re.parentKey){var Je,Ke,Fe={data:je,getRowKey:de,row:(0,D.Z)((0,D.Z)({},be),{},{map_row_parentKey:(Je=Et(Re.parentKey))===null||Je===void 0?void 0:Je.toString()}),key:Re==null?void 0:Re.recordKey,childrenColumnName:((Ke=i.expandable)===null||Ke===void 0?void 0:Ke.childrenColumnName)||"children"};return lt(Fe,Le?"top":"update")}if(Le)return[be].concat((0,en.Z)(h.dataSource));if(y&&y!==null&&y!==void 0&&y.current&&y!==null&&y!==void 0&&y.pageSize){var Ct=(0,en.Z)(h.dataSource);return(y==null?void 0:y.pageSize)>Ct.length?(Ct.push(be),Ct):(Ct.splice((y==null?void 0:y.current)*(y==null?void 0:y.pageSize)-1,0,be),Ct)}return[].concat((0,en.Z)(h.dataSource),[be])},Q=function(){return(0,D.Z)((0,D.Z)({},re),{},{size:b,rowSelection:S===!1?void 0:S,className:c,style:w,columns:Oe,loading:h.loading,dataSource:Me.newLineRecord?le(h.dataSource):h.dataSource,pagination:y,onChange:function(et,Re,be,Le){var Je;if((Je=re.onChange)===null||Je===void 0||Je.call(re,et,Re,be,Le),J((0,Ai.Y)(Re)),Array.isArray(be)){var Ke,Fe=be.reduce(function(Qt,ht){return(0,D.Z)((0,D.Z)({},Qt),{},(0,j.Z)({},"".concat(ht.field),ht.order))},{});W((Ke=(0,Ai.Y)(Fe))!==null&&Ke!==void 0?Ke:{})}else{var Ct,ke,Bt=(Ct=be.column)===null||Ct===void 0?void 0:Ct.sorter,bn=(Bt==null?void 0:Bt.toString())===Bt;W((ke=(0,Ai.Y)((0,j.Z)({},"".concat(bn?Bt:be.field),be.order)))!==null&&ke!==void 0?ke:{})}}})},me=(0,C.useMemo)(function(){return i.search===!1&&!i.headerTitle&&i.toolBarRender===!1},[]),Ce=(0,O.jsx)(Ur._p.Provider,{value:{grid:!1,colProps:void 0,rowProps:void 0},children:(0,O.jsx)(xu,(0,D.Z)((0,D.Z)({},Q()),{},{rowKey:n}))}),tt=i.tableViewRender?i.tableViewRender((0,D.Z)((0,D.Z)({},Q()),{},{rowSelection:S!==!1?S:void 0}),Ce):Ce,$e=(0,C.useMemo)(function(){if(i.editable&&!i.name){var De,je,et;return(0,O.jsxs)(O.Fragment,{children:[A,z,(0,C.createElement)(yo,(0,D.Z)((0,D.Z)({},(De=i.editable)===null||De===void 0?void 0:De.formProps),{},{formRef:(je=i.editable)===null||je===void 0||(je=je.formProps)===null||je===void 0?void 0:je.formRef,component:!1,form:(et=i.editable)===null||et===void 0?void 0:et.form,onValuesChange:Me.onValuesChange,key:"table",submitter:!1,omitNil:!1,dateFormatter:i.dateFormatter}),tt)]})}return(0,O.jsxs)(O.Fragment,{children:[A,z,tt]})},[z,i.loading,!!i.editable,tt,A]),Qe=(0,C.useMemo)(function(){return L===!1||me===!0||i.name?{}:I?{padding:0}:A?{paddingBlockStart:0}:A&&y===!1?{paddingBlockStart:0}:{padding:0}},[me,y,i.name,L,A,I]),ft=L===!1||me===!0||i.name?$e:(0,O.jsx)(la,(0,D.Z)((0,D.Z)({ghost:i.ghost,bordered:qu("table",ge),bodyStyle:Qe},L),{},{children:$e})),Dt=function(){return i.tableRender?i.tableRender(i,ft,{toolbar:A||void 0,alert:z||void 0,table:tt||void 0}):ft},at=(0,O.jsxs)("div",{className:st()(ie,(0,j.Z)({},"".concat(u,"-polling"),h.pollingLoading)),style:B,ref:ve.rootDomRef,children:[we?null:P,v!=="form"&&i.tableExtraRender&&(0,O.jsx)("div",{className:st()(ie,"".concat(u,"-extra")),children:i.tableExtraRender(i,h.dataSource||[])}),v!=="form"&&Dt()]});return!ue||!(ue!=null&&ue.fullScreen)?at:(0,O.jsx)(Mt.ZP,{getPopupContainer:function(){return ve.rootDomRef.current||document.body},children:at})}var t={},r=function(n){var c,u=n.cardBordered,h=n.request,m=n.className,v=n.params,y=v===void 0?t:v,S=n.defaultData,b=n.headerTitle,T=n.postData,w=n.ghost,A=n.pagination,I=n.actionRef,P=n.columns,B=P===void 0?[]:P,L=n.toolBarRender,z=n.optionsRender,Z=n.onLoad,W=n.onRequestError,J=n.style,ue=n.cardProps,we=n.tableStyle,ie=n.tableClassName,ge=n.columnsStateMap,Me=n.onColumnsStateChange,de=n.options,re=n.search,ve=n.name,Oe=n.onLoadingChange,le=n.rowSelection,Q=le===void 0?!1:le,me=n.beforeSearchSubmit,Ce=n.tableAlertRender,tt=n.defaultClassName,$e=n.formRef,Qe=n.type,ft=Qe===void 0?"table":Qe,Dt=n.columnEmptyText,at=Dt===void 0?"-":Dt,De=n.toolbar,je=n.rowKey,et=n.manualRequest,Re=n.polling,be=n.tooltip,Le=n.revalidateOnFocus,Je=Le===void 0?!1:Le,Ke=n.searchFormRender,Fe=(0,dn.Z)(n,M),Ct=qm(n.defaultClassName),ke=Ct.wrapSSR,Bt=Ct.hashId,bn=st()(tt,m,Bt),Qt=(0,C.useRef)(),ht=(0,C.useRef)(),Ft=$e||ht;(0,C.useImperativeHandle)(I,function(){return Qt.current});var In=(0,ln.Z)(Q?(Q==null?void 0:Q.defaultSelectedRowKeys)||[]:void 0,{value:Q?Q.selectedRowKeys:void 0}),vt=(0,Ue.Z)(In,2),On=vt[0],_n=vt[1],Wi=(0,ln.Z)(function(){if(!(et||re!==!1))return{}}),ji=(0,Ue.Z)(Wi,2),za=ji[0],ea=ji[1],Xs=(0,ln.Z)({}),ol=(0,Ue.Z)(Xs,2),Ua=ol[0],$r=ol[1],ja=(0,ln.Z)({}),Xa=(0,Ue.Z)(ja,2),go=Xa[0],Eo=Xa[1],oa=(0,C.useCallback)(function(zt){for(var yn=[],mi=0;mi<zt.length;mi++){var _r=zt[mi];_r.children?oa(_r.children):yn.push(_r)}return yn},[]),xa=(0,C.useMemo)(function(){var zt=oa(B);return zt==null?void 0:zt.every(function(yn){return!!yn.filters&&!!yn.onFilter||yn.filters===void 0&&yn.onFilter===void 0})},[oa,B]),wi=(0,C.useMemo)(function(){var zt=oa(B);return zt==null?void 0:zt.every(function(yn){return yn.sorter!==!0})},[oa,B]);(0,C.useEffect)(function(){var zt=Qa(B),yn=zt.sort,mi=zt.filter;xa||$r(mi),wi||Eo(yn)},[]);var tr=(0,nr.YB)(),zo=(0,mn.Z)(A)==="object"?A:{defaultCurrent:1,defaultPageSize:20,pageSize:20,current:1},or=(0,C.useContext)(Yl),No=(0,C.useMemo)(function(){if(h)return function(){var zt=(0,he.Z)((0,p.Z)().mark(function yn(mi){var _r,Oo;return(0,p.Z)().wrap(function(Ho){for(;;)switch(Ho.prev=Ho.next){case 0:return _r=(0,D.Z)((0,D.Z)((0,D.Z)({},mi||{}),za),y),delete _r._timestamp,Ho.next=4,h(_r,go,Ua);case 4:return Oo=Ho.sent,Ho.abrupt("return",Oo);case 6:case"end":return Ho.stop()}},yn)}));return function(yn){return zt.apply(this,arguments)}}()},[za,y,Ua,go,h]),xi=$p(No,S,{pageInfo:A===!1?!1:zo,loading:n.loading,dataSource:n.dataSource,onDataSourceChange:n.onDataSourceChange,onLoad:Z,onLoadingChange:Oe,onRequestError:W,postData:T,revalidateOnFocus:Je,manual:za===void 0,polling:Re,effects:[(0,cr.ZP)(y),(0,cr.ZP)(za),(0,cr.ZP)(Ua),(0,cr.ZP)(go)],debounceTime:n.debounceTime,onPageInfoChange:function(yn){var mi,_r;!A||!No||(A==null||(mi=A.onChange)===null||mi===void 0||mi.call(A,yn.current,yn.pageSize),A==null||(_r=A.onShowSizeChange)===null||_r===void 0||_r.call(A,yn.current,yn.pageSize))}});(0,C.useEffect)(function(){var zt;if(!(n.manualRequest||!n.request||!Je||(zt=n.form)!==null&&zt!==void 0&&zt.ignoreRules)){var yn=function(){document.visibilityState==="visible"&&xi.reload()};return document.addEventListener("visibilitychange",yn),function(){return document.removeEventListener("visibilitychange",yn)}}},[]);var sl=C.useRef(new Map),eu=C.useMemo(function(){return typeof je=="function"?je:function(zt,yn){var mi;return yn===-1?zt==null?void 0:zt[je]:n.name?yn==null?void 0:yn.toString():(mi=zt==null?void 0:zt[je])!==null&&mi!==void 0?mi:yn==null?void 0:yn.toString()}},[n.name,je]);(0,C.useMemo)(function(){var zt;if((zt=xi.dataSource)!==null&&zt!==void 0&&zt.length){var yn=xi.dataSource.map(function(mi){var _r=eu(mi,-1);return sl.current.set(_r,mi),_r});return yn}return[]},[xi.dataSource,eu]);var Nl=(0,C.useMemo)(function(){var zt=A===!1?!1:(0,D.Z)({},A),yn=(0,D.Z)((0,D.Z)({},xi.pageInfo),{},{setPageInfo:function(_r){var Oo=_r.pageSize,Os=_r.current,Ho=xi.pageInfo;if(Oo===Ho.pageSize||Ho.current===1){xi.setPageInfo({pageSize:Oo,current:Os});return}h&&xi.setDataSource([]),xi.setPageInfo({pageSize:Oo,current:ft==="list"?Os:1})}});return h&&zt&&(delete zt.onChange,delete zt.onShowSizeChange),ns(zt,yn,tr)},[A,xi,tr]);(0,fr.KW)(function(){var zt;n.request&&!Vs(y)&&xi.dataSource&&!Ch(xi.dataSource,S)&&(xi==null||(zt=xi.pageInfo)===null||zt===void 0?void 0:zt.current)!==1&&xi.setPageInfo({current:1})},[y]),or.setPrefixName(n.name);var Ol=(0,C.useCallback)(function(){Q&&Q.onChange&&Q.onChange([],[],{type:"none"}),_n([])},[Q,_n]);or.propsRef.current=n;var ll=_i((0,D.Z)((0,D.Z)({},n.editable),{},{tableName:n.name,getRowKey:eu,childrenColumnName:((c=n.expandable)===null||c===void 0?void 0:c.childrenColumnName)||"children",dataSource:xi.dataSource||[],setDataSource:function(yn){var mi,_r;(mi=n.editable)===null||mi===void 0||(_r=mi.onValuesChange)===null||_r===void 0||_r.call(mi,void 0,yn),xi.setDataSource(yn)}})),Dl=Nt.Ow===null||Nt.Ow===void 0?void 0:Nt.Ow.useToken(),nc=Dl.token;wl(Qt,xi,{fullScreen:function(){var yn;if(!(!((yn=or.rootDomRef)!==null&&yn!==void 0&&yn.current)||!document.fullscreenEnabled))if(document.fullscreenElement)document.exitFullscreen();else{var mi;(mi=or.rootDomRef)===null||mi===void 0||mi.current.requestFullscreen()}},onCleanSelected:function(){Ol()},resetAll:function(){var yn;Ol();var mi=Qa(B),_r=mi.sort,Oo=mi.filter;$r(Oo),Eo(_r),or.setKeyWords(void 0),xi.setPageInfo({current:1}),Ft==null||(yn=Ft.current)===null||yn===void 0||yn.resetFields(),ea({})},editableUtils:ll}),or.setAction(Qt.current);var as=(0,C.useMemo)(function(){var zt;return tm({columns:B,counter:or,columnEmptyText:at,type:ft,marginSM:nc.marginSM,editableUtils:ll,rowKey:je,childrenColumnName:(zt=n.expandable)===null||zt===void 0?void 0:zt.childrenColumnName,proFilter:Ua,proSort:go}).sort(Kp(or.columnsMap))},[B,or==null?void 0:or.sortKeyColumns,or==null?void 0:or.columnsMap,at,ft,ll.editableKeys&&ll.editableKeys.join(","),Ua,go]);(0,fr.Au)(function(){if(as&&as.length>0){var zt=as.map(function(yn){return Rl(yn.key,yn.index)});or.setSortKeyColumns(zt)}},[as],["render","renderFormItem"],100),(0,fr.KW)(function(){var zt=xi.pageInfo,yn=A||{},mi=yn.current,_r=mi===void 0?zt==null?void 0:zt.current:mi,Oo=yn.pageSize,Os=Oo===void 0?zt==null?void 0:zt.pageSize:Oo;A&&(_r||Os)&&(Os!==(zt==null?void 0:zt.pageSize)||_r!==(zt==null?void 0:zt.current))&&xi.setPageInfo({pageSize:Os||zt.pageSize,current:_r||zt.current})},[A&&A.pageSize,A&&A.current]);var yh=(0,D.Z)((0,D.Z)({selectedRowKeys:On},Q),{},{onChange:function(yn,mi,_r){Q&&Q.onChange&&Q.onChange(yn,mi,_r),_n(yn)}}),tu=re!==!1&&(re==null?void 0:re.filterType)==="light",nu=(0,C.useCallback)(function(zt){if(de&&de.search){var yn,mi,_r=de.search===!0?{}:de.search,Oo=_r.name,Os=Oo===void 0?"keyword":Oo,Ho=(yn=de.search)===null||yn===void 0||(mi=yn.onSearch)===null||mi===void 0?void 0:mi.call(yn,or.keyWords);if(Ho!==!1){ea((0,D.Z)((0,D.Z)({},zt),{},(0,j.Z)({},Os,or.keyWords)));return}}ea(zt)},[or.keyWords,de,ea]),Fh=(0,C.useMemo)(function(){if((0,mn.Z)(xi.loading)==="object"){var zt;return((zt=xi.loading)===null||zt===void 0?void 0:zt.spinning)||!1}return xi.loading},[xi.loading]),xh=(0,C.useMemo)(function(){var zt=re===!1&&ft!=="form"?null:(0,O.jsx)(Ih,{pagination:Nl,beforeSearchSubmit:me,action:Qt,columns:B,onFormSearchSubmit:function(mi){nu(mi)},ghost:w,onReset:n.onReset,onSubmit:n.onSubmit,loading:!!Fh,manualRequest:et,search:re,form:n.form,formRef:Ft,type:n.type||"table",cardBordered:n.cardBordered,dateFormatter:n.dateFormatter});return Ke&&zt?(0,O.jsx)(O.Fragment,{children:Ke(n,zt)}):zt},[me,Ft,w,Fh,et,nu,Nl,n,B,re,Ke,ft]),zh=(0,C.useMemo)(function(){return On==null?void 0:On.map(function(zt){var yn;return(yn=sl.current)===null||yn===void 0?void 0:yn.get(zt)})},[xi.dataSource,On]),Hh=(0,C.useMemo)(function(){return de===!1&&!b&&!L&&!De&&!tu},[de,b,L,De,tu]),gp=L===!1?null:(0,O.jsx)(Bd,{headerTitle:b,hideToolbar:Hh,selectedRows:zh,selectedRowKeys:On,tableColumn:as,tooltip:be,toolbar:De,onFormSearchSubmit:function(yn){ea((0,D.Z)((0,D.Z)({},za),yn))},searchNode:tu?xh:null,options:de,optionsRender:z,actionRef:Qt,toolBarRender:L}),Ki=Q!==!1?(0,O.jsx)(eo,{selectedRowKeys:On,selectedRows:zh,onCleanSelected:Ol,alertOptionRender:Fe.tableAlertOptionRender,alertInfoRender:Ce,alwaysShowAlert:Q==null?void 0:Q.alwaysShowAlert}):null;return ke((0,O.jsx)(e,(0,D.Z)((0,D.Z)({},n),{},{name:ve,defaultClassName:tt,size:or.tableSize,onSizeChange:or.setTableSize,pagination:Nl,searchNode:xh,rowSelection:Q!==!1?yh:void 0,className:bn,tableColumn:as,isLightFilter:tu,action:xi,alertDom:Ki,toolbarDom:gp,hideToolbar:Hh,onSortChange:function(yn){wi||yn===go||Eo(yn)},onFilterChange:function(yn){xa||yn===Ua||$r(yn)},editableUtils:ll,getRowKey:eu})))},s=function(n){var c=(0,C.useContext)(Mt.ZP.ConfigContext),u=c.getPrefixCls,h=n.ErrorBoundary===!1?C.Fragment:n.ErrorBoundary||Aa.S;return(0,O.jsx)(wu,{initValue:n,children:(0,O.jsx)(nr._Y,{needDeps:!0,children:(0,O.jsx)(h,{children:(0,O.jsx)(r,(0,D.Z)({defaultClassName:"".concat(u("pro-table"))},n))})})})};s.Summary=xu.Summary;var d=s},78164:function(Li,hn,k){"use strict";k.d(hn,{S:function(){return Ei}});var p=k(15671),he=k(43144),mn=k(97326),Ue=k(60136),j=k(29388),en=k(4942),D=k(22181),dn=k(67294),Kr=k(85893),Ei=function(Mt){(0,Ue.Z)(di,Mt);var hi=(0,j.Z)(di);function di(){var Xi;(0,p.Z)(this,di);for(var st=arguments.length,ln=new Array(st),tn=0;tn<st;tn++)ln[tn]=arguments[tn];return Xi=hi.call.apply(hi,[this].concat(ln)),(0,en.Z)((0,mn.Z)(Xi),"state",{hasError:!1,errorInfo:""}),Xi}return(0,he.Z)(di,[{key:"componentDidCatch",value:function(st,ln){console.log(st,ln)}},{key:"render",value:function(){return this.state.hasError?(0,Kr.jsx)(D.ZP,{status:"error",title:"Something went wrong.",extra:this.state.errorInfo}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(st){return{hasError:!0,errorInfo:st.message}}}]),di}(dn.Component)},4913:function(Li,hn,k){"use strict";k.d(hn,{z:function(){return C}});var p=k(87462),he=k(96167),mn=k(67294),Ue=k(74250),j=Object.defineProperty,en=(Nt,wn,Wn)=>wn in Nt?j(Nt,wn,{enumerable:!0,configurable:!0,writable:!0,value:Wn}):Nt[wn]=Wn,D=(Nt,wn,Wn)=>(en(Nt,typeof wn!="symbol"?wn+"":wn,Wn),Wn);class dn{constructor(){D(this,"_listeners")}addEventListener(wn,Wn){this._listeners===void 0&&(this._listeners={});const O=this._listeners;O[wn]===void 0&&(O[wn]=[]),O[wn].indexOf(Wn)===-1&&O[wn].push(Wn)}hasEventListener(wn,Wn){if(this._listeners===void 0)return!1;const O=this._listeners;return O[wn]!==void 0&&O[wn].indexOf(Wn)!==-1}removeEventListener(wn,Wn){if(this._listeners===void 0)return;const Vi=this._listeners[wn];if(Vi!==void 0){const Pn=Vi.indexOf(Wn);Pn!==-1&&Vi.splice(Pn,1)}}dispatchEvent(wn){if(this._listeners===void 0)return;const O=this._listeners[wn.type];if(O!==void 0){wn.target=this;const Vi=O.slice(0);for(let Pn=0,An=Vi.length;Pn<An;Pn++)Vi[Pn].call(this,wn);wn.target=null}}}var Kr=Object.defineProperty,Ei=(Nt,wn,Wn)=>wn in Nt?Kr(Nt,wn,{enumerable:!0,configurable:!0,writable:!0,value:Wn}):Nt[wn]=Wn,Mt=(Nt,wn,Wn)=>(Ei(Nt,typeof wn!="symbol"?wn+"":wn,Wn),Wn);const hi=new Ue.zHn,di=new Ue.JOQ,Xi=Math.cos(70*(Math.PI/180)),st=(Nt,wn)=>(Nt%wn+wn)%wn;class ln extends dn{constructor(wn,Wn){super(),Mt(this,"object"),Mt(this,"domElement"),Mt(this,"enabled",!0),Mt(this,"target",new Ue.Pa4),Mt(this,"minDistance",0),Mt(this,"maxDistance",1/0),Mt(this,"minZoom",0),Mt(this,"maxZoom",1/0),Mt(this,"minPolarAngle",0),Mt(this,"maxPolarAngle",Math.PI),Mt(this,"minAzimuthAngle",-1/0),Mt(this,"maxAzimuthAngle",1/0),Mt(this,"enableDamping",!1),Mt(this,"dampingFactor",.05),Mt(this,"enableZoom",!0),Mt(this,"zoomSpeed",1),Mt(this,"enableRotate",!0),Mt(this,"rotateSpeed",1),Mt(this,"enablePan",!0),Mt(this,"panSpeed",1),Mt(this,"screenSpacePanning",!0),Mt(this,"keyPanSpeed",7),Mt(this,"zoomToCursor",!1),Mt(this,"autoRotate",!1),Mt(this,"autoRotateSpeed",2),Mt(this,"reverseOrbit",!1),Mt(this,"reverseHorizontalOrbit",!1),Mt(this,"reverseVerticalOrbit",!1),Mt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Mt(this,"mouseButtons",{LEFT:Ue.RsA.ROTATE,MIDDLE:Ue.RsA.DOLLY,RIGHT:Ue.RsA.PAN}),Mt(this,"touches",{ONE:Ue.QmN.ROTATE,TWO:Ue.QmN.DOLLY_PAN}),Mt(this,"target0"),Mt(this,"position0"),Mt(this,"zoom0"),Mt(this,"_domElementKeyEvents",null),Mt(this,"getPolarAngle"),Mt(this,"getAzimuthalAngle"),Mt(this,"setPolarAngle"),Mt(this,"setAzimuthalAngle"),Mt(this,"getDistance"),Mt(this,"getZoomScale"),Mt(this,"listenToKeyEvents"),Mt(this,"stopListenToKeyEvents"),Mt(this,"saveState"),Mt(this,"reset"),Mt(this,"update"),Mt(this,"connect"),Mt(this,"dispose"),Mt(this,"dollyIn"),Mt(this,"dollyOut"),Mt(this,"getScale"),Mt(this,"setScale"),this.object=wn,this.domElement=Wn,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>Hi.phi,this.getAzimuthalAngle=()=>Hi.theta,this.setPolarAngle=Ae=>{let Yt=st(Ae,2*Math.PI),zn=Hi.phi;zn<0&&(zn+=2*Math.PI),Yt<0&&(Yt+=2*Math.PI);let Ln=Math.abs(Yt-zn);2*Math.PI-Ln<Ln&&(Yt<zn?Yt+=2*Math.PI:zn+=2*Math.PI),Rr.phi=Yt-zn,O.update()},this.setAzimuthalAngle=Ae=>{let Yt=st(Ae,2*Math.PI),zn=Hi.theta;zn<0&&(zn+=2*Math.PI),Yt<0&&(Yt+=2*Math.PI);let Ln=Math.abs(Yt-zn);2*Math.PI-Ln<Ln&&(Yt<zn?Yt+=2*Math.PI:zn+=2*Math.PI),Rr.theta=Yt-zn,O.update()},this.getDistance=()=>O.object.position.distanceTo(O.target),this.listenToKeyEvents=Ae=>{Ae.addEventListener("keydown",ua),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ua),this._domElementKeyEvents=null},this.saveState=()=>{O.target0.copy(O.target),O.position0.copy(O.object.position),O.zoom0=O.object.zoom},this.reset=()=>{O.target.copy(O.target0),O.object.position.copy(O.position0),O.object.zoom=O.zoom0,O.object.updateProjectionMatrix(),O.dispatchEvent(Vi),O.update(),jt=Dn.NONE},this.update=(()=>{const Ae=new Ue.Pa4,Yt=new Ue.Pa4(0,1,0),zn=new Ue._fP().setFromUnitVectors(wn.up,Yt),Ln=zn.clone().invert(),gr=new Ue.Pa4,Ni=new Ue._fP,fr=2*Math.PI;return function(){const ho=O.object.position;zn.setFromUnitVectors(wn.up,Yt),Ln.copy(zn).invert(),Ae.copy(ho).sub(O.target),Ae.applyQuaternion(zn),Hi.setFromVector3(Ae),O.autoRotate&&jt===Dn.NONE&&Yi(Yr()),O.enableDamping?(Hi.theta+=Rr.theta*O.dampingFactor,Hi.phi+=Rr.phi*O.dampingFactor):(Hi.theta+=Rr.theta,Hi.phi+=Rr.phi);let Oa=O.minAzimuthAngle,Vo=O.maxAzimuthAngle;isFinite(Oa)&&isFinite(Vo)&&(Oa<-Math.PI?Oa+=fr:Oa>Math.PI&&(Oa-=fr),Vo<-Math.PI?Vo+=fr:Vo>Math.PI&&(Vo-=fr),Oa<=Vo?Hi.theta=Math.max(Oa,Math.min(Vo,Hi.theta)):Hi.theta=Hi.theta>(Oa+Vo)/2?Math.max(Oa,Hi.theta):Math.min(Vo,Hi.theta)),Hi.phi=Math.max(O.minPolarAngle,Math.min(O.maxPolarAngle,Hi.phi)),Hi.makeSafe(),O.enableDamping===!0?O.target.addScaledVector(Kn,O.dampingFactor):O.target.add(Kn),O.zoomToCursor&&Ci||O.object.isOrthographicCamera?Hi.radius=ba(Hi.radius):Hi.radius=ba(Hi.radius*qt),Ae.setFromSpherical(Hi),Ae.applyQuaternion(Ln),ho.copy(O.target).add(Ae),O.object.matrixAutoUpdate||O.object.updateMatrix(),O.object.lookAt(O.target),O.enableDamping===!0?(Rr.theta*=1-O.dampingFactor,Rr.phi*=1-O.dampingFactor,Kn.multiplyScalar(1-O.dampingFactor)):(Rr.set(0,0,0),Kn.set(0,0,0));let Te=!1;if(O.zoomToCursor&&Ci){let _t=null;if(O.object instanceof Ue.cPb&&O.object.isPerspectiveCamera){const Et=Ae.length();_t=ba(Et*qt);const lt=Et-_t;O.object.position.addScaledVector(rn,lt),O.object.updateMatrixWorld()}else if(O.object.isOrthographicCamera){const Et=new Ue.Pa4(Mn.x,Mn.y,0);Et.unproject(O.object),O.object.zoom=Math.max(O.minZoom,Math.min(O.maxZoom,O.object.zoom/qt)),O.object.updateProjectionMatrix(),Te=!0;const lt=new Ue.Pa4(Mn.x,Mn.y,0);lt.unproject(O.object),O.object.position.sub(lt).add(Et),O.object.updateMatrixWorld(),_t=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),O.zoomToCursor=!1;_t!==null&&(O.screenSpacePanning?O.target.set(0,0,-1).transformDirection(O.object.matrix).multiplyScalar(_t).add(O.object.position):(hi.origin.copy(O.object.position),hi.direction.set(0,0,-1).transformDirection(O.object.matrix),Math.abs(O.object.up.dot(hi.direction))<Xi?wn.lookAt(O.target):(di.setFromNormalAndCoplanarPoint(O.object.up,O.target),hi.intersectPlane(di,O.target))))}else O.object instanceof Ue.iKG&&O.object.isOrthographicCamera&&(Te=qt!==1,Te&&(O.object.zoom=Math.max(O.minZoom,Math.min(O.maxZoom,O.object.zoom/qt)),O.object.updateProjectionMatrix()));return qt=1,Ci=!1,Te||gr.distanceToSquared(O.object.position)>Mr||8*(1-Ni.dot(O.object.quaternion))>Mr?(O.dispatchEvent(Vi),gr.copy(O.object.position),Ni.copy(O.object.quaternion),Te=!1,!0):!1}})(),this.connect=Ae=>{O.domElement=Ae,O.domElement.style.touchAction="none",O.domElement.addEventListener("contextmenu",Co),O.domElement.addEventListener("pointerdown",xo),O.domElement.addEventListener("pointercancel",va),O.domElement.addEventListener("wheel",ss)},this.dispose=()=>{var Ae,Yt,zn,Ln,gr,Ni;O.domElement&&(O.domElement.style.touchAction="auto"),(Ae=O.domElement)==null||Ae.removeEventListener("contextmenu",Co),(Yt=O.domElement)==null||Yt.removeEventListener("pointerdown",xo),(zn=O.domElement)==null||zn.removeEventListener("pointercancel",va),(Ln=O.domElement)==null||Ln.removeEventListener("wheel",ss),(gr=O.domElement)==null||gr.ownerDocument.removeEventListener("pointermove",Va),(Ni=O.domElement)==null||Ni.ownerDocument.removeEventListener("pointerup",va),O._domElementKeyEvents!==null&&O._domElementKeyEvents.removeEventListener("keydown",ua)};const O=this,Vi={type:"change"},Pn={type:"start"},An={type:"end"},Dn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let jt=Dn.NONE;const Mr=1e-6,Hi=new Ue.$V,Rr=new Ue.$V;let qt=1;const Kn=new Ue.Pa4,$n=new Ue.FM8,pi=new Ue.FM8,ii=new Ue.FM8,Er=new Ue.FM8,Lr=new Ue.FM8,Ha=new Ue.FM8,xt=new Ue.FM8,Kt=new Ue.FM8,En=new Ue.FM8,rn=new Ue.Pa4,Mn=new Ue.FM8;let Ci=!1;const Rn=[],sr={};function Yr(){return 2*Math.PI/60/60*O.autoRotateSpeed}function Ir(){return Math.pow(.95,O.zoomSpeed)}function Yi(Ae){O.reverseOrbit||O.reverseHorizontalOrbit?Rr.theta+=Ae:Rr.theta-=Ae}function Za(Ae){O.reverseOrbit||O.reverseVerticalOrbit?Rr.phi+=Ae:Rr.phi-=Ae}const ma=(()=>{const Ae=new Ue.Pa4;return function(zn,Ln){Ae.setFromMatrixColumn(Ln,0),Ae.multiplyScalar(-zn),Kn.add(Ae)}})(),xr=(()=>{const Ae=new Ue.Pa4;return function(zn,Ln){O.screenSpacePanning===!0?Ae.setFromMatrixColumn(Ln,1):(Ae.setFromMatrixColumn(Ln,0),Ae.crossVectors(O.object.up,Ae)),Ae.multiplyScalar(zn),Kn.add(Ae)}})(),ta=(()=>{const Ae=new Ue.Pa4;return function(zn,Ln){const gr=O.domElement;if(gr&&O.object instanceof Ue.cPb&&O.object.isPerspectiveCamera){const Ni=O.object.position;Ae.copy(Ni).sub(O.target);let fr=Ae.length();fr*=Math.tan(O.object.fov/2*Math.PI/180),ma(2*zn*fr/gr.clientHeight,O.object.matrix),xr(2*Ln*fr/gr.clientHeight,O.object.matrix)}else gr&&O.object instanceof Ue.iKG&&O.object.isOrthographicCamera?(ma(zn*(O.object.right-O.object.left)/O.object.zoom/gr.clientWidth,O.object.matrix),xr(Ln*(O.object.top-O.object.bottom)/O.object.zoom/gr.clientHeight,O.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),O.enablePan=!1)}})();function qi(Ae){O.object instanceof Ue.cPb&&O.object.isPerspectiveCamera||O.object instanceof Ue.iKG&&O.object.isOrthographicCamera?qt=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),O.enableZoom=!1)}function Pr(Ae){qi(qt/Ae)}function Cr(Ae){qi(qt*Ae)}function lr(Ae){if(!O.zoomToCursor||!O.domElement)return;Ci=!0;const Yt=O.domElement.getBoundingClientRect(),zn=Ae.clientX-Yt.left,Ln=Ae.clientY-Yt.top,gr=Yt.width,Ni=Yt.height;Mn.x=zn/gr*2-1,Mn.y=-(Ln/Ni)*2+1,rn.set(Mn.x,Mn.y,1).unproject(O.object).sub(O.object.position).normalize()}function ba(Ae){return Math.max(O.minDistance,Math.min(O.maxDistance,Ae))}function la(Ae){$n.set(Ae.clientX,Ae.clientY)}function Ur(Ae){lr(Ae),xt.set(Ae.clientX,Ae.clientY)}function lo(Ae){Er.set(Ae.clientX,Ae.clientY)}function yo(Ae){pi.set(Ae.clientX,Ae.clientY),ii.subVectors(pi,$n).multiplyScalar(O.rotateSpeed);const Yt=O.domElement;Yt&&(Yi(2*Math.PI*ii.x/Yt.clientHeight),Za(2*Math.PI*ii.y/Yt.clientHeight)),$n.copy(pi),O.update()}function nr(Ae){Kt.set(Ae.clientX,Ae.clientY),En.subVectors(Kt,xt),En.y>0?Pr(Ir()):En.y<0&&Cr(Ir()),xt.copy(Kt),O.update()}function io(Ae){Lr.set(Ae.clientX,Ae.clientY),Ha.subVectors(Lr,Er).multiplyScalar(O.panSpeed),ta(Ha.x,Ha.y),Er.copy(Lr),O.update()}function X(Ae){lr(Ae),Ae.deltaY<0?Cr(Ir()):Ae.deltaY>0&&Pr(Ir()),O.update()}function xe(Ae){let Yt=!1;switch(Ae.code){case O.keys.UP:ta(0,O.keyPanSpeed),Yt=!0;break;case O.keys.BOTTOM:ta(0,-O.keyPanSpeed),Yt=!0;break;case O.keys.LEFT:ta(O.keyPanSpeed,0),Yt=!0;break;case O.keys.RIGHT:ta(-O.keyPanSpeed,0),Yt=!0;break}Yt&&(Ae.preventDefault(),O.update())}function It(){if(Rn.length==1)$n.set(Rn[0].pageX,Rn[0].pageY);else{const Ae=.5*(Rn[0].pageX+Rn[1].pageX),Yt=.5*(Rn[0].pageY+Rn[1].pageY);$n.set(Ae,Yt)}}function Ht(){if(Rn.length==1)Er.set(Rn[0].pageX,Rn[0].pageY);else{const Ae=.5*(Rn[0].pageX+Rn[1].pageX),Yt=.5*(Rn[0].pageY+Rn[1].pageY);Er.set(Ae,Yt)}}function Tn(){const Ae=Rn[0].pageX-Rn[1].pageX,Yt=Rn[0].pageY-Rn[1].pageY,zn=Math.sqrt(Ae*Ae+Yt*Yt);xt.set(0,zn)}function Yn(){O.enableZoom&&Tn(),O.enablePan&&Ht()}function vi(){O.enableZoom&&Tn(),O.enableRotate&&It()}function ca(Ae){if(Rn.length==1)pi.set(Ae.pageX,Ae.pageY);else{const zn=fo(Ae),Ln=.5*(Ae.pageX+zn.x),gr=.5*(Ae.pageY+zn.y);pi.set(Ln,gr)}ii.subVectors(pi,$n).multiplyScalar(O.rotateSpeed);const Yt=O.domElement;Yt&&(Yi(2*Math.PI*ii.x/Yt.clientHeight),Za(2*Math.PI*ii.y/Yt.clientHeight)),$n.copy(pi)}function Gi(Ae){if(Rn.length==1)Lr.set(Ae.pageX,Ae.pageY);else{const Yt=fo(Ae),zn=.5*(Ae.pageX+Yt.x),Ln=.5*(Ae.pageY+Yt.y);Lr.set(zn,Ln)}Ha.subVectors(Lr,Er).multiplyScalar(O.panSpeed),ta(Ha.x,Ha.y),Er.copy(Lr)}function vr(Ae){const Yt=fo(Ae),zn=Ae.pageX-Yt.x,Ln=Ae.pageY-Yt.y,gr=Math.sqrt(zn*zn+Ln*Ln);Kt.set(0,gr),En.set(0,Math.pow(Kt.y/xt.y,O.zoomSpeed)),Pr(En.y),xt.copy(Kt)}function na(Ae){O.enableZoom&&vr(Ae),O.enablePan&&Gi(Ae)}function Nr(Ae){O.enableZoom&&vr(Ae),O.enableRotate&&ca(Ae)}function xo(Ae){var Yt,zn;O.enabled!==!1&&(Rn.length===0&&((Yt=O.domElement)==null||Yt.ownerDocument.addEventListener("pointermove",Va),(zn=O.domElement)==null||zn.ownerDocument.addEventListener("pointerup",va)),uo(Ae),Ae.pointerType==="touch"?$a(Ae):os(Ae))}function Va(Ae){O.enabled!==!1&&(Ae.pointerType==="touch"?Ka(Ae):co(Ae))}function va(Ae){var Yt,zn,Ln;$o(Ae),Rn.length===0&&((Yt=O.domElement)==null||Yt.releasePointerCapture(Ae.pointerId),(zn=O.domElement)==null||zn.ownerDocument.removeEventListener("pointermove",Va),(Ln=O.domElement)==null||Ln.ownerDocument.removeEventListener("pointerup",va)),O.dispatchEvent(An),jt=Dn.NONE}function os(Ae){let Yt;switch(Ae.button){case 0:Yt=O.mouseButtons.LEFT;break;case 1:Yt=O.mouseButtons.MIDDLE;break;case 2:Yt=O.mouseButtons.RIGHT;break;default:Yt=-1}switch(Yt){case Ue.RsA.DOLLY:if(O.enableZoom===!1)return;Ur(Ae),jt=Dn.DOLLY;break;case Ue.RsA.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(O.enablePan===!1)return;lo(Ae),jt=Dn.PAN}else{if(O.enableRotate===!1)return;la(Ae),jt=Dn.ROTATE}break;case Ue.RsA.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(O.enableRotate===!1)return;la(Ae),jt=Dn.ROTATE}else{if(O.enablePan===!1)return;lo(Ae),jt=Dn.PAN}break;default:jt=Dn.NONE}jt!==Dn.NONE&&O.dispatchEvent(Pn)}function co(Ae){if(O.enabled!==!1)switch(jt){case Dn.ROTATE:if(O.enableRotate===!1)return;yo(Ae);break;case Dn.DOLLY:if(O.enableZoom===!1)return;nr(Ae);break;case Dn.PAN:if(O.enablePan===!1)return;io(Ae);break}}function ss(Ae){O.enabled===!1||O.enableZoom===!1||jt!==Dn.NONE&&jt!==Dn.ROTATE||(Ae.preventDefault(),O.dispatchEvent(Pn),X(Ae),O.dispatchEvent(An))}function ua(Ae){O.enabled===!1||O.enablePan===!1||xe(Ae)}function $a(Ae){switch(Zo(Ae),Rn.length){case 1:switch(O.touches.ONE){case Ue.QmN.ROTATE:if(O.enableRotate===!1)return;It(),jt=Dn.TOUCH_ROTATE;break;case Ue.QmN.PAN:if(O.enablePan===!1)return;Ht(),jt=Dn.TOUCH_PAN;break;default:jt=Dn.NONE}break;case 2:switch(O.touches.TWO){case Ue.QmN.DOLLY_PAN:if(O.enableZoom===!1&&O.enablePan===!1)return;Yn(),jt=Dn.TOUCH_DOLLY_PAN;break;case Ue.QmN.DOLLY_ROTATE:if(O.enableZoom===!1&&O.enableRotate===!1)return;vi(),jt=Dn.TOUCH_DOLLY_ROTATE;break;default:jt=Dn.NONE}break;default:jt=Dn.NONE}jt!==Dn.NONE&&O.dispatchEvent(Pn)}function Ka(Ae){switch(Zo(Ae),jt){case Dn.TOUCH_ROTATE:if(O.enableRotate===!1)return;ca(Ae),O.update();break;case Dn.TOUCH_PAN:if(O.enablePan===!1)return;Gi(Ae),O.update();break;case Dn.TOUCH_DOLLY_PAN:if(O.enableZoom===!1&&O.enablePan===!1)return;na(Ae),O.update();break;case Dn.TOUCH_DOLLY_ROTATE:if(O.enableZoom===!1&&O.enableRotate===!1)return;Nr(Ae),O.update();break;default:jt=Dn.NONE}}function Co(Ae){O.enabled!==!1&&Ae.preventDefault()}function uo(Ae){Rn.push(Ae)}function $o(Ae){delete sr[Ae.pointerId];for(let Yt=0;Yt<Rn.length;Yt++)if(Rn[Yt].pointerId==Ae.pointerId){Rn.splice(Yt,1);return}}function Zo(Ae){let Yt=sr[Ae.pointerId];Yt===void 0&&(Yt=new Ue.FM8,sr[Ae.pointerId]=Yt),Yt.set(Ae.pageX,Ae.pageY)}function fo(Ae){const Yt=Ae.pointerId===Rn[0].pointerId?Rn[1]:Rn[0];return sr[Yt.pointerId]}this.dollyIn=(Ae=Ir())=>{Cr(Ae),O.update()},this.dollyOut=(Ae=Ir())=>{Pr(Ae),O.update()},this.getScale=()=>qt,this.setScale=Ae=>{qi(Ae),O.update()},this.getZoomScale=()=>Ir(),Wn!==void 0&&this.connect(Wn),this.update()}}class tn extends null{constructor(wn,Wn){super(wn,Wn),this.screenSpacePanning=!1,this.mouseButtons.LEFT=MOUSE.PAN,this.mouseButtons.RIGHT=MOUSE.ROTATE,this.touches.ONE=TOUCH.PAN,this.touches.TWO=TOUCH.DOLLY_ROTATE}}const C=mn.forwardRef((Rr,Hi)=>{var qt=Rr,{makeDefault:Nt,camera:wn,regress:Wn,domElement:O,enableDamping:Vi=!0,keyEvents:Pn=!1,onChange:An,onStart:Dn,onEnd:jt}=qt,Mr=Sp(qt,["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"]);const Kn=(0,he.C)(Mn=>Mn.invalidate),$n=(0,he.C)(Mn=>Mn.camera),pi=(0,he.C)(Mn=>Mn.gl),ii=(0,he.C)(Mn=>Mn.events),Er=(0,he.C)(Mn=>Mn.setEvents),Lr=(0,he.C)(Mn=>Mn.set),Ha=(0,he.C)(Mn=>Mn.get),xt=(0,he.C)(Mn=>Mn.performance),Kt=wn||$n,En=O||ii.connected||pi.domElement,rn=mn.useMemo(()=>new ln(Kt),[Kt]);return(0,he.D)(()=>{rn.enabled&&rn.update()},-1),mn.useEffect(()=>(Pn&&rn.connect(Pn===!0?En:Pn),rn.connect(En),()=>void rn.dispose()),[Pn,En,Wn,rn,Kn]),mn.useEffect(()=>{const Mn=sr=>{Kn(),Wn&&xt.regress(),An&&An(sr)},Ci=sr=>{Dn&&Dn(sr)},Rn=sr=>{jt&&jt(sr)};return rn.addEventListener("change",Mn),rn.addEventListener("start",Ci),rn.addEventListener("end",Rn),()=>{rn.removeEventListener("start",Ci),rn.removeEventListener("end",Rn),rn.removeEventListener("change",Mn)}},[An,Dn,jt,rn,Kn,Er]),mn.useEffect(()=>{if(Nt){const Mn=Ha().controls;return Lr({controls:rn}),()=>Lr({controls:Mn})}},[Nt,rn]),mn.createElement("primitive",(0,p.Z)({ref:Hi,object:rn,enableDamping:Vi},Mr))})},96167:function(Li,hn,k){"use strict";k.d(hn,{B:function(){return Lr},C:function(){return Yn},D:function(){return vi},E:function(){return Ha},a:function(){return ii},b:function(){return pi},c:function(){return an},d:function(){return Br},e:function(){return $a},f:function(){return wo},i:function(){return Kn},u:function(){return Er}});var p=k(67294),he=k.t(p,2),mn=k(32576),Ue=k(74250),j=k(99477),en=k(52798);const D=F=>{let G;const ne=new Set,Ne=(jn,xn)=>{const Ut=typeof jn=="function"?jn(G):jn;if(!Object.is(Ut,G)){const St=G;G=(xn!=null?xn:typeof Ut!="object"||Ut===null)?Ut:Object.assign({},G,Ut),ne.forEach(li=>li(G,St))}},it=()=>G,Zn={setState:Ne,getState:it,getInitialState:()=>Xt,subscribe:jn=>(ne.add(jn),()=>ne.delete(jn))},Xt=G=F(Ne,it,Zn);return Zn},dn=F=>F?D(F):D,{useSyncExternalStoreWithSelector:Kr}=en,Ei=F=>F;function Mt(F,G=Ei,ne){const Ne=Kr(F.subscribe,F.getState,F.getInitialState,G,ne);return p.useDebugValue(Ne),Ne}const hi=(F,G)=>{const ne=dn(F),Ne=(it,Gt=G)=>Mt(ne,it,Gt);return Object.assign(Ne,ne),Ne},di=(F,G)=>F?hi(F,G):hi,Xi=F=>typeof F=="object"&&typeof F.then=="function",st=[];function ln(F,G,ne=(Ne,it)=>Ne===it){if(F===G)return!0;if(!F||!G)return!1;const Ne=F.length;if(G.length!==Ne)return!1;for(let it=0;it<Ne;it++)if(!ne(F[it],G[it]))return!1;return!0}function tn(F,G=null,ne=!1,Ne={}){G===null&&(G=[F]);for(const Gt of st)if(ln(G,Gt.keys,Gt.equal)){if(ne)return;if(Object.prototype.hasOwnProperty.call(Gt,"error"))throw Gt.error;if(Object.prototype.hasOwnProperty.call(Gt,"response"))return Ne.lifespan&&Ne.lifespan>0&&(Gt.timeout&&clearTimeout(Gt.timeout),Gt.timeout=setTimeout(Gt.remove,Ne.lifespan)),Gt.response;if(!ne)throw Gt.promise}const it={keys:G,equal:Ne.equal,remove:()=>{const Gt=st.indexOf(it);Gt!==-1&&st.splice(Gt,1)},promise:(Xi(F)?F:F(...G)).then(Gt=>{it.response=Gt,Ne.lifespan&&Ne.lifespan>0&&(it.timeout=setTimeout(it.remove,Ne.lifespan))}).catch(Gt=>it.error=Gt)};if(st.push(it),!ne)throw it.promise}const C=(F,G,ne)=>tn(F,G,!1,ne),Nt=(F,G,ne)=>void tn(F,G,!0,ne),wn=F=>{var G;return(G=st.find(ne=>ln(F,ne.keys,ne.equal)))==null?void 0:G.response},Wn=F=>{if(F===void 0||F.length===0)st.splice(0,st.length);else{const G=st.find(ne=>ln(F,ne.keys,ne.equal));G&&G.remove()}};var O=k(76525),Vi=k.n(O),Pn=k(63840),An=k(85893),Dn=k(83213),jt=k(34155),Mr=Object.freeze({__proto__:null});function Hi(F){let G=F.root;for(;G.getState().previousRoot;)G=G.getState().previousRoot;return G}const Rr=he.act,qt=F=>F&&F.isOrthographicCamera,Kn=F=>F&&F.hasOwnProperty("current"),$n=F=>F!=null&&(typeof F=="string"||typeof F=="number"||F.isColor),pi=((F,G)=>typeof window!="undefined"&&(((F=window.document)==null?void 0:F.createElement)||((G=window.navigator)==null?void 0:G.product)==="ReactNative"))()?p.useLayoutEffect:p.useEffect;function ii(F){const G=p.useRef(F);return pi(()=>void(G.current=F),[F]),G}function Er(){const F=(0,Dn.NN)(),G=(0,Dn.jn)();return p.useMemo(()=>({children:ne})=>{const it=!!(0,Dn.pc)(F,!0,Gt=>Gt.type===p.StrictMode)?p.StrictMode:p.Fragment;return(0,An.jsx)(it,{children:(0,An.jsx)(G,{children:ne})})},[F,G])}function Lr({set:F}){return pi(()=>(F(new Promise(()=>null)),()=>F(!1)),[F]),null}const Ha=(F=>(F=class extends p.Component{constructor(...ne){super(...ne),this.state={error:!1}}componentDidCatch(ne){this.props.set(ne)}render(){return this.state.error?null:this.props.children}},F.getDerivedStateFromError=()=>({error:!0}),F))();function xt(F){var G;const ne=typeof window!="undefined"?(G=window.devicePixelRatio)!=null?G:2:1;return Array.isArray(F)?Math.min(Math.max(F[0],ne),F[1]):F}function Kt(F){var G;return(G=F.__r3f)==null?void 0:G.root.getState()}const En={obj:F=>F===Object(F)&&!En.arr(F)&&typeof F!="function",fun:F=>typeof F=="function",str:F=>typeof F=="string",num:F=>typeof F=="number",boo:F=>typeof F=="boolean",und:F=>F===void 0,nul:F=>F===null,arr:F=>Array.isArray(F),equ(F,G,{arrays:ne="shallow",objects:Ne="reference",strict:it=!0}={}){if(typeof F!=typeof G||!!F!=!!G)return!1;if(En.str(F)||En.num(F)||En.boo(F))return F===G;const Gt=En.obj(F);if(Gt&&Ne==="reference")return F===G;const Jn=En.arr(F);if(Jn&&ne==="reference")return F===G;if((Jn||Gt)&&F===G)return!0;let Zn;for(Zn in F)if(!(Zn in G))return!1;if(Gt&&ne==="shallow"&&Ne==="shallow"){for(Zn in it?G:F)if(!En.equ(F[Zn],G[Zn],{strict:it,objects:"reference"}))return!1}else for(Zn in it?G:F)if(F[Zn]!==G[Zn])return!1;if(En.und(Zn)){if(Jn&&F.length===0&&G.length===0||Gt&&Object.keys(F).length===0&&Object.keys(G).length===0)return!0;if(F!==G)return!1}return!0}};function rn(F){const G={nodes:{},materials:{},meshes:{}};return F&&F.traverse(ne=>{ne.name&&(G.nodes[ne.name]=ne),ne.material&&!G.materials[ne.material.name]&&(G.materials[ne.material.name]=ne.material),ne.isMesh&&!G.meshes[ne.name]&&(G.meshes[ne.name]=ne)}),G}function Mn(F){F.type!=="Scene"&&(F.dispose==null||F.dispose());for(const G in F){const ne=F[G];(ne==null?void 0:ne.type)!=="Scene"&&(ne==null||ne.dispose==null||ne.dispose())}}const Ci=["children","key","ref"];function Rn(F){const G={};for(const ne in F)Ci.includes(ne)||(G[ne]=F[ne]);return G}function sr(F,G,ne,Ne){const it=F;let Gt=it==null?void 0:it.__r3f;return Gt||(Gt={root:G,type:ne,parent:null,children:[],props:Rn(Ne),object:it,eventCount:0,handlers:{},isHidden:!1},it&&(it.__r3f=Gt)),Gt}function Yr(F,G){if(!G.includes("-"))return{root:F,key:G,target:F[G]};if(G in F)return{root:F,key:G,target:F[G]};let ne=F;const Ne=G.split("-");for(const it of Ne){if(typeof ne!="object"||ne===null){if(ne!==void 0){const Gt=Ne.slice(Ne.indexOf(it)).join("-");return{root:ne,key:Gt,target:void 0}}return{root:F,key:G,target:void 0}}G=it,F=ne,ne=ne[G]}return{root:F,key:G,target:ne}}const Ir=/-\d+$/;function Yi(F,G){if(En.str(G.props.attach)){if(Ir.test(G.props.attach)){const it=G.props.attach.replace(Ir,""),{root:Gt,key:Jn}=Yr(F.object,it);Array.isArray(Gt[Jn])||(Gt[Jn]=[])}const{root:ne,key:Ne}=Yr(F.object,G.props.attach);G.previousAttach=ne[Ne],ne[Ne]=G.object}else En.fun(G.props.attach)&&(G.previousAttach=G.props.attach(F.object,G.object))}function Za(F,G){if(En.str(G.props.attach)){const{root:ne,key:Ne}=Yr(F.object,G.props.attach),it=G.previousAttach;it===void 0?delete ne[Ne]:ne[Ne]=it}else G.previousAttach==null||G.previousAttach(F.object,G.object);delete G.previousAttach}const ma=[...Ci,"args","dispose","attach","object","onUpdate","dispose"],xr=new Map;function ta(F){let G=xr.get(F.constructor);try{G||(G=new F.constructor,xr.set(F.constructor,G))}catch(ne){}return G}function qi(F,G){const ne={};for(const Ne in G)if(!ma.includes(Ne)&&!En.equ(G[Ne],F.props[Ne])){ne[Ne]=G[Ne];for(const it in G)it.startsWith(`${Ne}-`)&&(ne[it]=G[it])}for(const Ne in F.props){if(ma.includes(Ne)||G.hasOwnProperty(Ne))continue;const{root:it,key:Gt}=Yr(F.object,Ne);if(it.constructor&&it.constructor.length===0){const Jn=ta(it);En.und(Jn)||(ne[Gt]=Jn[Gt])}else ne[Gt]=0}return ne}const Pr=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Cr=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function lr(F,G){var ne;const Ne=F.__r3f,it=Ne&&Hi(Ne).getState(),Gt=Ne==null?void 0:Ne.eventCount;for(const Zn in G){let Xt=G[Zn];if(ma.includes(Zn))continue;if(Ne&&Cr.test(Zn)){typeof Xt=="function"?Ne.handlers[Zn]=Xt:delete Ne.handlers[Zn],Ne.eventCount=Object.keys(Ne.handlers).length;continue}if(Xt===void 0)continue;let{root:jn,key:xn,target:Ut}=Yr(F,Zn);if(Ut===void 0&&(typeof jn!="object"||jn===null))throw Error(`R3F: Cannot set "${Zn}". Ensure it is an object before setting "${xn}".`);if(Ut instanceof Ue.S9g&&Xt instanceof Ue.S9g)Ut.mask=Xt.mask;else if(Ut instanceof Ue.Ilk&&$n(Xt))Ut.set(Xt);else if(Ut!==null&&typeof Ut=="object"&&typeof Ut.set=="function"&&typeof Ut.copy=="function"&&Xt!=null&&Xt.constructor&&Ut.constructor===Xt.constructor)Ut.copy(Xt);else if(Ut!==null&&typeof Ut=="object"&&typeof Ut.set=="function"&&Array.isArray(Xt))typeof Ut.fromArray=="function"?Ut.fromArray(Xt):Ut.set(...Xt);else if(Ut!==null&&typeof Ut=="object"&&typeof Ut.set=="function"&&typeof Xt=="number")typeof Ut.setScalar=="function"?Ut.setScalar(Xt):Ut.set(Xt);else{var Jn;jn[xn]=Xt,it&&!it.linear&&Pr.includes(xn)&&(Jn=jn[xn])!=null&&Jn.isTexture&&jn[xn].format===Ue.wk1&&jn[xn].type===Ue.ywz&&(jn[xn].colorSpace=Ue.KI_)}}if(Ne!=null&&Ne.parent&&it!=null&&it.internal&&(ne=Ne.object)!=null&&ne.isObject3D&&Gt!==Ne.eventCount){const Zn=Ne.object,Xt=it.internal.interaction.indexOf(Zn);Xt>-1&&it.internal.interaction.splice(Xt,1),Ne.eventCount&&Zn.raycast!==null&&it.internal.interaction.push(Zn)}return Ne&&Ne.props.attach===void 0&&(Ne.object.isBufferGeometry?Ne.props.attach="geometry":Ne.object.isMaterial&&(Ne.props.attach="material")),Ne&&ba(Ne),F}function ba(F){var G;if(!F.parent)return;F.props.onUpdate==null||F.props.onUpdate(F.object);const ne=(G=F.root)==null||G.getState==null?void 0:G.getState();ne&&ne.internal.frames===0&&ne.invalidate()}function la(F,G){F.manual||(qt(F)?(F.left=G.width/-2,F.right=G.width/2,F.top=G.height/2,F.bottom=G.height/-2):F.aspect=G.width/G.height,F.updateProjectionMatrix())}const Ur=F=>F==null?void 0:F.isObject3D;function lo(F){return(F.eventObject||F.object).uuid+"/"+F.index+F.instanceId}function yo(F,G,ne,Ne){const it=ne.get(G);it&&(ne.delete(G),ne.size===0&&(F.delete(Ne),it.target.releasePointerCapture(Ne)))}function nr(F,G){const{internal:ne}=F.getState();ne.interaction=ne.interaction.filter(Ne=>Ne!==G),ne.initialHits=ne.initialHits.filter(Ne=>Ne!==G),ne.hovered.forEach((Ne,it)=>{(Ne.eventObject===G||Ne.object===G)&&ne.hovered.delete(it)}),ne.capturedMap.forEach((Ne,it)=>{yo(ne.capturedMap,G,Ne,it)})}function io(F){function G(Xt){const{internal:jn}=F.getState(),xn=Xt.offsetX-jn.initialClick[0],Ut=Xt.offsetY-jn.initialClick[1];return Math.round(Math.sqrt(xn*xn+Ut*Ut))}function ne(Xt){return Xt.filter(jn=>["Move","Over","Enter","Out","Leave"].some(xn=>{var Ut;return(Ut=jn.__r3f)==null?void 0:Ut.handlers["onPointer"+xn]}))}function Ne(Xt,jn){const xn=F.getState(),Ut=new Set,St=[],li=jn?jn(xn.internal.interaction):xn.internal.interaction;for(let Xn=0;Xn<li.length;Xn++){const Gn=Kt(li[Xn]);Gn&&(Gn.raycaster.camera=void 0)}xn.previousRoot||xn.events.compute==null||xn.events.compute(Xt,xn);function ur(Xn){const Gn=Kt(Xn);if(!Gn||!Gn.events.enabled||Gn.raycaster.camera===null)return[];if(Gn.raycaster.camera===void 0){var gi;Gn.events.compute==null||Gn.events.compute(Xt,Gn,(gi=Gn.previousRoot)==null?void 0:gi.getState()),Gn.raycaster.camera===void 0&&(Gn.raycaster.camera=null)}return Gn.raycaster.camera?Gn.raycaster.intersectObject(Xn,!0):[]}let hr=li.flatMap(ur).sort((Xn,Gn)=>{const gi=Kt(Xn.object),Hr=Kt(Gn.object);return!gi||!Hr?Xn.distance-Gn.distance:Hr.events.priority-gi.events.priority||Xn.distance-Gn.distance}).filter(Xn=>{const Gn=lo(Xn);return Ut.has(Gn)?!1:(Ut.add(Gn),!0)});xn.events.filter&&(hr=xn.events.filter(hr,xn));for(const Xn of hr){let Gn=Xn.object;for(;Gn;){var ki;(ki=Gn.__r3f)!=null&&ki.eventCount&&St.push(cl(Qi({},Xn),{eventObject:Gn})),Gn=Gn.parent}}if("pointerId"in Xt&&xn.internal.capturedMap.has(Xt.pointerId))for(let Xn of xn.internal.capturedMap.get(Xt.pointerId).values())Ut.has(lo(Xn.intersection))||St.push(Xn.intersection);return St}function it(Xt,jn,xn,Ut){if(Xt.length){const St={stopped:!1};for(const li of Xt){let ur=Kt(li.object);if(ur||li.object.traverseAncestors(hr=>{const ki=Kt(hr);if(ki)return ur=ki,!1}),ur){const{raycaster:hr,pointer:ki,camera:Xn,internal:Gn}=ur,gi=new Ue.Pa4(ki.x,ki.y,0).unproject(Xn),Hr=Sr=>{var fa,ko;return(fa=(ko=Gn.capturedMap.get(Sr))==null?void 0:ko.has(li.eventObject))!=null?fa:!1},Tr=Sr=>{const fa={intersection:li,target:jn.target};Gn.capturedMap.has(Sr)?Gn.capturedMap.get(Sr).set(li.eventObject,fa):Gn.capturedMap.set(Sr,new Map([[li.eventObject,fa]])),jn.target.setPointerCapture(Sr)},ir=Sr=>{const fa=Gn.capturedMap.get(Sr);fa&&yo(Gn.capturedMap,li.eventObject,fa,Sr)};let Ea={};for(let Sr in jn){let fa=jn[Sr];typeof fa!="function"&&(Ea[Sr]=fa)}let Vr=cl(Qi(Qi({},li),Ea),{pointer:ki,intersections:Xt,stopped:St.stopped,delta:xn,unprojectedPoint:gi,ray:hr.ray,camera:Xn,stopPropagation(){const Sr="pointerId"in jn&&Gn.capturedMap.get(jn.pointerId);if((!Sr||Sr.has(li.eventObject))&&(Vr.stopped=St.stopped=!0,Gn.hovered.size&&Array.from(Gn.hovered.values()).find(fa=>fa.eventObject===li.eventObject))){const fa=Xt.slice(0,Xt.indexOf(li));Gt([...fa,li])}},target:{hasPointerCapture:Hr,setPointerCapture:Tr,releasePointerCapture:ir},currentTarget:{hasPointerCapture:Hr,setPointerCapture:Tr,releasePointerCapture:ir},nativeEvent:jn});if(Ut(Vr),St.stopped===!0)break}}}return Xt}function Gt(Xt){const{internal:jn}=F.getState();for(const xn of jn.hovered.values())if(!Xt.length||!Xt.find(Ut=>Ut.object===xn.object&&Ut.index===xn.index&&Ut.instanceId===xn.instanceId)){const St=xn.eventObject.__r3f;if(jn.hovered.delete(lo(xn)),St!=null&&St.eventCount){const li=St.handlers,ur=cl(Qi({},xn),{intersections:Xt});li.onPointerOut==null||li.onPointerOut(ur),li.onPointerLeave==null||li.onPointerLeave(ur)}}}function Jn(Xt,jn){for(let xn=0;xn<jn.length;xn++){const Ut=jn[xn].__r3f;Ut==null||Ut.handlers.onPointerMissed==null||Ut.handlers.onPointerMissed(Xt)}}function Zn(Xt){switch(Xt){case"onPointerLeave":case"onPointerCancel":return()=>Gt([]);case"onLostPointerCapture":return jn=>{const{internal:xn}=F.getState();"pointerId"in jn&&xn.capturedMap.has(jn.pointerId)&&requestAnimationFrame(()=>{xn.capturedMap.has(jn.pointerId)&&(xn.capturedMap.delete(jn.pointerId),Gt([]))})}}return function(xn){const{onPointerMissed:Ut,internal:St}=F.getState();St.lastEvent.current=xn;const li=Xt==="onPointerMove",ur=Xt==="onClick"||Xt==="onContextMenu"||Xt==="onDoubleClick",ki=Ne(xn,li?ne:void 0),Xn=ur?G(xn):0;Xt==="onPointerDown"&&(St.initialClick=[xn.offsetX,xn.offsetY],St.initialHits=ki.map(gi=>gi.eventObject)),ur&&!ki.length&&Xn<=2&&(Jn(xn,St.interaction),Ut&&Ut(xn)),li&&Gt(ki);function Gn(gi){const Hr=gi.eventObject,Tr=Hr.__r3f;if(!(Tr!=null&&Tr.eventCount))return;const ir=Tr.handlers;if(li){if(ir.onPointerOver||ir.onPointerEnter||ir.onPointerOut||ir.onPointerLeave){const Ea=lo(gi),Vr=St.hovered.get(Ea);Vr?Vr.stopped&&gi.stopPropagation():(St.hovered.set(Ea,gi),ir.onPointerOver==null||ir.onPointerOver(gi),ir.onPointerEnter==null||ir.onPointerEnter(gi))}ir.onPointerMove==null||ir.onPointerMove(gi)}else{const Ea=ir[Xt];Ea?(!ur||St.initialHits.includes(Hr))&&(Jn(xn,St.interaction.filter(Vr=>!St.initialHits.includes(Vr))),Ea(gi)):ur&&St.initialHits.includes(Hr)&&Jn(xn,St.interaction.filter(Vr=>!St.initialHits.includes(Vr)))}}it(ki,xn,Xn,Gn)}}return{handlePointer:Zn}}const X=F=>!!(F!=null&&F.render),xe=p.createContext(null),It=(F,G)=>{const ne=di((Zn,Xt)=>{const jn=new Ue.Pa4,xn=new Ue.Pa4,Ut=new Ue.Pa4;function St(Xn=Xt().camera,Gn=xn,gi=Xt().size){const{width:Hr,height:Tr,top:ir,left:Ea}=gi,Vr=Hr/Tr;Gn.isVector3?Ut.copy(Gn):Ut.set(...Gn);const Sr=Xn.getWorldPosition(jn).distanceTo(Ut);if(qt(Xn))return{width:Hr/Xn.zoom,height:Tr/Xn.zoom,top:ir,left:Ea,factor:1,distance:Sr,aspect:Vr};{const fa=Xn.fov*Math.PI/180,ko=2*Math.tan(fa/2)*Sr,qa=ko*(Hr/Tr);return{width:qa,height:ko,top:ir,left:Ea,factor:Hr/qa,distance:Sr,aspect:Vr}}}let li;const ur=Xn=>Zn(Gn=>({performance:cl(Qi({},Gn.performance),{current:Xn})})),hr=new Ue.FM8;return{set:Zn,get:Xt,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(Xn=1)=>F(Xt(),Xn),advance:(Xn,Gn)=>G(Xn,Gn,Xt()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Ue.SUY,pointer:hr,mouse:hr,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const Xn=Xt();li&&clearTimeout(li),Xn.performance.current!==Xn.performance.min&&ur(Xn.performance.min),li=setTimeout(()=>ur(Xt().performance.max),Xn.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:St},setEvents:Xn=>Zn(Gn=>cl(Qi({},Gn),{events:Qi(Qi({},Gn.events),Xn)})),setSize:(Xn,Gn,gi=0,Hr=0)=>{const Tr=Xt().camera,ir={width:Xn,height:Gn,top:gi,left:Hr};Zn(Ea=>({size:ir,viewport:Qi(Qi({},Ea.viewport),St(Tr,xn,ir))}))},setDpr:Xn=>Zn(Gn=>{const gi=xt(Xn);return{viewport:cl(Qi({},Gn.viewport),{dpr:gi,initialDpr:Gn.viewport.initialDpr||gi})}}),setFrameloop:(Xn="always")=>{const Gn=Xt().clock;Gn.stop(),Gn.elapsedTime=0,Xn!=="never"&&(Gn.start(),Gn.elapsedTime=0),Zn(()=>({frameloop:Xn}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:p.createRef(),active:!1,frames:0,priority:0,subscribe:(Xn,Gn,gi)=>{const Hr=Xt().internal;return Hr.priority=Hr.priority+(Gn>0?1:0),Hr.subscribers.push({ref:Xn,priority:Gn,store:gi}),Hr.subscribers=Hr.subscribers.sort((Tr,ir)=>Tr.priority-ir.priority),()=>{const Tr=Xt().internal;Tr!=null&&Tr.subscribers&&(Tr.priority=Tr.priority-(Gn>0?1:0),Tr.subscribers=Tr.subscribers.filter(ir=>ir.ref!==Xn))}}}}}),Ne=ne.getState();let it=Ne.size,Gt=Ne.viewport.dpr,Jn=Ne.camera;return ne.subscribe(()=>{const{camera:Zn,size:Xt,viewport:jn,gl:xn,set:Ut}=ne.getState();if(Xt.width!==it.width||Xt.height!==it.height||jn.dpr!==Gt){it=Xt,Gt=jn.dpr,la(Zn,Xt),jn.dpr>0&&xn.setPixelRatio(jn.dpr);const St=typeof HTMLCanvasElement!="undefined"&&xn.domElement instanceof HTMLCanvasElement;xn.setSize(Xt.width,Xt.height,St)}Zn!==Jn&&(Jn=Zn,Ut(St=>({viewport:Qi(Qi({},St.viewport),St.viewport.getCurrentViewport(Zn))})))}),ne.subscribe(Zn=>F(Zn)),ne};function Ht(F){const G=React.useRef(null);return React.useImperativeHandle(G,()=>F.current.__r3f,[F]),G}function Tn(){const F=p.useContext(xe);if(!F)throw new Error("R3F: Hooks can only be used within the Canvas component!");return F}function Yn(F=ne=>ne,G){return Tn()(F,G)}function vi(F,G=0){const ne=Tn(),Ne=ne.getState().internal.subscribe,it=ii(F);return pi(()=>Ne(it,G,ne),[G,Ne,ne]),null}function ca(F){return React.useMemo(()=>rn(F),[F])}const Gi=new WeakMap,vr=F=>{var G;return typeof F=="function"&&(F==null||(G=F.prototype)==null?void 0:G.constructor)===F};function na(F,G){return function(ne,...Ne){let it;return vr(ne)?(it=Gi.get(ne),it||(it=new ne,Gi.set(ne,it))):it=ne,F&&F(it),Promise.all(Ne.map(Gt=>new Promise((Jn,Zn)=>it.load(Gt,Xt=>{Ur(Xt==null?void 0:Xt.scene)&&Object.assign(Xt,rn(Xt.scene)),Jn(Xt)},G,Xt=>Zn(new Error(`Could not load ${Gt}: ${Xt==null?void 0:Xt.message}`))))))}}function Nr(F,G,ne,Ne){const it=Array.isArray(G)?G:[G],Gt=C(na(ne,Ne),[F,...it],{equal:En.equ});return Array.isArray(G)?Gt:Gt[0]}Nr.preload=function(F,G,ne){const Ne=Array.isArray(G)?G:[G];return Nt(na(ne),[F,...Ne])},Nr.clear=function(F,G){const ne=Array.isArray(G)?G:[G];return Wn([F,...ne])};function xo(F){const G=Vi()(F);return G.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:p.version}),G}const Va=0,va={},os=/^three(?=[A-Z])/,co=F=>`${F[0].toUpperCase()}${F.slice(1)}`;let ss=0;const ua=F=>typeof F=="function";function $a(F){if(ua(F)){const G=`${ss++}`;return va[G]=F,G}else Object.assign(va,F)}function Ka(F,G){const ne=co(F),Ne=va[ne];if(F!=="primitive"&&!Ne)throw new Error(`R3F: ${ne} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(F==="primitive"&&!G.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(G.args!==void 0&&!Array.isArray(G.args))throw new Error("R3F: The args prop must be an array!")}function Co(F,G,ne){var Ne;return F=co(F)in va?F:F.replace(os,""),Ka(F,G),F==="primitive"&&(Ne=G.object)!=null&&Ne.__r3f&&delete G.object.__r3f,sr(G.object,ne,F,G)}function uo(F){if(!F.isHidden){var G;F.props.attach&&(G=F.parent)!=null&&G.object?Za(F.parent,F):Ur(F.object)&&(F.object.visible=!1),F.isHidden=!0,ba(F)}}function $o(F){if(F.isHidden){var G;F.props.attach&&(G=F.parent)!=null&&G.object?Yi(F.parent,F):Ur(F.object)&&F.props.visible!==!1&&(F.object.visible=!0),F.isHidden=!1,ba(F)}}function Zo(F,G,ne){const Ne=G.root.getState();if(!(!F.parent&&F.object!==Ne.scene)){if(!G.object){var it,Gt;const Jn=va[co(G.type)];G.object=(it=G.props.object)!=null?it:new Jn(...(Gt=G.props.args)!=null?Gt:[]),G.object.__r3f=G}if(lr(G.object,G.props),G.props.attach)Yi(F,G);else if(Ur(G.object)&&Ur(F.object)){const Jn=F.object.children.indexOf(ne==null?void 0:ne.object);if(ne&&Jn!==-1){const Zn=F.object.children.indexOf(G.object);if(Zn!==-1){F.object.children.splice(Zn,1);const Xt=Zn<Jn?Jn-1:Jn;F.object.children.splice(Xt,0,G.object)}else G.object.parent=F.object,F.object.children.splice(Jn,0,G.object),G.object.dispatchEvent({type:"added"}),F.object.dispatchEvent({type:"childadded",child:G.object})}else F.object.add(G.object)}for(const Jn of G.children)Zo(G,Jn);ba(G)}}function fo(F,G){G&&(G.parent=F,F.children.push(G),Zo(F,G))}function Ae(F,G,ne){if(!G||!ne)return;G.parent=F;const Ne=F.children.indexOf(ne);Ne!==-1?F.children.splice(Ne,0,G):F.children.push(G),Zo(F,G,ne)}function Yt(F){if(typeof F.dispose=="function"){const G=()=>{try{F.dispose()}catch(ne){}};typeof IS_REACT_ACT_ENVIRONMENT!="undefined"?G():(0,Pn.unstable_scheduleCallback)(Pn.unstable_IdlePriority,G)}}function zn(F,G,ne){if(!G)return;G.parent=null;const Ne=F.children.indexOf(G);Ne!==-1&&F.children.splice(Ne,1),G.props.attach?Za(F,G):Ur(G.object)&&Ur(F.object)&&(F.object.remove(G.object),nr(Hi(G),G.object));const it=G.props.dispose!==null&&ne!==!1;for(let Gt=G.children.length-1;Gt>=0;Gt--){const Jn=G.children[Gt];zn(G,Jn,it)}G.children.length=0,delete G.object.__r3f,it&&G.type!=="primitive"&&G.object.type!=="Scene"&&Yt(G.object),ne===void 0&&ba(G)}function Ln(F,G){for(const ne of[F,F.alternate])if(ne!==null)if(typeof ne.ref=="function"){ne.refCleanup==null||ne.refCleanup();const Ne=ne.ref(G);typeof Ne=="function"&&(ne.refCleanup=Ne)}else ne.ref&&(ne.ref.current=G)}const gr=[];function Ni(){for(const[ne]of gr){const Ne=ne.parent;if(Ne){ne.props.attach?Za(Ne,ne):Ur(ne.object)&&Ur(Ne.object)&&Ne.object.remove(ne.object);for(const it of ne.children)it.props.attach?Za(ne,it):Ur(it.object)&&Ur(ne.object)&&ne.object.remove(it.object)}ne.isHidden&&$o(ne),ne.object.__r3f&&delete ne.object.__r3f,ne.type!=="primitive"&&Yt(ne.object)}for(const[ne,Ne,it]of gr){ne.props=Ne;const Gt=ne.parent;if(Gt){var F,G;const Jn=va[co(ne.type)];ne.object=(F=ne.props.object)!=null?F:new Jn(...(G=ne.props.args)!=null?G:[]),ne.object.__r3f=ne,Ln(it,ne.object),lr(ne.object,ne.props),ne.props.attach?Yi(Gt,ne):Ur(ne.object)&&Ur(Gt.object)&&Gt.object.add(ne.object);for(const Zn of ne.children)Zn.props.attach?Yi(ne,Zn):Ur(Zn.object)&&Ur(ne.object)&&ne.object.add(Zn.object);ba(ne)}}gr.length=0}const fr=()=>{},qr={};let ho=Va;const Oa=0,Vo=4,Te=xo({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Co,removeChild:zn,appendChild:fo,appendInitialChild:fo,insertBefore:Ae,appendChildToContainer(F,G){const ne=F.getState().scene.__r3f;!G||!ne||fo(ne,G)},removeChildFromContainer(F,G){const ne=F.getState().scene.__r3f;!G||!ne||zn(ne,G)},insertInContainerBefore(F,G,ne){const Ne=F.getState().scene.__r3f;!G||!ne||!Ne||Ae(Ne,G,ne)},getRootHostContext:()=>qr,getChildHostContext:()=>qr,commitUpdate(F,G,ne,Ne,it){var Gt,Jn,Zn;Ka(G,Ne);let Xt=!1;if((F.type==="primitive"&&ne.object!==Ne.object||((Gt=Ne.args)==null?void 0:Gt.length)!==((Jn=ne.args)==null?void 0:Jn.length)||(Zn=Ne.args)!=null&&Zn.some((xn,Ut)=>{var St;return xn!==((St=ne.args)==null?void 0:St[Ut])}))&&(Xt=!0),Xt)gr.push([F,Qi({},Ne),it]);else{const xn=qi(F,Ne);Object.keys(xn).length&&(Object.assign(F.props,xn),lr(F.object,xn))}(it.sibling===null||(it.flags&Vo)===Oa)&&Ni()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:F=>F==null?void 0:F.object,prepareForCommit:()=>null,preparePortalMount:F=>sr(F.getState().scene,F,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:uo,unhideInstance:$o,createTextInstance:fr,hideTextInstance:fr,unhideTextInstance:fr,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:p.createContext(null),setCurrentUpdatePriority(F){ho=F},getCurrentUpdatePriority(){return ho},resolveUpdatePriority(){var F;if(ho!==Va)return ho;switch(typeof window!="undefined"&&((F=window.event)==null?void 0:F.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return mn.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return mn.ContinuousEventPriority;default:return mn.DefaultEventPriority}},resetFormInstance(){}}),_t=new Map,Et={objects:"shallow",strict:!1};function lt(F,G){if(!G&&typeof HTMLCanvasElement!="undefined"&&F instanceof HTMLCanvasElement&&F.parentElement){const{width:ne,height:Ne,top:it,left:Gt}=F.parentElement.getBoundingClientRect();return{width:ne,height:Ne,top:it,left:Gt}}else if(!G&&typeof OffscreenCanvas!="undefined"&&F instanceof OffscreenCanvas)return{width:F.width,height:F.height,top:0,left:0};return Qi({width:0,height:0,top:0,left:0},G)}function an(F){const G=_t.get(F),ne=G==null?void 0:G.fiber,Ne=G==null?void 0:G.store;G&&console.warn("R3F.createRoot should only be called once!");const it=typeof reportError=="function"?reportError:console.error,Gt=Ne||It($s,Lo),Jn=ne||Te.createContainer(Gt,mn.ConcurrentRoot,null,!1,null,"",it,it,it,null);G||_t.set(F,{fiber:Jn,store:Gt});let Zn,Xt,jn=!1,xn=null;return{configure(){return yf(this,arguments,function*(St={}){let li;xn=new Promise(Ra=>li=Ra);let{gl:ur,size:hr,scene:ki,events:Xn,onCreated:Gn,shadows:gi=!1,linear:Hr=!1,flat:Tr=!1,legacy:ir=!1,orthographic:Ea=!1,frameloop:Vr="always",dpr:Sr=[1,2],performance:fa,raycaster:ko,camera:qa,onPointerMissed:Ko}=St,br=Gt.getState(),Jr=br.gl;if(!br.gl){const Ra={canvas:F,powerPreference:"high-performance",antialias:!0,alpha:!0},Qn=typeof ur=="function"?yield ur(Ra):ur;X(Qn)?Jr=Qn:Jr=new j.WebGLRenderer(Qi(Qi({},Ra),ur)),br.set({gl:Jr})}let Ao=br.raycaster;Ao||br.set({raycaster:Ao=new Ue.iMs});const mo=ko||{},{params:cs}=mo,Ks=Sp(mo,["params"]);if(En.equ(Ks,Ao,Et)||lr(Ao,Qi({},Ks)),En.equ(cs,Ao.params,Et)||lr(Ao,{params:Qi(Qi({},Ao.params),cs)}),!br.camera||br.camera===Xt&&!En.equ(Xt,qa,Et)){Xt=qa;const Ra=qa==null?void 0:qa.isCamera,Qn=Ra?qa:Ea?new Ue.iKG(0,0,0,0,.1,1e3):new Ue.cPb(75,0,.1,1e3);Ra||(Qn.position.z=5,qa&&(lr(Qn,qa),Qn.manual||("aspect"in qa||"left"in qa||"right"in qa||"bottom"in qa||"top"in qa)&&(Qn.manual=!0,Qn.updateProjectionMatrix())),!br.camera&&!(qa!=null&&qa.rotation)&&Qn.lookAt(0,0,0)),br.set({camera:Qn}),Ao.camera=Qn}if(!br.scene){let Ra;ki!=null&&ki.isScene?(Ra=ki,sr(Ra,Gt,"",{})):(Ra=new Ue.xsS,sr(Ra,Gt,"",{}),ki&&lr(Ra,ki)),br.set({scene:Ra})}Xn&&!br.events.handlers&&br.set({events:Xn(Gt)});const vl=lt(F,hr);if(En.equ(vl,br.size,Et)||br.setSize(vl.width,vl.height,vl.top,vl.left),Sr&&br.viewport.dpr!==xt(Sr)&&br.setDpr(Sr),br.frameloop!==Vr&&br.setFrameloop(Vr),br.onPointerMissed||br.set({onPointerMissed:Ko}),fa&&!En.equ(fa,br.performance,Et)&&br.set(Ra=>({performance:Qi(Qi({},Ra.performance),fa)})),!br.xr){var Fl;const Ra=(Ca,Ys)=>{const zl=Gt.getState();zl.frameloop!=="never"&&Lo(Ca,!0,zl,Ys)},Qn=()=>{const Ca=Gt.getState();Ca.gl.xr.enabled=Ca.gl.xr.isPresenting,Ca.gl.xr.setAnimationLoop(Ca.gl.xr.isPresenting?Ra:null),Ca.gl.xr.isPresenting||$s(Ca)},dr={connect(){const Ca=Gt.getState().gl;Ca.xr.addEventListener("sessionstart",Qn),Ca.xr.addEventListener("sessionend",Qn)},disconnect(){const Ca=Gt.getState().gl;Ca.xr.removeEventListener("sessionstart",Qn),Ca.xr.removeEventListener("sessionend",Qn)}};typeof((Fl=Jr.xr)==null?void 0:Fl.addEventListener)=="function"&&dr.connect(),br.set({xr:dr})}if(Jr.shadowMap){const Ra=Jr.shadowMap.enabled,Qn=Jr.shadowMap.type;if(Jr.shadowMap.enabled=!!gi,En.boo(gi))Jr.shadowMap.type=Ue.ntZ;else if(En.str(gi)){var Cc;const dr={basic:Ue._MY,percentage:Ue._iA,soft:Ue.ntZ,variance:Ue.dwk};Jr.shadowMap.type=(Cc=dr[gi])!=null?Cc:Ue.ntZ}else En.obj(gi)&&Object.assign(Jr.shadowMap,gi);(Ra!==Jr.shadowMap.enabled||Qn!==Jr.shadowMap.type)&&(Jr.shadowMap.needsUpdate=!0)}return Ue.epp.enabled=!ir,jn||(Jr.outputColorSpace=Hr?Ue.GUF:Ue.KI_,Jr.toneMapping=Tr?Ue.uL9:Ue.LY2),br.legacy!==ir&&br.set(()=>({legacy:ir})),br.linear!==Hr&&br.set(()=>({linear:Hr})),br.flat!==Tr&&br.set(()=>({flat:Tr})),ur&&!En.fun(ur)&&!X(ur)&&!En.equ(ur,Jr,Et)&&lr(Jr,ur),Zn=Gn,jn=!0,li(),this})},render(St){return!jn&&!xn&&this.configure(),xn.then(()=>{Te.updateContainer((0,An.jsx)(Oi,{store:Gt,children:St,onCreated:Zn,rootElement:F}),Jn,null,()=>{})}),Gt},unmount(){Br(F)}}}function Oi({store:F,children:G,onCreated:ne,rootElement:Ne}){return pi(()=>{const it=F.getState();it.set(Gt=>({internal:cl(Qi({},Gt.internal),{active:!0})})),ne&&ne(it),F.getState().events.connected||it.events.connect==null||it.events.connect(Ne)},[]),(0,An.jsx)(xe.Provider,{value:F,children:G})}function Br(F,G){const ne=_t.get(F),Ne=ne==null?void 0:ne.fiber;if(Ne){const it=ne==null?void 0:ne.store.getState();it&&(it.internal.active=!1),Te.updateContainer(null,Ne,null,()=>{it&&setTimeout(()=>{try{var Gt,Jn,Zn,Xt;it.events.disconnect==null||it.events.disconnect(),(Gt=it.gl)==null||(Jn=Gt.renderLists)==null||Jn.dispose==null||Jn.dispose(),(Zn=it.gl)==null||Zn.forceContextLoss==null||Zn.forceContextLoss(),(Xt=it.gl)!=null&&Xt.xr&&it.xr.disconnect(),Mn(it.scene),_t.delete(F),G&&G(F)}catch(jn){}},500)})}}function Fr(F,G,ne){return jsx(_i,{children:F,container:G,state:ne})}function _i({state:F={},children:G,container:ne}){const Ut=F,{events:Ne,size:it}=Ut,Gt=Sp(Ut,["events","size"]),Jn=Tn(),[Zn]=React.useState(()=>new THREE.Raycaster),[Xt]=React.useState(()=>new THREE.Vector2),jn=ii((St,li)=>{let ur;if(li.camera&&it){const hr=li.camera;ur=St.viewport.getCurrentViewport(hr,new THREE.Vector3,it),hr!==St.camera&&la(hr,it)}return cl(Qi(Qi({},St),li),{scene:ne,raycaster:Zn,pointer:Xt,mouse:Xt,previousRoot:Jn,events:Qi(Qi(Qi({},St.events),li.events),Ne),size:Qi(Qi({},St.size),it),viewport:Qi(Qi({},St.viewport),ur),setEvents:hr=>li.set(ki=>cl(Qi({},ki),{events:Qi(Qi({},ki.events),hr)}))})}),xn=React.useMemo(()=>{const St=createWithEqualityFn((ur,hr)=>cl(Qi({},Gt),{set:ur,get:hr})),li=ur=>St.setState(hr=>jn.current(ur,hr));return li(Jn.getState()),Jn.subscribe(li),St},[Jn,ne]);return jsx(Fragment,{children:Te.createPortal(jsx(xe.Provider,{value:xn,children:G}),xn,null)})}function Ai(F){return Te.flushSyncFromReconciler(F)}function cr(F,G){const ne={callback:F};return G.add(ne),()=>void G.delete(ne)}const Aa=new Set,yr=new Set,ro=new Set,Do=F=>cr(F,Aa),To=F=>cr(F,yr),Go=F=>cr(F,ro);function zr(F,G){if(F.size)for(const{callback:ne}of F.values())ne(G)}function po(F,G){switch(F){case"before":return zr(Aa,G);case"after":return zr(yr,G);case"tail":return zr(ro,G)}}let da,Di;function Ya(F,G,ne){let Ne=G.clock.getDelta();G.frameloop==="never"&&typeof F=="number"&&(Ne=F-G.clock.elapsedTime,G.clock.oldTime=G.clock.elapsedTime,G.clock.elapsedTime=F),da=G.internal.subscribers;for(let it=0;it<da.length;it++)Di=da[it],Di.ref.current(Di.store.getState(),Ne,ne);return!G.internal.priority&&G.gl.render&&G.gl.render(G.scene,G.camera),G.internal.frames=Math.max(0,G.internal.frames-1),G.frameloop==="always"?1:G.internal.frames}let So=!1,_a=!1,Es,Bl,Cs;function ls(F){Bl=requestAnimationFrame(ls),So=!0,Es=0,po("before",F),_a=!0;for(const ne of _t.values()){var G;Cs=ne.store.getState(),Cs.internal.active&&(Cs.frameloop==="always"||Cs.internal.frames>0)&&!((G=Cs.gl.xr)!=null&&G.isPresenting)&&(Es+=Ya(F,Cs))}if(_a=!1,po("after",F),Es===0)return po("tail",F),So=!1,cancelAnimationFrame(Bl)}function $s(F,G=1){var ne;if(!F)return _t.forEach(Ne=>$s(Ne.store.getState(),G));(ne=F.gl.xr)!=null&&ne.isPresenting||!F.internal.active||F.frameloop==="never"||(G>1?F.internal.frames=Math.min(60,F.internal.frames+G):_a?F.internal.frames=2:F.internal.frames=1,So||(So=!0,requestAnimationFrame(ls)))}function Lo(F,G=!0,ne,Ne){if(G&&po("before",F),ne)Ya(F,ne,Ne);else for(const it of _t.values())Ya(F,it.store.getState());G&&po("after",F)}const Ma={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wo(F){const{handlePointer:G}=io(F);return{priority:1,enabled:!0,compute(ne,Ne,it){Ne.pointer.set(ne.offsetX/Ne.size.width*2-1,-(ne.offsetY/Ne.size.height)*2+1),Ne.raycaster.setFromCamera(Ne.pointer,Ne.camera)},connected:void 0,handlers:Object.keys(Ma).reduce((ne,Ne)=>cl(Qi({},ne),{[Ne]:G(Ne)}),{}),update:()=>{var ne;const{events:Ne,internal:it}=F.getState();(ne=it.lastEvent)!=null&&ne.current&&Ne.handlers&&Ne.handlers.onPointerMove(it.lastEvent.current)},connect:ne=>{const{set:Ne,events:it}=F.getState();if(it.disconnect==null||it.disconnect(),Ne(Gt=>({events:cl(Qi({},Gt.events),{connected:ne})})),it.handlers)for(const Gt in it.handlers){const Jn=it.handlers[Gt],[Zn,Xt]=Ma[Gt];ne.addEventListener(Zn,Jn,{passive:Xt})}},disconnect:()=>{const{set:ne,events:Ne}=F.getState();if(Ne.connected){if(Ne.handlers)for(const it in Ne.handlers){const Gt=Ne.handlers[it],[Jn]=Ma[it];Ne.connected.removeEventListener(Jn,Gt)}ne(it=>({events:cl(Qi({},it.events),{connected:void 0})}))}}}}},60933:function(Li,hn,k){"use strict";k.d(hn,{Xz:function(){return tn}});var p=k(96167),he=k(67294),mn=k(99477);function Ue(C,Nt){let wn;return(...Wn)=>{window.clearTimeout(wn),wn=window.setTimeout(()=>C(...Wn),Nt)}}function j({debounce:C,scroll:Nt,polyfill:wn,offsetSize:Wn}={debounce:0,scroll:!1,offsetSize:!1}){const O=wn||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!O)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[Vi,Pn]=(0,he.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),An=(0,he.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:Vi,orientationHandler:null}),Dn=C?typeof C=="number"?C:C.scroll:null,jt=C?typeof C=="number"?C:C.resize:null,Mr=(0,he.useRef)(!1);(0,he.useEffect)(()=>(Mr.current=!0,()=>void(Mr.current=!1)));const[Hi,Rr,qt]=(0,he.useMemo)(()=>{const ii=()=>{if(!An.current.element)return;const{left:Er,top:Lr,width:Ha,height:xt,bottom:Kt,right:En,x:rn,y:Mn}=An.current.element.getBoundingClientRect(),Ci={left:Er,top:Lr,width:Ha,height:xt,bottom:Kt,right:En,x:rn,y:Mn};An.current.element instanceof HTMLElement&&Wn&&(Ci.height=An.current.element.offsetHeight,Ci.width=An.current.element.offsetWidth),Object.freeze(Ci),Mr.current&&!Ei(An.current.lastBounds,Ci)&&Pn(An.current.lastBounds=Ci)};return[ii,jt?Ue(ii,jt):ii,Dn?Ue(ii,Dn):ii]},[Pn,Wn,Dn,jt]);function Kn(){An.current.scrollContainers&&(An.current.scrollContainers.forEach(ii=>ii.removeEventListener("scroll",qt,!0)),An.current.scrollContainers=null),An.current.resizeObserver&&(An.current.resizeObserver.disconnect(),An.current.resizeObserver=null),An.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",An.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",An.current.orientationHandler))}function $n(){An.current.element&&(An.current.resizeObserver=new O(qt),An.current.resizeObserver.observe(An.current.element),Nt&&An.current.scrollContainers&&An.current.scrollContainers.forEach(ii=>ii.addEventListener("scroll",qt,{capture:!0,passive:!0})),An.current.orientationHandler=()=>{qt()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",An.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",An.current.orientationHandler))}const pi=ii=>{!ii||ii===An.current.element||(Kn(),An.current.element=ii,An.current.scrollContainers=dn(ii),$n())};return D(qt,!!Nt),en(Rr),(0,he.useEffect)(()=>{Kn(),$n()},[Nt,qt,Rr]),(0,he.useEffect)(()=>Kn,[]),[pi,Vi,Hi]}function en(C){(0,he.useEffect)(()=>{const Nt=C;return window.addEventListener("resize",Nt),()=>void window.removeEventListener("resize",Nt)},[C])}function D(C,Nt){(0,he.useEffect)(()=>{if(Nt){const wn=C;return window.addEventListener("scroll",wn,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",wn,!0)}},[C,Nt])}function dn(C){const Nt=[];if(!C||C===document.body)return Nt;const{overflow:wn,overflowX:Wn,overflowY:O}=window.getComputedStyle(C);return[wn,Wn,O].some(Vi=>Vi==="auto"||Vi==="scroll")&&Nt.push(C),[...Nt,...dn(C.parentElement)]}const Kr=["x","y","top","bottom","left","right","width","height"],Ei=(C,Nt)=>Kr.every(wn=>C[wn]===Nt[wn]);var Mt=k(83213),hi=k(85893),di=k(32576),Xi=k(76525),st=k(63840);function ln(En){var rn=En,{ref:C,children:Nt,fallback:wn,resize:Wn,style:O,gl:Vi,events:Pn=p.f,eventSource:An,eventPrefix:Dn,shadows:jt,linear:Mr,flat:Hi,legacy:Rr,orthographic:qt,frameloop:Kn,dpr:$n,performance:pi,raycaster:ii,camera:Er,scene:Lr,onPointerMissed:Ha,onCreated:xt}=rn,Kt=Sp(rn,["ref","children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"]);he.useMemo(()=>(0,p.e)(mn),[]);const Mn=(0,p.u)(),[Ci,Rn]=j(Qi({scroll:!0,debounce:{scroll:50,resize:0}},Wn)),sr=he.useRef(null),Yr=he.useRef(null);he.useImperativeHandle(C,()=>sr.current);const Ir=(0,p.a)(Ha),[Yi,Za]=he.useState(!1),[ma,xr]=he.useState(!1);if(Yi)throw Yi;if(ma)throw ma;const ta=he.useRef(null);(0,p.b)(()=>{const Pr=sr.current;if(Rn.width>0&&Rn.height>0&&Pr){ta.current||(ta.current=(0,p.c)(Pr));function Cr(){return yf(this,null,function*(){yield ta.current.configure({gl:Vi,scene:Lr,events:Pn,shadows:jt,linear:Mr,flat:Hi,legacy:Rr,orthographic:qt,frameloop:Kn,dpr:$n,performance:pi,raycaster:ii,camera:Er,size:Rn,onPointerMissed:(...lr)=>Ir.current==null?void 0:Ir.current(...lr),onCreated:lr=>{lr.events.connect==null||lr.events.connect(An?(0,p.i)(An)?An.current:An:Yr.current),Dn&&lr.setEvents({compute:(ba,la)=>{const Ur=ba[Dn+"X"],lo=ba[Dn+"Y"];la.pointer.set(Ur/la.size.width*2-1,-(lo/la.size.height)*2+1),la.raycaster.setFromCamera(la.pointer,la.camera)}}),xt==null||xt(lr)}}),ta.current.render((0,hi.jsx)(Mn,{children:(0,hi.jsx)(p.E,{set:xr,children:(0,hi.jsx)(he.Suspense,{fallback:(0,hi.jsx)(p.B,{set:Za}),children:Nt!=null?Nt:null})})}))})}Cr()}}),he.useEffect(()=>{const Pr=sr.current;if(Pr)return()=>(0,p.d)(Pr)},[]);const qi=An?"none":"auto";return(0,hi.jsx)("div",cl(Qi({ref:Yr,style:Qi({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:qi},O)},Kt),{children:(0,hi.jsx)("div",{ref:Ci,style:{width:"100%",height:"100%"},children:(0,hi.jsx)("canvas",{ref:sr,style:{display:"block"},children:wn})})}))}function tn(C){return(0,hi.jsx)(Mt.Hn,{children:(0,hi.jsx)(ln,Qi({},C))})}},91742:function(Li,hn,k){"use strict";k.d(hn,{Z:function(){return ln}});var p=k(97582),he=k(27484),mn=k.n(he),Ue=k(67294);function j(tn){var C=(0,Ue.useRef)(tn);return C.current=tn,C}var en=j,D=function(tn){return tn!==null&&typeof tn=="object"},dn=function(tn){return typeof tn=="function"},Kr=function(tn){return typeof tn=="string"},Ei=function(tn){return typeof tn=="boolean"},Mt=function(tn){return typeof tn=="number"},hi=function(tn){return typeof tn=="undefined"},di=function(tn){if(!tn)return 0;var C=mn()(tn).valueOf()-Date.now();return C<0?0:C},Xi=function(tn){return{days:Math.floor(tn/864e5),hours:Math.floor(tn/36e5)%24,minutes:Math.floor(tn/6e4)%60,seconds:Math.floor(tn/1e3)%60,milliseconds:Math.floor(tn)%1e3}},st=function(tn){tn===void 0&&(tn={});var C=tn||{},Nt=C.leftTime,wn=C.targetDate,Wn=C.interval,O=Wn===void 0?1e3:Wn,Vi=C.onEnd,Pn=(0,Ue.useMemo)(function(){return Mt(Nt)&&Nt>0?Date.now()+Nt:void 0},[Nt]),An="leftTime"in tn?Pn:wn,Dn=(0,p.CR)((0,Ue.useState)(function(){return di(An)}),2),jt=Dn[0],Mr=Dn[1],Hi=en(Vi);(0,Ue.useEffect)(function(){if(!An){Mr(0);return}Mr(di(An));var qt=setInterval(function(){var Kn,$n=di(An);Mr($n),$n===0&&(clearInterval(qt),(Kn=Hi.current)===null||Kn===void 0||Kn.call(Hi))},O);return function(){return clearInterval(qt)}},[An,O]);var Rr=(0,Ue.useMemo)(function(){return Xi(jt)},[jt]);return[jt,Rr]},ln=st},26412:function(Li,hn,k){"use strict";k.d(hn,{Z:function(){return Ha}});var p=k(67294),he=k(93967),mn=k.n(he),Ue=k(74443),j=k(53124),en=k(98675),D=k(25378),Kr={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},Mt=p.createContext({}),hi=k(50344),di=function(xt,Kt){var En={};for(var rn in xt)Object.prototype.hasOwnProperty.call(xt,rn)&&Kt.indexOf(rn)<0&&(En[rn]=xt[rn]);if(xt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Mn=0,rn=Object.getOwnPropertySymbols(xt);Mn<rn.length;Mn++)Kt.indexOf(rn[Mn])<0&&Object.prototype.propertyIsEnumerable.call(xt,rn[Mn])&&(En[rn[Mn]]=xt[rn[Mn]]);return En};const Xi=xt=>(0,hi.Z)(xt).map(Kt=>Object.assign(Object.assign({},Kt==null?void 0:Kt.props),{key:Kt.key}));function st(xt,Kt,En){const rn=p.useMemo(()=>Kt||Xi(En),[Kt,En]);return p.useMemo(()=>rn.map(Ci=>{var{span:Rn}=Ci,sr=di(Ci,["span"]);return Rn==="filled"?Object.assign(Object.assign({},sr),{filled:!0}):Object.assign(Object.assign({},sr),{span:typeof Rn=="number"?Rn:(0,Ue.m9)(xt,Rn)})}),[rn,xt])}var ln=function(xt,Kt){var En={};for(var rn in xt)Object.prototype.hasOwnProperty.call(xt,rn)&&Kt.indexOf(rn)<0&&(En[rn]=xt[rn]);if(xt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Mn=0,rn=Object.getOwnPropertySymbols(xt);Mn<rn.length;Mn++)Kt.indexOf(rn[Mn])<0&&Object.prototype.propertyIsEnumerable.call(xt,rn[Mn])&&(En[rn[Mn]]=xt[rn[Mn]]);return En};function tn(xt,Kt){let En=[],rn=[],Mn=!1,Ci=0;return xt.filter(Rn=>Rn).forEach(Rn=>{const{filled:sr}=Rn,Yr=ln(Rn,["filled"]);if(sr){rn.push(Yr),En.push(rn),rn=[],Ci=0;return}const Ir=Kt-Ci;Ci+=Rn.span||1,Ci>=Kt?(Ci>Kt?(Mn=!0,rn.push(Object.assign(Object.assign({},Yr),{span:Ir}))):rn.push(Yr),En.push(rn),rn=[],Ci=0):rn.push(Yr)}),rn.length>0&&En.push(rn),En=En.map(Rn=>{const sr=Rn.reduce((Yr,Ir)=>Yr+(Ir.span||1),0);if(sr<Kt){const Yr=Rn[Rn.length-1];return Yr.span=Kt-(sr-(Yr.span||1)),Rn}return Rn}),[En,Mn]}var Nt=(xt,Kt)=>{const[En,rn]=(0,p.useMemo)(()=>tn(Kt,xt),[Kt,xt]);return En},Wn=({children:xt})=>xt;function O(xt){return xt!=null}var Pn=xt=>{const{itemPrefixCls:Kt,component:En,span:rn,className:Mn,style:Ci,labelStyle:Rn,contentStyle:sr,bordered:Yr,label:Ir,content:Yi,colon:Za,type:ma,styles:xr}=xt,ta=En,qi=p.useContext(Mt),{classNames:Pr}=qi;return Yr?p.createElement(ta,{className:mn()({[`${Kt}-item-label`]:ma==="label",[`${Kt}-item-content`]:ma==="content",[`${Pr==null?void 0:Pr.label}`]:ma==="label",[`${Pr==null?void 0:Pr.content}`]:ma==="content"},Mn),style:Ci,colSpan:rn},O(Ir)&&p.createElement("span",{style:Object.assign(Object.assign({},Rn),xr==null?void 0:xr.label)},Ir),O(Yi)&&p.createElement("span",{style:Object.assign(Object.assign({},Rn),xr==null?void 0:xr.content)},Yi)):p.createElement(ta,{className:mn()(`${Kt}-item`,Mn),style:Ci,colSpan:rn},p.createElement("div",{className:`${Kt}-item-container`},(Ir||Ir===0)&&p.createElement("span",{className:mn()(`${Kt}-item-label`,Pr==null?void 0:Pr.label,{[`${Kt}-item-no-colon`]:!Za}),style:Object.assign(Object.assign({},Rn),xr==null?void 0:xr.label)},Ir),(Yi||Yi===0)&&p.createElement("span",{className:mn()(`${Kt}-item-content`,Pr==null?void 0:Pr.content),style:Object.assign(Object.assign({},sr),xr==null?void 0:xr.content)},Yi)))};function An(xt,{colon:Kt,prefixCls:En,bordered:rn},{component:Mn,type:Ci,showLabel:Rn,showContent:sr,labelStyle:Yr,contentStyle:Ir,styles:Yi}){return xt.map(({label:Za,children:ma,prefixCls:xr=En,className:ta,style:qi,labelStyle:Pr,contentStyle:Cr,span:lr=1,key:ba,styles:la},Ur)=>typeof Mn=="string"?p.createElement(Pn,{key:`${Ci}-${ba||Ur}`,className:ta,style:qi,styles:{label:Object.assign(Object.assign(Object.assign(Object.assign({},Yr),Yi==null?void 0:Yi.label),Pr),la==null?void 0:la.label),content:Object.assign(Object.assign(Object.assign(Object.assign({},Ir),Yi==null?void 0:Yi.content),Cr),la==null?void 0:la.content)},span:lr,colon:Kt,component:Mn,itemPrefixCls:xr,bordered:rn,label:Rn?Za:null,content:sr?ma:null,type:Ci}):[p.createElement(Pn,{key:`label-${ba||Ur}`,className:ta,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yr),Yi==null?void 0:Yi.label),qi),Pr),la==null?void 0:la.label),span:1,colon:Kt,component:Mn[0],itemPrefixCls:xr,bordered:rn,label:Za,type:"label"}),p.createElement(Pn,{key:`content-${ba||Ur}`,className:ta,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ir),Yi==null?void 0:Yi.content),qi),Cr),la==null?void 0:la.content),span:lr*2-1,component:Mn[1],itemPrefixCls:xr,bordered:rn,content:ma,type:"content"})])}var jt=xt=>{const Kt=p.useContext(Mt),{prefixCls:En,vertical:rn,row:Mn,index:Ci,bordered:Rn}=xt;return rn?p.createElement(p.Fragment,null,p.createElement("tr",{key:`label-${Ci}`,className:`${En}-row`},An(Mn,xt,Object.assign({component:"th",type:"label",showLabel:!0},Kt))),p.createElement("tr",{key:`content-${Ci}`,className:`${En}-row`},An(Mn,xt,Object.assign({component:"td",type:"content",showContent:!0},Kt)))):p.createElement("tr",{key:Ci,className:`${En}-row`},An(Mn,xt,Object.assign({component:Rn?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},Kt)))},Mr=k(11568),Hi=k(14747),Rr=k(83559),qt=k(83262);const Kn=xt=>{const{componentCls:Kt,labelBg:En}=xt;return{[`&${Kt}-bordered`]:{[`> ${Kt}-view`]:{border:`${(0,Mr.bf)(xt.lineWidth)} ${xt.lineType} ${xt.colorSplit}`,"> table":{tableLayout:"auto"},[`${Kt}-row`]:{borderBottom:`${(0,Mr.bf)(xt.lineWidth)} ${xt.lineType} ${xt.colorSplit}`,"&:first-child":{"> th:first-child, > td:first-child":{borderStartStartRadius:xt.borderRadiusLG}},"&:last-child":{borderBottom:"none","> th:first-child, > td:first-child":{borderEndStartRadius:xt.borderRadiusLG}},[`> ${Kt}-item-label, > ${Kt}-item-content`]:{padding:`${(0,Mr.bf)(xt.padding)} ${(0,Mr.bf)(xt.paddingLG)}`,borderInlineEnd:`${(0,Mr.bf)(xt.lineWidth)} ${xt.lineType} ${xt.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${Kt}-item-label`]:{color:xt.colorTextSecondary,backgroundColor:En,"&::after":{display:"none"}}}},[`&${Kt}-middle`]:{[`${Kt}-row`]:{[`> ${Kt}-item-label, > ${Kt}-item-content`]:{padding:`${(0,Mr.bf)(xt.paddingSM)} ${(0,Mr.bf)(xt.paddingLG)}`}}},[`&${Kt}-small`]:{[`${Kt}-row`]:{[`> ${Kt}-item-label, > ${Kt}-item-content`]:{padding:`${(0,Mr.bf)(xt.paddingXS)} ${(0,Mr.bf)(xt.padding)}`}}}}}},$n=xt=>{const{componentCls:Kt,extraColor:En,itemPaddingBottom:rn,itemPaddingEnd:Mn,colonMarginRight:Ci,colonMarginLeft:Rn,titleMarginBottom:sr}=xt;return{[Kt]:Object.assign(Object.assign(Object.assign({},(0,Hi.Wf)(xt)),Kn(xt)),{"&-rtl":{direction:"rtl"},[`${Kt}-header`]:{display:"flex",alignItems:"center",marginBottom:sr},[`${Kt}-title`]:Object.assign(Object.assign({},Hi.vS),{flex:"auto",color:xt.titleColor,fontWeight:xt.fontWeightStrong,fontSize:xt.fontSizeLG,lineHeight:xt.lineHeightLG}),[`${Kt}-extra`]:{marginInlineStart:"auto",color:En,fontSize:xt.fontSize},[`${Kt}-view`]:{width:"100%",borderRadius:xt.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${Kt}-row`]:{"> th, > td":{paddingBottom:rn,paddingInlineEnd:Mn},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${Kt}-item-label`]:{color:xt.labelColor,fontWeight:"normal",fontSize:xt.fontSize,lineHeight:xt.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${(0,Mr.bf)(Rn)} ${(0,Mr.bf)(Ci)}`},[`&${Kt}-item-no-colon::after`]:{content:'""'}},[`${Kt}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${Kt}-item-content`]:{display:"table-cell",flex:1,color:xt.contentColor,fontSize:xt.fontSize,lineHeight:xt.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${Kt}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${Kt}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${Kt}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${Kt}-row`]:{"> th, > td":{paddingBottom:xt.paddingSM}}},"&-small":{[`${Kt}-row`]:{"> th, > td":{paddingBottom:xt.paddingXS}}}})}},pi=xt=>({labelBg:xt.colorFillAlter,labelColor:xt.colorTextTertiary,titleColor:xt.colorText,titleMarginBottom:xt.fontSizeSM*xt.lineHeightSM,itemPaddingBottom:xt.padding,itemPaddingEnd:xt.padding,colonMarginRight:xt.marginXS,colonMarginLeft:xt.marginXXS/2,contentColor:xt.colorText,extraColor:xt.colorText});var ii=(0,Rr.I$)("Descriptions",xt=>{const Kt=(0,qt.IX)(xt,{});return $n(Kt)},pi),Er=function(xt,Kt){var En={};for(var rn in xt)Object.prototype.hasOwnProperty.call(xt,rn)&&Kt.indexOf(rn)<0&&(En[rn]=xt[rn]);if(xt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Mn=0,rn=Object.getOwnPropertySymbols(xt);Mn<rn.length;Mn++)Kt.indexOf(rn[Mn])<0&&Object.prototype.propertyIsEnumerable.call(xt,rn[Mn])&&(En[rn[Mn]]=xt[rn[Mn]]);return En};const Lr=xt=>{const{prefixCls:Kt,title:En,extra:rn,column:Mn,colon:Ci=!0,bordered:Rn,layout:sr,children:Yr,className:Ir,rootClassName:Yi,style:Za,size:ma,labelStyle:xr,contentStyle:ta,styles:qi,items:Pr,classNames:Cr}=xt,lr=Er(xt,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","styles","items","classNames"]),{getPrefixCls:ba,direction:la,className:Ur,style:lo,classNames:yo,styles:nr}=(0,j.dj)("descriptions"),io=ba("descriptions",Kt),X=(0,D.Z)(),xe=p.useMemo(()=>{var vr;return typeof Mn=="number"?Mn:(vr=(0,Ue.m9)(X,Object.assign(Object.assign({},Kr),Mn)))!==null&&vr!==void 0?vr:3},[X,Mn]),It=st(X,Pr,Yr),Ht=(0,en.Z)(ma),Tn=Nt(xe,It),[Yn,vi,ca]=ii(io),Gi=p.useMemo(()=>({labelStyle:xr,contentStyle:ta,styles:{content:Object.assign(Object.assign({},nr.content),qi==null?void 0:qi.content),label:Object.assign(Object.assign({},nr.label),qi==null?void 0:qi.label)},classNames:{label:mn()(yo.label,Cr==null?void 0:Cr.label),content:mn()(yo.content,Cr==null?void 0:Cr.content)}}),[xr,ta,qi,Cr,yo,nr]);return Yn(p.createElement(Mt.Provider,{value:Gi},p.createElement("div",Object.assign({className:mn()(io,Ur,yo.root,Cr==null?void 0:Cr.root,{[`${io}-${Ht}`]:Ht&&Ht!=="default",[`${io}-bordered`]:!!Rn,[`${io}-rtl`]:la==="rtl"},Ir,Yi,vi,ca),style:Object.assign(Object.assign(Object.assign(Object.assign({},lo),nr.root),qi==null?void 0:qi.root),Za)},lr),(En||rn)&&p.createElement("div",{className:mn()(`${io}-header`,yo.header,Cr==null?void 0:Cr.header),style:Object.assign(Object.assign({},nr.header),qi==null?void 0:qi.header)},En&&p.createElement("div",{className:mn()(`${io}-title`,yo.title,Cr==null?void 0:Cr.title),style:Object.assign(Object.assign({},nr.title),qi==null?void 0:qi.title)},En),rn&&p.createElement("div",{className:mn()(`${io}-extra`,yo.extra,Cr==null?void 0:Cr.extra),style:Object.assign(Object.assign({},nr.extra),qi==null?void 0:qi.extra)},rn)),p.createElement("div",{className:`${io}-view`},p.createElement("table",null,p.createElement("tbody",null,Tn.map((vr,na)=>p.createElement(jt,{key:na,index:na,colon:Ci,prefixCls:io,vertical:sr==="vertical",bordered:Rn,row:vr}))))))))};Lr.Item=Wn;var Ha=Lr},42119:function(Li,hn,k){"use strict";k.d(hn,{Z:function(){return io}});var p=k(67294),he=k(63606),mn=k(97937),Ue=k(93967),j=k.n(Ue),en=k(87462),D=k(1413),dn=k(4942),Kr=k(91),Ei=k(15105),Mt=["className","prefixCls","style","active","status","iconPrefix","icon","wrapperStyle","stepNumber","disabled","description","title","subTitle","progressDot","stepIcon","tailContent","icons","stepIndex","onStepClick","onClick","render"];function hi(X){return typeof X=="string"}function di(X){var xe,It=X.className,Ht=X.prefixCls,Tn=X.style,Yn=X.active,vi=X.status,ca=X.iconPrefix,Gi=X.icon,vr=X.wrapperStyle,na=X.stepNumber,Nr=X.disabled,xo=X.description,Va=X.title,va=X.subTitle,os=X.progressDot,co=X.stepIcon,ss=X.tailContent,ua=X.icons,$a=X.stepIndex,Ka=X.onStepClick,Co=X.onClick,uo=X.render,$o=(0,Kr.Z)(X,Mt),Zo=!!Ka&&!Nr,fo={};Zo&&(fo.role="button",fo.tabIndex=0,fo.onClick=function(Ni){Co==null||Co(Ni),Ka($a)},fo.onKeyDown=function(Ni){var fr=Ni.which;(fr===Ei.Z.ENTER||fr===Ei.Z.SPACE)&&Ka($a)});var Ae=function(){var fr,qr,ho=j()("".concat(Ht,"-icon"),"".concat(ca,"icon"),(fr={},(0,dn.Z)(fr,"".concat(ca,"icon-").concat(Gi),Gi&&hi(Gi)),(0,dn.Z)(fr,"".concat(ca,"icon-check"),!Gi&&vi==="finish"&&(ua&&!ua.finish||!ua)),(0,dn.Z)(fr,"".concat(ca,"icon-cross"),!Gi&&vi==="error"&&(ua&&!ua.error||!ua)),fr)),Oa=p.createElement("span",{className:"".concat(Ht,"-icon-dot")});return os?typeof os=="function"?qr=p.createElement("span",{className:"".concat(Ht,"-icon")},os(Oa,{index:na-1,status:vi,title:Va,description:xo})):qr=p.createElement("span",{className:"".concat(Ht,"-icon")},Oa):Gi&&!hi(Gi)?qr=p.createElement("span",{className:"".concat(Ht,"-icon")},Gi):ua&&ua.finish&&vi==="finish"?qr=p.createElement("span",{className:"".concat(Ht,"-icon")},ua.finish):ua&&ua.error&&vi==="error"?qr=p.createElement("span",{className:"".concat(Ht,"-icon")},ua.error):Gi||vi==="finish"||vi==="error"?qr=p.createElement("span",{className:ho}):qr=p.createElement("span",{className:"".concat(Ht,"-icon")},na),co&&(qr=co({index:na-1,status:vi,title:Va,description:xo,node:qr})),qr},Yt=vi||"wait",zn=j()("".concat(Ht,"-item"),"".concat(Ht,"-item-").concat(Yt),It,(xe={},(0,dn.Z)(xe,"".concat(Ht,"-item-custom"),Gi),(0,dn.Z)(xe,"".concat(Ht,"-item-active"),Yn),(0,dn.Z)(xe,"".concat(Ht,"-item-disabled"),Nr===!0),xe)),Ln=(0,D.Z)({},Tn),gr=p.createElement("div",(0,en.Z)({},$o,{className:zn,style:Ln}),p.createElement("div",(0,en.Z)({onClick:Co},fo,{className:"".concat(Ht,"-item-container")}),p.createElement("div",{className:"".concat(Ht,"-item-tail")},ss),p.createElement("div",{className:"".concat(Ht,"-item-icon")},Ae()),p.createElement("div",{className:"".concat(Ht,"-item-content")},p.createElement("div",{className:"".concat(Ht,"-item-title")},Va,va&&p.createElement("div",{title:typeof va=="string"?va:void 0,className:"".concat(Ht,"-item-subtitle")},va)),xo&&p.createElement("div",{className:"".concat(Ht,"-item-description")},xo))));return uo&&(gr=uo(gr)||null),gr}var Xi=di,st=["prefixCls","style","className","children","direction","type","labelPlacement","iconPrefix","status","size","current","progressDot","stepIcon","initial","icons","onChange","itemRender","items"];function ln(X){var xe,It=X.prefixCls,Ht=It===void 0?"rc-steps":It,Tn=X.style,Yn=Tn===void 0?{}:Tn,vi=X.className,ca=X.children,Gi=X.direction,vr=Gi===void 0?"horizontal":Gi,na=X.type,Nr=na===void 0?"default":na,xo=X.labelPlacement,Va=xo===void 0?"horizontal":xo,va=X.iconPrefix,os=va===void 0?"rc":va,co=X.status,ss=co===void 0?"process":co,ua=X.size,$a=X.current,Ka=$a===void 0?0:$a,Co=X.progressDot,uo=Co===void 0?!1:Co,$o=X.stepIcon,Zo=X.initial,fo=Zo===void 0?0:Zo,Ae=X.icons,Yt=X.onChange,zn=X.itemRender,Ln=X.items,gr=Ln===void 0?[]:Ln,Ni=(0,Kr.Z)(X,st),fr=Nr==="navigation",qr=Nr==="inline",ho=qr||uo,Oa=qr?"horizontal":vr,Vo=qr?void 0:ua,Te=ho?"vertical":Va,_t=j()(Ht,"".concat(Ht,"-").concat(Oa),vi,(xe={},(0,dn.Z)(xe,"".concat(Ht,"-").concat(Vo),Vo),(0,dn.Z)(xe,"".concat(Ht,"-label-").concat(Te),Oa==="horizontal"),(0,dn.Z)(xe,"".concat(Ht,"-dot"),!!ho),(0,dn.Z)(xe,"".concat(Ht,"-navigation"),fr),(0,dn.Z)(xe,"".concat(Ht,"-inline"),qr),xe)),Et=function(Oi){Yt&&Ka!==Oi&&Yt(Oi)},lt=function(Oi,Br){var Fr=(0,D.Z)({},Oi),_i=fo+Br;return ss==="error"&&Br===Ka-1&&(Fr.className="".concat(Ht,"-next-error")),Fr.status||(_i===Ka?Fr.status=ss:_i<Ka?Fr.status="finish":Fr.status="wait"),qr&&(Fr.icon=void 0,Fr.subTitle=void 0),!Fr.render&&zn&&(Fr.render=function(Ai){return zn(Fr,Ai)}),p.createElement(Xi,(0,en.Z)({},Fr,{active:_i===Ka,stepNumber:_i+1,stepIndex:_i,key:_i,prefixCls:Ht,iconPrefix:os,wrapperStyle:Yn,progressDot:ho,stepIcon:$o,icons:Ae,onStepClick:Yt&&Et}))};return p.createElement("div",(0,en.Z)({className:_t,style:Yn},Ni),gr.filter(function(an){return an}).map(lt))}ln.Step=Xi;var tn=ln,C=tn,Nt=k(53124),wn=k(98675),Wn=k(25378),O=k(38703),Vi=k(83062),Pn=k(11568),An=k(14747),Dn=k(83559),jt=k(83262),Hi=X=>{const{componentCls:xe,customIconTop:It,customIconSize:Ht,customIconFontSize:Tn}=X;return{[`${xe}-item-custom`]:{[`> ${xe}-item-container > ${xe}-item-icon`]:{height:"auto",background:"none",border:0,[`> ${xe}-icon`]:{top:It,width:Ht,height:Ht,fontSize:Tn,lineHeight:(0,Pn.bf)(Ht)}}},[`&:not(${xe}-vertical)`]:{[`${xe}-item-custom`]:{[`${xe}-item-icon`]:{width:"auto",background:"none"}}}}},qt=X=>{const{componentCls:xe}=X,It=`${xe}-item`;return{[`${xe}-horizontal`]:{[`${It}-tail`]:{transform:"translateY(-50%)"}}}},$n=X=>{const{componentCls:xe,inlineDotSize:It,inlineTitleColor:Ht,inlineTailColor:Tn}=X,Yn=X.calc(X.paddingXS).add(X.lineWidth).equal(),vi={[`${xe}-item-container ${xe}-item-content ${xe}-item-title`]:{color:Ht}};return{[`&${xe}-inline`]:{width:"auto",display:"inline-flex",[`${xe}-item`]:{flex:"none","&-container":{padding:`${(0,Pn.bf)(Yn)} ${(0,Pn.bf)(X.paddingXXS)} 0`,margin:`0 ${(0,Pn.bf)(X.calc(X.marginXXS).div(2).equal())}`,borderRadius:X.borderRadiusSM,cursor:"pointer",transition:`background-color ${X.motionDurationMid}`,"&:hover":{background:X.controlItemBgHover},"&[role='button']:hover":{opacity:1}},"&-icon":{width:It,height:It,marginInlineStart:`calc(50% - ${(0,Pn.bf)(X.calc(It).div(2).equal())})`,[`> ${xe}-icon`]:{top:0},[`${xe}-icon-dot`]:{borderRadius:X.calc(X.fontSizeSM).div(4).equal(),"&::after":{display:"none"}}},"&-content":{width:"auto",marginTop:X.calc(X.marginXS).sub(X.lineWidth).equal()},"&-title":{color:Ht,fontSize:X.fontSizeSM,lineHeight:X.lineHeightSM,fontWeight:"normal",marginBottom:X.calc(X.marginXXS).div(2).equal()},"&-description":{display:"none"},"&-tail":{marginInlineStart:0,top:X.calc(It).div(2).add(Yn).equal(),transform:"translateY(-50%)","&:after":{width:"100%",height:X.lineWidth,borderRadius:0,marginInlineStart:0,background:Tn}},[`&:first-child ${xe}-item-tail`]:{width:"50%",marginInlineStart:"50%"},[`&:last-child ${xe}-item-tail`]:{display:"block",width:"50%"},"&-wait":Object.assign({[`${xe}-item-icon ${xe}-icon ${xe}-icon-dot`]:{backgroundColor:X.colorBorderBg,border:`${(0,Pn.bf)(X.lineWidth)} ${X.lineType} ${Tn}`}},vi),"&-finish":Object.assign({[`${xe}-item-tail::after`]:{backgroundColor:Tn},[`${xe}-item-icon ${xe}-icon ${xe}-icon-dot`]:{backgroundColor:Tn,border:`${(0,Pn.bf)(X.lineWidth)} ${X.lineType} ${Tn}`}},vi),"&-error":vi,"&-active, &-process":Object.assign({[`${xe}-item-icon`]:{width:It,height:It,marginInlineStart:`calc(50% - ${(0,Pn.bf)(X.calc(It).div(2).equal())})`,top:0}},vi),[`&:not(${xe}-item-active) > ${xe}-item-container[role='button']:hover`]:{[`${xe}-item-title`]:{color:Ht}}}}}},ii=X=>{const{componentCls:xe,iconSize:It,lineHeight:Ht,iconSizeSM:Tn}=X;return{[`&${xe}-label-vertical`]:{[`${xe}-item`]:{overflow:"visible","&-tail":{marginInlineStart:X.calc(It).div(2).add(X.controlHeightLG).equal(),padding:`0 ${(0,Pn.bf)(X.paddingLG)}`},"&-content":{display:"block",width:X.calc(It).div(2).add(X.controlHeightLG).mul(2).equal(),marginTop:X.marginSM,textAlign:"center"},"&-icon":{display:"inline-block",marginInlineStart:X.controlHeightLG},"&-title":{paddingInlineEnd:0,paddingInlineStart:0,"&::after":{display:"none"}},"&-subtitle":{display:"block",marginBottom:X.marginXXS,marginInlineStart:0,lineHeight:Ht}},[`&${xe}-small:not(${xe}-dot)`]:{[`${xe}-item`]:{"&-icon":{marginInlineStart:X.calc(It).sub(Tn).div(2).add(X.controlHeightLG).equal()}}}}}},Lr=X=>{const{componentCls:xe,navContentMaxWidth:It,navArrowColor:Ht,stepsNavActiveColor:Tn,motionDurationSlow:Yn}=X;return{[`&${xe}-navigation`]:{paddingTop:X.paddingSM,[`&${xe}-small`]:{[`${xe}-item`]:{"&-container":{marginInlineStart:X.calc(X.marginSM).mul(-1).equal()}}},[`${xe}-item`]:{overflow:"visible",textAlign:"center","&-container":{display:"inline-block",height:"100%",marginInlineStart:X.calc(X.margin).mul(-1).equal(),paddingBottom:X.paddingSM,textAlign:"start",transition:`opacity ${Yn}`,[`${xe}-item-content`]:{maxWidth:It},[`${xe}-item-title`]:Object.assign(Object.assign({maxWidth:"100%",paddingInlineEnd:0},An.vS),{"&::after":{display:"none"}})},[`&:not(${xe}-item-active)`]:{[`${xe}-item-container[role='button']`]:{cursor:"pointer","&:hover":{opacity:.85}}},"&:last-child":{flex:1,"&::after":{display:"none"}},"&::after":{position:"absolute",top:`calc(50% - ${(0,Pn.bf)(X.calc(X.paddingSM).div(2).equal())})`,insetInlineStart:"100%",display:"inline-block",width:X.fontSizeIcon,height:X.fontSizeIcon,borderTop:`${(0,Pn.bf)(X.lineWidth)} ${X.lineType} ${Ht}`,borderBottom:"none",borderInlineStart:"none",borderInlineEnd:`${(0,Pn.bf)(X.lineWidth)} ${X.lineType} ${Ht}`,transform:"translateY(-50%) translateX(-50%) rotate(45deg)",content:'""'},"&::before":{position:"absolute",bottom:0,insetInlineStart:"50%",display:"inline-block",width:0,height:X.lineWidthBold,backgroundColor:Tn,transition:`width ${Yn}, inset-inline-start ${Yn}`,transitionTimingFunction:"ease-out",content:'""'}},[`${xe}-item${xe}-item-active::before`]:{insetInlineStart:0,width:"100%"}},[`&${xe}-navigation${xe}-vertical`]:{[`> ${xe}-item`]:{marginInlineEnd:0,"&::before":{display:"none"},[`&${xe}-item-active::before`]:{top:0,insetInlineEnd:0,insetInlineStart:"unset",display:"block",width:X.calc(X.lineWidth).mul(3).equal(),height:`calc(100% - ${(0,Pn.bf)(X.marginLG)})`},"&::after":{position:"relative",insetInlineStart:"50%",display:"block",width:X.calc(X.controlHeight).mul(.25).equal(),height:X.calc(X.controlHeight).mul(.25).equal(),marginBottom:X.marginXS,textAlign:"center",transform:"translateY(-50%) translateX(-50%) rotate(135deg)"},"&:last-child":{"&::after":{display:"none"}},[`> ${xe}-item-container > ${xe}-item-tail`]:{visibility:"hidden"}}},[`&${xe}-navigation${xe}-horizontal`]:{[`> ${xe}-item > ${xe}-item-container > ${xe}-item-tail`]:{visibility:"hidden"}}}},xt=X=>{const{antCls:xe,componentCls:It,iconSize:Ht,iconSizeSM:Tn,processIconColor:Yn,marginXXS:vi,lineWidthBold:ca,lineWidth:Gi,paddingXXS:vr}=X,na=X.calc(Ht).add(X.calc(ca).mul(4).equal()).equal(),Nr=X.calc(Tn).add(X.calc(X.lineWidth).mul(4).equal()).equal();return{[`&${It}-with-progress`]:{[`${It}-item`]:{paddingTop:vr,[`&-process ${It}-item-container ${It}-item-icon ${It}-icon`]:{color:Yn}},[`&${It}-vertical > ${It}-item `]:{paddingInlineStart:vr,[`> ${It}-item-container > ${It}-item-tail`]:{top:vi,insetInlineStart:X.calc(Ht).div(2).sub(Gi).add(vr).equal()}},[`&, &${It}-small`]:{[`&${It}-horizontal ${It}-item:first-child`]:{paddingBottom:vr,paddingInlineStart:vr}},[`&${It}-small${It}-vertical > ${It}-item > ${It}-item-container > ${It}-item-tail`]:{insetInlineStart:X.calc(Tn).div(2).sub(Gi).add(vr).equal()},[`&${It}-label-vertical ${It}-item ${It}-item-tail`]:{top:X.calc(Ht).div(2).add(vr).equal()},[`${It}-item-icon`]:{position:"relative",[`${xe}-progress`]:{position:"absolute",insetInlineStart:"50%",top:"50%",transform:"translate(-50%, -50%)","&-inner":{width:`${(0,Pn.bf)(na)} !important`,height:`${(0,Pn.bf)(na)} !important`}}},[`&${It}-small`]:{[`&${It}-label-vertical ${It}-item ${It}-item-tail`]:{top:X.calc(Tn).div(2).add(vr).equal()},[`${It}-item-icon ${xe}-progress-inner`]:{width:`${(0,Pn.bf)(Nr)} !important`,height:`${(0,Pn.bf)(Nr)} !important`}}}}},En=X=>{const{componentCls:xe,descriptionMaxWidth:It,lineHeight:Ht,dotCurrentSize:Tn,dotSize:Yn,motionDurationSlow:vi}=X;return{[`&${xe}-dot, &${xe}-dot${xe}-small`]:{[`${xe}-item`]:{"&-title":{lineHeight:Ht},"&-tail":{top:X.calc(X.dotSize).sub(X.calc(X.lineWidth).mul(3).equal()).div(2).equal(),width:"100%",marginTop:0,marginBottom:0,marginInline:`${(0,Pn.bf)(X.calc(It).div(2).equal())} 0`,padding:0,"&::after":{width:`calc(100% - ${(0,Pn.bf)(X.calc(X.marginSM).mul(2).equal())})`,height:X.calc(X.lineWidth).mul(3).equal(),marginInlineStart:X.marginSM}},"&-icon":{width:Yn,height:Yn,marginInlineStart:X.calc(X.descriptionMaxWidth).sub(Yn).div(2).equal(),paddingInlineEnd:0,lineHeight:(0,Pn.bf)(Yn),background:"transparent",border:0,[`${xe}-icon-dot`]:{position:"relative",float:"left",width:"100%",height:"100%",borderRadius:100,transition:`all ${vi}`,"&::after":{position:"absolute",top:X.calc(X.marginSM).mul(-1).equal(),insetInlineStart:X.calc(Yn).sub(X.calc(X.controlHeightLG).mul(1.5).equal()).div(2).equal(),width:X.calc(X.controlHeightLG).mul(1.5).equal(),height:X.controlHeight,background:"transparent",content:'""'}}},"&-content":{width:It},[`&-process ${xe}-item-icon`]:{position:"relative",top:X.calc(Yn).sub(Tn).div(2).equal(),width:Tn,height:Tn,lineHeight:(0,Pn.bf)(Tn),background:"none",marginInlineStart:X.calc(X.descriptionMaxWidth).sub(Tn).div(2).equal()},[`&-process ${xe}-icon`]:{[`&:first-child ${xe}-icon-dot`]:{insetInlineStart:0}}}},[`&${xe}-vertical${xe}-dot`]:{[`${xe}-item-icon`]:{marginTop:X.calc(X.controlHeight).sub(Yn).div(2).equal(),marginInlineStart:0,background:"none"},[`${xe}-item-process ${xe}-item-icon`]:{marginTop:X.calc(X.controlHeight).sub(Tn).div(2).equal(),top:0,insetInlineStart:X.calc(Yn).sub(Tn).div(2).equal(),marginInlineStart:0},[`${xe}-item > ${xe}-item-container > ${xe}-item-tail`]:{top:X.calc(X.controlHeight).sub(Yn).div(2).equal(),insetInlineStart:0,margin:0,padding:`${(0,Pn.bf)(X.calc(Yn).add(X.paddingXS).equal())} 0 ${(0,Pn.bf)(X.paddingXS)}`,"&::after":{marginInlineStart:X.calc(Yn).sub(X.lineWidth).div(2).equal()}},[`&${xe}-small`]:{[`${xe}-item-icon`]:{marginTop:X.calc(X.controlHeightSM).sub(Yn).div(2).equal()},[`${xe}-item-process ${xe}-item-icon`]:{marginTop:X.calc(X.controlHeightSM).sub(Tn).div(2).equal()},[`${xe}-item > ${xe}-item-container > ${xe}-item-tail`]:{top:X.calc(X.controlHeightSM).sub(Yn).div(2).equal()}},[`${xe}-item:first-child ${xe}-icon-dot`]:{insetInlineStart:0},[`${xe}-item-content`]:{width:"inherit"}}}},Mn=X=>{const{componentCls:xe}=X;return{[`&${xe}-rtl`]:{direction:"rtl",[`${xe}-item`]:{"&-subtitle":{float:"left"}},[`&${xe}-navigation`]:{[`${xe}-item::after`]:{transform:"rotate(-45deg)"}},[`&${xe}-vertical`]:{[`> ${xe}-item`]:{"&::after":{transform:"rotate(225deg)"},[`${xe}-item-icon`]:{float:"right"}}},[`&${xe}-dot`]:{[`${xe}-item-icon ${xe}-icon-dot, &${xe}-small ${xe}-item-icon ${xe}-icon-dot`]:{float:"right"}}}}},Rn=X=>{const{componentCls:xe,iconSizeSM:It,fontSizeSM:Ht,fontSize:Tn,colorTextDescription:Yn}=X;return{[`&${xe}-small`]:{[`&${xe}-horizontal:not(${xe}-label-vertical) ${xe}-item`]:{paddingInlineStart:X.paddingSM,"&:first-child":{paddingInlineStart:0}},[`${xe}-item-icon`]:{width:It,height:It,marginTop:0,marginBottom:0,marginInline:`0 ${(0,Pn.bf)(X.marginXS)}`,fontSize:Ht,lineHeight:(0,Pn.bf)(It),textAlign:"center",borderRadius:It},[`${xe}-item-title`]:{paddingInlineEnd:X.paddingSM,fontSize:Tn,lineHeight:(0,Pn.bf)(It),"&::after":{top:X.calc(It).div(2).equal()}},[`${xe}-item-description`]:{color:Yn,fontSize:Tn},[`${xe}-item-tail`]:{top:X.calc(It).div(2).sub(X.paddingXXS).equal()},[`${xe}-item-custom ${xe}-item-icon`]:{width:"inherit",height:"inherit",lineHeight:"inherit",background:"none",border:0,borderRadius:0,[`> ${xe}-icon`]:{fontSize:It,lineHeight:(0,Pn.bf)(It),transform:"none"}}}}},Yr=X=>{const{componentCls:xe,iconSizeSM:It,iconSize:Ht}=X;return{[`&${xe}-vertical`]:{display:"flex",flexDirection:"column",[`> ${xe}-item`]:{display:"block",flex:"1 0 auto",paddingInlineStart:0,overflow:"visible",[`${xe}-item-icon`]:{float:"left",marginInlineEnd:X.margin},[`${xe}-item-content`]:{display:"block",minHeight:X.calc(X.controlHeight).mul(1.5).equal(),overflow:"hidden"},[`${xe}-item-title`]:{lineHeight:(0,Pn.bf)(Ht)},[`${xe}-item-description`]:{paddingBottom:X.paddingSM}},[`> ${xe}-item > ${xe}-item-container > ${xe}-item-tail`]:{position:"absolute",top:0,insetInlineStart:X.calc(Ht).div(2).sub(X.lineWidth).equal(),width:X.lineWidth,height:"100%",padding:`${(0,Pn.bf)(X.calc(X.marginXXS).mul(1.5).add(Ht).equal())} 0 ${(0,Pn.bf)(X.calc(X.marginXXS).mul(1.5).equal())}`,"&::after":{width:X.lineWidth,height:"100%"}},[`> ${xe}-item:not(:last-child) > ${xe}-item-container > ${xe}-item-tail`]:{display:"block"},[` > ${xe}-item > ${xe}-item-container > ${xe}-item-content > ${xe}-item-title`]:{"&::after":{display:"none"}},[`&${xe}-small ${xe}-item-container`]:{[`${xe}-item-tail`]:{position:"absolute",top:0,insetInlineStart:X.calc(It).div(2).sub(X.lineWidth).equal(),padding:`${(0,Pn.bf)(X.calc(X.marginXXS).mul(1.5).add(It).equal())} 0 ${(0,Pn.bf)(X.calc(X.marginXXS).mul(1.5).equal())}`},[`${xe}-item-title`]:{lineHeight:(0,Pn.bf)(It)}}}}};const Ir="wait",Yi="process",Za="finish",ma="error",xr=(X,xe)=>{const It=`${xe.componentCls}-item`,Ht=`${X}IconColor`,Tn=`${X}TitleColor`,Yn=`${X}DescriptionColor`,vi=`${X}TailColor`,ca=`${X}IconBgColor`,Gi=`${X}IconBorderColor`,vr=`${X}DotColor`;return{[`${It}-${X} ${It}-icon`]:{backgroundColor:xe[ca],borderColor:xe[Gi],[`> ${xe.componentCls}-icon`]:{color:xe[Ht],[`${xe.componentCls}-icon-dot`]:{background:xe[vr]}}},[`${It}-${X}${It}-custom ${It}-icon`]:{[`> ${xe.componentCls}-icon`]:{color:xe[vr]}},[`${It}-${X} > ${It}-container > ${It}-content > ${It}-title`]:{color:xe[Tn],"&::after":{backgroundColor:xe[vi]}},[`${It}-${X} > ${It}-container > ${It}-content > ${It}-description`]:{color:xe[Yn]},[`${It}-${X} > ${It}-container > ${It}-tail::after`]:{backgroundColor:xe[vi]}}},ta=X=>{const{componentCls:xe,motionDurationSlow:It}=X,Ht=`${xe}-item`,Tn=`${Ht}-icon`;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[Ht]:{position:"relative",display:"inline-block",flex:1,overflow:"hidden",verticalAlign:"top","&:last-child":{flex:"none",[`> ${Ht}-container > ${Ht}-tail, > ${Ht}-container >  ${Ht}-content > ${Ht}-title::after`]:{display:"none"}}},[`${Ht}-container`]:{outline:"none",[`&:focus-visible ${Tn}`]:(0,An.oN)(X)},[`${Tn}, ${Ht}-content`]:{display:"inline-block",verticalAlign:"top"},[Tn]:{width:X.iconSize,height:X.iconSize,marginTop:0,marginBottom:0,marginInlineStart:0,marginInlineEnd:X.marginXS,fontSize:X.iconFontSize,fontFamily:X.fontFamily,lineHeight:(0,Pn.bf)(X.iconSize),textAlign:"center",borderRadius:X.iconSize,border:`${(0,Pn.bf)(X.lineWidth)} ${X.lineType} transparent`,transition:`background-color ${It}, border-color ${It}`,[`${xe}-icon`]:{position:"relative",top:X.iconTop,color:X.colorPrimary,lineHeight:1}},[`${Ht}-tail`]:{position:"absolute",top:X.calc(X.iconSize).div(2).equal(),insetInlineStart:0,width:"100%","&::after":{display:"inline-block",width:"100%",height:X.lineWidth,background:X.colorSplit,borderRadius:X.lineWidth,transition:`background ${It}`,content:'""'}},[`${Ht}-title`]:{position:"relative",display:"inline-block",paddingInlineEnd:X.padding,color:X.colorText,fontSize:X.fontSizeLG,lineHeight:(0,Pn.bf)(X.titleLineHeight),"&::after":{position:"absolute",top:X.calc(X.titleLineHeight).div(2).equal(),insetInlineStart:"100%",display:"block",width:9999,height:X.lineWidth,background:X.processTailColor,content:'""'}},[`${Ht}-subtitle`]:{display:"inline",marginInlineStart:X.marginXS,color:X.colorTextDescription,fontWeight:"normal",fontSize:X.fontSize},[`${Ht}-description`]:{color:X.colorTextDescription,fontSize:X.fontSize}},xr(Ir,X)),xr(Yi,X)),{[`${Ht}-process > ${Ht}-container > ${Ht}-title`]:{fontWeight:X.fontWeightStrong}}),xr(Za,X)),xr(ma,X)),{[`${Ht}${xe}-next-error > ${xe}-item-title::after`]:{background:X.colorError},[`${Ht}-disabled`]:{cursor:"not-allowed"}})},qi=X=>{const{componentCls:xe,motionDurationSlow:It}=X;return{[`& ${xe}-item`]:{[`&:not(${xe}-item-active)`]:{[`& > ${xe}-item-container[role='button']`]:{cursor:"pointer",[`${xe}-item`]:{[`&-title, &-subtitle, &-description, &-icon ${xe}-icon`]:{transition:`color ${It}`}},"&:hover":{[`${xe}-item`]:{"&-title, &-subtitle, &-description":{color:X.colorPrimary}}}},[`&:not(${xe}-item-process)`]:{[`& > ${xe}-item-container[role='button']:hover`]:{[`${xe}-item`]:{"&-icon":{borderColor:X.colorPrimary,[`${xe}-icon`]:{color:X.colorPrimary}}}}}}},[`&${xe}-horizontal:not(${xe}-label-vertical)`]:{[`${xe}-item`]:{paddingInlineStart:X.padding,whiteSpace:"nowrap","&:first-child":{paddingInlineStart:0},[`&:last-child ${xe}-item-title`]:{paddingInlineEnd:0},"&-tail":{display:"none"},"&-description":{maxWidth:X.descriptionMaxWidth,whiteSpace:"normal"}}}}},Pr=X=>{const{componentCls:xe}=X;return{[xe]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,An.Wf)(X)),{display:"flex",width:"100%",fontSize:0,textAlign:"initial"}),ta(X)),qi(X)),Hi(X)),Rn(X)),Yr(X)),qt(X)),ii(X)),En(X)),Lr(X)),Mn(X)),xt(X)),$n(X))}},Cr=X=>({titleLineHeight:X.controlHeight,customIconSize:X.controlHeight,customIconTop:0,customIconFontSize:X.controlHeightSM,iconSize:X.controlHeight,iconTop:-.5,iconFontSize:X.fontSize,iconSizeSM:X.fontSizeHeading3,dotSize:X.controlHeight/4,dotCurrentSize:X.controlHeightLG/4,navArrowColor:X.colorTextDisabled,navContentMaxWidth:"unset",descriptionMaxWidth:140,waitIconColor:X.wireframe?X.colorTextDisabled:X.colorTextLabel,waitIconBgColor:X.wireframe?X.colorBgContainer:X.colorFillContent,waitIconBorderColor:X.wireframe?X.colorTextDisabled:"transparent",finishIconBgColor:X.wireframe?X.colorBgContainer:X.controlItemBgActive,finishIconBorderColor:X.wireframe?X.colorPrimary:X.controlItemBgActive});var lr=(0,Dn.I$)("Steps",X=>{const{colorTextDisabled:xe,controlHeightLG:It,colorTextLightSolid:Ht,colorText:Tn,colorPrimary:Yn,colorTextDescription:vi,colorTextQuaternary:ca,colorError:Gi,colorBorderSecondary:vr,colorSplit:na}=X,Nr=(0,jt.IX)(X,{processIconColor:Ht,processTitleColor:Tn,processDescriptionColor:Tn,processIconBgColor:Yn,processIconBorderColor:Yn,processDotColor:Yn,processTailColor:na,waitTitleColor:vi,waitDescriptionColor:vi,waitTailColor:na,waitDotColor:xe,finishIconColor:Yn,finishTitleColor:Tn,finishDescriptionColor:vi,finishTailColor:Yn,finishDotColor:Yn,errorIconColor:Ht,errorTitleColor:Gi,errorDescriptionColor:Gi,errorTailColor:na,errorIconBgColor:Gi,errorIconBorderColor:Gi,errorDotColor:Gi,stepsNavActiveColor:Yn,stepsProgressSize:It,inlineDotSize:6,inlineTitleColor:ca,inlineTailColor:vr});return Pr(Nr)},Cr),ba=k(50344);function la(X){return X.filter(xe=>xe)}function Ur(X,xe){if(X)return X;const It=(0,ba.Z)(xe).map(Ht=>{if(p.isValidElement(Ht)){const{props:Tn}=Ht;return Object.assign({},Tn)}return null});return la(It)}var lo=Ur,yo=function(X,xe){var It={};for(var Ht in X)Object.prototype.hasOwnProperty.call(X,Ht)&&xe.indexOf(Ht)<0&&(It[Ht]=X[Ht]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Tn=0,Ht=Object.getOwnPropertySymbols(X);Tn<Ht.length;Tn++)xe.indexOf(Ht[Tn])<0&&Object.prototype.propertyIsEnumerable.call(X,Ht[Tn])&&(It[Ht[Tn]]=X[Ht[Tn]]);return It};const nr=X=>{const{percent:xe,size:It,className:Ht,rootClassName:Tn,direction:Yn,items:vi,responsive:ca=!0,current:Gi=0,children:vr,style:na}=X,Nr=yo(X,["percent","size","className","rootClassName","direction","items","responsive","current","children","style"]),{xs:xo}=(0,Wn.Z)(ca),{getPrefixCls:Va,direction:va,className:os,style:co}=(0,Nt.dj)("steps"),ss=p.useMemo(()=>ca&&xo?"vertical":Yn,[ca,xo,Yn]),ua=(0,wn.Z)(It),$a=Va("steps",X.prefixCls),[Ka,Co,uo]=lr($a),$o=X.type==="inline",Zo=Va("",X.iconPrefix),fo=lo(vi,vr),Ae=$o?void 0:xe,Yt=Object.assign(Object.assign({},co),na),zn=j()(os,{[`${$a}-rtl`]:va==="rtl",[`${$a}-with-progress`]:Ae!==void 0},Ht,Tn,Co,uo),Ln={finish:p.createElement(he.Z,{className:`${$a}-finish-icon`}),error:p.createElement(mn.Z,{className:`${$a}-error-icon`})},gr=({node:fr,status:qr})=>{if(qr==="process"&&Ae!==void 0){const ho=ua==="small"?32:40;return p.createElement("div",{className:`${$a}-progress-icon`},p.createElement(O.Z,{type:"circle",percent:Ae,size:ho,strokeWidth:4,format:()=>null}),fr)}return fr},Ni=(fr,qr)=>fr.description?p.createElement(Vi.Z,{title:fr.description},qr):qr;return Ka(p.createElement(C,Object.assign({icons:Ln},Nr,{style:Yt,current:Gi,size:ua,items:fo,itemRender:$o?Ni:void 0,stepIcon:gr,direction:ss,prefixCls:$a,iconPrefix:Zo,className:zn})))};nr.Step=C.Step;var io=nr},9798:function(Li,hn,k){"use strict";k.d(hn,{Z:function(){return Vo}});var p=k(67294),he=k(74902),mn=k(87462),Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},j=Ue,en=k(84089),D=function(_t,Et){return p.createElement(en.Z,(0,mn.Z)({},_t,{ref:Et,icon:j}))},dn=p.forwardRef(D),Kr=dn,Ei=k(93967),Mt=k.n(Ei),hi=k(9220),di=k(50344),Xi=k(8410),st=k(21770),ln=k(98423),tn=k(42550),C=k(79370),Nt=k(53124),wn=k(10110),Wn=k(83062),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},Vi=O,Pn=function(_t,Et){return p.createElement(en.Z,(0,mn.Z)({},_t,{ref:Et,icon:Vi}))},An=p.forwardRef(Pn),Dn=An,jt=k(15105),Mr=k(96159),Hi=k(2961),Rr=k(14747),qt=k(83559),Kn=k(84898);const $n=(Te,_t,Et,lt)=>{const{titleMarginBottom:an,fontWeightStrong:Oi}=lt;return{marginBottom:an,color:Et,fontWeight:Oi,fontSize:Te,lineHeight:_t}},pi=Te=>{const _t=[1,2,3,4,5],Et={};return _t.forEach(lt=>{Et[`
      h${lt}&,
      div&-h${lt},
      div&-h${lt} > textarea,
      h${lt}
    `]=$n(Te[`fontSizeHeading${lt}`],Te[`lineHeightHeading${lt}`],Te.colorTextHeading,Te)}),Et},ii=Te=>{const{componentCls:_t}=Te;return{"a&, a":Object.assign(Object.assign({},(0,Rr.Nd)(Te)),{userSelect:"text",[`&[disabled], &${_t}-disabled`]:{color:Te.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:Te.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Er=Te=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:Te.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:Te.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Kn.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:Te.fontWeightStrong},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:Te.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),Lr=Te=>{const{componentCls:_t,paddingSM:Et}=Te,lt=Et;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:Te.calc(Te.paddingSM).mul(-1).equal(),insetBlockStart:Te.calc(lt).div(-2).add(1).equal(),marginBottom:Te.calc(lt).div(2).sub(2).equal()},[`${_t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:Te.calc(Te.marginXS).add(2).equal(),insetBlockEnd:Te.marginXS,color:Te.colorIcon,fontWeight:"normal",fontSize:Te.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},Ha=Te=>({[`${Te.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:Te.colorSuccess}},[`${Te.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),xt=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),Kt=Te=>{const{componentCls:_t,titleMarginTop:Et}=Te;return{[_t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:Te.colorText,wordBreak:"break-word",lineHeight:Te.lineHeight,[`&${_t}-secondary`]:{color:Te.colorTextDescription},[`&${_t}-success`]:{color:Te.colorSuccessText},[`&${_t}-warning`]:{color:Te.colorWarningText},[`&${_t}-danger`]:{color:Te.colorErrorText,"a&:active, a&:focus":{color:Te.colorErrorTextActive},"a&:hover":{color:Te.colorErrorTextHover}},[`&${_t}-disabled`]:{color:Te.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},pi(Te)),{[`
      & + h1${_t},
      & + h2${_t},
      & + h3${_t},
      & + h4${_t},
      & + h5${_t}
      `]:{marginTop:Et},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:Et}}}),Er(Te)),ii(Te)),{[`
        ${_t}-expand,
        ${_t}-collapse,
        ${_t}-edit,
        ${_t}-copy
      `]:Object.assign(Object.assign({},(0,Rr.Nd)(Te)),{marginInlineStart:Te.marginXXS})}),Lr(Te)),Ha(Te)),xt()),{"&-rtl":{direction:"rtl"}})}},En=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});var rn=(0,qt.I$)("Typography",Kt,En),Ci=Te=>{const{prefixCls:_t,"aria-label":Et,className:lt,style:an,direction:Oi,maxLength:Br,autoSize:Fr=!0,value:_i,onSave:Ai,onCancel:cr,onEnd:Aa,component:yr,enterIcon:ro=p.createElement(Dn,null)}=Te,Do=p.useRef(null),To=p.useRef(!1),Go=p.useRef(null),[zr,po]=p.useState(_i);p.useEffect(()=>{po(_i)},[_i]),p.useEffect(()=>{var Ma;if(!((Ma=Do.current)===null||Ma===void 0)&&Ma.resizableTextArea){const{textArea:wo}=Do.current.resizableTextArea;wo.focus();const{length:F}=wo.value;wo.setSelectionRange(F,F)}},[]);const da=({target:Ma})=>{po(Ma.value.replace(/[\n\r]/g,""))},Di=()=>{To.current=!0},Ya=()=>{To.current=!1},So=({keyCode:Ma})=>{To.current||(Go.current=Ma)},_a=()=>{Ai(zr.trim())},Es=({keyCode:Ma,ctrlKey:wo,altKey:F,metaKey:G,shiftKey:ne})=>{Go.current!==Ma||To.current||wo||F||G||ne||(Ma===jt.Z.ENTER?(_a(),Aa==null||Aa()):Ma===jt.Z.ESC&&cr())},Bl=()=>{_a()},[Cs,ls,$s]=rn(_t),Lo=Mt()(_t,`${_t}-edit-content`,{[`${_t}-rtl`]:Oi==="rtl",[`${_t}-${yr}`]:!!yr},lt,ls,$s);return Cs(p.createElement("div",{className:Lo,style:an},p.createElement(Hi.Z,{ref:Do,maxLength:Br,value:zr,onChange:da,onKeyDown:So,onKeyUp:Es,onCompositionStart:Di,onCompositionEnd:Ya,onBlur:Bl,"aria-label":Et,rows:1,autoSize:Fr}),ro!==null?(0,Mr.Tm)(ro,{className:`${_t}-edit-content-confirm`}):null))},Rn=k(20640),sr=k.n(Rn),Yr=k(66680),Yi=(Te,_t=!1)=>_t&&Te==null?[]:Array.isArray(Te)?Te:[Te],Za=function(Te,_t,Et,lt){function an(Oi){return Oi instanceof Et?Oi:new Et(function(Br){Br(Oi)})}return new(Et||(Et=Promise))(function(Oi,Br){function Fr(cr){try{Ai(lt.next(cr))}catch(Aa){Br(Aa)}}function _i(cr){try{Ai(lt.throw(cr))}catch(Aa){Br(Aa)}}function Ai(cr){cr.done?Oi(cr.value):an(cr.value).then(Fr,_i)}Ai((lt=lt.apply(Te,_t||[])).next())})},xr=({copyConfig:Te,children:_t})=>{const[Et,lt]=p.useState(!1),[an,Oi]=p.useState(!1),Br=p.useRef(null),Fr=()=>{Br.current&&clearTimeout(Br.current)},_i={};Te.format&&(_i.format=Te.format),p.useEffect(()=>Fr,[]);const Ai=(0,Yr.Z)(cr=>Za(void 0,void 0,void 0,function*(){var Aa;cr==null||cr.preventDefault(),cr==null||cr.stopPropagation(),Oi(!0);try{const yr=typeof Te.text=="function"?yield Te.text():Te.text;sr()(yr||Yi(_t,!0).join("")||"",_i),Oi(!1),lt(!0),Fr(),Br.current=setTimeout(()=>{lt(!1)},3e3),(Aa=Te.onCopy)===null||Aa===void 0||Aa.call(Te,cr)}catch(yr){throw Oi(!1),yr}}));return{copied:Et,copyLoading:an,onClick:Ai}};function ta(Te,_t){return p.useMemo(()=>{const Et=!!Te;return[Et,Object.assign(Object.assign({},_t),Et&&typeof Te=="object"?Te:null)]},[Te])}var Pr=Te=>{const _t=(0,p.useRef)(void 0);return(0,p.useEffect)(()=>{_t.current=Te}),_t.current},lr=(Te,_t,Et)=>(0,p.useMemo)(()=>Te===!0?{title:_t!=null?_t:Et}:(0,p.isValidElement)(Te)?{title:Te}:typeof Te=="object"?Object.assign({title:_t!=null?_t:Et},Te):{title:Te},[Te,_t,Et]),ba=function(Te,_t){var Et={};for(var lt in Te)Object.prototype.hasOwnProperty.call(Te,lt)&&_t.indexOf(lt)<0&&(Et[lt]=Te[lt]);if(Te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var an=0,lt=Object.getOwnPropertySymbols(Te);an<lt.length;an++)_t.indexOf(lt[an])<0&&Object.prototype.propertyIsEnumerable.call(Te,lt[an])&&(Et[lt[an]]=Te[lt[an]]);return Et},Ur=p.forwardRef((Te,_t)=>{const{prefixCls:Et,component:lt="article",className:an,rootClassName:Oi,setContentRef:Br,children:Fr,direction:_i,style:Ai}=Te,cr=ba(Te,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Aa,direction:yr,className:ro,style:Do}=(0,Nt.dj)("typography"),To=_i!=null?_i:yr,Go=Br?(0,tn.sQ)(_t,Br):_t,zr=Aa("typography",Et),[po,da,Di]=rn(zr),Ya=Mt()(zr,ro,{[`${zr}-rtl`]:To==="rtl"},an,Oi,da,Di),So=Object.assign(Object.assign({},Do),Ai);return po(p.createElement(lt,Object.assign({className:Ya,style:So,ref:Go},cr),Fr))}),lo=k(63606),yo=k(57132),nr=k(50888);function io(Te){return Te===!1?[!1,!1]:Array.isArray(Te)?Te:[Te]}function X(Te,_t,Et){return Te===!0||Te===void 0?_t:Te||Et&&_t}function xe(Te){const _t=document.createElement("em");Te.appendChild(_t);const Et=Te.getBoundingClientRect(),lt=_t.getBoundingClientRect();return Te.removeChild(_t),Et.left>lt.left||lt.right>Et.right||Et.top>lt.top||lt.bottom>Et.bottom}const It=Te=>["string","number"].includes(typeof Te);var Tn=({prefixCls:Te,copied:_t,locale:Et,iconOnly:lt,tooltips:an,icon:Oi,tabIndex:Br,onCopy:Fr,loading:_i})=>{const Ai=io(an),cr=io(Oi),{copied:Aa,copy:yr}=Et!=null?Et:{},ro=_t?Aa:yr,Do=X(Ai[_t?1:0],ro),To=typeof Do=="string"?Do:ro;return p.createElement(Wn.Z,{title:Do},p.createElement("button",{type:"button",className:Mt()(`${Te}-copy`,{[`${Te}-copy-success`]:_t,[`${Te}-copy-icon-only`]:lt}),onClick:Fr,"aria-label":To,tabIndex:Br},_t?X(cr[1],p.createElement(lo.Z,null),!0):X(cr[0],_i?p.createElement(nr.Z,null):p.createElement(yo.Z,null),!0)))};const Yn=p.forwardRef(({style:Te,children:_t},Et)=>{const lt=p.useRef(null);return p.useImperativeHandle(Et,()=>({isExceed:()=>{const an=lt.current;return an.scrollHeight>an.clientHeight},getHeight:()=>lt.current.clientHeight})),p.createElement("span",{"aria-hidden":!0,ref:lt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},Te)},_t)}),vi=Te=>Te.reduce((_t,Et)=>_t+(It(Et)?String(Et).length:1),0);function ca(Te,_t){let Et=0;const lt=[];for(let an=0;an<Te.length;an+=1){if(Et===_t)return lt;const Oi=Te[an],Fr=It(Oi)?String(Oi).length:1,_i=Et+Fr;if(_i>_t){const Ai=_t-Et;return lt.push(String(Oi).slice(0,Ai)),lt}lt.push(Oi),Et=_i}return Te}const Gi=0,vr=1,na=2,Nr=3,xo=4,Va={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function va(Te){const{enableMeasure:_t,width:Et,text:lt,children:an,rows:Oi,expanded:Br,miscDeps:Fr,onEllipsis:_i}=Te,Ai=p.useMemo(()=>(0,di.Z)(lt),[lt]),cr=p.useMemo(()=>vi(Ai),[lt]),Aa=p.useMemo(()=>an(Ai,!1),[lt]),[yr,ro]=p.useState(null),Do=p.useRef(null),To=p.useRef(null),Go=p.useRef(null),zr=p.useRef(null),po=p.useRef(null),[da,Di]=p.useState(!1),[Ya,So]=p.useState(Gi),[_a,Es]=p.useState(0),[Bl,Cs]=p.useState(null);(0,Xi.Z)(()=>{So(_t&&Et&&cr?vr:Gi)},[Et,lt,Oi,_t,Ai]),(0,Xi.Z)(()=>{var Ma,wo,F,G;if(Ya===vr){So(na);const ne=To.current&&getComputedStyle(To.current).whiteSpace;Cs(ne)}else if(Ya===na){const ne=!!(!((Ma=Go.current)===null||Ma===void 0)&&Ma.isExceed());So(ne?Nr:xo),ro(ne?[0,cr]:null),Di(ne);const Ne=((wo=Go.current)===null||wo===void 0?void 0:wo.getHeight())||0,it=Oi===1?0:((F=zr.current)===null||F===void 0?void 0:F.getHeight())||0,Gt=((G=po.current)===null||G===void 0?void 0:G.getHeight())||0,Jn=Math.max(Ne,it+Gt);Es(Jn+1),_i(ne)}},[Ya]);const ls=yr?Math.ceil((yr[0]+yr[1])/2):0;(0,Xi.Z)(()=>{var Ma;const[wo,F]=yr||[0,0];if(wo!==F){const ne=(((Ma=Do.current)===null||Ma===void 0?void 0:Ma.getHeight())||0)>_a;let Ne=ls;F-wo===1&&(Ne=ne?wo:F),ro(ne?[wo,Ne]:[Ne,F])}},[yr,ls]);const $s=p.useMemo(()=>{if(!_t)return an(Ai,!1);if(Ya!==Nr||!yr||yr[0]!==yr[1]){const Ma=an(Ai,!1);return[xo,Gi].includes(Ya)?Ma:p.createElement("span",{style:Object.assign(Object.assign({},Va),{WebkitLineClamp:Oi})},Ma)}return an(Br?Ai:ca(Ai,yr[0]),da)},[Br,Ya,yr,Ai].concat((0,he.Z)(Fr))),Lo={width:Et,margin:0,padding:0,whiteSpace:Bl==="nowrap"?"normal":"inherit"};return p.createElement(p.Fragment,null,$s,Ya===na&&p.createElement(p.Fragment,null,p.createElement(Yn,{style:Object.assign(Object.assign(Object.assign({},Lo),Va),{WebkitLineClamp:Oi}),ref:Go},Aa),p.createElement(Yn,{style:Object.assign(Object.assign(Object.assign({},Lo),Va),{WebkitLineClamp:Oi-1}),ref:zr},Aa),p.createElement(Yn,{style:Object.assign(Object.assign(Object.assign({},Lo),Va),{WebkitLineClamp:1}),ref:po},an([],!0))),Ya===Nr&&yr&&yr[0]!==yr[1]&&p.createElement(Yn,{style:Object.assign(Object.assign({},Lo),{top:400}),ref:Do},an(ca(Ai,ls),!0)),Ya===vr&&p.createElement("span",{style:{whiteSpace:"inherit"},ref:To}))}var co=({enableEllipsis:Te,isEllipsis:_t,children:Et,tooltipProps:lt})=>!(lt!=null&&lt.title)||!Te?Et:p.createElement(Wn.Z,Object.assign({open:_t?void 0:!1},lt),Et),ss=function(Te,_t){var Et={};for(var lt in Te)Object.prototype.hasOwnProperty.call(Te,lt)&&_t.indexOf(lt)<0&&(Et[lt]=Te[lt]);if(Te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var an=0,lt=Object.getOwnPropertySymbols(Te);an<lt.length;an++)_t.indexOf(lt[an])<0&&Object.prototype.propertyIsEnumerable.call(Te,lt[an])&&(Et[lt[an]]=Te[lt[an]]);return Et};function ua({mark:Te,code:_t,underline:Et,delete:lt,strong:an,keyboard:Oi,italic:Br},Fr){let _i=Fr;function Ai(cr,Aa){Aa&&(_i=p.createElement(cr,{},_i))}return Ai("strong",an),Ai("u",Et),Ai("del",lt),Ai("code",_t),Ai("mark",Te),Ai("kbd",Oi),Ai("i",Br),_i}const $a="...",Ka=["delete","mark","code","underline","strong","keyboard","italic"];var uo=p.forwardRef((Te,_t)=>{var Et;const{prefixCls:lt,className:an,style:Oi,type:Br,disabled:Fr,children:_i,ellipsis:Ai,editable:cr,copyable:Aa,component:yr,title:ro}=Te,Do=ss(Te,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:To,direction:Go}=p.useContext(Nt.E_),[zr]=(0,wn.Z)("Text"),po=p.useRef(null),da=p.useRef(null),Di=To("typography",lt),Ya=(0,ln.Z)(Do,Ka),[So,_a]=ta(cr),[Es,Bl]=(0,st.Z)(!1,{value:_a.editing}),{triggerType:Cs=["icon"]}=_a,ls=Qn=>{var dr;Qn&&((dr=_a.onStart)===null||dr===void 0||dr.call(_a)),Bl(Qn)},$s=Pr(Es);(0,Xi.Z)(()=>{var Qn;!Es&&$s&&((Qn=da.current)===null||Qn===void 0||Qn.focus())},[Es]);const Lo=Qn=>{Qn==null||Qn.preventDefault(),ls(!0)},Ma=Qn=>{var dr;(dr=_a.onChange)===null||dr===void 0||dr.call(_a,Qn),ls(!1)},wo=()=>{var Qn;(Qn=_a.onCancel)===null||Qn===void 0||Qn.call(_a),ls(!1)},[F,G]=ta(Aa),{copied:ne,copyLoading:Ne,onClick:it}=xr({copyConfig:G,children:_i}),[Gt,Jn]=p.useState(!1),[Zn,Xt]=p.useState(!1),[jn,xn]=p.useState(!1),[Ut,St]=p.useState(!1),[li,ur]=p.useState(!0),[hr,ki]=ta(Ai,{expandable:!1,symbol:Qn=>Qn?zr==null?void 0:zr.collapse:zr==null?void 0:zr.expand}),[Xn,Gn]=(0,st.Z)(ki.defaultExpanded||!1,{value:ki.expanded}),gi=hr&&(!Xn||ki.expandable==="collapsible"),{rows:Hr=1}=ki,Tr=p.useMemo(()=>gi&&(ki.suffix!==void 0||ki.onEllipsis||ki.expandable||So||F),[gi,ki,So,F]);(0,Xi.Z)(()=>{hr&&!Tr&&(Jn((0,C.G)("webkitLineClamp")),Xt((0,C.G)("textOverflow")))},[Tr,hr]);const[ir,Ea]=p.useState(gi),Vr=p.useMemo(()=>Tr?!1:Hr===1?Zn:Gt,[Tr,Zn,Gt]);(0,Xi.Z)(()=>{Ea(Vr&&gi)},[Vr,gi]);const Sr=gi&&(ir?Ut:jn),fa=gi&&Hr===1&&ir,ko=gi&&Hr>1&&ir,qa=(Qn,dr)=>{var Ca;Gn(dr.expanded),(Ca=ki.onExpand)===null||Ca===void 0||Ca.call(ki,Qn,dr)},[Ko,br]=p.useState(0),Jr=({offsetWidth:Qn})=>{br(Qn)},Ao=Qn=>{var dr;xn(Qn),jn!==Qn&&((dr=ki.onEllipsis)===null||dr===void 0||dr.call(ki,Qn))};p.useEffect(()=>{const Qn=po.current;if(hr&&ir&&Qn){const dr=xe(Qn);Ut!==dr&&St(dr)}},[hr,ir,_i,ko,li,Ko]),p.useEffect(()=>{const Qn=po.current;if(typeof IntersectionObserver=="undefined"||!Qn||!ir||!gi)return;const dr=new IntersectionObserver(()=>{ur(!!Qn.offsetParent)});return dr.observe(Qn),()=>{dr.disconnect()}},[ir,gi]);const cs=lr(ki.tooltip,_a.text,_i),Ks=p.useMemo(()=>{if(!(!hr||ir))return[_a.text,_i,ro,cs.title].find(It)},[hr,ir,ro,cs.title,Sr]);if(Es)return p.createElement(Ci,{value:(Et=_a.text)!==null&&Et!==void 0?Et:typeof _i=="string"?_i:"",onSave:Ma,onCancel:wo,onEnd:_a.onEnd,prefixCls:Di,className:an,style:Oi,direction:Go,component:yr,maxLength:_a.maxLength,autoSize:_a.autoSize,enterIcon:_a.enterIcon});const vl=()=>{const{expandable:Qn,symbol:dr}=ki;return Qn?p.createElement("button",{type:"button",key:"expand",className:`${Di}-${Xn?"collapse":"expand"}`,onClick:Ca=>qa(Ca,{expanded:!Xn}),"aria-label":Xn?zr.collapse:zr==null?void 0:zr.expand},typeof dr=="function"?dr(Xn):dr):null},Fl=()=>{if(!So)return;const{icon:Qn,tooltip:dr,tabIndex:Ca}=_a,Ys=(0,di.Z)(dr)[0]||(zr==null?void 0:zr.edit),zl=typeof Ys=="string"?Ys:"";return Cs.includes("icon")?p.createElement(Wn.Z,{key:"edit",title:dr===!1?"":Ys},p.createElement("button",{type:"button",ref:da,className:`${Di}-edit`,onClick:Lo,"aria-label":zl,tabIndex:Ca},Qn||p.createElement(Kr,{role:"button"}))):null},Cc=()=>F?p.createElement(Tn,Object.assign({key:"copy"},G,{prefixCls:Di,copied:ne,locale:zr,onCopy:it,loading:Ne,iconOnly:_i==null})):null,mo=Qn=>[Qn&&vl(),Fl(),Cc()],Ra=Qn=>[Qn&&!Xn&&p.createElement("span",{"aria-hidden":!0,key:"ellipsis"},$a),ki.suffix,mo(Qn)];return p.createElement(hi.Z,{onResize:Jr,disabled:!gi},Qn=>p.createElement(co,{tooltipProps:cs,enableEllipsis:gi,isEllipsis:Sr},p.createElement(Ur,Object.assign({className:Mt()({[`${Di}-${Br}`]:Br,[`${Di}-disabled`]:Fr,[`${Di}-ellipsis`]:hr,[`${Di}-ellipsis-single-line`]:fa,[`${Di}-ellipsis-multiple-line`]:ko},an),prefixCls:lt,style:Object.assign(Object.assign({},Oi),{WebkitLineClamp:ko?Hr:void 0}),component:yr,ref:(0,tn.sQ)(Qn,po,_t),direction:Go,onClick:Cs.includes("text")?Lo:void 0,"aria-label":Ks==null?void 0:Ks.toString(),title:ro},Ya),p.createElement(va,{enableMeasure:gi&&!ir,text:_i,rows:Hr,width:Ko,onEllipsis:Ao,expanded:Xn,miscDeps:[ne,Xn,Ne,So,F,zr].concat((0,he.Z)(Ka.map(dr=>Te[dr])))},(dr,Ca)=>ua(Te,p.createElement(p.Fragment,null,dr.length>0&&Ca&&!Xn&&Ks?p.createElement("span",{key:"show-content","aria-hidden":!0},dr):dr,Ra(Ca)))))))}),$o=function(Te,_t){var Et={};for(var lt in Te)Object.prototype.hasOwnProperty.call(Te,lt)&&_t.indexOf(lt)<0&&(Et[lt]=Te[lt]);if(Te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var an=0,lt=Object.getOwnPropertySymbols(Te);an<lt.length;an++)_t.indexOf(lt[an])<0&&Object.prototype.propertyIsEnumerable.call(Te,lt[an])&&(Et[lt[an]]=Te[lt[an]]);return Et},fo=p.forwardRef((Te,_t)=>{var{ellipsis:Et,rel:lt}=Te,an=$o(Te,["ellipsis","rel"]);const Oi=Object.assign(Object.assign({},an),{rel:lt===void 0&&an.target==="_blank"?"noopener noreferrer":lt});return delete Oi.navigate,p.createElement(uo,Object.assign({},Oi,{ref:_t,ellipsis:!!Et,component:"a"}))}),Yt=p.forwardRef((Te,_t)=>p.createElement(uo,Object.assign({ref:_t},Te,{component:"div"}))),zn=function(Te,_t){var Et={};for(var lt in Te)Object.prototype.hasOwnProperty.call(Te,lt)&&_t.indexOf(lt)<0&&(Et[lt]=Te[lt]);if(Te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var an=0,lt=Object.getOwnPropertySymbols(Te);an<lt.length;an++)_t.indexOf(lt[an])<0&&Object.prototype.propertyIsEnumerable.call(Te,lt[an])&&(Et[lt[an]]=Te[lt[an]]);return Et};const Ln=(Te,_t)=>{var{ellipsis:Et}=Te,lt=zn(Te,["ellipsis"]);const an=p.useMemo(()=>Et&&typeof Et=="object"?(0,ln.Z)(Et,["expandable","rows"]):Et,[Et]);return p.createElement(uo,Object.assign({ref:_t},lt,{ellipsis:an,component:"span"}))};var gr=p.forwardRef(Ln),Ni=function(Te,_t){var Et={};for(var lt in Te)Object.prototype.hasOwnProperty.call(Te,lt)&&_t.indexOf(lt)<0&&(Et[lt]=Te[lt]);if(Te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var an=0,lt=Object.getOwnPropertySymbols(Te);an<lt.length;an++)_t.indexOf(lt[an])<0&&Object.prototype.propertyIsEnumerable.call(Te,lt[an])&&(Et[lt[an]]=Te[lt[an]]);return Et};const fr=[1,2,3,4,5];var ho=p.forwardRef((Te,_t)=>{const{level:Et=1}=Te,lt=Ni(Te,["level"]),an=fr.includes(Et)?`h${Et}`:"h1";return p.createElement(uo,Object.assign({ref:_t},lt,{component:an}))});const Oa=Ur;Oa.Text=gr,Oa.Link=fo,Oa.Title=ho,Oa.Paragraph=Yt;var Vo=Oa},20640:function(Li,hn,k){"use strict";var p=k(11742),he={"text/plain":"Text","text/html":"Url",default:"Text"},mn="Copy to clipboard: #{key}, Enter";function Ue(en){var D=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return en.replace(/#{\s*key\s*}/g,D)}function j(en,D){var dn,Kr,Ei,Mt,hi,di,Xi=!1;D||(D={}),dn=D.debug||!1;try{Ei=p(),Mt=document.createRange(),hi=document.getSelection(),di=document.createElement("span"),di.textContent=en,di.ariaHidden="true",di.style.all="unset",di.style.position="fixed",di.style.top=0,di.style.clip="rect(0, 0, 0, 0)",di.style.whiteSpace="pre",di.style.webkitUserSelect="text",di.style.MozUserSelect="text",di.style.msUserSelect="text",di.style.userSelect="text",di.addEventListener("copy",function(ln){if(ln.stopPropagation(),D.format)if(ln.preventDefault(),typeof ln.clipboardData=="undefined"){dn&&console.warn("unable to use e.clipboardData"),dn&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var tn=he[D.format]||he.default;window.clipboardData.setData(tn,en)}else ln.clipboardData.clearData(),ln.clipboardData.setData(D.format,en);D.onCopy&&(ln.preventDefault(),D.onCopy(ln.clipboardData))}),document.body.appendChild(di),Mt.selectNodeContents(di),hi.addRange(Mt);var st=document.execCommand("copy");if(!st)throw new Error("copy command was unsuccessful");Xi=!0}catch(ln){dn&&console.error("unable to copy using execCommand: ",ln),dn&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(D.format||"text",en),D.onCopy&&D.onCopy(window.clipboardData),Xi=!0}catch(tn){dn&&console.error("unable to copy using clipboardData: ",tn),dn&&console.error("falling back to prompt"),Kr=Ue("message"in D?D.message:mn),window.prompt(Kr,en)}}finally{hi&&(typeof hi.removeRange=="function"?hi.removeRange(Mt):hi.removeAllRanges()),di&&document.body.removeChild(di),Ei()}return Xi}Li.exports=j},79370:function(Li,hn,k){"use strict";k.d(hn,{G:function(){return Ue}});var p=k(98924),he=function(en){if((0,p.Z)()&&window.document.documentElement){var D=Array.isArray(en)?en:[en],dn=window.document.documentElement;return D.some(function(Kr){return Kr in dn.style})}return!1},mn=function(en,D){if(!he(en))return!1;var dn=document.createElement("div"),Kr=dn.style[en];return dn.style[en]=D,dn.style[en]!==Kr};function Ue(j,en){return!Array.isArray(j)&&en!==void 0?mn(j,en):he(j)}},43452:function(Li,hn){"use strict";var k;hn.ConcurrentRoot=1,hn.ContinuousEventPriority=8,hn.DefaultEventPriority=32,hn.DiscreteEventPriority=2,k=268435456,k=0,k=0},71251:function(Li,hn,k){"use strict";var p=k(34155);Li.exports=function(he){function mn(a,l,f,x){return new sc(a,l,f,x)}function Ue(){}function j(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function en(a){return a===null||typeof a!="object"?null:(a=ei&&a[ei]||a["@@iterator"],typeof a=="function"?a:null)}function D(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Bi?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case qe:return"Fragment";case bt:return"Portal";case kt:return"Profiler";case yt:return"StrictMode";case Jt:return"Suspense";case ot:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ze:return(a.displayName||"Context")+".Provider";case oe:return(a._context.displayName||"Context")+".Consumer";case Tt:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Zt:return l=a.displayName||null,l!==null?l:D(a.type)||"Memo";case Lt:l=a._payload,a=a._init;try{return D(a(l))}catch(f){}}return null}function dn(a){if(Zr===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Zr=l&&l[1]||"",Po=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zr+a+Po}function Kr(a,l){if(!a||ar)return"";ar=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(l){var kn=function(){throw Error()};if(Object.defineProperty(kn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kn,[])}catch(pr){var Hn=pr}Reflect.construct(a,[],kn)}else{try{kn.call()}catch(pr){Hn=pr}a.call(kn.prototype)}}else{try{throw Error()}catch(pr){Hn=pr}(kn=a())&&typeof kn.catch=="function"&&kn.catch(function(){})}}catch(pr){if(pr&&Hn&&typeof pr.stack=="string")return[pr.stack,Hn.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=x.DetermineComponentFrameRoot(),K=N[0],pe=N[1];if(K&&pe){var Xe=K.split(`
`),Ot=pe.split(`
`);for(E=x=0;x<Xe.length&&!Xe[x].includes("DetermineComponentFrameRoot");)x++;for(;E<Ot.length&&!Ot[E].includes("DetermineComponentFrameRoot");)E++;if(x===Xe.length||E===Ot.length)for(x=Xe.length-1,E=Ot.length-1;1<=x&&0<=E&&Xe[x]!==Ot[E];)E--;for(;1<=x&&0<=E;x--,E--)if(Xe[x]!==Ot[E]){if(x!==1||E!==1)do if(x--,E--,0>E||Xe[x]!==Ot[E]){var Sn=`
`+Xe[x].replace(" at new "," at ");return a.displayName&&Sn.includes("<anonymous>")&&(Sn=Sn.replace("<anonymous>",a.displayName)),Sn}while(1<=x&&0<=E);break}}}finally{ar=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?dn(f):""}function Ei(a){switch(a.tag){case 26:case 27:case 5:return dn(a.type);case 16:return dn("Lazy");case 13:return dn("Suspense");case 19:return dn("SuspenseList");case 0:case 15:return a=Kr(a.type,!1),a;case 11:return a=Kr(a.type.render,!1),a;case 1:return a=Kr(a.type,!0),a;default:return""}}function Mt(a){try{var l="";do l+=Ei(a),a=a.return;while(a);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function hi(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,l.flags&4098&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function di(a){if(hi(a)!==a)throw Error(j(188))}function Xi(a){var l=a.alternate;if(!l){if(l=hi(a),l===null)throw Error(j(188));return l!==a?null:a}for(var f=a,x=l;;){var E=f.return;if(E===null)break;var N=E.alternate;if(N===null){if(x=E.return,x!==null){f=x;continue}break}if(E.child===N.child){for(N=E.child;N;){if(N===f)return di(E),a;if(N===x)return di(E),l;N=N.sibling}throw Error(j(188))}if(f.return!==x.return)f=E,x=N;else{for(var K=!1,pe=E.child;pe;){if(pe===f){K=!0,f=E,x=N;break}if(pe===x){K=!0,x=E,f=N;break}pe=pe.sibling}if(!K){for(pe=N.child;pe;){if(pe===f){K=!0,f=N,x=E;break}if(pe===x){K=!0,x=N,f=E;break}pe=pe.sibling}if(!K)throw Error(j(189))}}if(f.alternate!==x)throw Error(j(190))}if(f.tag!==3)throw Error(j(188));return f.stateNode.current===f?a:l}function st(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=st(a),l!==null)return l;a=a.sibling}return null}function ln(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(a.tag!==4&&(l=ln(a),l!==null))return l;a=a.sibling}return null}function tn(a){return{current:a}}function C(a){0>Is||(a.current=Sd[Is],Sd[Is]=null,Is--)}function Nt(a,l){Is++,Sd[Is]=a.current,a.current=l}function wn(a){return a>>>=0,a===0?32:31-(Df(a)/Wh|0)|0}function Wn(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function O(a,l){var f=a.pendingLanes;if(f===0)return 0;var x=0,E=a.suspendedLanes,N=a.pingedLanes,K=a.warmLanes;a=a.finishedLanes!==0;var pe=f&134217727;return pe!==0?(f=pe&~E,f!==0?x=Wn(f):(N&=pe,N!==0?x=Wn(N):a||(K=pe&~K,K!==0&&(x=Wn(K))))):(pe=f&~E,pe!==0?x=Wn(pe):N!==0?x=Wn(N):a||(K=f&~K,K!==0&&(x=Wn(K)))),x===0?0:l!==0&&l!==x&&!(l&E)&&(E=x&-x,K=l&-l,E>=K||E===32&&(K&4194176)!==0)?l:x}function Vi(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function Pn(a,l){switch(a){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function An(){var a=tf;return tf<<=1,!(tf&4194176)&&(tf=128),a}function Dn(){var a=nf;return nf<<=1,!(nf&62914560)&&(nf=4194304),a}function jt(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function Mr(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Hi(a,l,f,x,E,N){var K=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var pe=a.entanglements,Xe=a.expirationTimes,Ot=a.hiddenUpdates;for(f=K&~f;0<f;){var Sn=31-Wo(f),kn=1<<Sn;pe[Sn]=0,Xe[Sn]=-1;var Hn=Ot[Sn];if(Hn!==null)for(Ot[Sn]=null,Sn=0;Sn<Hn.length;Sn++){var pr=Hn[Sn];pr!==null&&(pr.lane&=-536870913)}f&=~kn}x!==0&&Rr(a,x,0),N!==0&&E===0&&a.tag!==0&&(a.suspendedLanes|=N&~(K&~l))}function Rr(a,l,f){a.pendingLanes|=l,a.suspendedLanes&=~l;var x=31-Wo(l);a.entangledLanes|=l,a.entanglements[x]=a.entanglements[x]|1073741824|f&4194218}function qt(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var x=31-Wo(f),E=1<<x;E&l|a[x]&l&&(a[x]|=l),f&=~E}}function Kn(a){return a&=-a,2<a?8<a?a&134217727?32:268435456:8:2}function $n(a){if(rl&&typeof rl.onCommitFiberRoot=="function")try{rl.onCommitFiberRoot(Fc,a,void 0,(a.current.flags&128)===128)}catch(l){}}function pi(a){if(typeof ah=="function"&&hs(a),rl&&typeof rl.setStrictMode=="function")try{rl.setStrictMode(Fc,a)}catch(l){}}function ii(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}function Er(a,l){if(typeof a=="object"&&a!==null){var f=oh.get(a);return f!==void 0?f:(l={value:a,source:l,stack:Mt(l)},oh.set(a,l),l)}return{value:a,source:l,stack:Mt(l)}}function Lr(a,l){Qo[zc++]=af,Qo[zc++]=Gu,Gu=a,af=l}function Ha(a,l,f){Vs[Ps++]=yc,Vs[Ps++]=Gs,Vs[Ps++]=Hc,Hc=a;var x=yc;a=Gs;var E=32-Wo(x)-1;x&=~(1<<E),f+=1;var N=32-Wo(l)+E;if(30<N){var K=E-E%5;N=(x&(1<<K)-1).toString(32),x>>=K,E-=K,yc=1<<32-Wo(l)+E|f<<E|x,Gs=N+a}else yc=1<<N|f<<E|x,Gs=a}function xt(a){a.return!==null&&(Lr(a,1),Ha(a,1,0))}function Kt(a){for(;a===Gu;)Gu=Qo[--zc],Qo[zc]=null,af=Qo[--zc],Qo[zc]=null;for(;a===Hc;)Hc=Vs[--Ps],Vs[Ps]=null,Gs=Vs[--Ps],Vs[Ps]=null,yc=Vs[--Ps],Vs[Ps]=null}function En(a,l){Nt(Zc,l),Nt(bd,a),Nt(es,null),a=yi(l),C(es),Nt(es,a)}function rn(){C(es),C(bd),C(Zc)}function Mn(a){a.memoizedState!==null&&Nt(ks,a);var l=es.current,f=kr(l,a.type);l!==f&&(Nt(bd,a),Nt(es,f))}function Ci(a){bd.current===a&&(C(es),C(bd)),ks.current===a&&(C(ks),Wr?_e._currentValue=Pi:_e._currentValue2=Pi)}function Rn(a){var l=Error(j(418,""));throw Za(Er(l,a)),_d}function sr(a,l){if(!We)throw Error(j(175));Qr(a.stateNode,a.type,a.memoizedProps,l,a)||Rn(a)}function Yr(a){for(Ws=a.return;Ws;)switch(Ws.tag){case 3:case 27:Cl=!0;return;case 5:case 13:Cl=!1;return;default:Ws=Ws.return}}function Ir(a){if(!We||a!==Ws)return!1;if(!ya)return Yr(a),ya=!0,!1;var l=!1;if(Ss?a.tag!==3&&a.tag!==27&&(a.tag!==5||qo(a.type)&&!ai(a.type,a.memoizedProps))&&(l=!0):a.tag!==3&&(a.tag!==5||qo(a.type)&&!ai(a.type,a.memoizedProps))&&(l=!0),l&&_s&&Rn(a),Yr(a),a.tag===13){if(!We)throw Error(j(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(j(317));_s=il(a)}else _s=Ws?wr(a.stateNode):null;return!0}function Yi(){We&&(_s=Ws=null,ya=!1)}function Za(a){El===null?El=[a]:El.push(a)}function ma(){for(var a=ku,l=of=ku=0;l<a;){var f=Tl[l];Tl[l++]=null;var x=Tl[l];Tl[l++]=null;var E=Tl[l];Tl[l++]=null;var N=Tl[l];if(Tl[l++]=null,x!==null&&E!==null){var K=x.pending;K===null?E.next=E:(E.next=K.next,K.next=E),x.pending=E}N!==0&&Pr(f,E,N)}}function xr(a,l,f,x){Tl[ku++]=a,Tl[ku++]=l,Tl[ku++]=f,Tl[ku++]=x,of|=x,a.lanes|=x,a=a.alternate,a!==null&&(a.lanes|=x)}function ta(a,l,f,x){return xr(a,l,f,x),Cr(a)}function qi(a,l){return xr(a,null,null,l),Cr(a)}function Pr(a,l,f){a.lanes|=f;var x=a.alternate;x!==null&&(x.lanes|=f);for(var E=!1,N=a.return;N!==null;)N.childLanes|=f,x=N.alternate,x!==null&&(x.childLanes|=f),N.tag===22&&(a=N.stateNode,a===null||a._visibility&1||(E=!0)),a=N,N=N.return;E&&l!==null&&a.tag===3&&(N=a.stateNode,E=31-Wo(f),N=N.hiddenUpdates,a=N[E],a===null?N[E]=[l]:a.push(l),l.lane=f|536870912)}function Cr(a){if(50<Ld)throw Ld=0,jf=null,Error(j(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}function lr(a){a!==Wu&&a.next===null&&(Wu===null?sf=Wu=a:Wu=Wu.next=a),Uf=!0,Md||(Md=!0,nr(la))}function ba(a,l){if(!sh&&Uf){sh=!0;do for(var f=!1,x=sf;x!==null;){if(!l)if(a!==0){var E=x.pendingLanes;if(E===0)var N=0;else{var K=x.suspendedLanes,pe=x.pingedLanes;N=(1<<31-Wo(42|a)+1)-1,N&=E&~(K&~pe),N=N&201326677?N&201326677|1:N?N|2:0}N!==0&&(f=!0,yo(x,N))}else N=ra,N=O(x,x===La?N:0),!(N&3)||Vi(x,N)||(f=!0,yo(x,N));x=x.next}while(f);sh=!1}}function la(){Uf=Md=!1;var a=0;Ed!==0&&(ci()&&(a=Ed),Ed=0);for(var l=hl(),f=null,x=sf;x!==null;){var E=x.next,N=Ur(x,l);N===0?(x.next=null,f===null?sf=E:f.next=E,E===null&&(Wu=f)):(f=x,(a!==0||N&3)&&(Uf=!0)),x=E}ba(a,!1)}function Ur(a,l){for(var f=a.suspendedLanes,x=a.pingedLanes,E=a.expirationTimes,N=a.pendingLanes&-62914561;0<N;){var K=31-Wo(N),pe=1<<K,Xe=E[K];Xe===-1?(!(pe&f)||pe&x)&&(E[K]=Pn(pe,l)):Xe<=l&&(a.expiredLanes|=pe),N&=~pe}if(l=La,f=ra,f=O(a,a===l?f:0),x=a.callbackNode,f===0||a===l&&eo===2||a.cancelPendingCommit!==null)return x!==null&&x!==null&&Lf(x),a.callbackNode=null,a.callbackPriority=0;if(!(f&3)||Vi(a,f)){if(l=f&-f,l===a.callbackPriority)return l;switch(x!==null&&Lf(x),Kn(f)){case 2:case 8:f=rf;break;case 32:f=gc;break;case 268435456:f=rh;break;default:f=gc}return x=lo.bind(null,a),f=bs(f,x),a.callbackPriority=l,a.callbackNode=f,l}return x!==null&&x!==null&&Lf(x),a.callbackPriority=2,a.callbackNode=null,2}function lo(a,l){var f=a.callbackNode;if(Us()&&a.callbackNode!==f)return null;var x=ra;return x=O(a,a===La?x:0),x===0?null:(bl(a,x,l),Ur(a,hl()),a.callbackNode!=null&&a.callbackNode===f?lo.bind(null,a):null)}function yo(a,l){if(Us())return null;bl(a,l,!0)}function nr(a){Nn?ni(function(){Wa&6?bs(bu,a):a()}):bs(bu,a)}function io(){return Ed===0&&(Ed=An()),Ed}function X(a,l){if(lf===null){var f=lf=[];lh=0,Vc=io(),Gc={status:"pending",value:void 0,then:function(x){f.push(x)}}}return lh++,l.then(xe,xe),l}function xe(){if(--lh===0&&lf!==null){Gc!==null&&(Gc.status="fulfilled");var a=lf;lf=null,Vc=0,Gc=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function It(a,l){var f=[],x={status:"pending",value:null,reason:null,then:function(E){f.push(E)}};return a.then(function(){x.status="fulfilled",x.value=l;for(var E=0;E<f.length;E++)(0,f[E])(l)},function(E){for(x.status="rejected",x.reason=E,E=0;E<f.length;E++)(0,f[E])(void 0)}),x}function Ht(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tn(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Yn(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function vi(a,l,f){var x=a.updateQueue;if(x===null)return null;if(x=x.shared,Wa&2){var E=x.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),x.pending=l,l=Cr(a),Pr(a,null,f),l}return xr(a,x,l,f),Cr(a)}function ca(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194176)!==0)){var x=l.lanes;x&=a.pendingLanes,f|=x,l.lanes=f,qt(a,f)}}function Gi(a,l){var f=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var E=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var K={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};N===null?E=N=K:N=N.next=K,f=f.next}while(f!==null);N===null?E=N=l:N=N.next=l}else E=N=l;f={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:N,shared:x.shared,callbacks:x.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}function vr(){if(ju){var a=Gc;if(a!==null)throw a}}function na(a,l,f,x){ju=!1;var E=a.updateQueue;Xl=!1;var N=E.firstBaseUpdate,K=E.lastBaseUpdate,pe=E.shared.pending;if(pe!==null){E.shared.pending=null;var Xe=pe,Ot=Xe.next;Xe.next=null,K===null?N=Ot:K.next=Ot,K=Xe;var Sn=a.alternate;Sn!==null&&(Sn=Sn.updateQueue,pe=Sn.lastBaseUpdate,pe!==K&&(pe===null?Sn.firstBaseUpdate=Ot:pe.next=Ot,Sn.lastBaseUpdate=Xe))}if(N!==null){var kn=E.baseState;K=0,Sn=Ot=Xe=null,pe=N;do{var Hn=pe.lane&-536870913,pr=Hn!==pe.lane;if(pr?(ra&Hn)===Hn:(x&Hn)===Hn){Hn!==0&&Hn===Vc&&(ju=!0),Sn!==null&&(Sn=Sn.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Pl=a,Qu=pe;Hn=l;var Jc=f;switch(Qu.tag){case 1:if(Pl=Qu.payload,typeof Pl=="function"){kn=Pl.call(Jc,kn,Hn);break e}kn=Pl;break e;case 3:Pl.flags=Pl.flags&-65537|128;case 0:if(Pl=Qu.payload,Hn=typeof Pl=="function"?Pl.call(Jc,kn,Hn):Pl,Hn==null)break e;kn=ct({},kn,Hn);break e;case 2:Xl=!0}}Hn=pe.callback,Hn!==null&&(a.flags|=64,pr&&(a.flags|=8192),pr=E.callbacks,pr===null?E.callbacks=[Hn]:pr.push(Hn))}else pr={lane:Hn,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},Sn===null?(Ot=Sn=pr,Xe=kn):Sn=Sn.next=pr,K|=Hn;if(pe=pe.next,pe===null){if(pe=E.shared.pending,pe===null)break;pr=pe,pe=pr.next,pr.next=null,E.lastBaseUpdate=pr,E.shared.pending=null}}while(!0);Sn===null&&(Xe=kn),E.baseState=Xe,E.firstBaseUpdate=Ot,E.lastBaseUpdate=Sn,N===null&&(E.shared.lanes=0),Kc|=K,a.lanes=K,a.memoizedState=kn}}function Nr(a,l){if(typeof a!="function")throw Error(j(191,a));a.call(l)}function xo(a,l){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)Nr(f[a],l)}function Va(a,l){if(Jo(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),x=Object.keys(l);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var E=f[x];if(!_u.call(l,E)||!Jo(a[E],l[E]))return!1}return!0}function va(a){return a=a.status,a==="fulfilled"||a==="rejected"}function os(){}function co(a,l,f){switch(f=a[f],f===void 0?a.push(l):f!==l&&(l.then(os,os),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,a===Mu?Error(j(483)):a;default:if(typeof l.status=="string")l.then(os,os);else{if(a=La,a!==null&&100<a.shellSuspendCounter)throw Error(j(482));a=l,a.status="pending",a.then(function(x){if(l.status==="pending"){var E=l;E.status="fulfilled",E.value=x}},function(x){if(l.status==="pending"){var E=l;E.status="rejected",E.reason=x}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,a===Mu?Error(j(483)):a}throw Eu=l,Mu}}function ss(){if(Eu===null)throw Error(j(459));var a=Eu;return Eu=null,a}function ua(a){var l=Td;return Td+=1,kc===null&&(kc=[]),co(kc,a,l)}function $a(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Ka(a,l){throw l.$$typeof===Ye?Error(j(525)):(a=Object.prototype.toString.call(l),Error(j(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function Co(a){var l=a._init;return l(a._payload)}function uo(a){function l(nt,Ge){if(a){var mt=nt.deletions;mt===null?(nt.deletions=[Ge],nt.flags|=16):mt.push(Ge)}}function f(nt,Ge){if(!a)return null;for(;Ge!==null;)l(nt,Ge),Ge=Ge.sibling;return null}function x(nt){for(var Ge=new Map;nt!==null;)nt.key!==null?Ge.set(nt.key,nt):Ge.set(nt.index,nt),nt=nt.sibling;return Ge}function E(nt,Ge){return nt=R(nt,Ge),nt.index=0,nt.sibling=null,nt}function N(nt,Ge,mt){return nt.index=mt,a?(mt=nt.alternate,mt!==null?(mt=mt.index,mt<Ge?(nt.flags|=33554434,Ge):mt):(nt.flags|=33554434,Ge)):(nt.flags|=1048576,Ge)}function K(nt){return a&&nt.alternate===null&&(nt.flags|=33554434),nt}function pe(nt,Ge,mt,fn){return Ge===null||Ge.tag!==6?(Ge=fe(mt,nt.mode,fn),Ge.return=nt,Ge):(Ge=E(Ge,mt),Ge.return=nt,Ge)}function Xe(nt,Ge,mt,fn){var bi=mt.type;return bi===qe?Sn(nt,Ge,mt.props.children,fn,mt.key):Ge!==null&&(Ge.elementType===bi||typeof bi=="object"&&bi!==null&&bi.$$typeof===Lt&&Co(bi)===Ge.type)?(Ge=E(Ge,mt.props),$a(Ge,mt),Ge.return=nt,Ge):(Ge=U(mt.type,mt.key,mt.props,null,nt.mode,fn),$a(Ge,mt),Ge.return=nt,Ge)}function Ot(nt,Ge,mt,fn){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==mt.containerInfo||Ge.stateNode.implementation!==mt.implementation?(Ge=ae(mt,nt.mode,fn),Ge.return=nt,Ge):(Ge=E(Ge,mt.children||[]),Ge.return=nt,Ge)}function Sn(nt,Ge,mt,fn,bi){return Ge===null||Ge.tag!==7?(Ge=q(mt,nt.mode,fn,bi),Ge.return=nt,Ge):(Ge=E(Ge,mt),Ge.return=nt,Ge)}function kn(nt,Ge,mt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=fe(""+Ge,nt.mode,mt),Ge.return=nt,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case Ee:return mt=U(Ge.type,Ge.key,Ge.props,null,nt.mode,mt),$a(mt,Ge),mt.return=nt,mt;case bt:return Ge=ae(Ge,nt.mode,mt),Ge.return=nt,Ge;case Lt:var fn=Ge._init;return Ge=fn(Ge._payload),kn(nt,Ge,mt)}if(Gr(Ge)||en(Ge))return Ge=q(Ge,nt.mode,mt,null),Ge.return=nt,Ge;if(typeof Ge.then=="function")return kn(nt,ua(Ge),mt);if(Ge.$$typeof===Ze)return kn(nt,wc(nt,Ge),mt);Ka(nt,Ge)}return null}function Hn(nt,Ge,mt,fn){var bi=Ge!==null?Ge.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return bi!==null?null:pe(nt,Ge,""+mt,fn);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case Ee:return mt.key===bi?Xe(nt,Ge,mt,fn):null;case bt:return mt.key===bi?Ot(nt,Ge,mt,fn):null;case Lt:return bi=mt._init,mt=bi(mt._payload),Hn(nt,Ge,mt,fn)}if(Gr(mt)||en(mt))return bi!==null?null:Sn(nt,Ge,mt,fn,null);if(typeof mt.then=="function")return Hn(nt,Ge,ua(mt),fn);if(mt.$$typeof===Ze)return Hn(nt,Ge,wc(nt,mt),fn);Ka(nt,mt)}return null}function pr(nt,Ge,mt,fn,bi){if(typeof fn=="string"&&fn!==""||typeof fn=="number"||typeof fn=="bigint")return nt=nt.get(mt)||null,pe(Ge,nt,""+fn,bi);if(typeof fn=="object"&&fn!==null){switch(fn.$$typeof){case Ee:return nt=nt.get(fn.key===null?mt:fn.key)||null,Xe(Ge,nt,fn,bi);case bt:return nt=nt.get(fn.key===null?mt:fn.key)||null,Ot(Ge,nt,fn,bi);case Lt:var to=fn._init;return fn=to(fn._payload),pr(nt,Ge,mt,fn,bi)}if(Gr(fn)||en(fn))return nt=nt.get(mt)||null,Sn(Ge,nt,fn,bi,null);if(typeof fn.then=="function")return pr(nt,Ge,mt,ua(fn),bi);if(fn.$$typeof===Ze)return pr(nt,Ge,mt,wc(Ge,fn),bi);Ka(Ge,fn)}return null}function Pl(nt,Ge,mt,fn){for(var bi=null,to=null,$i=Ge,mr=Ge=0,no=null;$i!==null&&mr<mt.length;mr++){$i.index>mr?(no=$i,$i=null):no=$i.sibling;var aa=Hn(nt,$i,mt[mr],fn);if(aa===null){$i===null&&($i=no);break}a&&$i&&aa.alternate===null&&l(nt,$i),Ge=N(aa,Ge,mr),to===null?bi=aa:to.sibling=aa,to=aa,$i=no}if(mr===mt.length)return f(nt,$i),ya&&Lr(nt,mr),bi;if($i===null){for(;mr<mt.length;mr++)$i=kn(nt,mt[mr],fn),$i!==null&&(Ge=N($i,Ge,mr),to===null?bi=$i:to.sibling=$i,to=$i);return ya&&Lr(nt,mr),bi}for($i=x($i);mr<mt.length;mr++)no=pr($i,nt,mr,mt[mr],fn),no!==null&&(a&&no.alternate!==null&&$i.delete(no.key===null?mr:no.key),Ge=N(no,Ge,mr),to===null?bi=no:to.sibling=no,to=no);return a&&$i.forEach(function(ec){return l(nt,ec)}),ya&&Lr(nt,mr),bi}function Qu(nt,Ge,mt,fn){if(mt==null)throw Error(j(151));for(var bi=null,to=null,$i=Ge,mr=Ge=0,no=null,aa=mt.next();$i!==null&&!aa.done;mr++,aa=mt.next()){$i.index>mr?(no=$i,$i=null):no=$i.sibling;var ec=Hn(nt,$i,aa.value,fn);if(ec===null){$i===null&&($i=no);break}a&&$i&&ec.alternate===null&&l(nt,$i),Ge=N(ec,Ge,mr),to===null?bi=ec:to.sibling=ec,to=ec,$i=no}if(aa.done)return f(nt,$i),ya&&Lr(nt,mr),bi;if($i===null){for(;!aa.done;mr++,aa=mt.next())aa=kn(nt,aa.value,fn),aa!==null&&(Ge=N(aa,Ge,mr),to===null?bi=aa:to.sibling=aa,to=aa);return ya&&Lr(nt,mr),bi}for($i=x($i);!aa.done;mr++,aa=mt.next())aa=pr($i,nt,mr,aa.value,fn),aa!==null&&(a&&aa.alternate!==null&&$i.delete(aa.key===null?mr:aa.key),Ge=N(aa,Ge,mr),to===null?bi=aa:to.sibling=aa,to=aa);return a&&$i.forEach(function(wh){return l(nt,wh)}),ya&&Lr(nt,mr),bi}function Jc(nt,Ge,mt,fn){if(typeof mt=="object"&&mt!==null&&mt.type===qe&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case Ee:e:{for(var bi=mt.key;Ge!==null;){if(Ge.key===bi){if(bi=mt.type,bi===qe){if(Ge.tag===7){f(nt,Ge.sibling),fn=E(Ge,mt.props.children),fn.return=nt,nt=fn;break e}}else if(Ge.elementType===bi||typeof bi=="object"&&bi!==null&&bi.$$typeof===Lt&&Co(bi)===Ge.type){f(nt,Ge.sibling),fn=E(Ge,mt.props),$a(fn,mt),fn.return=nt,nt=fn;break e}f(nt,Ge);break}else l(nt,Ge);Ge=Ge.sibling}mt.type===qe?(fn=q(mt.props.children,nt.mode,fn,mt.key),fn.return=nt,nt=fn):(fn=U(mt.type,mt.key,mt.props,null,nt.mode,fn),$a(fn,mt),fn.return=nt,nt=fn)}return K(nt);case bt:e:{for(bi=mt.key;Ge!==null;){if(Ge.key===bi)if(Ge.tag===4&&Ge.stateNode.containerInfo===mt.containerInfo&&Ge.stateNode.implementation===mt.implementation){f(nt,Ge.sibling),fn=E(Ge,mt.children||[]),fn.return=nt,nt=fn;break e}else{f(nt,Ge);break}else l(nt,Ge);Ge=Ge.sibling}fn=ae(mt,nt.mode,fn),fn.return=nt,nt=fn}return K(nt);case Lt:return bi=mt._init,mt=bi(mt._payload),Jc(nt,Ge,mt,fn)}if(Gr(mt))return Pl(nt,Ge,mt,fn);if(en(mt)){if(bi=en(mt),typeof bi!="function")throw Error(j(150));return mt=bi.call(mt),Qu(nt,Ge,mt,fn)}if(typeof mt.then=="function")return Jc(nt,Ge,ua(mt),fn);if(mt.$$typeof===Ze)return Jc(nt,Ge,wc(nt,mt),fn);Ka(nt,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,Ge!==null&&Ge.tag===6?(f(nt,Ge.sibling),fn=E(Ge,mt),fn.return=nt,nt=fn):(f(nt,Ge),fn=fe(mt,nt.mode,fn),fn.return=nt,nt=fn),K(nt)):f(nt,Ge)}return function(nt,Ge,mt,fn){try{Td=0;var bi=Jc(nt,Ge,mt,fn);return kc=null,bi}catch($i){if($i===Mu)throw $i;var to=mn(29,$i,null,nt.mode);return to.lanes=fn,to.return=nt,to}finally{}}}function $o(a,l){a=is,Nt(Ad,a),Nt(Wc,l),is=a|l.baseLanes}function Zo(){Nt(Ad,is),Nt(Wc,Wc.current)}function fo(){is=Ad.current,C(Wc),C(Ad)}function Ae(a){var l=a.alternate;Nt(jo,jo.current&1),Nt(al,a),$l===null&&(l===null||Wc.current!==null||l.memoizedState!==null)&&($l=a)}function Yt(a){if(a.tag===22){if(Nt(jo,jo.current),Nt(al,a),$l===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&($l=a)}}else zn(a)}function zn(){Nt(jo,jo.current),Nt(al,al.current)}function Ln(a){C(al),$l===a&&($l=null),C(jo)}function gr(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Bn(f)||ri(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Ni(){throw Error(j(321))}function fr(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!Jo(a[f],l[f]))return!1;return!0}function qr(a,l,f,x,E,N){return xc=N,Ar=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,sn.H=a===null||a.memoizedState===null?Cu:Sc,cc=!1,N=f(x,E),cc=!1,Rd&&(N=Oa(l,f,x,E)),ho(a),N}function ho(a){sn.H=Kl;var l=Fa!==null&&Fa.next!==null;if(xc=0,ts=Fa=Ar=null,Bf=!1,Id=0,Pd=null,l)throw Error(j(300));a===null||Xo||(a=a.dependencies,a!==null&&od(a)&&(Xo=!0))}function Oa(a,l,f,x){Ar=a;var E=0;do{if(Rd&&(Pd=null),Id=0,Rd=!1,25<=E)throw Error(j(301));if(E+=1,ts=Fa=null,a.updateQueue!=null){var N=a.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}sn.H=jc,N=l(f,x)}while(Rd);return N}function Vo(){var a=sn.H,l=a.useState()[0];return l=typeof l.then=="function"?Oi(l):l,a=a.useState()[0],(Fa!==null?Fa.memoizedState:null)!==a&&(Ar.flags|=1024),l}function Te(){var a=Ff!==0;return Ff=0,a}function _t(a,l,f){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~f}function Et(a){if(Bf){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Bf=!1}xc=0,ts=Fa=Ar=null,Rd=!1,Id=Ff=0,Pd=null}function lt(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ts===null?Ar.memoizedState=ts=a:ts=ts.next=a,ts}function an(){if(Fa===null){var a=Ar.alternate;a=a!==null?a.memoizedState:null}else a=Fa.next;var l=ts===null?Ar.memoizedState:ts.next;if(l!==null)ts=l,Fa=a;else{if(a===null)throw Ar.alternate===null?Error(j(467)):Error(j(310));Fa=a,a={memoizedState:Fa.memoizedState,baseState:Fa.baseState,baseQueue:Fa.baseQueue,queue:Fa.queue,next:null},ts===null?Ar.memoizedState=ts=a:ts=ts.next=a}return ts}function Oi(a){var l=Id;return Id+=1,Pd===null&&(Pd=[]),a=co(Pd,a,l),l=Ar,(ts===null?l.memoizedState:ts.next)===null&&(l=l.alternate,sn.H=l===null||l.memoizedState===null?Cu:Sc),a}function Br(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Oi(a);if(a.$$typeof===Ze)return ga(a)}throw Error(j(438,String(a)))}function Fr(a){var l=null,f=Ar.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var x=Ar.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(l={data:x.data.map(function(E){return E.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=$u(),Ar.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(a),x=0;x<a;x++)f[x]=Rt;return l.index++,f}function _i(a,l){return typeof l=="function"?l(a):l}function Ai(a){var l=an();return cr(l,Fa,a)}function cr(a,l,f){var x=a.queue;if(x===null)throw Error(j(311));x.lastRenderedReducer=f;var E=a.baseQueue,N=x.pending;if(N!==null){if(E!==null){var K=E.next;E.next=N.next,N.next=K}l.baseQueue=E=N,x.pending=null}if(N=a.baseState,E===null)a.memoizedState=N;else{l=E.next;var pe=K=null,Xe=null,Ot=l,Sn=!1;do{var kn=Ot.lane&-536870913;if(kn!==Ot.lane?(ra&kn)===kn:(xc&kn)===kn){var Hn=Ot.revertLane;if(Hn===0)Xe!==null&&(Xe=Xe.next={lane:0,revertLane:0,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null}),kn===Vc&&(Sn=!0);else if((xc&Hn)===Hn){Ot=Ot.next,Hn===Vc&&(Sn=!0);continue}else kn={lane:0,revertLane:Ot.revertLane,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null},Xe===null?(pe=Xe=kn,K=N):Xe=Xe.next=kn,Ar.lanes|=Hn,Kc|=Hn;kn=Ot.action,cc&&f(N,kn),N=Ot.hasEagerState?Ot.eagerState:f(N,kn)}else Hn={lane:kn,revertLane:Ot.revertLane,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null},Xe===null?(pe=Xe=Hn,K=N):Xe=Xe.next=Hn,Ar.lanes|=kn,Kc|=kn;Ot=Ot.next}while(Ot!==null&&Ot!==l);if(Xe===null?K=N:Xe.next=pe,!Jo(N,a.memoizedState)&&(Xo=!0,Sn&&(f=Gc,f!==null)))throw f;a.memoizedState=N,a.baseState=K,a.baseQueue=Xe,x.lastRenderedState=N}return E===null&&(x.lanes=0),[a.memoizedState,x.dispatch]}function Aa(a){var l=an(),f=l.queue;if(f===null)throw Error(j(311));f.lastRenderedReducer=a;var x=f.dispatch,E=f.pending,N=l.memoizedState;if(E!==null){f.pending=null;var K=E=E.next;do N=a(N,K.action),K=K.next;while(K!==E);Jo(N,l.memoizedState)||(Xo=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),f.lastRenderedState=N}return[N,x]}function yr(a,l,f){var x=Ar,E=an(),N=ya;if(N){if(f===void 0)throw Error(j(407));f=f()}else f=l();var K=!Jo((Fa||E).memoizedState,f);if(K&&(E.memoizedState=f,Xo=!0),E=E.queue,Gt(To.bind(null,x,E,a),[a]),E.getSnapshot!==l||K||ts!==null&&ts.memoizedState.tag&1){if(x.flags|=2048,F(9,Do.bind(null,x,E,f,l),{destroy:void 0},null),La===null)throw Error(j(349));N||xc&60||ro(x,l,f)}return f}function ro(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=Ar.updateQueue,l===null?(l=$u(),Ar.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function Do(a,l,f,x){l.value=f,l.getSnapshot=x,Go(l)&&zr(a)}function To(a,l,f){return f(function(){Go(l)&&zr(a)})}function Go(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!Jo(a,f)}catch(x){return!0}}function zr(a){var l=qi(a,2);l!==null&&Ia(l,a,2)}function po(a){var l=lt();if(typeof a=="function"){var f=a;if(a=f(),cc){pi(!0);try{f()}finally{pi(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:a},l}function da(a,l,f,x){return a.baseState=f,cr(a,Fa,typeof x=="function"?x:_i)}function Di(a,l,f,x,E){if(Sr(a))throw Error(j(485));if(a=l.action,a!==null){var N={payload:E,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){N.listeners.push(K)}};sn.T!==null?f(!0):N.isTransition=!1,x(N),f=l.pending,f===null?(N.next=l.pending=N,Ya(l,N)):(N.next=f.next,l.pending=f.next=N)}}function Ya(a,l){var f=l.action,x=l.payload,E=a.state;if(l.isTransition){var N=sn.T,K={};sn.T=K;try{var pe=f(E,x),Xe=sn.S;Xe!==null&&Xe(K,pe),So(a,l,pe)}catch(Ot){Es(a,l,Ot)}finally{sn.T=N}}else try{N=f(E,x),So(a,l,N)}catch(Ot){Es(a,l,Ot)}}function So(a,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(x){_a(a,l,x)},function(x){return Es(a,l,x)}):_a(a,l,f)}function _a(a,l,f){l.status="fulfilled",l.value=f,Bl(l),a.state=f,l=a.pending,l!==null&&(f=l.next,f===l?a.pending=null:(f=f.next,l.next=f,Ya(a,f)))}function Es(a,l,f){var x=a.pending;if(a.pending=null,x!==null){x=x.next;do l.status="rejected",l.reason=f,Bl(l),l=l.next;while(l!==x)}a.action=null}function Bl(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function Cs(a,l){return l}function ls(a,l){if(ya){var f=La.formState;if(f!==null){e:{var x=Ar;if(ya){if(_s){var E=zi(_s,Cl);if(E){_s=wr(E),x=Si(E);break e}}Rn(x)}x=!1}x&&(l=f[0])}}f=lt(),f.memoizedState=f.baseState=l,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:l},f.queue=x,f=ir.bind(null,Ar,x),x.dispatch=f,x=po(!1);var N=Vr.bind(null,Ar,!1,x.queue);return x=lt(),E={state:l,dispatch:null,action:a,pending:null},x.queue=E,f=Di.bind(null,Ar,E,N,f),E.dispatch=f,x.memoizedState=a,[l,f,!1]}function $s(a){var l=an();return Lo(l,Fa,a)}function Lo(a,l,f){l=cr(a,l,Cs)[0],a=Ai(_i)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?Oi(l):l;var x=an(),E=x.queue,N=E.dispatch;return f!==x.memoizedState&&(Ar.flags|=2048,F(9,Ma.bind(null,E,f),{destroy:void 0},null)),[l,N,a]}function Ma(a,l){a.action=l}function wo(a){var l=an(),f=Fa;if(f!==null)return Lo(l,f,a);an(),l=l.memoizedState,f=an();var x=f.queue.dispatch;return f.memoizedState=a,[l,x,!1]}function F(a,l,f,x){return a={tag:a,create:l,inst:f,deps:x,next:null},l=Ar.updateQueue,l===null&&(l=$u(),Ar.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=a.next=a:(x=f.next,f.next=a,a.next=x,l.lastEffect=a),a}function G(){return an().memoizedState}function ne(a,l,f,x){var E=lt();Ar.flags|=a,E.memoizedState=F(1|l,f,{destroy:void 0},x===void 0?null:x)}function Ne(a,l,f,x){var E=an();x=x===void 0?null:x;var N=E.memoizedState.inst;Fa!==null&&x!==null&&fr(x,Fa.memoizedState.deps)?E.memoizedState=F(l,f,N,x):(Ar.flags|=a,E.memoizedState=F(1|l,f,N,x))}function it(a,l){ne(8390656,8,a,l)}function Gt(a,l){Ne(2048,8,a,l)}function Jn(a,l){return Ne(4,2,a,l)}function Zn(a,l){return Ne(4,4,a,l)}function Xt(a,l){if(typeof l=="function"){a=a();var f=l(a);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function jn(a,l,f){f=f!=null?f.concat([a]):null,Ne(4,4,Xt.bind(null,l,a),f)}function xn(){}function Ut(a,l){var f=an();l=l===void 0?null:l;var x=f.memoizedState;return l!==null&&fr(l,x[1])?x[0]:(f.memoizedState=[a,l],a)}function St(a,l){var f=an();l=l===void 0?null:l;var x=f.memoizedState;if(l!==null&&fr(l,x[1]))return x[0];if(x=a(),cc){pi(!0);try{a()}finally{pi(!1)}}return f.memoizedState=[x,l],x}function li(a,l,f){return f===void 0||xc&1073741824?a.memoizedState=l:(a.memoizedState=f,a=fc(),Ar.lanes|=a,Kc|=a,f)}function ur(a,l,f,x){return Jo(f,l)?f:Wc.current!==null?(a=li(a,f,x),Jo(a,l)||(Xo=!0),a):xc&42?(a=fc(),Ar.lanes|=a,Kc|=a,l):(Xo=!0,a.memoizedState=f)}function hr(a,l,f,x,E){var N=ti();gt(N!==0&&8>N?N:8);var K=sn.T,pe={};sn.T=pe,Vr(a,!1,l,f);try{var Xe=E(),Ot=sn.S;if(Ot!==null&&Ot(pe,Xe),Xe!==null&&typeof Xe=="object"&&typeof Xe.then=="function"){var Sn=It(Xe,x);Ea(a,l,Sn,Ro(a))}else Ea(a,l,x,Ro(a))}catch(kn){Ea(a,l,{then:function(){},status:"rejected",reason:kn},Ro())}finally{gt(N),sn.T=K}}function ki(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:Pi,baseState:Pi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:Pi},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:f},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function Xn(){return ga(_e)}function Gn(){return an().memoizedState}function gi(){return an().memoizedState}function Hr(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var f=Ro();a=Yn(f);var x=vi(l,a,f);x!==null&&(Ia(x,l,f),ca(x,l,f)),l={cache:Zl()},a.payload=l;return}l=l.return}}function Tr(a,l,f){var x=Ro();f={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Sr(a)?fa(l,f):(f=ta(a,l,f,x),f!==null&&(Ia(f,a,x),ko(f,l,x)))}function ir(a,l,f){var x=Ro();Ea(a,l,f,x)}function Ea(a,l,f,x){var E={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Sr(a))fa(l,E);else{var N=a.alternate;if(a.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var K=l.lastRenderedState,pe=N(K,f);if(E.hasEagerState=!0,E.eagerState=pe,Jo(pe,K))return xr(a,l,E,0),La===null&&ma(),!1}catch(Xe){}finally{}if(f=ta(a,l,E,x),f!==null)return Ia(f,a,x),ko(f,l,x),!0}return!1}function Vr(a,l,f,x){if(x={lane:2,revertLane:io(),action:x,hasEagerState:!1,eagerState:null,next:null},Sr(a)){if(l)throw Error(j(479))}else l=ta(a,f,x,2),l!==null&&Ia(l,a,2)}function Sr(a){var l=a.alternate;return a===Ar||l!==null&&l===Ar}function fa(a,l){Rd=Bf=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function ko(a,l,f){if(f&4194176){var x=l.lanes;x&=a.pendingLanes,f|=x,l.lanes=f,qt(a,f)}}function qa(a,l,f,x){l=a.memoizedState,f=f(x,l),f=f==null?l:ct({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}function Ko(a,l,f,x,E,N,K){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,N,K):l.prototype&&l.prototype.isPureReactComponent?!Va(f,x)||!Va(E,N):!0}function br(a,l,f,x){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,x),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,x),l.state!==a&&cf.enqueueReplaceState(l,l.state,null)}function Jr(a,l){var f=l;if("ref"in l){f={};for(var x in l)x!=="ref"&&(f[x]=l[x])}if(a=a.defaultProps){f===l&&(f=ct({},f));for(var E in a)f[E]===void 0&&(f[E]=a[E])}return f}function Ao(a,l){try{var f=a.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(x){setTimeout(function(){throw x})}}function cs(a,l,f){try{var x=a.onCaughtError;x(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Ks(a,l,f){return f=Yn(f),f.tag=3,f.payload={element:null},f.callback=function(){Ao(a,l)},f}function vl(a){return a=Yn(a),a.tag=3,a}function Fl(a,l,f,x){var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var N=x.value;a.payload=function(){return E(N)},a.callback=function(){cs(l,f,x)}}var K=f.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(a.callback=function(){cs(l,f,x),typeof E!="function"&&(Ql===null?Ql=new Set([this]):Ql.add(this));var pe=x.stack;this.componentDidCatch(x.value,{componentStack:pe!==null?pe:""})})}function Cc(a,l,f,x,E){if(f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(l=f.alternate,l!==null&&ru(l,f,E,!0),f=al.current,f!==null){switch(f.tag){case 13:return $l===null?Uu():f.alternate===null&&Mo===0&&(Mo=3),f.flags&=-257,f.flags|=65536,f.lanes=E,x===Xu?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([x]):l.add(x),pd(a,x,E)),!1;case 22:return f.flags|=65536,x===Xu?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([x])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([x]):f.add(x)),pd(a,x,E)),!1}throw Error(j(435,f.tag))}return pd(a,x,E),Uu(),!1}if(ya)return l=al.current,l!==null?(!(l.flags&65536)&&(l.flags|=256),l.flags|=65536,l.lanes=E,x!==_d&&(a=Error(j(422),{cause:x}),Za(Er(a,f)))):(x!==_d&&(l=Error(j(423),{cause:x}),Za(Er(l,f))),a=a.current.alternate,a.flags|=65536,E&=-E,a.lanes|=E,x=Er(x,f),E=Ks(a.stateNode,x,E),Gi(a,E),Mo!==4&&(Mo=2)),!1;var N=Error(j(520),{cause:x});if(N=Er(N,f),Yc===null?Yc=[N]:Yc.push(N),Mo!==4&&(Mo=2),l===null)return!0;x=Er(x,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,a=E&-E,f.lanes|=a,a=Ks(f.stateNode,x,a),Gi(f,a),!1;case 1:if(l=f.type,N=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ql===null||!Ql.has(N))))return f.flags|=65536,E&=-E,f.lanes|=E,E=vl(E),Fl(E,a,f,x),Gi(f,E),!1}f=f.return}while(f!==null);return!1}function mo(a,l,f,x){l.child=a===null?wd(l,null,f,x):Ns(l,a.child,f,x)}function Ra(a,l,f,x,E){f=f.render;var N=l.ref;if("ref"in x){var K={};for(var pe in x)pe!=="ref"&&(K[pe]=x[pe])}else K=x;return Ts(l),x=qr(a,l,f,K,N,E),pe=Te(),a!==null&&!Xo?(_t(a,l,E),Hl(a,l,E)):(ya&&pe&&xt(l),l.flags|=1,mo(a,l,x,E),l.child)}function Qn(a,l,f,x,E){if(a===null){var N=f.type;return typeof N=="function"&&!g(N)&&N.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=N,dr(a,l,N,x,E)):(a=U(f.type,null,x,l,l.mode,E),a.ref=l.ref,a.return=l,l.child=a)}if(N=a.child,!rd(a,E)){var K=N.memoizedProps;if(f=f.compare,f=f!==null?f:Va,f(K,x)&&a.ref===l.ref)return Hl(a,l,E)}return l.flags|=1,a=R(N,x),a.ref=l.ref,a.return=l,l.child=a}function dr(a,l,f,x,E){if(a!==null){var N=a.memoizedProps;if(Va(N,x)&&a.ref===l.ref)if(Xo=!1,l.pendingProps=x=N,rd(a,E))a.flags&131072&&(Xo=!0);else return l.lanes=a.lanes,Hl(a,l,E)}return Fd(a,l,f,x,E)}function Ca(a,l,f){var x=l.pendingProps,E=x.children,N=(l.stateNode._pendingVisibility&2)!==0,K=a!==null?a.memoizedState:null;if(zl(a,l),x.mode==="hidden"||N){if(l.flags&128){if(x=K!==null?K.baseLanes|f:f,a!==null){for(E=l.child=a.child,N=0;E!==null;)N=N|E.lanes|E.childLanes,E=E.sibling;l.childLanes=N&~x}else l.childLanes=0,l.child=null;return Ys(a,l,x,f)}if(f&536870912)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&au(l,K!==null?K.cachePool:null),K!==null?$o(l,K):Zo(),Yt(l);else return l.lanes=l.childLanes=536870912,Ys(a,l,K!==null?K.baseLanes|f:f,f)}else K!==null?(au(l,K.cachePool),$o(l,K),zn(l),l.memoizedState=null):(a!==null&&au(l,null),Zo(),zn(l));return mo(a,l,E,f),l.child}function Ys(a,l,f,x){var E=Ri();return E=E===null?null:{parent:Wr?Bo._currentValue:Bo._currentValue2,pool:E},l.memoizedState={baseLanes:f,cachePool:E},a!==null&&au(l,null),Zo(),Yt(l),a!==null&&ru(a,l,x,!0),null}function zl(a,l){var f=l.ref;if(f===null)a!==null&&a.ref!==null&&(l.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(j(284));(a===null||a.ref!==f)&&(l.flags|=2097664)}}function Fd(a,l,f,x,E){return Ts(l),f=qr(a,l,f,x,void 0,E),x=Te(),a!==null&&!Xo?(_t(a,l,E),Hl(a,l,E)):(ya&&x&&xt(l),l.flags|=1,mo(a,l,f,E),l.child)}function xf(a,l,f,x,E,N){return Ts(l),l.updateQueue=null,f=Oa(l,x,f,E),ho(a),x=Te(),a!==null&&!Xo?(_t(a,l,N),Hl(a,l,N)):(ya&&x&&xt(l),l.flags|=1,mo(a,l,f,N),l.child)}function Sf(a,l,f,x,E){if(Ts(l),l.stateNode===null){var N=Zs,K=f.contextType;typeof K=="object"&&K!==null&&(N=ga(K)),N=new f(x,N),l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=cf,l.stateNode=N,N._reactInternals=l,N=l.stateNode,N.props=x,N.state=l.memoizedState,N.refs={},Ht(l),K=f.contextType,N.context=typeof K=="object"&&K!==null?ga(K):Zs,N.state=l.memoizedState,K=f.getDerivedStateFromProps,typeof K=="function"&&(qa(l,f,K,x),N.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(K=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),K!==N.state&&cf.enqueueReplaceState(N,N.state,null),na(l,x,N,E),vr(),N.state=l.memoizedState),typeof N.componentDidMount=="function"&&(l.flags|=4194308),x=!0}else if(a===null){N=l.stateNode;var pe=l.memoizedProps,Xe=Jr(f,pe);N.props=Xe;var Ot=N.context,Sn=f.contextType;K=Zs,typeof Sn=="object"&&Sn!==null&&(K=ga(Sn));var kn=f.getDerivedStateFromProps;Sn=typeof kn=="function"||typeof N.getSnapshotBeforeUpdate=="function",pe=l.pendingProps!==pe,Sn||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(pe||Ot!==K)&&br(l,N,x,K),Xl=!1;var Hn=l.memoizedState;N.state=Hn,na(l,x,N,E),vr(),Ot=l.memoizedState,pe||Hn!==Ot||Xl?(typeof kn=="function"&&(qa(l,f,kn,x),Ot=l.memoizedState),(Xe=Xl||Ko(l,f,Xe,x,Hn,Ot,K))?(Sn||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=x,l.memoizedState=Ot),N.props=x,N.state=Ot,N.context=K,x=Xe):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),x=!1)}else{N=l.stateNode,Tn(a,l),K=l.memoizedProps,Sn=Jr(f,K),N.props=Sn,kn=l.pendingProps,Hn=N.context,Ot=f.contextType,Xe=Zs,typeof Ot=="object"&&Ot!==null&&(Xe=ga(Ot)),pe=f.getDerivedStateFromProps,(Ot=typeof pe=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(K!==kn||Hn!==Xe)&&br(l,N,x,Xe),Xl=!1,Hn=l.memoizedState,N.state=Hn,na(l,x,N,E),vr();var pr=l.memoizedState;K!==kn||Hn!==pr||Xl||a!==null&&a.dependencies!==null&&od(a.dependencies)?(typeof pe=="function"&&(qa(l,f,pe,x),pr=l.memoizedState),(Sn=Xl||Ko(l,f,Sn,x,Hn,pr,Xe)||a!==null&&a.dependencies!==null&&od(a.dependencies))?(Ot||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(x,pr,Xe),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(x,pr,Xe)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||K===a.memoizedProps&&Hn===a.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||K===a.memoizedProps&&Hn===a.memoizedState||(l.flags|=1024),l.memoizedProps=x,l.memoizedState=pr),N.props=x,N.state=pr,N.context=Xe,x=Sn):(typeof N.componentDidUpdate!="function"||K===a.memoizedProps&&Hn===a.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||K===a.memoizedProps&&Hn===a.memoizedState||(l.flags|=1024),x=!1)}return N=x,zl(a,l),x=(l.flags&128)!==0,N||x?(N=l.stateNode,f=x&&typeof f.getDerivedStateFromError!="function"?null:N.render(),l.flags|=1,a!==null&&x?(l.child=Ns(l,a.child,null,E),l.child=Ns(l,null,f,E)):mo(a,l,f,E),l.memoizedState=N.state,a=l.child):a=Hl(a,l,E),a}function bf(a,l,f,x){return Yi(),l.flags|=256,mo(a,l,f,x),l.child}function zd(a){return{baseLanes:a,cachePool:_f()}}function Hd(a,l,f){return a=a!==null?a.childLanes&~f:0,l&&(a|=Il),a}function Zd(a,l,f){var x=l.pendingProps,E=!1,N=(l.flags&128)!==0,K;if((K=N)||(K=a!==null&&a.memoizedState===null?!1:(jo.current&2)!==0),K&&(E=!0,l.flags&=-129),K=(l.flags&32)!==0,l.flags&=-33,a===null){if(ya){if(E?Ae(l):zn(l),ya){var pe=_s,Xe;(Xe=pe)&&(pe=vo(pe,Cl),pe!==null?(l.memoizedState={dehydrated:pe,treeContext:Hc!==null?{id:yc,overflow:Gs}:null,retryLane:536870912},Xe=mn(18,null,null,0),Xe.stateNode=pe,Xe.return=l,l.child=Xe,Ws=l,_s=null,Xe=!0):Xe=!1),Xe||Rn(l)}if(pe=l.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return ri(pe)?l.lanes=16:l.lanes=536870912,null;Ln(l)}return pe=x.children,x=x.fallback,E?(zn(l),E=l.mode,pe=nd({mode:"hidden",children:pe},E),x=q(x,E,f,null),pe.return=l,x.return=l,pe.sibling=x,l.child=pe,E=l.child,E.memoizedState=zd(f),E.childLanes=Hd(a,K,f),l.memoizedState=Zf,x):(Ae(l),ul(l,pe))}if(Xe=a.memoizedState,Xe!==null&&(pe=Xe.dehydrated,pe!==null)){if(N)l.flags&256?(Ae(l),l.flags&=-257,l=id(a,l,f)):l.memoizedState!==null?(zn(l),l.child=a.child,l.flags|=128,l=null):(zn(l),E=x.fallback,pe=l.mode,x=nd({mode:"visible",children:x.children},pe),E=q(E,pe,f,null),E.flags|=2,x.return=l,E.return=l,x.sibling=E,l.child=x,Ns(l,a.child,null,f),x=l.child,x.memoizedState=zd(f),x.childLanes=Hd(a,K,f),l.memoizedState=Zf,l=E);else if(Ae(l),ri(pe))K=qn(pe).digest,x=Error(j(419)),x.stack="",x.digest=K,Za({value:x,source:null,stack:null}),l=id(a,l,f);else if(Xo||ru(a,l,f,!1),K=(f&a.childLanes)!==0,Xo||K){if(K=La,K!==null){if(x=f&-f,x&42)x=1;else switch(x){case 2:x=1;break;case 8:x=4;break;case 32:x=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:x=64;break;case 268435456:x=134217728;break;default:x=0}if(x=x&(K.suspendedLanes|f)?0:x,x!==0&&x!==Xe.retryLane)throw Xe.retryLane=x,qi(a,x),Ia(K,a,x),Hf}Bn(pe)||Uu(),l=id(a,l,f)}else Bn(pe)?(l.flags|=128,l.child=a.child,l=Jf.bind(null,a),Mi(pe,l),l=null):(a=Xe.treeContext,We&&(_s=Da(pe),Ws=l,ya=!0,El=null,Cl=!1,a!==null&&(Vs[Ps++]=yc,Vs[Ps++]=Gs,Vs[Ps++]=Hc,yc=a.id,Gs=a.overflow,Hc=l)),l=ul(l,x.children),l.flags|=4096);return l}return E?(zn(l),E=x.fallback,pe=l.mode,Xe=a.child,N=Xe.sibling,x=R(Xe,{mode:"hidden",children:x.children}),x.subtreeFlags=Xe.subtreeFlags&31457280,N!==null?E=R(N,E):(E=q(E,pe,f,null),E.flags|=2),E.return=l,x.return=l,x.sibling=E,l.child=x,x=E,E=l.child,pe=a.child.memoizedState,pe===null?pe=zd(f):(Xe=pe.cachePool,Xe!==null?(N=Wr?Bo._currentValue:Bo._currentValue2,Xe=Xe.parent!==N?{parent:N,pool:N}:Xe):Xe=_f(),pe={baseLanes:pe.baseLanes|f,cachePool:Xe}),E.memoizedState=pe,E.childLanes=Hd(a,K,f),l.memoizedState=Zf,x):(Ae(l),f=a.child,a=f.sibling,f=R(f,{mode:"visible",children:x.children}),f.return=l,f.sibling=null,a!==null&&(K=l.deletions,K===null?(l.deletions=[a],l.flags|=16):K.push(a)),l.child=f,l.memoizedState=null,f)}function ul(a,l){return l=nd({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function nd(a,l){return $(a,l,0,null)}function id(a,l,f){return Ns(l,a.child,null,f),a=ul(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Vd(a,l,f){a.lanes|=l;var x=a.alternate;x!==null&&(x.lanes|=l),gl(a.return,l,f)}function Iu(a,l,f,x,E){var N=a.memoizedState;N===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:E}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=x,N.tail=f,N.tailMode=E)}function Gd(a,l,f){var x=l.pendingProps,E=x.revealOrder,N=x.tail;if(mo(a,l,x.children,f),x=jo.current,x&2)x=x&1|2,l.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Vd(a,f,l);else if(a.tag===19)Vd(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}x&=1}switch(Nt(jo,x),E){case"forwards":for(f=l.child,E=null;f!==null;)a=f.alternate,a!==null&&gr(a)===null&&(E=f),f=f.sibling;f=E,f===null?(E=l.child,l.child=null):(E=f.sibling,f.sibling=null),Iu(l,!1,E,f,N);break;case"backwards":for(f=null,E=l.child,l.child=null;E!==null;){if(a=E.alternate,a!==null&&gr(a)===null){l.child=E;break}a=E.sibling,E.sibling=f,f=E,E=a}Iu(l,!0,f,null,N);break;case"together":Iu(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Hl(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),Kc|=l.lanes,!(f&l.childLanes))if(a!==null){if(ru(a,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(j(153));if(l.child!==null){for(a=l.child,f=R(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=R(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function rd(a,l){return a.lanes&l?!0:(a=a.dependencies,!!(a!==null&&od(a)))}function kd(a,l,f){switch(l.tag){case 3:En(l,l.stateNode.containerInfo),Ga(l,Bo,a.memoizedState.cache),Yi();break;case 27:case 5:Mn(l);break;case 4:En(l,l.stateNode.containerInfo);break;case 10:Ga(l,l.type,l.memoizedProps.value);break;case 13:var x=l.memoizedState;if(x!==null)return x.dehydrated!==null?(Ae(l),l.flags|=128,null):f&l.child.childLanes?Zd(a,l,f):(Ae(l),a=Hl(a,l,f),a!==null?a.sibling:null);Ae(l);break;case 19:var E=(a.flags&128)!==0;if(x=(f&l.childLanes)!==0,x||(ru(a,l,f,!1),x=(f&l.childLanes)!==0),E){if(x)return Gd(a,l,f);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Nt(jo,jo.current),x)break;return null;case 22:case 23:return l.lanes=0,Ca(a,l,f);case 24:Ga(l,Bo,a.memoizedState.cache)}return Hl(a,l,f)}function Tc(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps)Xo=!0;else{if(!rd(a,f)&&!(l.flags&128))return Xo=!1,kd(a,l,f);Xo=!!(a.flags&131072)}else Xo=!1,ya&&l.flags&1048576&&Ha(l,af,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var x=l.elementType,E=x._init;if(x=E(x._payload),l.type=x,typeof x=="function")g(x)?(a=Jr(x,a),l.tag=1,l=Sf(null,l,x,a,f)):(l.tag=0,l=Fd(null,l,x,a,f));else{if(x!=null){if(E=x.$$typeof,E===Tt){l.tag=11,l=Ra(null,l,x,a,f);break e}else if(E===Zt){l.tag=14,l=Qn(null,l,x,a,f);break e}}throw l=D(x)||x,Error(j(306,l,""))}}return l;case 0:return Fd(a,l,l.type,l.pendingProps,f);case 1:return x=l.type,E=Jr(x,l.pendingProps),Sf(a,l,x,E,f);case 3:e:{if(En(l,l.stateNode.containerInfo),a===null)throw Error(j(387));var N=l.pendingProps;E=l.memoizedState,x=E.element,Tn(a,l),na(l,N,null,f);var K=l.memoizedState;if(N=K.cache,Ga(l,Bo,N),N!==E.cache&&ad(l,[Bo],f,!0),vr(),N=K.element,We&&E.isDehydrated)if(E={element:N,isDehydrated:!1,cache:K.cache},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){l=bf(a,l,N,f);break e}else if(N!==x){x=Er(Error(j(424)),l),Za(x),l=bf(a,l,N,f);break e}else for(We&&(_s=_o(l.stateNode.containerInfo),Ws=l,ya=!0,El=null,Cl=!0),f=wd(l,null,N,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Yi(),N===x){l=Hl(a,l,f);break e}mo(a,l,N,f)}l=l.child}return l;case 26:if(jr)return zl(a,l),a===null?(f=gd(l.type,null,l.pendingProps,null))?l.memoizedState=f:ya||(l.stateNode=Gh(l.type,l.pendingProps,Zc.current,l)):l.memoizedState=gd(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:if(Ss)return Mn(l),a===null&&Ss&&ya&&(x=l.stateNode=Of(l.type,l.pendingProps,Zc.current,es.current,!1),Ws=l,Cl=!0,_s=wa(x)),x=l.pendingProps.children,a!==null||ya?mo(a,l,x,f):l.child=Ns(l,null,x,f),zl(a,l),l.child;case 5:return a===null&&ya&&(Rs(l.type,l.pendingProps,es.current),(E=x=_s)&&(x=Pa(x,l.type,l.pendingProps,Cl),x!==null?(l.stateNode=x,Ws=l,_s=wa(x),Cl=!1,E=!0):E=!1),E||Rn(l)),Mn(l),E=l.type,N=l.pendingProps,K=a!==null?a.memoizedProps:null,x=N.children,ai(E,N)?x=null:K!==null&&ai(E,K)&&(l.flags|=32),l.memoizedState!==null&&(E=qr(a,l,Vo,null,null,f),Wr?_e._currentValue=E:_e._currentValue2=E),zl(a,l),mo(a,l,x,f),l.child;case 6:return a===null&&ya&&(Fu(l.pendingProps,es.current),(a=f=_s)&&(f=Ti(f,l.pendingProps,Cl),f!==null?(l.stateNode=f,Ws=l,_s=null,a=!0):a=!1),a||Rn(l)),null;case 13:return Zd(a,l,f);case 4:return En(l,l.stateNode.containerInfo),x=l.pendingProps,a===null?l.child=Ns(l,null,x,f):mo(a,l,x,f),l.child;case 11:return Ra(a,l,l.type,l.pendingProps,f);case 7:return mo(a,l,l.pendingProps,f),l.child;case 8:return mo(a,l,l.pendingProps.children,f),l.child;case 12:return mo(a,l,l.pendingProps.children,f),l.child;case 10:return x=l.pendingProps,Ga(l,l.type,x.value),mo(a,l,x.children,f),l.child;case 9:return E=l.type._context,x=l.pendingProps.children,Ts(l),E=ga(E),x=x(E),l.flags|=1,mo(a,l,x,f),l.child;case 14:return Qn(a,l,l.type,l.pendingProps,f);case 15:return dr(a,l,l.type,l.pendingProps,f);case 19:return Gd(a,l,f);case 22:return Ca(a,l,f);case 24:return Ts(l),x=ga(Bo),a===null?(E=Ri(),E===null&&(E=La,N=Zl(),E.pooledCache=N,N.refCount++,N!==null&&(E.pooledCacheLanes|=f),E=N),l.memoizedState={parent:x,cache:E},Ht(l),Ga(l,Bo,E)):(a.lanes&f&&(Tn(a,l),na(l,null,null,f),vr()),E=a.memoizedState,N=l.memoizedState,E.parent!==x?(E={parent:x,cache:x},l.memoizedState=E,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=E),Ga(l,Bo,x)):(x=N.cache,Ga(l,Bo,x),x!==E.cache&&ad(l,[Bo],f,!0))),mo(a,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(j(156,l.tag))}function Ga(a,l,f){Wr?(Nt(Ku,l._currentValue),l._currentValue=f):(Nt(Ku,l._currentValue2),l._currentValue2=f)}function Or(a){var l=Ku.current;Wr?a._currentValue=l:a._currentValue2=l,C(Ku)}function gl(a,l,f){for(;a!==null;){var x=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,x!==null&&(x.childLanes|=l)):x!==null&&(x.childLanes&l)!==l&&(x.childLanes|=l),a===f)break;a=a.return}}function ad(a,l,f,x){var E=a.child;for(E!==null&&(E.return=a);E!==null;){var N=E.dependencies;if(N!==null){var K=E.child;N=N.firstContext;e:for(;N!==null;){var pe=N;N=E;for(var Xe=0;Xe<l.length;Xe++)if(pe.context===l[Xe]){N.lanes|=f,pe=N.alternate,pe!==null&&(pe.lanes|=f),gl(N.return,f,a),x||(K=null);break e}N=pe.next}}else if(E.tag===18){if(K=E.return,K===null)throw Error(j(341));K.lanes|=f,N=K.alternate,N!==null&&(N.lanes|=f),gl(K,f,a),K=null}else K=E.child;if(K!==null)K.return=E;else for(K=E;K!==null;){if(K===a){K=null;break}if(E=K.sibling,E!==null){E.return=K.return,K=E;break}K=K.return}E=K}}function ru(a,l,f,x){a=null;for(var E=l,N=!1;E!==null;){if(!N){if(E.flags&524288)N=!0;else if(E.flags&262144)break}if(E.tag===10){var K=E.alternate;if(K===null)throw Error(j(387));if(K=K.memoizedProps,K!==null){var pe=E.type;Jo(E.pendingProps.value,K.value)||(a!==null?a.push(pe):a=[pe])}}else if(E===ks.current){if(K=E.alternate,K===null)throw Error(j(387));K.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(a!==null?a.push(_e):a=[_e])}E=E.return}a!==null&&ad(l,a,f,x),l.flags|=262144}function od(a){for(a=a.firstContext;a!==null;){var l=a.context;if(!Jo(Wr?l._currentValue:l._currentValue2,a.memoizedValue))return!0;a=a.next}return!1}function Ts(a){pl=a,bc=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ga(a){return ic(pl,a)}function wc(a,l){return pl===null&&Ts(a),ic(a,l)}function ic(a,l){var f=Wr?l._currentValue:l._currentValue2;if(l={context:l,memoizedValue:f,next:null},bc===null){if(a===null)throw Error(j(308));bc=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else bc=bc.next=l;return f}function Zl(){return{controller:new uf,data:new Map,refCount:0}}function us(a){a.refCount--,a.refCount===0&&Yu(Nd,function(){a.controller.abort()})}function Ri(){var a=Tu.current;return a!==null?a:La.pooledCache}function au(a,l){l===null?Nt(Tu,Tu.current):Nt(Tu,l.pool)}function _f(){var a=Ri();return a===null?null:{parent:Wr?Bo._currentValue:Bo._currentValue2,pool:a}}function qs(a){a.flags|=4}function ou(a,l){if(a!==null&&a.child===l.child)return!1;if(l.flags&16)return!0;for(a=l.child;a!==null;){if(a.flags&13878||a.subtreeFlags&13878)return!0;a=a.sibling}return!1}function Wd(a,l,f,x){if(te)for(f=l.child;f!==null;){if(f.tag===5||f.tag===6)Fi(a,f.stateNode);else if(!(f.tag===4||Ss&&f.tag===27)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(H)for(var E=l.child;E!==null;){if(E.tag===5){var N=E.stateNode;f&&x&&(N=Ve(N,E.type,E.memoizedProps)),Fi(a,N)}else if(E.tag===6)N=E.stateNode,f&&x&&(N=un(N,E.memoizedProps)),Fi(a,N);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)N=E.child,N!==null&&(N.return=E),Wd(a,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===l)break;for(;E.sibling===null;){if(E.return===null||E.return===l)return;E=E.return}E.sibling.return=E.return,E=E.sibling}}function Mf(a,l,f,x){if(H)for(var E=l.child;E!==null;){if(E.tag===5){var N=E.stateNode;f&&x&&(N=Ve(N,E.type,E.memoizedProps)),Be(a,N)}else if(E.tag===6)N=E.stateNode,f&&x&&(N=un(N,E.memoizedProps)),Be(a,N);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)N=E.child,N!==null&&(N.return=E),Mf(a,E,!(E.memoizedProps!==null&&E.memoizedProps.mode==="manual"),!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===l)break;for(;E.sibling===null;){if(E.return===null||E.return===l)return;E=E.return}E.sibling.return=E.return,E=E.sibling}}function Ef(a,l){if(H&&ou(a,l)){a=l.stateNode;var f=a.containerInfo,x=Y();Mf(x,l,!1,!1),a.pendingChildren=x,qs(l),pt(f,x)}}function sd(a,l,f,x){if(te)a.memoizedProps!==x&&qs(l);else if(H){var E=a.stateNode,N=a.memoizedProps;if((a=ou(a,l))||N!==x){var K=es.current;N=Lc(E,f,N,x,!a,null),N===E?l.stateNode=E:(Wt(N,f,x,K)&&qs(l),l.stateNode=N,a?Wd(N,l,!1,!1):qs(l))}else l.stateNode=E}}function jd(a,l,f){if(gn(l,f)){if(a.flags|=16777216,!Vn(l,f))if(Lu())a.flags|=8192;else throw Eu=Xu,Cd}else a.flags&=-16777217}function Cf(a,l){if(Su(l)){if(a.flags|=16777216,!xd(l))if(Lu())a.flags|=8192;else throw Eu=Xu,Cd}else a.flags&=-16777217}function ld(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Dn():536870912,a.lanes|=l,ms|=l)}function Pu(a,l){if(!ya)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function ao(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,x=0;if(l)for(var E=a.child;E!==null;)f|=E.lanes|E.childLanes,x|=E.subtreeFlags&31457280,x|=E.flags&31457280,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)f|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=x,a.childLanes=f,l}function Tf(a,l,f){var x=l.pendingProps;switch(Kt(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ao(l),null;case 1:return ao(l),null;case 3:return f=l.stateNode,x=null,a!==null&&(x=a.memoizedState.cache),l.memoizedState.cache!==x&&(l.flags|=2048),Or(Bo),rn(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Ir(l)?qs(l):a===null||a.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,El!==null&&(_l(El),El=null))),Ef(a,l),ao(l),null;case 26:if(jr){f=l.type;var E=l.memoizedState;return a===null?(qs(l),E!==null?(ao(l),Cf(l,E)):(ao(l),jd(l,f,x))):E?E!==a.memoizedState?(qs(l),ao(l),Cf(l,E)):(ao(l),l.flags&=-16777217):(te?a.memoizedProps!==x&&qs(l):sd(a,l,f,x),ao(l),jd(l,f,x)),null}case 27:if(Ss){if(Ci(l),f=Zc.current,E=l.type,a!==null&&l.stateNode!=null)te?a.memoizedProps!==x&&qs(l):sd(a,l,E,x);else{if(!x){if(l.stateNode===null)throw Error(j(166));return ao(l),null}a=es.current,Ir(l)?sr(l,a):(a=Of(E,x,f,a,!0),l.stateNode=a,qs(l))}return ao(l),null}case 5:if(Ci(l),f=l.type,a!==null&&l.stateNode!=null)sd(a,l,f,x);else{if(!x){if(l.stateNode===null)throw Error(j(166));return ao(l),null}a=es.current,Ir(l)?sr(l,a):(E=Ja(f,x,Zc.current,a,l),Wd(E,l,!1,!1),l.stateNode=E,Wt(E,f,x,a)&&qs(l))}return ao(l),jd(l,l.type,l.pendingProps),null;case 6:if(a&&l.stateNode!=null)f=a.memoizedProps,te?f!==x&&qs(l):H&&(f!==x?(l.stateNode=Dr(x,Zc.current,es.current,l),qs(l)):l.stateNode=a.stateNode);else{if(typeof x!="string"&&l.stateNode===null)throw Error(j(166));if(a=Zc.current,f=es.current,Ir(l)){if(!We)throw Error(j(176));if(a=l.stateNode,f=l.memoizedProps,x=null,E=Ws,E!==null)switch(E.tag){case 27:case 5:x=E.memoizedProps}nl(a,f,l,x)||Rn(l)}else l.stateNode=Dr(x,a,f,l)}return ao(l),null;case 13:if(x=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(E=Ir(l),x!==null&&x.dehydrated!==null){if(a===null){if(!E)throw Error(j(318));if(!We)throw Error(j(344));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(j(317));Uc(E,l)}else Yi(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;ao(l),E=!1}else El!==null&&(_l(El),El=null),E=!0;if(!E)return l.flags&256?(Ln(l),l):(Ln(l),null)}if(Ln(l),l.flags&128)return l.lanes=f,l;if(f=x!==null,a=a!==null&&a.memoizedState!==null,f){x=l.child,E=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(E=x.alternate.memoizedState.cachePool.pool);var N=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(N=x.memoizedState.cachePool.pool),N!==E&&(x.flags|=2048)}return f!==a&&f&&(l.child.flags|=8192),ld(l,l.updateQueue),ao(l),null;case 4:return rn(),Ef(a,l),a===null&&on(l.stateNode.containerInfo),ao(l),null;case 10:return Or(l.type),ao(l),null;case 19:if(C(jo),E=l.memoizedState,E===null)return ao(l),null;if(x=(l.flags&128)!==0,N=E.rendering,N===null)if(x)Pu(E,!1);else{if(Mo!==0||a!==null&&a.flags&128)for(a=l.child;a!==null;){if(N=gr(a),N!==null){for(l.flags|=128,Pu(E,!1),a=N.updateQueue,l.updateQueue=a,ld(l,a),l.subtreeFlags=0,a=f,f=l.child;f!==null;)_(f,a),f=f.sibling;return Nt(jo,jo.current&1|2),l.child}a=a.sibling}E.tail!==null&&hl()>Jl&&(l.flags|=128,x=!0,Pu(E,!1),l.lanes=4194304)}else{if(!x)if(a=gr(N),a!==null){if(l.flags|=128,x=!0,a=a.updateQueue,l.updateQueue=a,ld(l,a),Pu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!N.alternate&&!ya)return ao(l),null}else 2*hl()-E.renderingStartTime>Jl&&f!==536870912&&(l.flags|=128,x=!0,Pu(E,!1),l.lanes=4194304);E.isBackwards?(N.sibling=l.child,l.child=N):(a=E.last,a!==null?a.sibling=N:l.child=N,E.last=N)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=hl(),l.sibling=null,a=jo.current,Nt(jo,x?a&1|2:a&1),l):(ao(l),null);case 22:case 23:return Ln(l),fo(),x=l.memoizedState!==null,a!==null?a.memoizedState!==null!==x&&(l.flags|=8192):x&&(l.flags|=8192),x?f&536870912&&!(l.flags&128)&&(ao(l),l.subtreeFlags&6&&(l.flags|=8192)):ao(l),f=l.updateQueue,f!==null&&ld(l,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),x=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(x=l.memoizedState.cachePool.pool),x!==f&&(l.flags|=2048),a!==null&&C(Tu),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Or(Bo),ao(l),null;case 25:return null}throw Error(j(156,l.tag))}function Nu(a,l){switch(Kt(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Or(Bo),rn(),a=l.flags,a&65536&&!(a&128)?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Ci(l),null;case 13:if(Ln(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(j(340));Yi()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return C(jo),null;case 4:return rn(),null;case 10:return Or(l.type),null;case 22:case 23:return Ln(l),fo(),a!==null&&C(Tu),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Or(Bo),null;case 25:return null;default:return null}}function cd(a,l){switch(Kt(l),l.tag){case 3:Or(Bo),rn();break;case 26:case 27:case 5:Ci(l);break;case 4:rn();break;case 13:Ln(l);break;case 19:C(jo);break;case 10:Or(l.type);break;case 22:case 23:Ln(l),fo(),a!==null&&C(Tu);break;case 24:Or(Bo)}}function su(a,l){try{var f=l.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var E=x.next;f=E;do{if((f.tag&a)===a){x=void 0;var N=f.create,K=f.inst;x=N(),K.destroy=x}f=f.next}while(f!==E)}}catch(pe){Ta(l,l.return,pe)}}function uc(a,l,f){try{var x=l.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var N=E.next;x=N;do{if((x.tag&a)===a){var K=x.inst,pe=K.destroy;if(pe!==void 0){K.destroy=void 0,E=l;var Xe=f;try{pe()}catch(Ot){Ta(E,Xe,Ot)}}}x=x.next}while(x!==N)}}catch(Ot){Ta(l,l.return,Ot)}}function gs(a){var l=a.updateQueue;if(l!==null){var f=a.stateNode;try{xo(l,f)}catch(x){Ta(a,a.return,x)}}}function rr(a,l,f){f.props=Jr(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(x){Ta(a,l,x)}}function Ac(a,l){try{var f=a.ref;if(f!==null){var x=a.stateNode;switch(a.tag){case 26:case 27:case 5:var E=Zi(x);break;default:E=x}typeof f=="function"?a.refCleanup=f(E):f.current=E}}catch(N){Ta(a,l,N)}}function nn(a,l){var f=a.ref,x=a.refCleanup;if(f!==null)if(typeof x=="function")try{x()}catch(E){Ta(a,l,E)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(E){Ta(a,l,E)}else f.current=null}function ws(a){var l=a.type,f=a.memoizedProps,x=a.stateNode;try{vu(x,l,f,a)}catch(E){Ta(a,a.return,E)}}function ce(a,l,f){try{qd(a.stateNode,a.type,f,l,a)}catch(x){Ta(a,a.return,x)}}function ud(a){return a.tag===5||a.tag===3||(jr?a.tag===26:!1)||(Ss?a.tag===27:!1)||a.tag===4}function dd(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ud(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&(!Ss||a.tag!==27)&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Js(a,l,f){var x=a.tag;if(x===5||x===6)a=a.stateNode,l?gu(f,a,l):Yo(f,a);else if(!(x===4||Ss&&x===27)&&(a=a.child,a!==null))for(Js(a,l,f),a=a.sibling;a!==null;)Js(a,l,f),a=a.sibling}function lu(a,l,f){var x=a.tag;if(x===5||x===6)a=a.stateNode,l?Ml(f,a,l):Yd(f,a);else if(!(x===4||Ss&&x===27)&&(a=a.child,a!==null))for(lu(a,l,f),a=a.sibling;a!==null;)lu(a,l,f),a=a.sibling}function Xd(a,l,f){a=a.containerInfo;try{dt(a,f)}catch(x){Ta(l,l.return,x)}}function wf(a,l){for(ds(a.containerInfo),ps=l;ps!==null;)if(a=ps,l=a.child,(a.subtreeFlags&1028)!==0&&l!==null)l.return=a,ps=l;else for(;ps!==null;){a=ps;var f=a.alternate;switch(l=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if(l&1024&&f!==null){l=void 0;var x=a,E=f.memoizedProps;f=f.memoizedState;var N=x.stateNode;try{var K=Jr(x.type,E,x.elementType===x.type);l=N.getSnapshotBeforeUpdate(K,f),N.__reactInternalSnapshotBeforeUpdate=l}catch(pe){Ta(x,x.return,pe)}}break;case 3:l&1024&&te&&Fs(a.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(l&1024)throw Error(j(163))}if(l=a.sibling,l!==null){l.return=a.return,ps=l;break}ps=a.return}return K=$h,$h=!1,K}function dl(a,l,f){var x=f.flags;switch(f.tag){case 0:case 11:case 15:xs(a,f),x&4&&su(5,f);break;case 1:if(xs(a,f),x&4)if(a=f.stateNode,l===null)try{a.componentDidMount()}catch(pe){Ta(f,f.return,pe)}else{var E=Jr(f.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(E,l,a.__reactInternalSnapshotBeforeUpdate)}catch(pe){Ta(f,f.return,pe)}}x&64&&gs(f),x&512&&Ac(f,f.return);break;case 3:if(xs(a,f),x&64&&(x=f.updateQueue,x!==null)){if(a=null,f.child!==null)switch(f.child.tag){case 27:case 5:a=Zi(f.child.stateNode);break;case 1:a=f.child.stateNode}try{xo(x,a)}catch(pe){Ta(f,f.return,pe)}}break;case 26:if(jr){xs(a,f),x&512&&Ac(f,f.return);break}case 27:case 5:xs(a,f),l===null&&x&4&&ws(f),x&512&&Ac(f,f.return);break;case 12:xs(a,f);break;case 13:xs(a,f),x&4&&uu(a,f);break;case 22:if(E=f.memoizedState!==null||_c,!E){l=l!==null&&l.memoizedState!==null||Fo;var N=_c,K=Fo;_c=E,(Fo=l)&&!K?Gl(a,f,(f.subtreeFlags&8772)!==0):xs(a,f),_c=N,Fo=K}x&512&&(f.memoizedProps.mode==="manual"?Ac(f,f.return):nn(f,f.return));break;default:xs(a,f)}}function cu(a){var l=a.alternate;l!==null&&(a.alternate=null,cu(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&fi(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function yl(a,l,f){for(f=f.child;f!==null;)dc(a,l,f),f=f.sibling}function dc(a,l,f){if(rl&&typeof rl.onCommitFiberUnmount=="function")try{rl.onCommitFiberUnmount(Fc,f)}catch(N){}switch(f.tag){case 26:if(jr){Fo||nn(f,l),yl(a,l,f),f.memoizedState?Hu(f.memoizedState):f.stateNode&&nh(f.stateNode);break}case 27:if(Ss){Fo||nn(f,l);var x=ns,E=wl;ns=f.stateNode,yl(a,l,f),kh(f.stateNode),ns=x,wl=E;break}case 5:Fo||nn(f,l);case 6:if(te){if(x=ns,E=wl,ns=null,yl(a,l,f),ns=x,wl=E,ns!==null)if(wl)try{Qf(ns,f.stateNode)}catch(N){Ta(f,l,N)}else try{lc(ns,f.stateNode)}catch(N){Ta(f,l,N)}}else yl(a,l,f);break;case 18:te&&ns!==null&&(wl?Hs(ns,f.stateNode):zs(ns,f.stateNode));break;case 4:te?(x=ns,E=wl,ns=f.stateNode.containerInfo,wl=!0,yl(a,l,f),ns=x,wl=E):(H&&Xd(f.stateNode,f,Y()),yl(a,l,f));break;case 0:case 11:case 14:case 15:Fo||uc(2,f,l),Fo||uc(4,f,l),yl(a,l,f);break;case 1:Fo||(nn(f,l),x=f.stateNode,typeof x.componentWillUnmount=="function"&&rr(f,l,x)),yl(a,l,f);break;case 21:yl(a,l,f);break;case 22:Fo||nn(f,l),Fo=(x=Fo)||f.memoizedState!==null,yl(a,l,f),Fo=x;break;default:yl(a,l,f)}}function uu(a,l){if(We&&l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ba(a)}catch(f){Ta(l,l.return,f)}}function qf(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new Ch),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new Ch),l;default:throw Error(j(435,a.tag))}}function Rc(a,l){var f=qf(a);l.forEach(function(x){var E=Nf.bind(null,a,x);f.has(x)||(f.add(x),x.then(E,E))})}function ys(a,l){var f=l.deletions;if(f!==null)for(var x=0;x<f.length;x++){var E=f[x],N=a,K=l;if(te){var pe=K;e:for(;pe!==null;){switch(pe.tag){case 27:case 5:ns=pe.stateNode,wl=!1;break e;case 3:ns=pe.stateNode.containerInfo,wl=!0;break e;case 4:ns=pe.stateNode.containerInfo,wl=!0;break e}pe=pe.return}if(ns===null)throw Error(j(160));dc(N,K,E),ns=null,wl=!1}else dc(N,K,E);N=E.alternate,N!==null&&(N.return=null),E.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Af(l,a),l=l.sibling}function Af(a,l){var f=a.alternate,x=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ys(l,a),ka(a),x&4&&(uc(3,a,a.return),su(3,a),uc(5,a,a.return));break;case 1:ys(l,a),ka(a),x&512&&(Fo||f===null||nn(f,f.return)),x&64&&_c&&(a=a.updateQueue,a!==null&&(x=a.callbacks,x!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?x:f.concat(x))));break;case 26:if(jr){var E=Al;ys(l,a),ka(a),x&512&&(Fo||f===null||nn(f,f.return)),x&4&&(x=f!==null?f.memoizedState:null,l=a.memoizedState,f===null?l===null?a.stateNode===null?a.stateNode=_h(E,a.type,a.memoizedProps,a):ef(E,a.type,a.stateNode):a.stateNode=zu(E,l,a.memoizedProps):x!==l?(x===null?f.stateNode!==null&&nh(f.stateNode):Hu(x),l===null?ef(E,a.type,a.stateNode):zu(E,l,a.memoizedProps)):l===null&&a.stateNode!==null&&ce(a,a.memoizedProps,f.memoizedProps));break}case 27:if(Ss&&x&4&&a.alternate===null){E=a.stateNode;var N=a.memoizedProps;try{Zu(E),Bc(a.type,N,E,a)}catch(Sn){Ta(a,a.return,Sn)}}case 5:if(ys(l,a),ka(a),x&512&&(Fo||f===null||nn(f,f.return)),te){if(a.flags&32){l=a.stateNode;try{Jd(l)}catch(Sn){Ta(a,a.return,Sn)}}x&4&&a.stateNode!=null&&(l=a.memoizedProps,ce(a,l,f!==null?f.memoizedProps:l)),x&1024&&(ch=!0)}break;case 6:if(ys(l,a),ka(a),x&4&&te){if(a.stateNode===null)throw Error(j(162));x=a.memoizedProps,f=f!==null?f.memoizedProps:x,l=a.stateNode;try{vc(l,f,x)}catch(Sn){Ta(a,a.return,Sn)}}break;case 3:if(jr?(yd(),E=Al,Al=xu(l.containerInfo),ys(l,a),Al=E):ys(l,a),ka(a),x&4){if(te&&We&&f!==null&&f.memoizedState.isDehydrated)try{yu(l.containerInfo)}catch(Sn){Ta(a,a.return,Sn)}if(H){x=l.containerInfo,f=l.pendingChildren;try{dt(x,f)}catch(Sn){Ta(a,a.return,Sn)}}}ch&&(ch=!1,Vl(a));break;case 4:jr?(f=Al,Al=xu(a.stateNode.containerInfo),ys(l,a),ka(a),Al=f):(ys(l,a),ka(a)),x&4&&H&&Xd(a.stateNode,a,a.stateNode.pendingChildren);break;case 12:ys(l,a),ka(a);break;case 13:ys(l,a),ka(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Od=hl()),x&4&&(x=a.updateQueue,x!==null&&(a.updateQueue=null,Rc(a,x)));break;case 22:x&512&&(Fo||f===null||nn(f,f.return)),E=a.memoizedState!==null;var K=f!==null&&f.memoizedState!==null,pe=_c,Xe=Fo;if(_c=pe||E,Fo=Xe||K,ys(l,a),Fo=Xe,_c=pe,ka(a),l=a.stateNode,l._current=a,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,x&8192&&(l._visibility=E?l._visibility&-2:l._visibility|1,E&&(l=_c||Fo,f===null||K||l||xl(a)),te&&(a.memoizedProps===null||a.memoizedProps.mode!=="manual"))){e:if(f=null,te)for(l=a;;){if(l.tag===5||jr&&l.tag===26||Ss&&l.tag===27){if(f===null){K=f=l;try{N=K.stateNode,E?Qd(N):eh(K.stateNode,K.memoizedProps)}catch(Sn){Ta(K,K.return,Sn)}}}else if(l.tag===6){if(f===null){K=l;try{var Ot=K.stateNode;E?md(Ot):vd(Ot,K.memoizedProps)}catch(Sn){Ta(K,K.return,Sn)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}}x&4&&(x=a.updateQueue,x!==null&&(f=x.retryQueue,f!==null&&(x.retryQueue=null,Rc(a,f))));break;case 19:ys(l,a),ka(a),x&4&&(x=a.updateQueue,x!==null&&(a.updateQueue=null,Rc(a,x)));break;case 21:break;default:ys(l,a),ka(a)}}function ka(a){var l=a.flags;if(l&2){try{if(te&&(!Ss||a.tag!==27)){e:{for(var f=a.return;f!==null;){if(ud(f)){var x=f;break e}f=f.return}throw Error(j(160))}switch(x.tag){case 27:if(Ss){var E=x.stateNode,N=dd(a);lu(a,N,E);break}case 5:var K=x.stateNode;x.flags&32&&(Jd(K),x.flags&=-33);var pe=dd(a);lu(a,pe,K);break;case 3:case 4:var Xe=x.stateNode.containerInfo,Ot=dd(a);Js(a,Ot,Xe);break;default:throw Error(j(161))}}}catch(Sn){Ta(a,a.return,Sn)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function Vl(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;Vl(l),l.tag===5&&l.flags&1024&&pn(l.stateNode),a=a.sibling}}function xs(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)dl(a,l.alternate,l),l=l.sibling}function xl(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:uc(4,l,l.return),xl(l);break;case 1:nn(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&rr(l,l.return,f),xl(l);break;case 26:case 27:case 5:nn(l,l.return),xl(l);break;case 22:nn(l,l.return),l.memoizedState===null&&xl(l);break;default:xl(l)}a=a.sibling}}function Gl(a,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var x=l.alternate,E=a,N=l,K=N.flags;switch(N.tag){case 0:case 11:case 15:Gl(E,N,f),su(4,N);break;case 1:if(Gl(E,N,f),x=N,E=x.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ot){Ta(x,x.return,Ot)}if(x=N,E=x.updateQueue,E!==null){var pe=x.stateNode;try{var Xe=E.shared.hiddenCallbacks;if(Xe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Xe.length;E++)Nr(Xe[E],pe)}catch(Ot){Ta(x,x.return,Ot)}}f&&K&64&&gs(N),Ac(N,N.return);break;case 26:case 27:case 5:Gl(E,N,f),f&&x===null&&K&4&&ws(N),Ac(N,N.return);break;case 12:Gl(E,N,f);break;case 13:Gl(E,N,f),f&&K&4&&uu(E,N);break;case 22:N.memoizedState===null&&Gl(E,N,f),Ac(N,N.return);break;default:Gl(E,N,f)}l=l.sibling}}function $d(a,l){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&us(f))}function kl(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&us(a))}function Qs(a,l,f,x){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Rf(a,l,f,x),l=l.sibling}function Rf(a,l,f,x){var E=l.flags;switch(l.tag){case 0:case 11:case 15:Qs(a,l,f,x),E&2048&&su(9,l);break;case 3:Qs(a,l,f,x),E&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&us(a)));break;case 12:if(E&2048){Qs(a,l,f,x),a=l.stateNode;try{var N=l.memoizedProps,K=N.id,pe=N.onPostCommit;typeof pe=="function"&&pe(K,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Xe){Ta(l,l.return,Xe)}}else Qs(a,l,f,x);break;case 23:break;case 22:N=l.stateNode,l.memoizedState!==null?N._visibility&4?Qs(a,l,f,x):oo(a,l):N._visibility&4?Qs(a,l,f,x):(N._visibility|=4,rc(a,l,f,x,(l.subtreeFlags&10256)!==0)),E&2048&&$d(l.alternate,l);break;case 24:Qs(a,l,f,x),E&2048&&kl(l.alternate,l);break;default:Qs(a,l,f,x)}}function rc(a,l,f,x,E){for(E=E&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var N=a,K=l,pe=f,Xe=x,Ot=K.flags;switch(K.tag){case 0:case 11:case 15:rc(N,K,pe,Xe,E),su(8,K);break;case 23:break;case 22:var Sn=K.stateNode;K.memoizedState!==null?Sn._visibility&4?rc(N,K,pe,Xe,E):oo(N,K):(Sn._visibility|=4,rc(N,K,pe,Xe,E)),E&&Ot&2048&&$d(K.alternate,K);break;case 24:rc(N,K,pe,Xe,E),E&&Ot&2048&&kl(K.alternate,K);break;default:rc(N,K,pe,Xe,E)}l=l.sibling}}function oo(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=a,x=l,E=x.flags;switch(x.tag){case 22:oo(f,x),E&2048&&$d(x.alternate,x);break;case 24:oo(f,x),E&2048&&kl(x.alternate,x);break;default:oo(f,x)}l=l.sibling}}function so(a){if(a.subtreeFlags&qu)for(a=a.child;a!==null;)Ic(a),a=a.sibling}function Ic(a){switch(a.tag){case 26:so(a),a.flags&qu&&(a.memoizedState!==null?ih(Al,a.memoizedState,a.memoizedProps):Un(a.type,a.memoizedProps));break;case 5:so(a),a.flags&qu&&Un(a.type,a.memoizedProps);break;case 3:case 4:if(jr){var l=Al;Al=xu(a.stateNode.containerInfo),so(a),Al=l}else so(a);break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=qu,qu=16777216,so(a),qu=l):so(a));break;default:so(a)}}function du(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function fu(a){var l=a.deletions;if(a.flags&16){if(l!==null)for(var f=0;f<l.length;f++){var x=l[f];ps=x,fd(x,a)}du(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)If(a),a=a.sibling}function If(a){switch(a.tag){case 0:case 11:case 15:fu(a),a.flags&2048&&uc(9,a,a.return);break;case 3:fu(a);break;case 12:fu(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&4&&(a.return===null||a.return.tag!==13)?(l._visibility&=-5,Sl(a)):fu(a);break;default:fu(a)}}function Sl(a){var l=a.deletions;if(a.flags&16){if(l!==null)for(var f=0;f<l.length;f++){var x=l[f];ps=x,fd(x,a)}du(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:uc(8,l,l.return),Sl(l);break;case 22:f=l.stateNode,f._visibility&4&&(f._visibility&=-5,Sl(l));break;default:Sl(l)}a=a.sibling}}function fd(a,l){for(;ps!==null;){var f=ps;switch(f.tag){case 0:case 11:case 15:uc(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var x=f.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:us(f.memoizedState.cache)}if(x=f.child,x!==null)x.return=f,ps=x;else e:for(f=a;ps!==null;){x=ps;var E=x.sibling,N=x.return;if(cu(x),x===f){ps=null;break e}if(E!==null){E.return=N,ps=E;break e}ps=N}}}function Uo(a){var l=wt(a);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(j(364));return l}if(a=$t(a),a===null)throw Error(j(362));return a.stateNode.current}function As(a,l){var f=a.tag;switch(l.$$typeof){case Rl:if(a.type===l.value)return!0;break;case Vf:e:{for(l=l.value,a=[a,0],f=0;f<a.length;){var x=a[f++],E=x.tag,N=a[f++],K=l[N];if(E!==5&&E!==26&&E!==27||!pa(x)){for(;K!=null&&As(x,K);)N++,K=l[N];if(N===l.length){l=!0;break e}else for(x=x.child;x!==null;)a.push(x,N),x=x.sibling}}l=!1}return l;case Qa:if((f===5||f===26||f===27)&&ia(a.stateNode,l.value))return!0;break;case Yl:if((f===5||f===6||f===26||f===27)&&(a=Ji(a),a!==null&&0<=a.indexOf(l.value)))return!0;break;case Xc:if((f===5||f===26||f===27)&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(j(365))}return!1}function Ds(a){switch(a.$$typeof){case Rl:return"<"+(D(a.value)||"Unknown")+">";case Vf:return":has("+(Ds(a)||"")+")";case Qa:return'[role="'+a.value+'"]';case Yl:return'"'+a.value+'"';case Xc:return'[data-testname="'+a.value+'"]';default:throw Error(j(365))}}function Pc(a,l){var f=[];a=[a,0];for(var x=0;x<a.length;){var E=a[x++],N=E.tag,K=a[x++],pe=l[K];if(N!==5&&N!==26&&N!==27||!pa(E)){for(;pe!=null&&As(E,pe);)K++,pe=l[K];if(K===l.length)f.push(E);else for(E=E.child;E!==null;)a.push(E,K),E=E.sibling}}return f}function el(a,l){if(!cn)throw Error(j(363));a=Uo(a),a=Pc(a,l),l=[],a=Array.from(a);for(var f=0;f<a.length;){var x=a[f++],E=x.tag;if(E===5||E===26||E===27)pa(x)||l.push(x.stateNode);else for(x=x.child;x!==null;)a.push(x),x=x.sibling}return l}function Ro(){if(Wa&2&&ra!==0)return ra&-ra;if(sn.T!==null){var a=Vc;return a!==0?a:io()}return Cn()}function fc(){Il===0&&(Il=!(ra&536870912)||ya?An():536870912);var a=al.current;return a!==null&&(a.flags|=32),Il}function Ia(a,l,f){(a===La&&eo===2||a.cancelPendingCommit!==null)&&(hu(a,0),tl(a,ra,Il,!1)),Mr(a,f),(!(Wa&2)||a!==La)&&(a===La&&(!(Wa&2)&&(Mc|=f),Mo===4&&tl(a,ra,Il,!1)),lr(a))}function bl(a,l,f){if(Wa&6)throw Error(j(327));var x=!f&&(l&60)===0&&(l&a.expiredLanes)===0||Vi(a,l),E=x?Kd(a,l):mu(a,l,!0),N=x;do{if(E===0){ml&&!x&&tl(a,l,0,!1);break}else if(E===6)tl(a,l,0,!ql);else{if(f=a.current.alternate,N&&!Ou(f)){E=mu(a,l,!1),N=!1;continue}if(E===2){if(N=l,a.errorRecoveryDisabledLanes&N)var K=0;else K=a.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){l=K;e:{var pe=a;E=Yc;var Xe=We&&pe.current.memoizedState.isDehydrated;if(Xe&&(hu(pe,K).flags|=256),K=mu(pe,K,!1),K!==2){if(Gf&&!Xe){pe.errorRecoveryDisabledLanes|=N,Mc|=N,E=4;break e}N=js,js=E,N!==null&&_l(N)}E=K}if(N=!1,E!==2)continue}}if(E===1){hu(a,0),tl(a,l,0,!0);break}e:{switch(x=a,E){case 0:case 1:throw Error(j(345));case 4:if((l&4194176)===l){tl(x,l,Il,!ql);break e}break;case 2:js=null;break;case 3:case 5:break;default:throw Error(j(329))}if(x.finishedWork=f,x.finishedLanes=l,(l&62914560)===l&&(N=Od+300-hl(),10<N)){if(tl(x,l,Il,!ql),O(x,0)!==0)break e;x.timeoutHandle=oi(hc.bind(null,x,f,js,kf,qc,l,Il,Mc,ms,ql,2,-0,0),N);break e}hc(x,f,js,kf,qc,l,Il,Mc,ms,ql,0,-0,0)}}break}while(!0);lr(a)}function _l(a){js===null?js=a:js.push.apply(js,a)}function hc(a,l,f,x,E,N,K,pe,Xe,Ot,Sn,kn,Hn){var pr=l.subtreeFlags;if((pr&8192||(pr&16785408)===16785408)&&(Ii(),Ic(l),l=Fn(),l!==null)){a.cancelPendingCommit=l(Pf.bind(null,a,f,x,E,K,pe,Xe,1,kn,Hn)),tl(a,N,K,!Ot);return}Pf(a,f,x,E,K,pe,Xe,Sn,kn,Hn)}function Ou(a){for(var l=a;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var x=0;x<f.length;x++){var E=f[x],N=E.getSnapshot;E=E.value;try{if(!Jo(N(),E))return!1}catch(K){return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function tl(a,l,f,x){l&=~uh,l&=~Mc,a.suspendedLanes|=l,a.pingedLanes&=~l,x&&(a.warmLanes|=l),x=a.expirationTimes;for(var E=l;0<E;){var N=31-Wo(E),K=1<<N;x[N]=-1,E&=~K}f!==0&&Rr(a,f,l)}function Nc(){return Wa&6?!0:(ba(0,!1),!1)}function Du(){if(Xr!==null){if(eo===0)var a=Xr.return;else a=Xr,bc=pl=null,Et(a),kc=null,Td=0,a=Xr;for(;a!==null;)cd(a.alternate,a),a=a.return;Xr=null}}function hu(a,l){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;f!==ha&&(a.timeoutHandle=ha,er(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),Du(),La=a,Xr=f=R(a.current,null),ra=l,eo=0,Ms=null,ql=!1,ml=Vi(a,l),Gf=!1,ms=Il=uh=Mc=Kc=Mo=0,js=Yc=null,qc=!1,l&8&&(l|=l&32);var x=a.entangledLanes;if(x!==0)for(a=a.entanglements,x&=l;0<x;){var E=31-Wo(x),N=1<<E;l|=a[E],x&=~N}return is=l,ma(),f}function pu(a,l){Ar=null,sn.H=Kl,l===Mu?(l=ss(),eo=3):l===Cd?(l=ss(),eo=4):eo=l===Hf?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ms=l,Xr===null&&(Mo=1,Ao(a,Er(l,a.current)))}function Lu(){var a=al.current;return a===null?!0:(ra&4194176)===ra?$l===null:(ra&62914560)===ra||ra&536870912?a===$l:!1}function Io(){var a=sn.H;return sn.H=Kl,a===null?Kl:a}function ac(){var a=sn.A;return sn.A=Th,a}function Uu(){Mo=4,ql||(ra&4194176)!==ra&&al.current!==null||(ml=!0),!(Kc&134217727)&&!(Mc&134217727)||La===null||tl(La,ra,Il,!1)}function mu(a,l,f){var x=Wa;Wa|=2;var E=Io(),N=ac();(La!==a||ra!==l)&&(kf=null,hu(a,l)),l=!1;var K=Mo;e:do try{if(eo!==0&&Xr!==null){var pe=Xr,Xe=Ms;switch(eo){case 8:Du(),K=6;break e;case 3:case 2:case 6:al.current===null&&(l=!0);var Ot=eo;if(eo=0,Ms=null,Ui(a,pe,Xe,Ot),f&&ml){K=0;break e}break;default:Ot=eo,eo=0,Ms=null,Ui(a,pe,Xe,Ot)}}pc(),K=Mo;break}catch(Sn){pu(a,Sn)}while(!0);return l&&a.shellSuspendCounter++,bc=pl=null,Wa=x,sn.H=E,sn.A=N,Xr===null&&(La=null,ra=0,ma()),K}function pc(){for(;Xr!==null;)Bu(Xr)}function Kd(a,l){var f=Wa;Wa|=2;var x=Io(),E=ac();La!==a||ra!==l?(kf=null,Jl=hl()+500,hu(a,l)):ml=Vi(a,l);e:do try{if(eo!==0&&Xr!==null){l=Xr;var N=Ms;t:switch(eo){case 1:eo=0,Ms=null,Ui(a,l,N,1);break;case 2:if(va(N)){eo=0,Ms=null,Oc(l);break}l=function(){eo===2&&La===a&&(eo=7),lr(a)},N.then(l,l);break e;case 3:eo=7;break e;case 4:eo=5;break e;case 7:va(N)?(eo=0,Ms=null,Oc(l)):(eo=0,Ms=null,Ui(a,l,N,7));break;case 5:var K=null;switch(Xr.tag){case 26:K=Xr.memoizedState;case 5:case 27:var pe=Xr,Xe=pe.type,Ot=pe.pendingProps;if(K?xd(K):Vn(Xe,Ot)){eo=0,Ms=null;var Sn=pe.sibling;if(Sn!==null)Xr=Sn;else{var kn=pe.return;kn!==null?(Xr=kn,oc(kn)):Xr=null}break t}}eo=0,Ms=null,Ui(a,l,N,5);break;case 6:eo=0,Ms=null,Ui(a,l,N,6);break;case 8:Du(),Mo=6;break e;default:throw Error(j(462))}}hd();break}catch(Hn){pu(a,Hn)}while(!0);return bc=pl=null,sn.H=x,sn.A=E,Wa=f,Xr!==null?0:(La=null,ra=0,ma(),Mo)}function hd(){for(;Xr!==null&&!Mh();)Bu(Xr)}function Bu(a){var l=Tc(a.alternate,a,is);a.memoizedProps=a.pendingProps,l===null?oc(a):Xr=l}function Oc(a){var l=a,f=l.alternate;switch(l.tag){case 15:case 0:l=xf(f,l,l.pendingProps,l.type,void 0,ra);break;case 11:l=xf(f,l,l.pendingProps,l.type.render,l.ref,ra);break;case 5:Et(l);default:cd(f,l),l=Xr=_(l,is),l=Tc(f,l,is)}a.memoizedProps=a.pendingProps,l===null?oc(a):Xr=l}function Ui(a,l,f,x){bc=pl=null,Et(l),kc=null,Td=0;var E=l.return;try{if(Cc(a,E,l,f,ra)){Mo=1,Ao(a,Er(f,a.current)),Xr=null;return}}catch(N){if(E!==null)throw Xr=E,N;Mo=1,Ao(a,Er(f,a.current)),Xr=null;return}l.flags&32768?(ya||x===1?a=!0:ml||ra&536870912?a=!1:(ql=a=!0,(x===2||x===3||x===6)&&(x=al.current,x!==null&&x.tag===13&&(x.flags|=16384))),fl(l,a)):oc(l)}function oc(a){var l=a;do{if(l.flags&32768){fl(l,ql);return}a=l.return;var f=Tf(l.alternate,l,is);if(f!==null){Xr=f;return}if(l=l.sibling,l!==null){Xr=l;return}Xr=l=a}while(l!==null);Mo===0&&(Mo=5)}function fl(a,l){do{var f=Nu(a.alternate,a);if(f!==null){f.flags&=32767,Xr=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(a=a.sibling,a!==null)){Xr=a;return}Xr=a=f}while(a!==null);Mo=6,Xr=null}function Pf(a,l,f,x,E,N,K,pe,Xe,Ot){var Sn=sn.T,kn=ti();try{gt(2),sn.T=null,mc(a,l,f,x,kn,E,N,K,pe,Xe,Ot)}finally{sn.T=Sn,gt(kn)}}function mc(a,l,f,x,E,N,K,pe){do Us();while(Ec!==null);if(Wa&6)throw Error(j(327));var Xe=a.finishedWork;if(x=a.finishedLanes,Xe===null)return null;if(a.finishedWork=null,a.finishedLanes=0,Xe===a.current)throw Error(j(177));a.callbackNode=null,a.callbackPriority=0,a.cancelPendingCommit=null;var Ot=Xe.lanes|Xe.childLanes;if(Ot|=of,Hi(a,x,Ot,N,K,pe),a===La&&(Xr=La=null,ra=0),!(Xe.subtreeFlags&10256)&&!(Xe.flags&10256)||Ju||(Ju=!0,Dd=Ot,Wf=f,Dc(gc,function(){return Us(!0),null})),f=(Xe.flags&15990)!==0,Xe.subtreeFlags&15990||f?(f=sn.T,sn.T=null,N=ti(),gt(2),K=Wa,Wa|=4,wf(a,Xe),Af(Xe,a),ye(a.containerInfo),a.current=Xe,dl(a,Xe.alternate,Xe),jh(),Wa=K,gt(N),sn.T=f):a.current=Xe,Ju?(Ju=!1,Ec=a,Au=x):Ls(a,Ot),Ot=a.pendingLanes,Ot===0&&(Ql=null),$n(Xe.stateNode,E),lr(a),l!==null)for(E=a.onRecoverableError,Xe=0;Xe<l.length;Xe++)Ot=l[Xe],E(Ot.value,{componentStack:Ot.stack});return Au&3&&Us(),Ot=a.pendingLanes,x&4194218&&Ot&42?a===jf?Ld++:(Ld=0,jf=a):Ld=0,ba(0,!1),null}function Ls(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,us(l)))}function Us(){if(Ec!==null){var a=Ec,l=Dd;Dd=0;var f=Kn(Au),x=32>f?32:f;f=sn.T;var E=ti();try{if(gt(x),sn.T=null,Ec===null)var N=!1;else{x=Wf,Wf=null;var K=Ec,pe=Au;if(Ec=null,Au=0,Wa&6)throw Error(j(331));var Xe=Wa;if(Wa|=4,If(K.current),Rf(K,K.current,pe,x),Wa=Xe,ba(0,!1),rl&&typeof rl.onPostCommitFiberRoot=="function")try{rl.onPostCommitFiberRoot(Fc,K)}catch(Ot){}N=!0}return N}finally{gt(E),sn.T=f,Ls(a,l)}}return!1}function Bs(a,l,f){l=Er(f,l),l=Ks(a.stateNode,l,2),a=vi(a,l,2),a!==null&&(Mr(a,2),lr(a))}function Ta(a,l,f){if(a.tag===3)Bs(a,a,f);else for(;l!==null;){if(l.tag===3){Bs(l,a,f);break}else if(l.tag===1){var x=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Ql===null||!Ql.has(x))){a=Er(f,a),f=vl(2),x=vi(l,f,2),x!==null&&(Fl(f,x,l,a),Mr(x,2),lr(x));break}}l=l.return}}function pd(a,l,f){var x=a.pingCache;if(x===null){x=a.pingCache=new $c;var E=new Set;x.set(l,E)}else E=x.get(l),E===void 0&&(E=new Set,x.set(l,E));E.has(f)||(Gf=!0,E.add(f),a=bo.bind(null,a,l,f),l.then(a,a))}function bo(a,l,f){var x=a.pingCache;x!==null&&x.delete(l),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,La===a&&(ra&f)===f&&(Mo===4||Mo===3&&(ra&62914560)===ra&&300>hl()-Od?!(Wa&2)&&hu(a,0):uh|=f,ms===ra&&(ms=0)),lr(a)}function Wl(a,l){l===0&&(l=Dn()),a=qi(a,l),a!==null&&(Mr(a,l),lr(a))}function Jf(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),Wl(a,f)}function Nf(a,l){var f=0;switch(a.tag){case 13:var x=a.stateNode,E=a.memoizedState;E!==null&&(f=E.retryLane);break;case 19:x=a.stateNode;break;case 22:x=a.stateNode._retryCache;break;default:throw Error(j(314))}x!==null&&x.delete(l),Wl(a,f)}function Dc(a,l){return bs(a,l)}function sc(a,l,f,x){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function g(a){return a=a.prototype,!(!a||!a.isReactComponent)}function R(a,l){var f=a.alternate;return f===null?(f=mn(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&31457280,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function _(a,l){a.flags&=31457282;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,l=f.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function U(a,l,f,x,E,N){var K=0;if(x=a,typeof a=="function")g(a)&&(K=1);else if(typeof a=="string")K=jr&&Ss?th(a,f,es.current)?26:Vu(a)?27:5:jr?th(a,f,es.current)?26:5:Ss&&Vu(a)?27:5;else e:switch(a){case qe:return q(f.children,E,N,l);case yt:K=8,E|=24;break;case kt:return a=mn(12,f,l,E|2),a.elementType=kt,a.lanes=N,a;case Jt:return a=mn(13,f,l,E),a.elementType=Jt,a.lanes=N,a;case ot:return a=mn(19,f,l,E),a.elementType=ot,a.lanes=N,a;case vn:return $(f,E,N,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case se:case Ze:K=10;break e;case oe:K=9;break e;case Tt:K=11;break e;case Zt:K=14;break e;case Lt:K=16,x=null;break e}K=29,f=Error(j(130,a===null?"null":typeof a,"")),x=null}return l=mn(K,f,l,E),l.elementType=a,l.type=x,l.lanes=N,l}function q(a,l,f,x){return a=mn(7,a,x,l),a.lanes=f,a}function $(a,l,f,x){a=mn(22,a,x,l),a.elementType=vn,a.lanes=f;var E={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var N=E._current;if(N===null)throw Error(j(456));if(!(E._pendingVisibility&2)){var K=qi(N,2);K!==null&&(E._pendingVisibility|=2,Ia(K,N,2))}},attach:function(){var N=E._current;if(N===null)throw Error(j(456));if(E._pendingVisibility&2){var K=qi(N,2);K!==null&&(E._pendingVisibility&=-3,Ia(K,N,2))}}};return a.stateNode=E,a}function fe(a,l,f){return a=mn(6,a,null,l),a.lanes=f,a}function ae(a,l,f){return l=mn(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function rt(a,l,f,x,E,N,K,pe){this.tag=1,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ha,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.hiddenUpdates=jt(null),this.identifierPrefix=x,this.onUncaughtError=E,this.onCaughtError=N,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function ze(a,l,f,x,E,N,K,pe,Xe,Ot,Sn,kn){return a=new rt(a,l,f,K,pe,Xe,Ot,kn),l=1,N===!0&&(l|=24),N=mn(3,null,null,l),a.current=N,N.stateNode=a,l=Zl(),l.refCount++,a.pooledCache=l,l.refCount++,N.memoizedState={element:x,isDehydrated:f,cache:l},Ht(N),a}function ut(a){return a?(a=Zs,a):Zs}function Se(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(j(188)):(a=Object.keys(a).join(","),Error(j(268,a)));return a=Xi(l),a=a!==null?st(a):null,a===null?null:Zi(a.stateNode)}function Ie(a,l,f,x,E,N){E=ut(E),x.context===null?x.context=E:x.pendingContext=E,x=Yn(l),x.payload={element:f},N=N===void 0?null:N,N!==null&&(x.callback=N),f=vi(a,x,l),f!==null&&(Ia(f,a,l),ca(f,a,l))}function He(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function At(a,l){He(a,l),(a=a.alternate)&&He(a,l)}var Pe={},ee=k(67294),V=k(63840),ct=Object.assign,Ye=Symbol.for("react.element"),Ee=Symbol.for("react.transitional.element"),bt=Symbol.for("react.portal"),qe=Symbol.for("react.fragment"),yt=Symbol.for("react.strict_mode"),kt=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),Ze=Symbol.for("react.context"),Tt=Symbol.for("react.forward_ref"),Jt=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),Zt=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var vn=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var Rt=Symbol.for("react.memo_cache_sentinel"),ei=Symbol.iterator,Bi=Symbol.for("react.client.reference"),sn=ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Zr,Po,ar=!1,Gr=Array.isArray,Vt=he.rendererVersion,Pt=he.rendererPackageName,si=he.extraDevToolsConfig,Zi=he.getPublicInstance,yi=he.getRootHostContext,kr=he.getChildHostContext,ds=he.prepareForCommit,ye=he.resetAfterCommit,Ja=he.createInstance,Fi=he.appendInitialChild,Wt=he.finalizeInitialChildren,ai=he.shouldSetTextContent,Dr=he.createTextInstance,oi=he.scheduleTimeout,er=he.cancelTimeout,ha=he.noTimeout,Wr=he.isPrimaryRenderer;he.warnsIfNotActing;var te=he.supportsMutation,H=he.supportsPersistence,We=he.supportsHydration,wt=he.getInstanceFromNode;he.beforeActiveInstanceBlur,he.afterActiveInstanceBlur;var on=he.preparePortalMount;he.prepareScopeUpdate,he.getInstanceFromScope;var gt=he.setCurrentUpdatePriority,ti=he.getCurrentUpdatePriority,Cn=he.resolveUpdatePriority;he.resolveEventType,he.resolveEventTimeStamp;var ci=he.shouldAttemptEagerTransition,fi=he.detachDeletedInstance;he.requestPostPaintCallback;var gn=he.maySuspendCommit,Vn=he.preloadInstance,Ii=he.startSuspendingCommit,Un=he.suspendInstance,Fn=he.waitForCommitToBeReady,Pi=he.NotPendingTransition,_e=he.HostTransitionContext,pn=he.resetFormInstance;he.bindToConsole;var Nn=he.supportsMicrotasks,ni=he.scheduleMicrotask,cn=he.supportsTestSelectors,$t=he.findFiberRoot,ui=he.getBoundingRect,Ji=he.getTextContent,pa=he.isHiddenSubtree,ia=he.matchAccessibilityRole,fs=he.setFocusIfFocusable,jl=he.setupIntersectionObserver,Yd=he.appendChild,Yo=he.appendChildToContainer,vc=he.commitTextUpdate,vu=he.commitMount,qd=he.commitUpdate,Ml=he.insertBefore,gu=he.insertInContainerBefore,lc=he.removeChild,Qf=he.removeChildFromContainer,Jd=he.resetTextContent,Qd=he.hideInstance,md=he.hideTextInstance,eh=he.unhideInstance,vd=he.unhideTextInstance,Fs=he.clearContainer,Lc=he.cloneInstance,Y=he.createContainerChildSet,Be=he.appendChildToContainerChildSet,pt=he.finalizeContainerChildren,dt=he.replaceContainerChildren,Ve=he.cloneHiddenInstance,un=he.cloneHiddenTextInstance,Bn=he.isSuspenseInstancePending,ri=he.isSuspenseInstanceFallback,qn=he.getSuspenseInstanceFallbackErrorDetails,Mi=he.registerSuspenseInstanceRetry,zi=he.canHydrateFormStateMarker,Si=he.isFormStateMarkerMatching,wr=he.getNextHydratableSibling,wa=he.getFirstHydratableChild,_o=he.getFirstHydratableChildWithinContainer,Da=he.getFirstHydratableChildWithinSuspenseInstance,Pa=he.canHydrateInstance,Ti=he.canHydrateTextInstance,vo=he.canHydrateSuspenseInstance,Qr=he.hydrateInstance,nl=he.hydrateTextInstance,Uc=he.hydrateSuspenseInstance,il=he.getNextHydratableInstanceAfterSuspenseInstance,yu=he.commitHydratedContainer,Ba=he.commitHydratedSuspenseInstance,zs=he.clearSuspenseBoundary,Hs=he.clearSuspenseBoundaryFromContainer,qo=he.shouldDeleteUnhydratedTailInstances;he.diffHydratedPropsForDevWarnings,he.diffHydratedTextForDevWarnings,he.describeHydratableInstanceForDevWarnings;var Rs=he.validateHydratableInstance,Fu=he.validateHydratableTextInstance,jr=he.supportsResources,th=he.isHostHoistableType,xu=he.getHoistableRoot,gd=he.getResource,zu=he.acquireResource,Hu=he.releaseResource,_h=he.hydrateHoistable,ef=he.mountHoistable,nh=he.unmountHoistable,Gh=he.createHoistableInstance,yd=he.prepareToCommitHoistables,Su=he.mayResourceSuspendCommit,xd=he.preloadResource,ih=he.suspendResource,Ss=he.supportsSingletons,Of=he.resolveSingletonInstance,Zu=he.clearSingleton,Bc=he.acquireSingletonInstance,kh=he.releaseSingletonInstance,Vu=he.isHostSingletonType,Sd=[],Is=-1,Zs={},Wo=Math.clz32?Math.clz32:wn,Df=Math.log,Wh=Math.LN2,tf=128,nf=4194304,bs=V.unstable_scheduleCallback,Lf=V.unstable_cancelCallback,Mh=V.unstable_shouldYield,jh=V.unstable_requestPaint,hl=V.unstable_now,bu=V.unstable_ImmediatePriority,rf=V.unstable_UserBlockingPriority,gc=V.unstable_NormalPriority,rh=V.unstable_IdlePriority,ah=V.log,hs=V.unstable_setDisableYieldValue,Fc=null,rl=null,Jo=typeof Object.is=="function"?Object.is:ii,oh=new WeakMap,Qo=[],zc=0,Gu=null,af=0,Vs=[],Ps=0,Hc=null,yc=1,Gs="",es=tn(null),bd=tn(null),Zc=tn(null),ks=tn(null),Ws=null,_s=null,ya=!1,El=null,Cl=!1,_d=Error(j(519)),Tl=[],ku=0,of=0,sf=null,Wu=null,Md=!1,Uf=!1,sh=!1,Ed=0,lf=null,lh=0,Vc=0,Gc=null,Xl=!1,ju=!1,_u=Object.prototype.hasOwnProperty,Mu=Error(j(460)),Cd=Error(j(474)),Xu={then:function(){}},Eu=null,kc=null,Td=0,Ns=uo(!0),wd=uo(!1),Wc=tn(null),Ad=tn(0),al=tn(null),$l=null,jo=tn(0),xc=0,Ar=null,Fa=null,ts=null,Bf=!1,Rd=!1,cc=!1,Ff=0,Id=0,Pd=null,Xh=0,$u=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Kl={readContext:ga,use:Br,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useLayoutEffect:Ni,useInsertionEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useSyncExternalStore:Ni,useId:Ni};Kl.useCacheRefresh=Ni,Kl.useMemoCache=Ni,Kl.useHostTransitionStatus=Ni,Kl.useFormState=Ni,Kl.useActionState=Ni,Kl.useOptimistic=Ni;var Cu={readContext:ga,use:Br,useCallback:function(a,l){return lt().memoizedState=[a,l===void 0?null:l],a},useContext:ga,useEffect:it,useImperativeHandle:function(a,l,f){f=f!=null?f.concat([a]):null,ne(4194308,4,Xt.bind(null,l,a),f)},useLayoutEffect:function(a,l){return ne(4194308,4,a,l)},useInsertionEffect:function(a,l){ne(4,2,a,l)},useMemo:function(a,l){var f=lt();l=l===void 0?null:l;var x=a();if(cc){pi(!0);try{a()}finally{pi(!1)}}return f.memoizedState=[x,l],x},useReducer:function(a,l,f){var x=lt();if(f!==void 0){var E=f(l);if(cc){pi(!0);try{f(l)}finally{pi(!1)}}}else E=l;return x.memoizedState=x.baseState=E,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:E},x.queue=a,a=a.dispatch=Tr.bind(null,Ar,a),[x.memoizedState,a]},useRef:function(a){var l=lt();return a={current:a},l.memoizedState=a},useState:function(a){a=po(a);var l=a.queue,f=ir.bind(null,Ar,l);return l.dispatch=f,[a.memoizedState,f]},useDebugValue:xn,useDeferredValue:function(a,l){var f=lt();return li(f,a,l)},useTransition:function(){var a=po(!1);return a=hr.bind(null,Ar,a.queue,!0,!1),lt().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,f){var x=Ar,E=lt();if(ya){if(f===void 0)throw Error(j(407));f=f()}else{if(f=l(),La===null)throw Error(j(349));ra&60||ro(x,l,f)}E.memoizedState=f;var N={value:f,getSnapshot:l};return E.queue=N,it(To.bind(null,x,N,a),[a]),x.flags|=2048,F(9,Do.bind(null,x,N,f,l),{destroy:void 0},null),f},useId:function(){var a=lt(),l=La.identifierPrefix;if(ya){var f=Gs,x=yc;f=(x&~(1<<32-Wo(x)-1)).toString(32)+f,l=":"+l+"R"+f,f=Ff++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=Xh++,l=":"+l+"r"+f.toString(32)+":";return a.memoizedState=l},useCacheRefresh:function(){return lt().memoizedState=Hr.bind(null,Ar)}};Cu.useMemoCache=Fr,Cu.useHostTransitionStatus=Xn,Cu.useFormState=ls,Cu.useActionState=ls,Cu.useOptimistic=function(a){var l=lt();l.memoizedState=l.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Vr.bind(null,Ar,!0,f),f.dispatch=l,[a,l]};var Sc={readContext:ga,use:Br,useCallback:Ut,useContext:ga,useEffect:Gt,useImperativeHandle:jn,useInsertionEffect:Jn,useLayoutEffect:Zn,useMemo:St,useReducer:Ai,useRef:G,useState:function(){return Ai(_i)},useDebugValue:xn,useDeferredValue:function(a,l){var f=an();return ur(f,Fa.memoizedState,a,l)},useTransition:function(){var a=Ai(_i)[0],l=an().memoizedState;return[typeof a=="boolean"?a:Oi(a),l]},useSyncExternalStore:yr,useId:Gn};Sc.useCacheRefresh=gi,Sc.useMemoCache=Fr,Sc.useHostTransitionStatus=Xn,Sc.useFormState=$s,Sc.useActionState=$s,Sc.useOptimistic=function(a,l){var f=an();return da(f,Fa,a,l)};var jc={readContext:ga,use:Br,useCallback:Ut,useContext:ga,useEffect:Gt,useImperativeHandle:jn,useInsertionEffect:Jn,useLayoutEffect:Zn,useMemo:St,useReducer:Aa,useRef:G,useState:function(){return Aa(_i)},useDebugValue:xn,useDeferredValue:function(a,l){var f=an();return Fa===null?li(f,a,l):ur(f,Fa.memoizedState,a,l)},useTransition:function(){var a=Aa(_i)[0],l=an().memoizedState;return[typeof a=="boolean"?a:Oi(a),l]},useSyncExternalStore:yr,useId:Gn};jc.useCacheRefresh=gi,jc.useMemoCache=Fr,jc.useHostTransitionStatus=Xn,jc.useFormState=wo,jc.useActionState=wo,jc.useOptimistic=function(a,l){var f=an();return Fa!==null?da(f,Fa,a,l):(f.baseState=a,[a,f.queue.dispatch])};var cf={isMounted:function(a){return(a=a._reactInternals)?hi(a)===a:!1},enqueueSetState:function(a,l,f){a=a._reactInternals;var x=Ro(),E=Yn(x);E.payload=l,f!=null&&(E.callback=f),l=vi(a,E,x),l!==null&&(Ia(l,a,x),ca(l,a,x))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var x=Ro(),E=Yn(x);E.tag=1,E.payload=l,f!=null&&(E.callback=f),l=vi(a,E,x),l!==null&&(Ia(l,a,x),ca(l,a,x))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=Ro(),x=Yn(f);x.tag=2,l!=null&&(x.callback=l),l=vi(a,x,f),l!==null&&(Ia(l,a,f),ca(l,a,f))}},zf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof p=="object"&&typeof p.emit=="function"){p.emit("uncaughtException",a);return}console.error(a)},Hf=Error(j(461)),Xo=!1,Zf={dehydrated:null,treeContext:null,retryLane:0},Ku=tn(null),pl=null,bc=null,uf=typeof AbortController!="undefined"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(f,x){a.push(x)}};this.abort=function(){l.aborted=!0,a.forEach(function(f){return f()})}},Yu=V.unstable_scheduleCallback,Nd=V.unstable_NormalPriority,Bo={$$typeof:Ze,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Eh=sn.S;sn.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&X(a,l),Eh!==null&&Eh(a,l)};var Tu=tn(null),_c=!1,Fo=!1,ch=!1,Ch=typeof WeakSet=="function"?WeakSet:Set,ps=null,$h=!1,ns=null,wl=!1,Al=null,qu=8192,Th={getCacheForType:function(a){var l=ga(Bo),f=l.data.get(a);return f===void 0&&(f=a(),l.data.set(a,f)),f}},Rl=0,Vf=1,Qa=2,Xc=3,Yl=4;if(typeof Symbol=="function"&&Symbol.for){var wu=Symbol.for;Rl=wu("selector.component"),Vf=wu("selector.has_pseudo_class"),Qa=wu("selector.role"),Xc=wu("selector.test_id"),Yl=wu("selector.text")}var $c=typeof WeakMap=="function"?WeakMap:Map,Wa=0,La=null,Xr=null,ra=0,eo=0,Ms=null,ql=!1,ml=!1,Gf=!1,is=0,Mo=0,Kc=0,Mc=0,uh=0,Il=0,ms=0,Yc=null,js=null,qc=!1,Od=0,Jl=1/0,kf=null,Ql=null,Ju=!1,Ec=null,Au=0,Dd=0,Wf=null,Ld=0,jf=null;return Pe.attemptContinuousHydration=function(a){if(a.tag===13){var l=qi(a,67108864);l!==null&&Ia(l,a,67108864),At(a,67108864)}},Pe.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var l=Ro(),f=qi(a,l);f!==null&&Ia(f,a,l),At(a,l)}},Pe.attemptSynchronousHydration=function(a){switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var l=Wn(a.pendingLanes);if(l!==0){for(a.pendingLanes|=2,a.entangledLanes|=2;l;){var f=1<<31-Wo(l);a.entanglements[1]|=f,l&=~f}lr(a),!(Wa&6)&&(Jl=hl()+500,ba(0,!1))}}break;case 13:l=qi(a,2),l!==null&&Ia(l,a,2),Nc(),At(a,2)}},Pe.batchedUpdates=function(a,l){return a(l)},Pe.createComponentSelector=function(a){return{$$typeof:Rl,value:a}},Pe.createContainer=function(a,l,f,x,E,N,K,pe,Xe,Ot){return ze(a,l,!1,null,f,x,N,K,pe,Xe,Ot,null)},Pe.createHasPseudoClassSelector=function(a){return{$$typeof:Vf,value:a}},Pe.createHydrationContainer=function(a,l,f,x,E,N,K,pe,Xe,Ot,Sn,kn,Hn){return a=ze(f,x,!0,a,E,N,pe,Xe,Ot,Sn,kn,Hn),a.context=ut(null),f=a.current,x=Ro(),E=Yn(x),E.callback=l!=null?l:null,vi(f,E,x),a.current.lanes=x,Mr(a,x),lr(a),a},Pe.createPortal=function(a,l,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bt,key:x==null?null:""+x,children:a,containerInfo:l,implementation:f}},Pe.createRoleSelector=function(a){return{$$typeof:Qa,value:a}},Pe.createTestNameSelector=function(a){return{$$typeof:Xc,value:a}},Pe.createTextSelector=function(a){return{$$typeof:Yl,value:a}},Pe.defaultOnCaughtError=function(a){console.error(a)},Pe.defaultOnRecoverableError=function(a){zf(a)},Pe.defaultOnUncaughtError=function(a){zf(a)},Pe.deferredUpdates=function(a){var l=sn.T,f=ti();try{return gt(32),sn.T=null,a()}finally{gt(f),sn.T=l}},Pe.discreteUpdates=function(a,l,f,x,E){var N=sn.T,K=ti();try{return gt(2),sn.T=null,a(l,f,x,E)}finally{gt(K),sn.T=N,Wa===0&&(Jl=hl()+500)}},Pe.findAllNodes=el,Pe.findBoundingRects=function(a,l){if(!cn)throw Error(j(363));l=el(a,l),a=[];for(var f=0;f<l.length;f++)a.push(ui(l[f]));for(l=a.length-1;0<l;l--){f=a[l];for(var x=f.x,E=x+f.width,N=f.y,K=N+f.height,pe=l-1;0<=pe;pe--)if(l!==pe){var Xe=a[pe],Ot=Xe.x,Sn=Ot+Xe.width,kn=Xe.y,Hn=kn+Xe.height;if(x>=Ot&&N>=kn&&E<=Sn&&K<=Hn){a.splice(l,1);break}else if(x!==Ot||f.width!==Xe.width||Hn<N||kn>K){if(!(N!==kn||f.height!==Xe.height||Sn<x||Ot>E)){Ot>x&&(Xe.width+=Ot-x,Xe.x=x),Sn<E&&(Xe.width=E-Ot),a.splice(l,1);break}}else{kn>N&&(Xe.height+=kn-N,Xe.y=N),Hn<K&&(Xe.height=K-kn),a.splice(l,1);break}}}return a},Pe.findHostInstance=Se,Pe.findHostInstanceWithNoPortals=function(a){return a=Xi(a),a=a!==null?ln(a):null,a===null?null:Zi(a.stateNode)},Pe.findHostInstanceWithWarning=function(a){return Se(a)},Pe.flushPassiveEffects=Us,Pe.flushSyncFromReconciler=function(a){var l=Wa;Wa|=1;var f=sn.T,x=ti();try{if(gt(2),sn.T=null,a)return a()}finally{gt(x),sn.T=f,Wa=l,!(Wa&6)&&ba(0,!1)}},Pe.flushSyncWork=Nc,Pe.focusWithin=function(a,l){if(!cn)throw Error(j(363));for(a=Uo(a),l=Pc(a,l),l=Array.from(l),a=0;a<l.length;){var f=l[a++],x=f.tag;if(!pa(f)){if((x===5||x===26||x===27)&&fs(f.stateNode))return!0;for(f=f.child;f!==null;)l.push(f),f=f.sibling}}return!1},Pe.getFindAllNodesFailureDescription=function(a,l){if(!cn)throw Error(j(363));var f=0,x=[];a=[Uo(a),0];for(var E=0;E<a.length;){var N=a[E++],K=N.tag,pe=a[E++],Xe=l[pe];if((K!==5&&K!==26&&K!==27||!pa(N))&&(As(N,Xe)&&(x.push(Ds(Xe)),pe++,pe>f&&(f=pe)),pe<l.length))for(N=N.child;N!==null;)a.push(N,pe),N=N.sibling}if(f<l.length){for(a=[];f<l.length;f++)a.push(Ds(l[f]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},Pe.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 27:case 5:return Zi(a.child.stateNode);default:return a.child.stateNode}},Pe.injectIntoDevTools=function(){var a={bundleType:0,version:Vt,rendererPackageName:Pt,currentDispatcherRef:sn,findFiberByHostInstance:wt,reconcilerVersion:"19.0.0"};if(si!==null&&(a.rendererConfig=si),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")a=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)a=!0;else{try{Fc=l.inject(a),rl=l}catch(f){}a=!!l.checkDCE}}return a},Pe.isAlreadyRendering=function(){return!1},Pe.observeVisibleRects=function(a,l,f,x){if(!cn)throw Error(j(363));a=el(a,l);var E=jl(a,f,x).disconnect;return{disconnect:function(){E()}}},Pe.shouldError=function(){return null},Pe.shouldSuspend=function(){return!1},Pe.startHostTransition=function(a,l,f,x){if(a.tag!==5)throw Error(j(476));var E=ki(a).queue;hr(a,E,l,Pi,f===null?Ue:function(){var N=ki(a).next.queue;return Ea(a,N,{},Ro()),f(x)})},Pe.updateContainer=function(a,l,f,x){var E=l.current,N=Ro();return Ie(E,N,a,l,f,x),N},Pe.updateContainerSync=function(a,l,f,x){return l.tag===0&&Us(),Ie(l.current,2,a,l,f,x),2},Pe},Li.exports.default=Li.exports,Object.defineProperty(Li.exports,"__esModule",{value:!0})},32576:function(Li,hn,k){"use strict";Li.exports=k(43452)},76525:function(Li,hn,k){"use strict";Li.exports=k(71251)},56152:function(Li,hn){"use strict";function k(qt,Kn){var $n=qt.length;qt.push(Kn);e:for(;0<$n;){var pi=$n-1>>>1,ii=qt[pi];if(0<mn(ii,Kn))qt[pi]=Kn,qt[$n]=ii,$n=pi;else break e}}function p(qt){return qt.length===0?null:qt[0]}function he(qt){if(qt.length===0)return null;var Kn=qt[0],$n=qt.pop();if($n!==Kn){qt[0]=$n;e:for(var pi=0,ii=qt.length,Er=ii>>>1;pi<Er;){var Lr=2*(pi+1)-1,Ha=qt[Lr],xt=Lr+1,Kt=qt[xt];if(0>mn(Ha,$n))xt<ii&&0>mn(Kt,Ha)?(qt[pi]=Kt,qt[xt]=$n,pi=xt):(qt[pi]=Ha,qt[Lr]=$n,pi=Lr);else if(xt<ii&&0>mn(Kt,$n))qt[pi]=Kt,qt[xt]=$n,pi=xt;else break e}}return Kn}function mn(qt,Kn){var $n=qt.sortIndex-Kn.sortIndex;return $n!==0?$n:qt.id-Kn.id}if(hn.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var Ue=performance;hn.unstable_now=function(){return Ue.now()}}else{var j=Date,en=j.now();hn.unstable_now=function(){return j.now()-en}}var D=[],dn=[],Kr=1,Ei=null,Mt=3,hi=!1,di=!1,Xi=!1,st=typeof setTimeout=="function"?setTimeout:null,ln=typeof clearTimeout=="function"?clearTimeout:null,tn=typeof setImmediate!="undefined"?setImmediate:null;function C(qt){for(var Kn=p(dn);Kn!==null;){if(Kn.callback===null)he(dn);else if(Kn.startTime<=qt)he(dn),Kn.sortIndex=Kn.expirationTime,k(D,Kn);else break;Kn=p(dn)}}function Nt(qt){if(Xi=!1,C(qt),!di)if(p(D)!==null)di=!0,Hi();else{var Kn=p(dn);Kn!==null&&Rr(Nt,Kn.startTime-qt)}}var wn=!1,Wn=-1,O=5,Vi=-1;function Pn(){return!(hn.unstable_now()-Vi<O)}function An(){if(wn){var qt=hn.unstable_now();Vi=qt;var Kn=!0;try{e:{di=!1,Xi&&(Xi=!1,ln(Wn),Wn=-1),hi=!0;var $n=Mt;try{t:{for(C(qt),Ei=p(D);Ei!==null&&!(Ei.expirationTime>qt&&Pn());){var pi=Ei.callback;if(typeof pi=="function"){Ei.callback=null,Mt=Ei.priorityLevel;var ii=pi(Ei.expirationTime<=qt);if(qt=hn.unstable_now(),typeof ii=="function"){Ei.callback=ii,C(qt),Kn=!0;break t}Ei===p(D)&&he(D),C(qt)}else he(D);Ei=p(D)}if(Ei!==null)Kn=!0;else{var Er=p(dn);Er!==null&&Rr(Nt,Er.startTime-qt),Kn=!1}}break e}finally{Ei=null,Mt=$n,hi=!1}Kn=void 0}}finally{Kn?Dn():wn=!1}}}var Dn;if(typeof tn=="function")Dn=function(){tn(An)};else if(typeof MessageChannel!="undefined"){var jt=new MessageChannel,Mr=jt.port2;jt.port1.onmessage=An,Dn=function(){Mr.postMessage(null)}}else Dn=function(){st(An,0)};function Hi(){wn||(wn=!0,Dn())}function Rr(qt,Kn){Wn=st(function(){qt(hn.unstable_now())},Kn)}hn.unstable_IdlePriority=5,hn.unstable_ImmediatePriority=1,hn.unstable_LowPriority=4,hn.unstable_NormalPriority=3,hn.unstable_Profiling=null,hn.unstable_UserBlockingPriority=2,hn.unstable_cancelCallback=function(qt){qt.callback=null},hn.unstable_continueExecution=function(){di||hi||(di=!0,Hi())},hn.unstable_forceFrameRate=function(qt){0>qt||125<qt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<qt?Math.floor(1e3/qt):5},hn.unstable_getCurrentPriorityLevel=function(){return Mt},hn.unstable_getFirstCallbackNode=function(){return p(D)},hn.unstable_next=function(qt){switch(Mt){case 1:case 2:case 3:var Kn=3;break;default:Kn=Mt}var $n=Mt;Mt=Kn;try{return qt()}finally{Mt=$n}},hn.unstable_pauseExecution=function(){},hn.unstable_requestPaint=function(){},hn.unstable_runWithPriority=function(qt,Kn){switch(qt){case 1:case 2:case 3:case 4:case 5:break;default:qt=3}var $n=Mt;Mt=qt;try{return Kn()}finally{Mt=$n}},hn.unstable_scheduleCallback=function(qt,Kn,$n){var pi=hn.unstable_now();switch(typeof $n=="object"&&$n!==null?($n=$n.delay,$n=typeof $n=="number"&&0<$n?pi+$n:pi):$n=pi,qt){case 1:var ii=-1;break;case 2:ii=250;break;case 5:ii=1073741823;break;case 4:ii=1e4;break;default:ii=5e3}return ii=$n+ii,qt={id:Kr++,callback:Kn,priorityLevel:qt,startTime:$n,expirationTime:ii,sortIndex:-1},$n>pi?(qt.sortIndex=$n,k(dn,qt),p(D)===null&&qt===p(dn)&&(Xi?(ln(Wn),Wn=-1):Xi=!0,Rr(Nt,$n-pi))):(qt.sortIndex=ii,k(D,qt),di||hi||(di=!0,Hi())),qt},hn.unstable_shouldYield=Pn,hn.unstable_wrapCallback=function(qt){var Kn=Mt;return function(){var $n=Mt;Mt=Kn;try{return qt.apply(this,arguments)}finally{Mt=$n}}}},63840:function(Li,hn,k){"use strict";Li.exports=k(56152)},11742:function(Li){Li.exports=function(){var hn=document.getSelection();if(!hn.rangeCount)return function(){};for(var k=document.activeElement,p=[],he=0;he<hn.rangeCount;he++)p.push(hn.getRangeAt(he));switch(k.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":k.blur();break;default:k=null;break}return hn.removeAllRanges(),function(){hn.type==="Caret"&&hn.removeAllRanges(),hn.rangeCount||p.forEach(function(mn){hn.addRange(mn)}),k&&k.focus()}}},26251:function(Li,hn,k){"use strict";var p=k(67294),he=k(61688);function mn(Ei,Mt){return Ei===Mt&&(Ei!==0||1/Ei===1/Mt)||Ei!==Ei&&Mt!==Mt}var Ue=typeof Object.is=="function"?Object.is:mn,j=he.useSyncExternalStore,en=p.useRef,D=p.useEffect,dn=p.useMemo,Kr=p.useDebugValue;hn.useSyncExternalStoreWithSelector=function(Ei,Mt,hi,di,Xi){var st=en(null);if(st.current===null){var ln={hasValue:!1,value:null};st.current=ln}else ln=st.current;st=dn(function(){function C(Vi){if(!Nt){if(Nt=!0,wn=Vi,Vi=di(Vi),Xi!==void 0&&ln.hasValue){var Pn=ln.value;if(Xi(Pn,Vi))return Wn=Pn}return Wn=Vi}if(Pn=Wn,Ue(wn,Vi))return Pn;var An=di(Vi);return Xi!==void 0&&Xi(Pn,An)?(wn=Vi,Pn):(wn=Vi,Wn=An)}var Nt=!1,wn,Wn,O=hi===void 0?null:hi;return[function(){return C(Mt())},O===null?void 0:function(){return C(O())}]},[Mt,hi,di,Xi]);var tn=j(Ei,st[0],st[1]);return D(function(){ln.hasValue=!0,ln.value=tn},[tn]),Kr(tn),tn}},52798:function(Li,hn,k){"use strict";Li.exports=k(26251)},83213:function(Li,hn,k){"use strict";k.d(hn,{Hn:function(){return en},NN:function(){return D},jn:function(){return Xi},pc:function(){return mn}});var p=k(67294);const he=(()=>{var st,ln;return typeof window!="undefined"&&(((st=window.document)==null?void 0:st.createElement)||((ln=window.navigator)==null?void 0:ln.product)==="ReactNative")})()?p.useLayoutEffect:p.useEffect;function mn(st,ln,tn){if(!st)return;if(tn(st)===!0)return st;let C=ln?st.return:st.child;for(;C;){const Nt=mn(C,ln,tn);if(Nt)return Nt;C=ln?null:C.sibling}}function Ue(st){try{return Object.defineProperties(st,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(ln){return st}}const j=Ue(p.createContext(null));class en extends p.Component{render(){return p.createElement(j.Provider,{value:this._reactInternals},this.props.children)}}function D(){const st=p.useContext(j);if(st===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const ln=p.useId();return p.useMemo(()=>{for(const tn of[st,st==null?void 0:st.alternate]){if(!tn)continue;const C=mn(tn,!1,Nt=>{let wn=Nt.memoizedState;for(;wn;){if(wn.memoizedState===ln)return!0;wn=wn.next}});if(C)return C}},[st,ln])}function dn(){const st=D(),ln=o.useMemo(()=>mn(st,!0,tn=>{var C;return((C=tn.stateNode)==null?void 0:C.containerInfo)!=null}),[st]);return ln==null?void 0:ln.stateNode.containerInfo}function Kr(st){const ln=D(),tn=o.useRef(void 0);return he(()=>{var C;tn.current=(C=mn(ln,!1,Nt=>typeof Nt.type=="string"&&(st===void 0||Nt.type===st)))==null?void 0:C.stateNode},[ln]),tn}function Ei(st){const ln=D(),tn=o.useRef(void 0);return he(()=>{var C;tn.current=(C=mn(ln,!0,Nt=>typeof Nt.type=="string"&&(st===void 0||Nt.type===st)))==null?void 0:C.stateNode},[ln]),tn}const Mt=Symbol.for("react.context"),hi=st=>st!==null&&typeof st=="object"&&"$$typeof"in st&&st.$$typeof===Mt;function di(){const st=D(),[ln]=p.useState(()=>new Map);ln.clear();let tn=st;for(;tn;){const C=tn.type;hi(C)&&C!==j&&!ln.has(C)&&ln.set(C,p.use(Ue(C))),tn=tn.return}return ln}function Xi(){const st=di();return p.useMemo(()=>Array.from(st.keys()).reduce((ln,tn)=>C=>p.createElement(ln,null,p.createElement(tn.Provider,cl(Qi({},C),{value:st.get(tn)}))),ln=>p.createElement(en,Qi({},ln))),[st])}},74250:function(Li,hn,k){"use strict";k.d(hn,{$TI:function(){return zm},$V:function(){return km},$YQ:function(){return lf},$wi:function(){return Ur},A5E:function(){return Po},ACn:function(){return Ic},AXT:function(){return Kl},B02:function(){return D},B7y:function(){return Vm},BFQ:function(){return an},BG$:function(){return da},BVF:function(){return En},BVQ:function(){return Vc},BbS:function(){return Fp},Bf4:function(){return xe},Bgp:function(){return ba},BtG:function(){return Ml},CJI:function(){return se},CaW:function(){return cr},CdI:function(){return qi},CtA:function(){return Te},CtF:function(){return Qc},Cy:function(){return Ha},D1R:function(){return va},D67:function(){return Fd},D9w:function(){return Oa},Djp:function(){return po},DqL:function(){return _p},DvJ:function(){return _e},E2K:function(){return Et},EB7:function(){return Md},EJi:function(){return x},EcG:function(){return em},EoG:function(){return ta},F1y:function(){return xf},F5G:function(){return _t},F5T:function(){return vn},FDw:function(){return os},FE5:function(){return Au},FIo:function(){return l},FM8:function(){return nn},FT0:function(){return kn},FUD:function(){return Bl},FvO:function(){return Ym},GG6:function(){return _a},GQ:function(){return o0},GUF:function(){return Sr},GVz:function(){return If},Gih:function(){return Es},Gql:function(){return vm},H$k:function(){return Ju},H7L:function(){return Xd},HTd:function(){return Gi},HdW:function(){return wo},HgB:function(){return Hl},HkE:function(){return bm},Hmr:function(){return ap},Hw6:function(){return kl},Hy8:function(){return $n},Hyl:function(){return Ns},I3e:function(){return Zl},IEO:function(){return jr},IFH:function(){return St},IKL:function(){return N},ILR:function(){return Br},IOt:function(){return Tr},Ilk:function(){return ot},Ir4:function(){return Gd},JCZ:function(){return gl},JOQ:function(){return Zu},JQ4:function(){return Co},JUT:function(){return Sl},JWc:function(){return Vd},Jjb:function(){return Hd},KI_:function(){return Vr},Kgo:function(){return Mu},KhW:function(){return Mr},Kj0:function(){return Un},Kz5:function(){return Ka},L5s:function(){return ip},LBq:function(){return Wm},LSk:function(){return Ga},LY2:function(){return Cr},LgZ:function(){return qt},LsT:function(){return $a},Ltg:function(){return so},Lun:function(){return Ot},M$G:function(){return Sf},M5h:function(){return Nt},M6v:function(){return Ir},M8C:function(){return Ac},Mig:function(){return Rp},MyG:function(){return Fl},N$j:function(){return Fu},N4l:function(){return C},NDo:function(){return ma},NKc:function(){return Kt},NMF:function(){return Zn},NYV:function(){return Di},NiX:function(){return Jd},Ns1:function(){return Yi},NwF:function(){return df},Ny0:function(){return wd},O4K:function(){return uu},O5A:function(){return yl},O78:function(){return zd},O7d:function(){return Mc},OAl:function(){return Qn},ORg:function(){return la},OTo:function(){return Ln},Oau:function(){return h0},OdW:function(){return gd},OoA:function(){return Yn},Ox3:function(){return Ap},PA7:function(){return ir},PMe:function(){return Cp},Pa4:function(){return ce},PeU:function(){return Ue},Pnf:function(){return jn},PpQ:function(){return Gl},PzK:function(){return Hr},QM0:function(){return Iu},QO2:function(){return Ma},QRU:function(){return ym},QZ1:function(){return id},Qey:function(){return qf},QmN:function(){return mn},Qpg:function(){return e0},R2R:function(){return aa},RNb:function(){return si},ROQ:function(){return Ed},RSm:function(){return K},Rhp:function(){return Nn},Rki:function(){return r0},RlZ:function(){return Er},RsA:function(){return he},RvT:function(){return dr},S2y:function(){return en},S3k:function(){return mh},S9g:function(){return Wl},SJI:function(){return Mm},SPe:function(){return xd},SUY:function(){return Bp},Se2:function(){return rn},Sm8:function(){return An},SvJ:function(){return ls},Syv:function(){return Jn},T6w:function(){return Zd},T95:function(){return ss},TOt:function(){return Td},TUj:function(){return jm},TUv:function(){return Rs},T_1:function(){return Qp},T_J:function(){return Ks},T__:function(){return Wc},T_f:function(){return tp},TlE:function(){return Pt},Tme:function(){return Se},Tn7:function(){return a},TyD:function(){return vi},U7:function(){return jc},UCm:function(){return gr},USm:function(){return bo},UY4:function(){return _s},UZH:function(){return p},UcC:function(){return pp},Uk6:function(){return Wf},UlW:function(){return hr},Uol:function(){return _u},V1s:function(){return ia},VLJ:function(){return t0},VYz:function(){return Cm},Vdb:function(){return pi},Vkp:function(){return Js},VzW:function(){return uo},W2J:function(){return ul},WMw:function(){return tn},WTc:function(){return Zi},WXh:function(){return Dd},Wbm:function(){return O},Wid:function(){return f},Wl3:function(){return hi},Wpd:function(){return ii},Wqd:function(){return Zf},WwZ:function(){return ur},Wzm:function(){return Wu},Xaj:function(){return wn},Xcj:function(){return Lm},XvJ:function(){return Ec},YBo:function(){return pe},YGz:function(){return Pr},YKA:function(){return it},YLQ:function(){return ca},YT8:function(){return Ar},Ywn:function(){return fd},Z6B:function(){return kd},ZAu:function(){return lc},ZQ6:function(){return cf},ZRs:function(){return Jr},ZTh:function(){return G},ZXd:function(){return c0},ZZA:function(){return mt},Z_g:function(){return Uf},Zen:function(){return bf},Zp0:function(){return np},Zr5:function(){return Mn},ZzF:function(){return Uo},Zzh:function(){return Km},_12:function(){return qc},_7h:function(){return gi},_AM:function(){return Fr},_C8:function(){return fn},_Li:function(){return di},_MY:function(){return dn},_RZ:function(){return Or},_YM:function(){return no},_YX:function(){return qm},_am:function(){return qd},_fP:function(){return ws},_iA:function(){return Kr},_kC:function(){return Ud},_lf:function(){return xn},_sL:function(){return Ut},_wr:function(){return Lr},a$l:function(){return Wt},aCh:function(){return Ea},aH4:function(){return vr},aLr:function(){return Io},aNw:function(){return tc},aVm:function(){return kr},ad5:function(){return qa},aq0:function(){return n0},av9:function(){return Vo},bBp:function(){return Zp},bGH:function(){return Wn},b_z:function(){return ju},bdR:function(){return ln},blk:function(){return Ws},bnF:function(){return pl},brP:function(){return qr},bsb:function(){return $s},c8b:function(){return Dn},cBI:function(){return i0},cBK:function(){return dm},cE1:function(){return ru},cJO:function(){return ms},cLu:function(){return $o},cPb:function(){return Yo},cU9:function(){return $i},cac:function(){return cu},ce8:function(){return br},cek:function(){return wp},cum:function(){return Ys},dSO:function(){return X},dUE:function(){return ec},dVD:function(){return zn},dYG:function(){return bi},dZ3:function(){return lr},dd2:function(){return du},dj0:function(){return nd},dpR:function(){return fm},dwf:function(){return pn},dwk:function(){return Mt},e62:function(){return Fi},eD:function(){return Rn},eMJ:function(){return vl},eS_:function(){return ad},eaV:function(){return Ai},ehD:function(){return Xi},ejS:function(){return ks},ekQ:function(){return ro},epp:function(){return ka},f2y:function(){return Lo},fHI:function(){return Xl},fO1:function(){return of},fQA:function(){return a0},fSK:function(){return Kn},fY$:function(){return nr},fto:function(){return Aa},g8_:function(){return It},gH0:function(){return Fm},gJg:function(){return Wo},gSk:function(){return li},g_z:function(){return Sc},ghN:function(){return jt},gi4:function(){return zr},gti:function(){return Hf},hEm:function(){return ho},hH6:function(){return td},iAb:function(){return ua},iDF:function(){return is},iKG:function(){return ep},iLg:function(){return dh},iMs:function(){return Zm},iUV:function(){return Na},iWC:function(){return Hi},iWj:function(){return Sd},iiP:function(){return Cs},irR:function(){return fo},j17:function(){return ko},j4z:function(){return Ca},j87:function(){return ye},jAl:function(){return Ne},jFi:function(){return st},jZA:function(){return To},jes:function(){return xt},jfJ:function(){return Ao},jwo:function(){return mo},jyi:function(){return _o},jyz:function(){return pa},k0A:function(){return Zo},k74:function(){return Rr},kB5:function(){return Lc},kaV:function(){return Sn},kqm:function(){return Tm},ksN:function(){return sr},l0P:function(){return yr},l6D:function(){return fa},l8J:function(){return rd},lCJ:function(){return Ja},lDi:function(){return Ip},lGU:function(){return ne},lLk:function(){return Kh},lRF:function(){return Xe},lRj:function(){return Va},lb7:function(){return zu},lfu:function(){return to},lk7:function(){return Pp},m7l:function(){return hh},mSO:function(){return Gn},mTL:function(){return xm},mXe:function(){return zf},msZ:function(){return lo},mzJ:function(){return Om},nls:function(){return Qo},ntZ:function(){return Ei},o8S:function(){return Od},oAp:function(){return gu},oDz:function(){return cn},oa8:function(){return Jl},oqc:function(){return cs},p3g:function(){return fu},p7y:function(){return Yc},pBf:function(){return Ts},pIN:function(){return Xt},pKu:function(){return So},pQR:function(){return js},ppL:function(){return Um},ptH:function(){return Do},qVC:function(){return sh},qhX:function(){return Za},qkB:function(){return fr},qlB:function(){return ds},qyh:function(){return xo},rAo:function(){return yi},rDY:function(){return $t},rOj:function(){return Vi},r_:function(){return Pn},rpg:function(){return Ht},s4_:function(){return Np},sYA:function(){return um},tEQ:function(){return ph},tGC:function(){return Jp},tJx:function(){return s0},tQZ:function(){return Yt},tUh:function(){return mr},tf:function(){return sp},tm_:function(){return j},u37:function(){return Sm},u7G:function(){return Rh},u9r:function(){return H},uEv:function(){return Gt},uL9:function(){return xr},uWy:function(){return Tn},uXU:function(){return Cc},v2s:function(){return sf},v3W:function(){return Oi},v9Y:function(){return Tc},vBJ:function(){return Rt},vCF:function(){return Ci},vCx:function(){return _i},vZf:function(){return na},vmT:function(){return Mp},vpT:function(){return vd},vuL:function(){return F},vxC:function(){return io},w$m:function(){return Yr},wJv:function(){return Ae},wem:function(){return Nr},wk1:function(){return Ni},woe:function(){return Tl},wuA:function(){return lt},x12:function(){return Gs},x5V:function(){return Ko},xEZ:function(){return oo},xG9:function(){return Jm},xJs:function(){return Ya},xWb:function(){return fp},xeV:function(){return Y},xfE:function(){return yo},xnb:function(){return lh},xo$:function(){return Ql},xoQ:function(){return zl},xoR:function(){return E},xsS:function(){return eh},y$t:function(){return Ku},y2t:function(){return Go},y8_:function(){return l0},yC1:function(){return fh},yGw:function(){return Ui},ybr:function(){return md},yj7:function(){return Cu},ylh:function(){return Hm},yo9:function(){return Qd},yt0:function(){return Ra},ywz:function(){return co},yxD:function(){return Ah},z$h:function(){return ki},z81:function(){return Xn},z8B:function(){return vo},zHn:function(){return Oc},zT$:function(){return od},zbs:function(){return wh},zf8:function(){return Gc},zwN:function(){return oh}});const p="180",he={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},mn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ue=0,j=1,en=2,D=3,dn=0,Kr=1,Ei=2,Mt=3,hi=0,di=1,Xi=2,st=0,ln=1,tn=2,C=3,Nt=4,wn=5,Wn=100,O=101,Vi=102,Pn=103,An=104,Dn=200,jt=201,Mr=202,Hi=203,Rr=204,qt=205,Kn=206,$n=207,pi=208,ii=209,Er=210,Lr=211,Ha=212,xt=213,Kt=214,En=0,rn=1,Mn=2,Ci=3,Rn=4,sr=5,Yr=6,Ir=7,Yi=0,Za=1,ma=2,xr=0,ta=1,qi=2,Pr=3,Cr=4,lr=5,ba=6,la=7,Ur="attached",lo="detached",yo=300,nr=301,io=302,X=303,xe=304,It=306,Ht=1e3,Tn=1001,Yn=1002,vi=1003,ca=1004,Gi=1004,vr=1005,na=1005,Nr=1006,xo=1007,Va=1007,va=1008,os=1008,co=1009,ss=1010,ua=1011,$a=1012,Ka=1013,Co=1014,uo=1015,$o=1016,Zo=1017,fo=1018,Ae=1020,Yt=35902,zn=35899,Ln=1021,gr=1022,Ni=1023,fr=1026,qr=1027,ho=1028,Oa=1029,Vo=1030,Te=1031,_t=1032,Et=1033,lt=33776,an=33777,Oi=33778,Br=33779,Fr=35840,_i=35841,Ai=35842,cr=35843,Aa=36196,yr=37492,ro=37496,Do=37808,To=37809,Go=37810,zr=37811,po=37812,da=37813,Di=37814,Ya=37815,So=37816,_a=37817,Es=37818,Bl=37819,Cs=37820,ls=37821,$s=36492,Lo=36494,Ma=36495,wo=36283,F=36284,G=36285,ne=36286,Ne=2200,it=2201,Gt=2202,Jn=2300,Zn=2301,Xt=2302,jn=2400,xn=2401,Ut=2402,St=2500,li=2501,ur=0,hr=1,ki=2,Xn=3200,Gn=3201,gi=3202,Hr=3203,Tr=0,ir=1,Ea="",Vr="srgb",Sr="srgb-linear",fa="linear",ko="srgb",qa=0,Ko=7680,br=7681,Jr=7682,Ao=7683,cs=34055,Ks=34056,vl=5386,Fl=512,Cc=513,mo=514,Ra=515,Qn=516,dr=517,Ca=518,Ys=519,zl=512,Fd=513,xf=514,Sf=515,bf=516,zd=517,Hd=518,Zd=519,ul=35044,nd=35048,id=35040,Vd=35045,Iu=35049,Gd=35041,Hl=35046,rd=35050,kd=35042,Tc="100",Ga="300 es",Or=2e3,gl=2001,ad={COMPUTE:"compute",RENDER:"render"},ru={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},od={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class Ts{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const s=r[e];if(s!==void 0){const d=s.indexOf(t);d!==-1&&s.splice(d,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const s=r.slice(0);for(let d=0,i=s.length;d<i;d++)s[d].call(this,e);e.target=null}}}const ga=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let wc=1234567;const ic=Math.PI/180,Zl=180/Math.PI;function us(){const M=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ga[M&255]+ga[M>>8&255]+ga[M>>16&255]+ga[M>>24&255]+"-"+ga[e&255]+ga[e>>8&255]+"-"+ga[e>>16&15|64]+ga[e>>24&255]+"-"+ga[t&63|128]+ga[t>>8&255]+"-"+ga[t>>16&255]+ga[t>>24&255]+ga[r&255]+ga[r>>8&255]+ga[r>>16&255]+ga[r>>24&255]).toLowerCase()}function Ri(M,e,t){return Math.max(e,Math.min(t,M))}function au(M,e){return(M%e+e)%e}function _f(M,e,t,r,s){return r+(M-e)*(s-r)/(t-e)}function qs(M,e,t){return M!==e?(t-M)/(e-M):0}function ou(M,e,t){return(1-t)*M+t*e}function Wd(M,e,t,r){return ou(M,e,1-Math.exp(-t*r))}function Mf(M,e=1){return e-Math.abs(au(M,e*2)-e)}function Ef(M,e,t){return M<=e?0:M>=t?1:(M=(M-e)/(t-e),M*M*(3-2*M))}function sd(M,e,t){return M<=e?0:M>=t?1:(M=(M-e)/(t-e),M*M*M*(M*(M*6-15)+10))}function jd(M,e){return M+Math.floor(Math.random()*(e-M+1))}function Cf(M,e){return M+Math.random()*(e-M)}function ld(M){return M*(.5-Math.random())}function Pu(M){M!==void 0&&(wc=M);let e=wc+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ao(M){return M*ic}function Tf(M){return M*Zl}function Nu(M){return(M&M-1)===0&&M!==0}function cd(M){return Math.pow(2,Math.ceil(Math.log(M)/Math.LN2))}function su(M){return Math.pow(2,Math.floor(Math.log(M)/Math.LN2))}function uc(M,e,t,r,s){const d=Math.cos,i=Math.sin,n=d(t/2),c=i(t/2),u=d((e+r)/2),h=i((e+r)/2),m=d((e-r)/2),v=i((e-r)/2),y=d((r-e)/2),S=i((r-e)/2);switch(s){case"XYX":M.set(n*h,c*m,c*v,n*u);break;case"YZY":M.set(c*v,n*h,c*m,n*u);break;case"ZXZ":M.set(c*m,c*v,n*h,n*u);break;case"XZX":M.set(n*h,c*S,c*y,n*u);break;case"YXY":M.set(c*y,n*h,c*S,n*u);break;case"ZYZ":M.set(c*S,c*y,n*h,n*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function gs(M,e){switch(e.constructor){case Float32Array:return M;case Uint32Array:return M/4294967295;case Uint16Array:return M/65535;case Uint8Array:return M/255;case Int32Array:return Math.max(M/2147483647,-1);case Int16Array:return Math.max(M/32767,-1);case Int8Array:return Math.max(M/127,-1);default:throw new Error("Invalid component type.")}}function rr(M,e){switch(e.constructor){case Float32Array:return M;case Uint32Array:return Math.round(M*4294967295);case Uint16Array:return Math.round(M*65535);case Uint8Array:return Math.round(M*255);case Int32Array:return Math.round(M*2147483647);case Int16Array:return Math.round(M*32767);case Int8Array:return Math.round(M*127);default:throw new Error("Invalid component type.")}}const Ac={DEG2RAD:ic,RAD2DEG:Zl,generateUUID:us,clamp:Ri,euclideanModulo:au,mapLinear:_f,inverseLerp:qs,lerp:ou,damp:Wd,pingpong:Mf,smoothstep:Ef,smootherstep:sd,randInt:jd,randFloat:Cf,randFloatSpread:ld,seededRandom:Pu,degToRad:ao,radToDeg:Tf,isPowerOfTwo:Nu,ceilPowerOfTwo:cd,floorPowerOfTwo:su,setQuaternionFromProperEuler:uc,normalize:rr,denormalize:gs};class nn{constructor(e=0,t=0){nn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6],this.y=s[1]*t+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ri(this.x,e.x,t.x),this.y=Ri(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ri(this.x,e,t),this.y=Ri(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ri(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ri(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),s=Math.sin(t),d=this.x-e.x,i=this.y-e.y;return this.x=d*r-i*s+e.x,this.y=d*s+i*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ws{constructor(e=0,t=0,r=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=s}static slerpFlat(e,t,r,s,d,i,n){let c=r[s+0],u=r[s+1],h=r[s+2],m=r[s+3];const v=d[i+0],y=d[i+1],S=d[i+2],b=d[i+3];if(n===0){e[t+0]=c,e[t+1]=u,e[t+2]=h,e[t+3]=m;return}if(n===1){e[t+0]=v,e[t+1]=y,e[t+2]=S,e[t+3]=b;return}if(m!==b||c!==v||u!==y||h!==S){let T=1-n;const w=c*v+u*y+h*S+m*b,A=w>=0?1:-1,I=1-w*w;if(I>Number.EPSILON){const B=Math.sqrt(I),L=Math.atan2(B,w*A);T=Math.sin(T*L)/B,n=Math.sin(n*L)/B}const P=n*A;if(c=c*T+v*P,u=u*T+y*P,h=h*T+S*P,m=m*T+b*P,T===1-n){const B=1/Math.sqrt(c*c+u*u+h*h+m*m);c*=B,u*=B,h*=B,m*=B}}e[t]=c,e[t+1]=u,e[t+2]=h,e[t+3]=m}static multiplyQuaternionsFlat(e,t,r,s,d,i){const n=r[s],c=r[s+1],u=r[s+2],h=r[s+3],m=d[i],v=d[i+1],y=d[i+2],S=d[i+3];return e[t]=n*S+h*m+c*y-u*v,e[t+1]=c*S+h*v+u*m-n*y,e[t+2]=u*S+h*y+n*v-c*m,e[t+3]=h*S-n*m-c*v-u*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,s){return this._x=e,this._y=t,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,s=e._y,d=e._z,i=e._order,n=Math.cos,c=Math.sin,u=n(r/2),h=n(s/2),m=n(d/2),v=c(r/2),y=c(s/2),S=c(d/2);switch(i){case"XYZ":this._x=v*h*m+u*y*S,this._y=u*y*m-v*h*S,this._z=u*h*S+v*y*m,this._w=u*h*m-v*y*S;break;case"YXZ":this._x=v*h*m+u*y*S,this._y=u*y*m-v*h*S,this._z=u*h*S-v*y*m,this._w=u*h*m+v*y*S;break;case"ZXY":this._x=v*h*m-u*y*S,this._y=u*y*m+v*h*S,this._z=u*h*S+v*y*m,this._w=u*h*m-v*y*S;break;case"ZYX":this._x=v*h*m-u*y*S,this._y=u*y*m+v*h*S,this._z=u*h*S-v*y*m,this._w=u*h*m+v*y*S;break;case"YZX":this._x=v*h*m+u*y*S,this._y=u*y*m+v*h*S,this._z=u*h*S-v*y*m,this._w=u*h*m-v*y*S;break;case"XZY":this._x=v*h*m-u*y*S,this._y=u*y*m-v*h*S,this._z=u*h*S+v*y*m,this._w=u*h*m+v*y*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],s=t[4],d=t[8],i=t[1],n=t[5],c=t[9],u=t[2],h=t[6],m=t[10],v=r+n+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(h-c)*y,this._y=(d-u)*y,this._z=(i-s)*y}else if(r>n&&r>m){const y=2*Math.sqrt(1+r-n-m);this._w=(h-c)/y,this._x=.25*y,this._y=(s+i)/y,this._z=(d+u)/y}else if(n>m){const y=2*Math.sqrt(1+n-r-m);this._w=(d-u)/y,this._x=(s+i)/y,this._y=.25*y,this._z=(c+h)/y}else{const y=2*Math.sqrt(1+m-r-n);this._w=(i-s)/y,this._x=(d+u)/y,this._y=(c+h)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ri(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,t/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,s=e._y,d=e._z,i=e._w,n=t._x,c=t._y,u=t._z,h=t._w;return this._x=r*h+i*n+s*u-d*c,this._y=s*h+i*c+d*n-r*u,this._z=d*h+i*u+r*c-s*n,this._w=i*h-r*n-s*c-d*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,s=this._y,d=this._z,i=this._w;let n=i*e._w+r*e._x+s*e._y+d*e._z;if(n<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,n=-n):this.copy(e),n>=1)return this._w=i,this._x=r,this._y=s,this._z=d,this;const c=1-n*n;if(c<=Number.EPSILON){const y=1-t;return this._w=y*i+t*this._w,this._x=y*r+t*this._x,this._y=y*s+t*this._y,this._z=y*d+t*this._z,this.normalize(),this}const u=Math.sqrt(c),h=Math.atan2(u,n),m=Math.sin((1-t)*h)/u,v=Math.sin(t*h)/u;return this._w=i*m+this._w*v,this._x=r*m+this._x*v,this._y=s*m+this._y*v,this._z=d*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),s=Math.sqrt(1-r),d=Math.sqrt(r);return this.set(s*Math.sin(e),s*Math.cos(e),d*Math.sin(t),d*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,t=0,r=0){ce.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(dd.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(dd.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,s=this.z,d=e.elements;return this.x=d[0]*t+d[3]*r+d[6]*s,this.y=d[1]*t+d[4]*r+d[7]*s,this.z=d[2]*t+d[5]*r+d[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,d=e.elements,i=1/(d[3]*t+d[7]*r+d[11]*s+d[15]);return this.x=(d[0]*t+d[4]*r+d[8]*s+d[12])*i,this.y=(d[1]*t+d[5]*r+d[9]*s+d[13])*i,this.z=(d[2]*t+d[6]*r+d[10]*s+d[14])*i,this}applyQuaternion(e){const t=this.x,r=this.y,s=this.z,d=e.x,i=e.y,n=e.z,c=e.w,u=2*(i*s-n*r),h=2*(n*t-d*s),m=2*(d*r-i*t);return this.x=t+c*u+i*m-n*h,this.y=r+c*h+n*u-d*m,this.z=s+c*m+d*h-i*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,s=this.z,d=e.elements;return this.x=d[0]*t+d[4]*r+d[8]*s,this.y=d[1]*t+d[5]*r+d[9]*s,this.z=d[2]*t+d[6]*r+d[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ri(this.x,e.x,t.x),this.y=Ri(this.y,e.y,t.y),this.z=Ri(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ri(this.x,e,t),this.y=Ri(this.y,e,t),this.z=Ri(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ri(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,s=e.y,d=e.z,i=t.x,n=t.y,c=t.z;return this.x=s*c-d*n,this.y=d*i-r*c,this.z=r*n-s*i,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ud.copy(this).projectOnVector(e),this.sub(ud)}reflect(e){return this.sub(ud.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ri(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return t*t+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const s=Math.sin(t)*e;return this.x=s*Math.sin(r),this.y=Math.cos(t)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ud=new ce,dd=new ws;class Js{constructor(e,t,r,s,d,i,n,c,u){Js.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,s,d,i,n,c,u)}set(e,t,r,s,d,i,n,c,u){const h=this.elements;return h[0]=e,h[1]=s,h[2]=n,h[3]=t,h[4]=d,h[5]=c,h[6]=r,h[7]=i,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,d=this.elements,i=r[0],n=r[3],c=r[6],u=r[1],h=r[4],m=r[7],v=r[2],y=r[5],S=r[8],b=s[0],T=s[3],w=s[6],A=s[1],I=s[4],P=s[7],B=s[2],L=s[5],z=s[8];return d[0]=i*b+n*A+c*B,d[3]=i*T+n*I+c*L,d[6]=i*w+n*P+c*z,d[1]=u*b+h*A+m*B,d[4]=u*T+h*I+m*L,d[7]=u*w+h*P+m*z,d[2]=v*b+y*A+S*B,d[5]=v*T+y*I+S*L,d[8]=v*w+y*P+S*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],s=e[2],d=e[3],i=e[4],n=e[5],c=e[6],u=e[7],h=e[8];return t*i*h-t*n*u-r*d*h+r*n*c+s*d*u-s*i*c}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],d=e[3],i=e[4],n=e[5],c=e[6],u=e[7],h=e[8],m=h*i-n*u,v=n*c-h*d,y=u*d-i*c,S=t*m+r*v+s*y;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/S;return e[0]=m*b,e[1]=(s*u-h*r)*b,e[2]=(n*r-s*i)*b,e[3]=v*b,e[4]=(h*t-s*c)*b,e[5]=(s*d-n*t)*b,e[6]=y*b,e[7]=(r*c-u*t)*b,e[8]=(i*t-r*d)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,s,d,i,n){const c=Math.cos(d),u=Math.sin(d);return this.set(r*c,r*u,-r*(c*i+u*n)+i+e,-s*u,s*c,-s*(-u*i+c*n)+n+t,0,0,1),this}scale(e,t){return this.premultiply(lu.makeScale(e,t)),this}rotate(e){return this.premultiply(lu.makeRotation(-e)),this}translate(e,t){return this.premultiply(lu.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<9;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const lu=new Js;function Xd(M){for(let e=M.length-1;e>=0;--e)if(M[e]>=65535)return!0;return!1}const wf={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function dl(M,e){return new wf[M](e)}function cu(M){return document.createElementNS("http://www.w3.org/1999/xhtml",M)}function yl(){const M=cu("canvas");return M.style.display="block",M}const dc={};function uu(M){M in dc||(dc[M]=!0,console.warn(M))}function qf(M,e,t){return new Promise(function(r,s){function d(){switch(M.clientWaitSync(e,M.SYNC_FLUSH_COMMANDS_BIT,0)){case M.WAIT_FAILED:s();break;case M.TIMEOUT_EXPIRED:setTimeout(d,t);break;default:r()}}setTimeout(d,t)})}const Rc=new Js().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ys=new Js().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Af(){const M={enabled:!0,workingColorSpace:Sr,spaces:{},convert:function(s,d,i){return this.enabled===!1||d===i||!d||!i||(this.spaces[d].transfer===ko&&(s.r=Vl(s.r),s.g=Vl(s.g),s.b=Vl(s.b)),this.spaces[d].primaries!==this.spaces[i].primaries&&(s.applyMatrix3(this.spaces[d].toXYZ),s.applyMatrix3(this.spaces[i].fromXYZ)),this.spaces[i].transfer===ko&&(s.r=xs(s.r),s.g=xs(s.g),s.b=xs(s.b))),s},workingToColorSpace:function(s,d){return this.convert(s,this.workingColorSpace,d)},colorSpaceToWorking:function(s,d){return this.convert(s,d,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ea?fa:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,d=this.workingColorSpace){return s.fromArray(this.spaces[d].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,d,i){return s.copy(this.spaces[d].toXYZ).multiply(this.spaces[i].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,d){return uu("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),M.workingToColorSpace(s,d)},toWorkingColorSpace:function(s,d){return uu("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),M.colorSpaceToWorking(s,d)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return M.define({[Sr]:{primaries:e,whitePoint:r,transfer:fa,toXYZ:Rc,fromXYZ:ys,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Vr},outputColorSpaceConfig:{drawingBufferColorSpace:Vr}},[Vr]:{primaries:e,whitePoint:r,transfer:ko,toXYZ:Rc,fromXYZ:ys,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Vr}}}),M}const ka=Af();function Vl(M){return M<.04045?M*.0773993808:Math.pow(M*.9478672986+.0521327014,2.4)}function xs(M){return M<.0031308?M*12.92:1.055*Math.pow(M,.41666)-.055}let xl;class Gl{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{xl===void 0&&(xl=cu("canvas")),xl.width=e.width,xl.height=e.height;const s=xl.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),r=xl}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=cu("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),d=s.data;for(let i=0;i<d.length;i++)d[i]=Vl(d[i]/255)*255;return r.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Vl(t[r]/255)*255):t[r]=Vl(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let $d=0;class kl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:$d++}),this.uuid=us(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement!="undefined"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let d;if(Array.isArray(s)){d=[];for(let i=0,n=s.length;i<n;i++)s[i].isDataTexture?d.push(Qs(s[i].image)):d.push(Qs(s[i]))}else d=Qs(s);r.url=d}return t||(e.images[this.uuid]=r),r}}function Qs(M){return typeof HTMLImageElement!="undefined"&&M instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&M instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&M instanceof ImageBitmap?Gl.getDataURL(M):M.data?{data:Array.from(M.data),width:M.width,height:M.height,type:M.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Rf=0;const rc=new ce;class oo extends Ts{constructor(e=oo.DEFAULT_IMAGE,t=oo.DEFAULT_MAPPING,r=Tn,s=Tn,d=Nr,i=va,n=Ni,c=co,u=oo.DEFAULT_ANISOTROPY,h=Ea){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Rf++}),this.uuid=us(),this.name="",this.source=new kl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=d,this.minFilter=i,this.anisotropy=u,this.format=n,this.internalFormat=null,this.type=c,this.offset=new nn(0,0),this.repeat=new nn(1,1),this.center=new nn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Js,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(rc).x}get height(){return this.source.getSize(rc).y}get depth(){return this.source.getSize(rc).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}s&&r&&s.isVector2&&r.isVector2||s&&r&&s.isVector3&&r.isVector3||s&&r&&s.isMatrix3&&r.isMatrix3?s.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==yo)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ht:e.x=e.x-Math.floor(e.x);break;case Tn:e.x=e.x<0?0:1;break;case Yn:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ht:e.y=e.y-Math.floor(e.y);break;case Tn:e.y=e.y<0?0:1;break;case Yn:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}oo.DEFAULT_IMAGE=null,oo.DEFAULT_MAPPING=yo,oo.DEFAULT_ANISOTROPY=1;class so{constructor(e=0,t=0,r=0,s=1){so.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,s){return this.x=e,this.y=t,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,d=this.w,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*s+i[12]*d,this.y=i[1]*t+i[5]*r+i[9]*s+i[13]*d,this.z=i[2]*t+i[6]*r+i[10]*s+i[14]*d,this.w=i[3]*t+i[7]*r+i[11]*s+i[15]*d,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,s,d;const c=e.elements,u=c[0],h=c[4],m=c[8],v=c[1],y=c[5],S=c[9],b=c[2],T=c[6],w=c[10];if(Math.abs(h-v)<.01&&Math.abs(m-b)<.01&&Math.abs(S-T)<.01){if(Math.abs(h+v)<.1&&Math.abs(m+b)<.1&&Math.abs(S+T)<.1&&Math.abs(u+y+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(u+1)/2,P=(y+1)/2,B=(w+1)/2,L=(h+v)/4,z=(m+b)/4,Z=(S+T)/4;return I>P&&I>B?I<.01?(r=0,s=.707106781,d=.707106781):(r=Math.sqrt(I),s=L/r,d=z/r):P>B?P<.01?(r=.707106781,s=0,d=.707106781):(s=Math.sqrt(P),r=L/s,d=Z/s):B<.01?(r=.707106781,s=.707106781,d=0):(d=Math.sqrt(B),r=z/d,s=Z/d),this.set(r,s,d,t),this}let A=Math.sqrt((T-S)*(T-S)+(m-b)*(m-b)+(v-h)*(v-h));return Math.abs(A)<.001&&(A=1),this.x=(T-S)/A,this.y=(m-b)/A,this.z=(v-h)/A,this.w=Math.acos((u+y+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ri(this.x,e.x,t.x),this.y=Ri(this.y,e.y,t.y),this.z=Ri(this.z,e.z,t.z),this.w=Ri(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ri(this.x,e,t),this.y=Ri(this.y,e,t),this.z=Ri(this.z,e,t),this.w=Ri(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ri(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ic extends Ts{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Nr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new so(0,0,e,t),this.scissorTest=!1,this.viewport=new so(0,0,e,t);const s={width:e,height:t,depth:r.depth},d=new oo(s);this.textures=[];const i=r.count;for(let n=0;n<i;n++)this.textures[n]=d.clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:Nr,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let s=0,d=this.textures.length;s<d;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=r,this.textures[s].isArrayTexture=this.textures[s].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new kl(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class du extends Ic{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class fu extends oo{constructor(e=null,t=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:s},this.magFilter=vi,this.minFilter=vi,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class If extends du{constructor(e=1,t=1,r=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new fu(null,e,t,r),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Sl extends oo{constructor(e=null,t=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:s},this.magFilter=vi,this.minFilter=vi,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fd extends du{constructor(e=1,t=1,r=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Sl(null,e,t,r),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Uo{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Ds.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Ds.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ds.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const d=r.getAttribute("position");if(t===!0&&d!==void 0&&e.isInstancedMesh!==!0)for(let i=0,n=d.count;i<n;i++)e.isMesh===!0?e.getVertexPosition(i,Ds):Ds.fromBufferAttribute(d,i),Ds.applyMatrix4(e.matrixWorld),this.expandByPoint(Ds);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Pc.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Pc.copy(r.boundingBox)),Pc.applyMatrix4(e.matrixWorld),this.union(Pc)}const s=e.children;for(let d=0,i=s.length;d<i;d++)this.expandByObject(s[d],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ds),Ds.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(hc),Ou.subVectors(this.max,hc),el.subVectors(e.a,hc),Ro.subVectors(e.b,hc),fc.subVectors(e.c,hc),Ia.subVectors(Ro,el),bl.subVectors(fc,Ro),_l.subVectors(el,fc);let t=[0,-Ia.z,Ia.y,0,-bl.z,bl.y,0,-_l.z,_l.y,Ia.z,0,-Ia.x,bl.z,0,-bl.x,_l.z,0,-_l.x,-Ia.y,Ia.x,0,-bl.y,bl.x,0,-_l.y,_l.x,0];return!Du(t,el,Ro,fc,Ou)||(t=[1,0,0,0,1,0,0,0,1],!Du(t,el,Ro,fc,Ou))?!1:(tl.crossVectors(Ia,bl),t=[tl.x,tl.y,tl.z],Du(t,el,Ro,fc,Ou))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ds).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ds).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(As[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),As[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),As[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),As[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),As[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),As[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),As[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),As[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(As),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const As=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],Ds=new ce,Pc=new Uo,el=new ce,Ro=new ce,fc=new ce,Ia=new ce,bl=new ce,_l=new ce,hc=new ce,Ou=new ce,tl=new ce,Nc=new ce;function Du(M,e,t,r,s){for(let d=0,i=M.length-3;d<=i;d+=3){Nc.fromArray(M,d);const n=s.x*Math.abs(Nc.x)+s.y*Math.abs(Nc.y)+s.z*Math.abs(Nc.z),c=e.dot(Nc),u=t.dot(Nc),h=r.dot(Nc);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>n)return!1}return!0}const hu=new Uo,pu=new ce,Lu=new ce;class Io{constructor(e=new ce,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):hu.setFromPoints(e).getCenter(r);let s=0;for(let d=0,i=e.length;d<i;d++)s=Math.max(s,r.distanceToSquared(e[d]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;pu.subVectors(e,this.center);const t=pu.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),s=(r-this.radius)*.5;this.center.addScaledVector(pu,s/r),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Lu.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(pu.copy(e.center).add(Lu)),this.expandByPoint(pu.copy(e.center).sub(Lu))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ac=new ce,Uu=new ce,mu=new ce,pc=new ce,Kd=new ce,hd=new ce,Bu=new ce;class Oc{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ac)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ac.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ac.copy(this.origin).addScaledVector(this.direction,t),ac.distanceToSquared(e))}distanceSqToSegment(e,t,r,s){Uu.copy(e).add(t).multiplyScalar(.5),mu.copy(t).sub(e).normalize(),pc.copy(this.origin).sub(Uu);const d=e.distanceTo(t)*.5,i=-this.direction.dot(mu),n=pc.dot(this.direction),c=-pc.dot(mu),u=pc.lengthSq(),h=Math.abs(1-i*i);let m,v,y,S;if(h>0)if(m=i*c-n,v=i*n-c,S=d*h,m>=0)if(v>=-S)if(v<=S){const b=1/h;m*=b,v*=b,y=m*(m+i*v+2*n)+v*(i*m+v+2*c)+u}else v=d,m=Math.max(0,-(i*v+n)),y=-m*m+v*(v+2*c)+u;else v=-d,m=Math.max(0,-(i*v+n)),y=-m*m+v*(v+2*c)+u;else v<=-S?(m=Math.max(0,-(-i*d+n)),v=m>0?-d:Math.min(Math.max(-d,-c),d),y=-m*m+v*(v+2*c)+u):v<=S?(m=0,v=Math.min(Math.max(-d,-c),d),y=v*(v+2*c)+u):(m=Math.max(0,-(i*d+n)),v=m>0?d:Math.min(Math.max(-d,-c),d),y=-m*m+v*(v+2*c)+u);else v=i>0?-d:d,m=Math.max(0,-(i*v+n)),y=-m*m+v*(v+2*c)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,m),s&&s.copy(Uu).addScaledVector(mu,v),y}intersectSphere(e,t){ac.subVectors(e.center,this.origin);const r=ac.dot(this.direction),s=ac.dot(ac)-r*r,d=e.radius*e.radius;if(s>d)return null;const i=Math.sqrt(d-s),n=r-i,c=r+i;return c<0?null:n<0?this.at(c,t):this.at(n,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,s,d,i,n,c;const u=1/this.direction.x,h=1/this.direction.y,m=1/this.direction.z,v=this.origin;return u>=0?(r=(e.min.x-v.x)*u,s=(e.max.x-v.x)*u):(r=(e.max.x-v.x)*u,s=(e.min.x-v.x)*u),h>=0?(d=(e.min.y-v.y)*h,i=(e.max.y-v.y)*h):(d=(e.max.y-v.y)*h,i=(e.min.y-v.y)*h),r>i||d>s||((d>r||isNaN(r))&&(r=d),(i<s||isNaN(s))&&(s=i),m>=0?(n=(e.min.z-v.z)*m,c=(e.max.z-v.z)*m):(n=(e.max.z-v.z)*m,c=(e.min.z-v.z)*m),r>c||n>s)||((n>r||r!==r)&&(r=n),(c<s||s!==s)&&(s=c),s<0)?null:this.at(r>=0?r:s,t)}intersectsBox(e){return this.intersectBox(e,ac)!==null}intersectTriangle(e,t,r,s,d){Kd.subVectors(t,e),hd.subVectors(r,e),Bu.crossVectors(Kd,hd);let i=this.direction.dot(Bu),n;if(i>0){if(s)return null;n=1}else if(i<0)n=-1,i=-i;else return null;pc.subVectors(this.origin,e);const c=n*this.direction.dot(hd.crossVectors(pc,hd));if(c<0)return null;const u=n*this.direction.dot(Kd.cross(pc));if(u<0||c+u>i)return null;const h=-n*pc.dot(Bu);return h<0?null:this.at(h/i,d)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ui{constructor(e,t,r,s,d,i,n,c,u,h,m,v,y,S,b,T){Ui.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,s,d,i,n,c,u,h,m,v,y,S,b,T)}set(e,t,r,s,d,i,n,c,u,h,m,v,y,S,b,T){const w=this.elements;return w[0]=e,w[4]=t,w[8]=r,w[12]=s,w[1]=d,w[5]=i,w[9]=n,w[13]=c,w[2]=u,w[6]=h,w[10]=m,w[14]=v,w[3]=y,w[7]=S,w[11]=b,w[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ui().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,s=1/oc.setFromMatrixColumn(e,0).length(),d=1/oc.setFromMatrixColumn(e,1).length(),i=1/oc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=0,t[4]=r[4]*d,t[5]=r[5]*d,t[6]=r[6]*d,t[7]=0,t[8]=r[8]*i,t[9]=r[9]*i,t[10]=r[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,s=e.y,d=e.z,i=Math.cos(r),n=Math.sin(r),c=Math.cos(s),u=Math.sin(s),h=Math.cos(d),m=Math.sin(d);if(e.order==="XYZ"){const v=i*h,y=i*m,S=n*h,b=n*m;t[0]=c*h,t[4]=-c*m,t[8]=u,t[1]=y+S*u,t[5]=v-b*u,t[9]=-n*c,t[2]=b-v*u,t[6]=S+y*u,t[10]=i*c}else if(e.order==="YXZ"){const v=c*h,y=c*m,S=u*h,b=u*m;t[0]=v+b*n,t[4]=S*n-y,t[8]=i*u,t[1]=i*m,t[5]=i*h,t[9]=-n,t[2]=y*n-S,t[6]=b+v*n,t[10]=i*c}else if(e.order==="ZXY"){const v=c*h,y=c*m,S=u*h,b=u*m;t[0]=v-b*n,t[4]=-i*m,t[8]=S+y*n,t[1]=y+S*n,t[5]=i*h,t[9]=b-v*n,t[2]=-i*u,t[6]=n,t[10]=i*c}else if(e.order==="ZYX"){const v=i*h,y=i*m,S=n*h,b=n*m;t[0]=c*h,t[4]=S*u-y,t[8]=v*u+b,t[1]=c*m,t[5]=b*u+v,t[9]=y*u-S,t[2]=-u,t[6]=n*c,t[10]=i*c}else if(e.order==="YZX"){const v=i*c,y=i*u,S=n*c,b=n*u;t[0]=c*h,t[4]=b-v*m,t[8]=S*m+y,t[1]=m,t[5]=i*h,t[9]=-n*h,t[2]=-u*h,t[6]=y*m+S,t[10]=v-b*m}else if(e.order==="XZY"){const v=i*c,y=i*u,S=n*c,b=n*u;t[0]=c*h,t[4]=-m,t[8]=u*h,t[1]=v*m+b,t[5]=i*h,t[9]=y*m-S,t[2]=S*m-y,t[6]=n*h,t[10]=b*m+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Pf,e,mc)}lookAt(e,t,r){const s=this.elements;return Bs.subVectors(e,t),Bs.lengthSq()===0&&(Bs.z=1),Bs.normalize(),Ls.crossVectors(r,Bs),Ls.lengthSq()===0&&(Math.abs(r.z)===1?Bs.x+=1e-4:Bs.z+=1e-4,Bs.normalize(),Ls.crossVectors(r,Bs)),Ls.normalize(),Us.crossVectors(Bs,Ls),s[0]=Ls.x,s[4]=Us.x,s[8]=Bs.x,s[1]=Ls.y,s[5]=Us.y,s[9]=Bs.y,s[2]=Ls.z,s[6]=Us.z,s[10]=Bs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,d=this.elements,i=r[0],n=r[4],c=r[8],u=r[12],h=r[1],m=r[5],v=r[9],y=r[13],S=r[2],b=r[6],T=r[10],w=r[14],A=r[3],I=r[7],P=r[11],B=r[15],L=s[0],z=s[4],Z=s[8],W=s[12],J=s[1],ue=s[5],we=s[9],ie=s[13],ge=s[2],Me=s[6],de=s[10],re=s[14],ve=s[3],Oe=s[7],le=s[11],Q=s[15];return d[0]=i*L+n*J+c*ge+u*ve,d[4]=i*z+n*ue+c*Me+u*Oe,d[8]=i*Z+n*we+c*de+u*le,d[12]=i*W+n*ie+c*re+u*Q,d[1]=h*L+m*J+v*ge+y*ve,d[5]=h*z+m*ue+v*Me+y*Oe,d[9]=h*Z+m*we+v*de+y*le,d[13]=h*W+m*ie+v*re+y*Q,d[2]=S*L+b*J+T*ge+w*ve,d[6]=S*z+b*ue+T*Me+w*Oe,d[10]=S*Z+b*we+T*de+w*le,d[14]=S*W+b*ie+T*re+w*Q,d[3]=A*L+I*J+P*ge+B*ve,d[7]=A*z+I*ue+P*Me+B*Oe,d[11]=A*Z+I*we+P*de+B*le,d[15]=A*W+I*ie+P*re+B*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],s=e[8],d=e[12],i=e[1],n=e[5],c=e[9],u=e[13],h=e[2],m=e[6],v=e[10],y=e[14],S=e[3],b=e[7],T=e[11],w=e[15];return S*(+d*c*m-s*u*m-d*n*v+r*u*v+s*n*y-r*c*y)+b*(+t*c*y-t*u*v+d*i*v-s*i*y+s*u*h-d*c*h)+T*(+t*u*m-t*n*y-d*i*m+r*i*y+d*n*h-r*u*h)+w*(-s*n*h-t*c*m+t*n*v+s*i*m-r*i*v+r*c*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],d=e[3],i=e[4],n=e[5],c=e[6],u=e[7],h=e[8],m=e[9],v=e[10],y=e[11],S=e[12],b=e[13],T=e[14],w=e[15],A=m*T*u-b*v*u+b*c*y-n*T*y-m*c*w+n*v*w,I=S*v*u-h*T*u-S*c*y+i*T*y+h*c*w-i*v*w,P=h*b*u-S*m*u+S*n*y-i*b*y-h*n*w+i*m*w,B=S*m*c-h*b*c-S*n*v+i*b*v+h*n*T-i*m*T,L=t*A+r*I+s*P+d*B;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/L;return e[0]=A*z,e[1]=(b*v*d-m*T*d-b*s*y+r*T*y+m*s*w-r*v*w)*z,e[2]=(n*T*d-b*c*d+b*s*u-r*T*u-n*s*w+r*c*w)*z,e[3]=(m*c*d-n*v*d-m*s*u+r*v*u+n*s*y-r*c*y)*z,e[4]=I*z,e[5]=(h*T*d-S*v*d+S*s*y-t*T*y-h*s*w+t*v*w)*z,e[6]=(S*c*d-i*T*d-S*s*u+t*T*u+i*s*w-t*c*w)*z,e[7]=(i*v*d-h*c*d+h*s*u-t*v*u-i*s*y+t*c*y)*z,e[8]=P*z,e[9]=(S*m*d-h*b*d-S*r*y+t*b*y+h*r*w-t*m*w)*z,e[10]=(i*b*d-S*n*d+S*r*u-t*b*u-i*r*w+t*n*w)*z,e[11]=(h*n*d-i*m*d-h*r*u+t*m*u+i*r*y-t*n*y)*z,e[12]=B*z,e[13]=(h*b*s-S*m*s+S*r*v-t*b*v-h*r*T+t*m*T)*z,e[14]=(S*n*s-i*b*s-S*r*c+t*b*c+i*r*T-t*n*T)*z,e[15]=(i*m*s-h*n*s+h*r*c-t*m*c-i*r*v+t*n*v)*z,this}scale(e){const t=this.elements,r=e.x,s=e.y,d=e.z;return t[0]*=r,t[4]*=s,t[8]*=d,t[1]*=r,t[5]*=s,t[9]*=d,t[2]*=r,t[6]*=s,t[10]*=d,t[3]*=r,t[7]*=s,t[11]*=d,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,s))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),s=Math.sin(t),d=1-r,i=e.x,n=e.y,c=e.z,u=d*i,h=d*n;return this.set(u*i+r,u*n-s*c,u*c+s*n,0,u*n+s*c,h*n+r,h*c-s*i,0,u*c-s*n,h*c+s*i,d*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,s,d,i){return this.set(1,r,d,0,e,1,i,0,t,s,1,0,0,0,0,1),this}compose(e,t,r){const s=this.elements,d=t._x,i=t._y,n=t._z,c=t._w,u=d+d,h=i+i,m=n+n,v=d*u,y=d*h,S=d*m,b=i*h,T=i*m,w=n*m,A=c*u,I=c*h,P=c*m,B=r.x,L=r.y,z=r.z;return s[0]=(1-(b+w))*B,s[1]=(y+P)*B,s[2]=(S-I)*B,s[3]=0,s[4]=(y-P)*L,s[5]=(1-(v+w))*L,s[6]=(T+A)*L,s[7]=0,s[8]=(S+I)*z,s[9]=(T-A)*z,s[10]=(1-(v+b))*z,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,r){const s=this.elements;let d=oc.set(s[0],s[1],s[2]).length();const i=oc.set(s[4],s[5],s[6]).length(),n=oc.set(s[8],s[9],s[10]).length();this.determinant()<0&&(d=-d),e.x=s[12],e.y=s[13],e.z=s[14],fl.copy(this);const u=1/d,h=1/i,m=1/n;return fl.elements[0]*=u,fl.elements[1]*=u,fl.elements[2]*=u,fl.elements[4]*=h,fl.elements[5]*=h,fl.elements[6]*=h,fl.elements[8]*=m,fl.elements[9]*=m,fl.elements[10]*=m,t.setFromRotationMatrix(fl),r.x=d,r.y=i,r.z=n,this}makePerspective(e,t,r,s,d,i,n=Or,c=!1){const u=this.elements,h=2*d/(t-e),m=2*d/(r-s),v=(t+e)/(t-e),y=(r+s)/(r-s);let S,b;if(c)S=d/(i-d),b=i*d/(i-d);else if(n===Or)S=-(i+d)/(i-d),b=-2*i*d/(i-d);else if(n===gl)S=-i/(i-d),b=-i*d/(i-d);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+n);return u[0]=h,u[4]=0,u[8]=v,u[12]=0,u[1]=0,u[5]=m,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=S,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,r,s,d,i,n=Or,c=!1){const u=this.elements,h=2/(t-e),m=2/(r-s),v=-(t+e)/(t-e),y=-(r+s)/(r-s);let S,b;if(c)S=1/(i-d),b=i/(i-d);else if(n===Or)S=-2/(i-d),b=-(i+d)/(i-d);else if(n===gl)S=-1/(i-d),b=-d/(i-d);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+n);return u[0]=h,u[4]=0,u[8]=0,u[12]=v,u[1]=0,u[5]=m,u[9]=0,u[13]=y,u[2]=0,u[6]=0,u[10]=S,u[14]=b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<16;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const oc=new ce,fl=new Ui,Pf=new ce(0,0,0),mc=new ce(1,1,1),Ls=new ce,Us=new ce,Bs=new ce,Ta=new Ui,pd=new ws;class bo{constructor(e=0,t=0,r=0,s=bo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,s=this._order){return this._x=e,this._y=t,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const s=e.elements,d=s[0],i=s[4],n=s[8],c=s[1],u=s[5],h=s[9],m=s[2],v=s[6],y=s[10];switch(t){case"XYZ":this._y=Math.asin(Ri(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-i,d)):(this._x=Math.atan2(v,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ri(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(n,y),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-m,d),this._z=0);break;case"ZXY":this._x=Math.asin(Ri(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-i,u)):(this._y=0,this._z=Math.atan2(c,d));break;case"ZYX":this._y=Math.asin(-Ri(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,d)):(this._x=0,this._z=Math.atan2(-i,u));break;case"YZX":this._z=Math.asin(Ri(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-m,d)):(this._x=0,this._y=Math.atan2(n,y));break;case"XZY":this._z=Math.asin(-Ri(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(v,u),this._y=Math.atan2(n,d)):(this._x=Math.atan2(-h,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Ta.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ta,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return pd.setFromEuler(this),this.setFromQuaternion(pd,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bo.DEFAULT_ORDER="XYZ";class Wl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Jf=0;const Nf=new ce,Dc=new ws,sc=new Ui,g=new ce,R=new ce,_=new ce,U=new ws,q=new ce(1,0,0),$=new ce(0,1,0),fe=new ce(0,0,1),ae={type:"added"},rt={type:"removed"},ze={type:"childadded",child:null},ut={type:"childremoved",child:null};class Se extends Ts{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jf++}),this.uuid=us(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Se.DEFAULT_UP.clone();const e=new ce,t=new bo,r=new ws,s=new ce(1,1,1);function d(){r.setFromEuler(t,!1)}function i(){t.setFromQuaternion(r,void 0,!1)}t._onChange(d),r._onChange(i),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ui},normalMatrix:{value:new Js}}),this.matrix=new Ui,this.matrixWorld=new Ui,this.matrixAutoUpdate=Se.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Se.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Wl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Dc.setFromAxisAngle(e,t),this.quaternion.multiply(Dc),this}rotateOnWorldAxis(e,t){return Dc.setFromAxisAngle(e,t),this.quaternion.premultiply(Dc),this}rotateX(e){return this.rotateOnAxis(q,e)}rotateY(e){return this.rotateOnAxis($,e)}rotateZ(e){return this.rotateOnAxis(fe,e)}translateOnAxis(e,t){return Nf.copy(e).applyQuaternion(this.quaternion),this.position.add(Nf.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(q,e)}translateY(e){return this.translateOnAxis($,e)}translateZ(e){return this.translateOnAxis(fe,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(sc.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?g.copy(e):g.set(e,t,r);const s=this.parent;this.updateWorldMatrix(!0,!1),R.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sc.lookAt(R,g,this.up):sc.lookAt(g,R,this.up),this.quaternion.setFromRotationMatrix(sc),s&&(sc.extractRotation(s.matrixWorld),Dc.setFromRotationMatrix(sc),this.quaternion.premultiply(Dc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ae),ze.child=e,this.dispatchEvent(ze),ze.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(rt),ut.child=e,this.dispatchEvent(ut),ut.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),sc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),sc.multiply(e.parent.matrixWorld)),e.applyMatrix4(sc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ae),ze.child=e,this.dispatchEvent(ze),ze.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,s=this.children.length;r<s;r++){const i=this.children[r].getObjectByProperty(e,t);if(i!==void 0)return i}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const s=this.children;for(let d=0,i=s.length;d<i;d++)s[d].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R,e,_),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R,U,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let d=0,i=s.length;d<i;d++)s[d].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(n=>cl(Qi({},n),{boundingBox:n.boundingBox?n.boundingBox.toJSON():void 0,boundingSphere:n.boundingSphere?n.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(n=>Qi({},n)),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function d(n,c){return n[c.uuid]===void 0&&(n[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=d(e.geometries,this.geometry);const n=this.geometry.parameters;if(n!==void 0&&n.shapes!==void 0){const c=n.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const m=c[u];d(e.shapes,m)}else d(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(d(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const n=[];for(let c=0,u=this.material.length;c<u;c++)n.push(d(e.materials,this.material[c]));s.material=n}else s.material=d(e.materials,this.material);if(this.children.length>0){s.children=[];for(let n=0;n<this.children.length;n++)s.children.push(this.children[n].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let n=0;n<this.animations.length;n++){const c=this.animations[n];s.animations.push(d(e.animations,c))}}if(t){const n=i(e.geometries),c=i(e.materials),u=i(e.textures),h=i(e.images),m=i(e.shapes),v=i(e.skeletons),y=i(e.animations),S=i(e.nodes);n.length>0&&(r.geometries=n),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),m.length>0&&(r.shapes=m),v.length>0&&(r.skeletons=v),y.length>0&&(r.animations=y),S.length>0&&(r.nodes=S)}return r.object=s,r;function i(n){const c=[];for(const u in n){const h=n[u];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const s=e.children[r];this.add(s.clone())}return this}}Se.DEFAULT_UP=new ce(0,1,0),Se.DEFAULT_MATRIX_AUTO_UPDATE=!0,Se.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ie=new ce,He=new ce,At=new ce,Pe=new ce,ee=new ce,V=new ce,ct=new ce,Ye=new ce,Ee=new ce,bt=new ce,qe=new so,yt=new so,kt=new so;class se{constructor(e=new ce,t=new ce,r=new ce){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,s){s.subVectors(r,t),Ie.subVectors(e,t),s.cross(Ie);const d=s.lengthSq();return d>0?s.multiplyScalar(1/Math.sqrt(d)):s.set(0,0,0)}static getBarycoord(e,t,r,s,d){Ie.subVectors(s,t),He.subVectors(r,t),At.subVectors(e,t);const i=Ie.dot(Ie),n=Ie.dot(He),c=Ie.dot(At),u=He.dot(He),h=He.dot(At),m=i*u-n*n;if(m===0)return d.set(0,0,0),null;const v=1/m,y=(u*c-n*h)*v,S=(i*h-n*c)*v;return d.set(1-y-S,S,y)}static containsPoint(e,t,r,s){return this.getBarycoord(e,t,r,s,Pe)===null?!1:Pe.x>=0&&Pe.y>=0&&Pe.x+Pe.y<=1}static getInterpolation(e,t,r,s,d,i,n,c){return this.getBarycoord(e,t,r,s,Pe)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(d,Pe.x),c.addScaledVector(i,Pe.y),c.addScaledVector(n,Pe.z),c)}static getInterpolatedAttribute(e,t,r,s,d,i){return qe.setScalar(0),yt.setScalar(0),kt.setScalar(0),qe.fromBufferAttribute(e,t),yt.fromBufferAttribute(e,r),kt.fromBufferAttribute(e,s),i.setScalar(0),i.addScaledVector(qe,d.x),i.addScaledVector(yt,d.y),i.addScaledVector(kt,d.z),i}static isFrontFacing(e,t,r,s){return Ie.subVectors(r,t),He.subVectors(e,t),Ie.cross(He).dot(s)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,s){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,r,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ie.subVectors(this.c,this.b),He.subVectors(this.a,this.b),Ie.cross(He).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return se.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return se.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,s,d){return se.getInterpolation(e,this.a,this.b,this.c,t,r,s,d)}containsPoint(e){return se.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return se.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,s=this.b,d=this.c;let i,n;ee.subVectors(s,r),V.subVectors(d,r),Ye.subVectors(e,r);const c=ee.dot(Ye),u=V.dot(Ye);if(c<=0&&u<=0)return t.copy(r);Ee.subVectors(e,s);const h=ee.dot(Ee),m=V.dot(Ee);if(h>=0&&m<=h)return t.copy(s);const v=c*m-h*u;if(v<=0&&c>=0&&h<=0)return i=c/(c-h),t.copy(r).addScaledVector(ee,i);bt.subVectors(e,d);const y=ee.dot(bt),S=V.dot(bt);if(S>=0&&y<=S)return t.copy(d);const b=y*u-c*S;if(b<=0&&u>=0&&S<=0)return n=u/(u-S),t.copy(r).addScaledVector(V,n);const T=h*S-y*m;if(T<=0&&m-h>=0&&y-S>=0)return ct.subVectors(d,s),n=(m-h)/(m-h+(y-S)),t.copy(s).addScaledVector(ct,n);const w=1/(T+b+v);return i=b*w,n=v*w,t.copy(r).addScaledVector(ee,i).addScaledVector(V,n)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const oe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ze={h:0,s:0,l:0},Tt={h:0,s:0,l:0};function Jt(M,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?M+(e-M)*6*t:t<1/2?e:t<2/3?M+(e-M)*6*(2/3-t):M}class ot{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ka.colorSpaceToWorking(this,t),this}setRGB(e,t,r,s=ka.workingColorSpace){return this.r=e,this.g=t,this.b=r,ka.colorSpaceToWorking(this,s),this}setHSL(e,t,r,s=ka.workingColorSpace){if(e=au(e,1),t=Ri(t,0,1),r=Ri(r,0,1),t===0)this.r=this.g=this.b=r;else{const d=r<=.5?r*(1+t):r+t-r*t,i=2*r-d;this.r=Jt(i,d,e+1/3),this.g=Jt(i,d,e),this.b=Jt(i,d,e-1/3)}return ka.colorSpaceToWorking(this,s),this}setStyle(e,t=Vr){function r(d){d!==void 0&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let d;const i=s[1],n=s[2];switch(i){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return r(d[4]),this.setRGB(Math.min(255,parseInt(d[1],10))/255,Math.min(255,parseInt(d[2],10))/255,Math.min(255,parseInt(d[3],10))/255,t);if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return r(d[4]),this.setRGB(Math.min(100,parseInt(d[1],10))/100,Math.min(100,parseInt(d[2],10))/100,Math.min(100,parseInt(d[3],10))/100,t);break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return r(d[4]),this.setHSL(parseFloat(d[1])/360,parseFloat(d[2])/100,parseFloat(d[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const d=s[1],i=d.length;if(i===3)return this.setRGB(parseInt(d.charAt(0),16)/15,parseInt(d.charAt(1),16)/15,parseInt(d.charAt(2),16)/15,t);if(i===6)return this.setHex(parseInt(d,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vr){const r=oe[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Vl(e.r),this.g=Vl(e.g),this.b=Vl(e.b),this}copyLinearToSRGB(e){return this.r=xs(e.r),this.g=xs(e.g),this.b=xs(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vr){return ka.workingToColorSpace(Zt.copy(this),e),Math.round(Ri(Zt.r*255,0,255))*65536+Math.round(Ri(Zt.g*255,0,255))*256+Math.round(Ri(Zt.b*255,0,255))}getHexString(e=Vr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ka.workingColorSpace){ka.workingToColorSpace(Zt.copy(this),t);const r=Zt.r,s=Zt.g,d=Zt.b,i=Math.max(r,s,d),n=Math.min(r,s,d);let c,u;const h=(n+i)/2;if(n===i)c=0,u=0;else{const m=i-n;switch(u=h<=.5?m/(i+n):m/(2-i-n),i){case r:c=(s-d)/m+(s<d?6:0);break;case s:c=(d-r)/m+2;break;case d:c=(r-s)/m+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,t=ka.workingColorSpace){return ka.workingToColorSpace(Zt.copy(this),t),e.r=Zt.r,e.g=Zt.g,e.b=Zt.b,e}getStyle(e=Vr){ka.workingToColorSpace(Zt.copy(this),e);const t=Zt.r,r=Zt.g,s=Zt.b;return e!==Vr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(s*255)})`}offsetHSL(e,t,r){return this.getHSL(Ze),this.setHSL(Ze.h+e,Ze.s+t,Ze.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Ze),e.getHSL(Tt);const r=ou(Ze.h,Tt.h,t),s=ou(Ze.s,Tt.s,t),d=ou(Ze.l,Tt.l,t);return this.setHSL(r,s,d),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,s=this.b,d=e.elements;return this.r=d[0]*t+d[3]*r+d[6]*s,this.g=d[1]*t+d[4]*r+d[7]*s,this.b=d[2]*t+d[5]*r+d[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Zt=new ot;ot.NAMES=oe;let Lt=0;class vn extends Ts{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Lt++}),this.uuid=us(),this.name="",this.type="Material",this.blending=ln,this.side=hi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Rr,this.blendDst=qt,this.blendEquation=Wn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ot(0,0,0),this.blendAlpha=0,this.depthFunc=Ci,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ys,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ko,this.stencilZFail=Ko,this.stencilZPass=Ko,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ln&&(r.blending=this.blending),this.side!==hi&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Rr&&(r.blendSrc=this.blendSrc),this.blendDst!==qt&&(r.blendDst=this.blendDst),this.blendEquation!==Wn&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Ci&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ys&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ko&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Ko&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Ko&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(d){const i=[];for(const n in d){const c=d[n];delete c.metadata,i.push(c)}return i}if(t){const d=s(e.textures),i=s(e.images);d.length>0&&(r.textures=d),i.length>0&&(r.images=i)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const s=t.length;r=new Array(s);for(let d=0;d!==s;++d)r[d]=t[d].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Rt extends vn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bo,this.combine=Yi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ei=Bi();function Bi(){const M=new ArrayBuffer(4),e=new Float32Array(M),t=new Uint32Array(M),r=new Uint32Array(512),s=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(r[c]=0,r[c|256]=32768,s[c]=24,s[c|256]=24):u<-14?(r[c]=1024>>-u-14,r[c|256]=1024>>-u-14|32768,s[c]=-u-1,s[c|256]=-u-1):u<=15?(r[c]=u+15<<10,r[c|256]=u+15<<10|32768,s[c]=13,s[c|256]=13):u<128?(r[c]=31744,r[c|256]=64512,s[c]=24,s[c|256]=24):(r[c]=31744,r[c|256]=64512,s[c]=13,s[c|256]=13)}const d=new Uint32Array(2048),i=new Uint32Array(64),n=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,d[c]=u|h}for(let c=1024;c<2048;++c)d[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)i[c]=c<<23;i[31]=1199570944,i[32]=2147483648;for(let c=33;c<63;++c)i[c]=2147483648+(c-32<<23);i[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(n[c]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:s,mantissaTable:d,exponentTable:i,offsetTable:n}}function sn(M){Math.abs(M)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),M=Ri(M,-65504,65504),ei.floatView[0]=M;const e=ei.uint32View[0],t=e>>23&511;return ei.baseTable[t]+((e&8388607)>>ei.shiftTable[t])}function Zr(M){const e=M>>10;return ei.uint32View[0]=ei.mantissaTable[ei.offsetTable[e]+(M&1023)]+ei.exponentTable[e],ei.floatView[0]}class Po{static toHalfFloat(e){return sn(e)}static fromHalfFloat(e){return Zr(e)}}const ar=new ce,Gr=new nn;let Vt=0;class Pt{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Vt++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=ul,this.updateRanges=[],this.gpuType=uo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let s=0,d=this.itemSize;s<d;s++)this.array[e+s]=t.array[r+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix3(e),this.setXY(t,Gr.x,Gr.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ar.fromBufferAttribute(this,t),ar.applyMatrix3(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ar.fromBufferAttribute(this,t),ar.applyMatrix4(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ar.fromBufferAttribute(this,t),ar.applyNormalMatrix(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ar.fromBufferAttribute(this,t),ar.transformDirection(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=gs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=rr(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=gs(t,this.array)),t}setX(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=gs(t,this.array)),t}setY(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=gs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=gs(t,this.array)),t}setW(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,s){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),s=rr(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,t,r,s,d){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),s=rr(s,this.array),d=rr(d,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=d,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ul&&(e.usage=this.usage),e}}class si extends Pt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class Zi extends Pt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class yi extends Pt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class kr extends Pt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class ds extends Pt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class ye extends Pt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class Ja extends Pt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Fi extends Pt{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Zr(this.array[e*this.itemSize]);return this.normalized&&(t=gs(t,this.array)),t}setX(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize]=sn(t),this}getY(e){let t=Zr(this.array[e*this.itemSize+1]);return this.normalized&&(t=gs(t,this.array)),t}setY(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+1]=sn(t),this}getZ(e){let t=Zr(this.array[e*this.itemSize+2]);return this.normalized&&(t=gs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+2]=sn(t),this}getW(e){let t=Zr(this.array[e*this.itemSize+3]);return this.normalized&&(t=gs(t,this.array)),t}setW(e,t){return this.normalized&&(t=rr(t,this.array)),this.array[e*this.itemSize+3]=sn(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array)),this.array[e+0]=sn(t),this.array[e+1]=sn(r),this}setXYZ(e,t,r,s){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),s=rr(s,this.array)),this.array[e+0]=sn(t),this.array[e+1]=sn(r),this.array[e+2]=sn(s),this}setXYZW(e,t,r,s,d){return e*=this.itemSize,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),s=rr(s,this.array),d=rr(d,this.array)),this.array[e+0]=sn(t),this.array[e+1]=sn(r),this.array[e+2]=sn(s),this.array[e+3]=sn(d),this}}class Wt extends Pt{constructor(e,t,r){super(new Float32Array(e),t,r)}}let ai=0;const Dr=new Ui,oi=new Se,er=new ce,ha=new Uo,Wr=new Uo,te=new ce;class H extends Ts{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ai++}),this.uuid=us(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Xd(e)?Ja:ds)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const d=new Js().getNormalMatrix(e);r.applyNormalMatrix(d),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dr.makeRotationFromQuaternion(e),this.applyMatrix4(Dr),this}rotateX(e){return Dr.makeRotationX(e),this.applyMatrix4(Dr),this}rotateY(e){return Dr.makeRotationY(e),this.applyMatrix4(Dr),this}rotateZ(e){return Dr.makeRotationZ(e),this.applyMatrix4(Dr),this}translate(e,t,r){return Dr.makeTranslation(e,t,r),this.applyMatrix4(Dr),this}scale(e,t,r){return Dr.makeScale(e,t,r),this.applyMatrix4(Dr),this}lookAt(e){return oi.lookAt(e),oi.updateMatrix(),this.applyMatrix4(oi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(er).negate(),this.translate(er.x,er.y,er.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let s=0,d=e.length;s<d;s++){const i=e[s];r.push(i.x,i.y,i.z||0)}this.setAttribute("position",new Wt(r,3))}else{const r=Math.min(e.length,t.count);for(let s=0;s<r;s++){const d=e[s];t.setXYZ(s,d.x,d.y,d.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Uo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const d=t[r];ha.setFromBufferAttribute(d),this.morphTargetsRelative?(te.addVectors(this.boundingBox.min,ha.min),this.boundingBox.expandByPoint(te),te.addVectors(this.boundingBox.max,ha.max),this.boundingBox.expandByPoint(te)):(this.boundingBox.expandByPoint(ha.min),this.boundingBox.expandByPoint(ha.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Io);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ce,1/0);return}if(e){const r=this.boundingSphere.center;if(ha.setFromBufferAttribute(e),t)for(let d=0,i=t.length;d<i;d++){const n=t[d];Wr.setFromBufferAttribute(n),this.morphTargetsRelative?(te.addVectors(ha.min,Wr.min),ha.expandByPoint(te),te.addVectors(ha.max,Wr.max),ha.expandByPoint(te)):(ha.expandByPoint(Wr.min),ha.expandByPoint(Wr.max))}ha.getCenter(r);let s=0;for(let d=0,i=e.count;d<i;d++)te.fromBufferAttribute(e,d),s=Math.max(s,r.distanceToSquared(te));if(t)for(let d=0,i=t.length;d<i;d++){const n=t[d],c=this.morphTargetsRelative;for(let u=0,h=n.count;u<h;u++)te.fromBufferAttribute(n,u),c&&(er.fromBufferAttribute(e,u),te.add(er)),s=Math.max(s,r.distanceToSquared(te))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,s=t.normal,d=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pt(new Float32Array(4*r.count),4));const i=this.getAttribute("tangent"),n=[],c=[];for(let Z=0;Z<r.count;Z++)n[Z]=new ce,c[Z]=new ce;const u=new ce,h=new ce,m=new ce,v=new nn,y=new nn,S=new nn,b=new ce,T=new ce;function w(Z,W,J){u.fromBufferAttribute(r,Z),h.fromBufferAttribute(r,W),m.fromBufferAttribute(r,J),v.fromBufferAttribute(d,Z),y.fromBufferAttribute(d,W),S.fromBufferAttribute(d,J),h.sub(u),m.sub(u),y.sub(v),S.sub(v);const ue=1/(y.x*S.y-S.x*y.y);isFinite(ue)&&(b.copy(h).multiplyScalar(S.y).addScaledVector(m,-y.y).multiplyScalar(ue),T.copy(m).multiplyScalar(y.x).addScaledVector(h,-S.x).multiplyScalar(ue),n[Z].add(b),n[W].add(b),n[J].add(b),c[Z].add(T),c[W].add(T),c[J].add(T))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let Z=0,W=A.length;Z<W;++Z){const J=A[Z],ue=J.start,we=J.count;for(let ie=ue,ge=ue+we;ie<ge;ie+=3)w(e.getX(ie+0),e.getX(ie+1),e.getX(ie+2))}const I=new ce,P=new ce,B=new ce,L=new ce;function z(Z){B.fromBufferAttribute(s,Z),L.copy(B);const W=n[Z];I.copy(W),I.sub(B.multiplyScalar(B.dot(W))).normalize(),P.crossVectors(L,W);const ue=P.dot(c[Z])<0?-1:1;i.setXYZW(Z,I.x,I.y,I.z,ue)}for(let Z=0,W=A.length;Z<W;++Z){const J=A[Z],ue=J.start,we=J.count;for(let ie=ue,ge=ue+we;ie<ge;ie+=3)z(e.getX(ie+0)),z(e.getX(ie+1)),z(e.getX(ie+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Pt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let v=0,y=r.count;v<y;v++)r.setXYZ(v,0,0,0);const s=new ce,d=new ce,i=new ce,n=new ce,c=new ce,u=new ce,h=new ce,m=new ce;if(e)for(let v=0,y=e.count;v<y;v+=3){const S=e.getX(v+0),b=e.getX(v+1),T=e.getX(v+2);s.fromBufferAttribute(t,S),d.fromBufferAttribute(t,b),i.fromBufferAttribute(t,T),h.subVectors(i,d),m.subVectors(s,d),h.cross(m),n.fromBufferAttribute(r,S),c.fromBufferAttribute(r,b),u.fromBufferAttribute(r,T),n.add(h),c.add(h),u.add(h),r.setXYZ(S,n.x,n.y,n.z),r.setXYZ(b,c.x,c.y,c.z),r.setXYZ(T,u.x,u.y,u.z)}else for(let v=0,y=t.count;v<y;v+=3)s.fromBufferAttribute(t,v+0),d.fromBufferAttribute(t,v+1),i.fromBufferAttribute(t,v+2),h.subVectors(i,d),m.subVectors(s,d),h.cross(m),r.setXYZ(v+0,h.x,h.y,h.z),r.setXYZ(v+1,h.x,h.y,h.z),r.setXYZ(v+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)te.fromBufferAttribute(e,t),te.normalize(),e.setXYZ(t,te.x,te.y,te.z)}toNonIndexed(){function e(n,c){const u=n.array,h=n.itemSize,m=n.normalized,v=new u.constructor(c.length*h);let y=0,S=0;for(let b=0,T=c.length;b<T;b++){n.isInterleavedBufferAttribute?y=c[b]*n.data.stride+n.offset:y=c[b]*h;for(let w=0;w<h;w++)v[S++]=u[y++]}return new Pt(v,h,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new H,r=this.index.array,s=this.attributes;for(const n in s){const c=s[n],u=e(c,r);t.setAttribute(n,u)}const d=this.morphAttributes;for(const n in d){const c=[],u=d[n];for(let h=0,m=u.length;h<m;h++){const v=u[h],y=e(v,r);c.push(y)}t.morphAttributes[n]=c}t.morphTargetsRelative=this.morphTargetsRelative;const i=this.groups;for(let n=0,c=i.length;n<c;n++){const u=i[n];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const c in r){const u=r[c];e.data.attributes[c]=u.toJSON(e.data)}const s={};let d=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let m=0,v=u.length;m<v;m++){const y=u[m];h.push(y.toJSON(e.data))}h.length>0&&(s[c]=h,d=!0)}d&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const i=this.groups;i.length>0&&(e.data.groups=JSON.parse(JSON.stringify(i)));const n=this.boundingSphere;return n!==null&&(e.data.boundingSphere=n.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const s=e.attributes;for(const u in s){const h=s[u];this.setAttribute(u,h.clone(t))}const d=e.morphAttributes;for(const u in d){const h=[],m=d[u];for(let v=0,y=m.length;v<y;v++)h.push(m[v].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const i=e.groups;for(let u=0,h=i.length;u<h;u++){const m=i[u];this.addGroup(m.start,m.count,m.materialIndex)}const n=e.boundingBox;n!==null&&(this.boundingBox=n.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const We=new Ui,wt=new Oc,on=new Io,gt=new ce,ti=new ce,Cn=new ce,ci=new ce,fi=new ce,gn=new ce,Vn=new ce,Ii=new ce;class Un extends Se{constructor(e=new H,t=new Rt){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,i=s.length;d<i;d++){const n=s[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=d}}}}getVertexPosition(e,t){const r=this.geometry,s=r.attributes.position,d=r.morphAttributes.position,i=r.morphTargetsRelative;t.fromBufferAttribute(s,e);const n=this.morphTargetInfluences;if(d&&n){gn.set(0,0,0);for(let c=0,u=d.length;c<u;c++){const h=n[c],m=d[c];h!==0&&(fi.fromBufferAttribute(m,e),i?gn.addScaledVector(fi,h):gn.addScaledVector(fi.sub(t),h))}t.add(gn)}return t}raycast(e,t){const r=this.geometry,s=this.material,d=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),on.copy(r.boundingSphere),on.applyMatrix4(d),wt.copy(e.ray).recast(e.near),!(on.containsPoint(wt.origin)===!1&&(wt.intersectSphere(on,gt)===null||wt.origin.distanceToSquared(gt)>D0(e.far-e.near,2)))&&(We.copy(d).invert(),wt.copy(e.ray).applyMatrix4(We),!(r.boundingBox!==null&&wt.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,wt)))}_computeIntersections(e,t,r){let s;const d=this.geometry,i=this.material,n=d.index,c=d.attributes.position,u=d.attributes.uv,h=d.attributes.uv1,m=d.attributes.normal,v=d.groups,y=d.drawRange;if(n!==null)if(Array.isArray(i))for(let S=0,b=v.length;S<b;S++){const T=v[S],w=i[T.materialIndex],A=Math.max(T.start,y.start),I=Math.min(n.count,Math.min(T.start+T.count,y.start+y.count));for(let P=A,B=I;P<B;P+=3){const L=n.getX(P),z=n.getX(P+1),Z=n.getX(P+2);s=Pi(this,w,e,r,u,h,m,L,z,Z),s&&(s.faceIndex=Math.floor(P/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const S=Math.max(0,y.start),b=Math.min(n.count,y.start+y.count);for(let T=S,w=b;T<w;T+=3){const A=n.getX(T),I=n.getX(T+1),P=n.getX(T+2);s=Pi(this,i,e,r,u,h,m,A,I,P),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}else if(c!==void 0)if(Array.isArray(i))for(let S=0,b=v.length;S<b;S++){const T=v[S],w=i[T.materialIndex],A=Math.max(T.start,y.start),I=Math.min(c.count,Math.min(T.start+T.count,y.start+y.count));for(let P=A,B=I;P<B;P+=3){const L=P,z=P+1,Z=P+2;s=Pi(this,w,e,r,u,h,m,L,z,Z),s&&(s.faceIndex=Math.floor(P/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const S=Math.max(0,y.start),b=Math.min(c.count,y.start+y.count);for(let T=S,w=b;T<w;T+=3){const A=T,I=T+1,P=T+2;s=Pi(this,i,e,r,u,h,m,A,I,P),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}}}function Fn(M,e,t,r,s,d,i,n){let c;if(e.side===di?c=r.intersectTriangle(i,d,s,!0,n):c=r.intersectTriangle(s,d,i,e.side===hi,n),c===null)return null;Ii.copy(n),Ii.applyMatrix4(M.matrixWorld);const u=t.ray.origin.distanceTo(Ii);return u<t.near||u>t.far?null:{distance:u,point:Ii.clone(),object:M}}function Pi(M,e,t,r,s,d,i,n,c,u){M.getVertexPosition(n,ti),M.getVertexPosition(c,Cn),M.getVertexPosition(u,ci);const h=Fn(M,e,t,r,ti,Cn,ci,Vn);if(h){const m=new ce;se.getBarycoord(Vn,ti,Cn,ci,m),s&&(h.uv=se.getInterpolatedAttribute(s,n,c,u,m,new nn)),d&&(h.uv1=se.getInterpolatedAttribute(d,n,c,u,m,new nn)),i&&(h.normal=se.getInterpolatedAttribute(i,n,c,u,m,new ce),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const v={a:n,b:c,c:u,normal:new ce,materialIndex:0};se.getNormal(ti,Cn,ci,v.normal),h.face=v,h.barycoord=m}return h}class _e extends H{constructor(e=1,t=1,r=1,s=1,d=1,i=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:s,heightSegments:d,depthSegments:i};const n=this;s=Math.floor(s),d=Math.floor(d),i=Math.floor(i);const c=[],u=[],h=[],m=[];let v=0,y=0;S("z","y","x",-1,-1,r,t,e,i,d,0),S("z","y","x",1,-1,r,t,-e,i,d,1),S("x","z","y",1,1,e,r,t,s,i,2),S("x","z","y",1,-1,e,r,-t,s,i,3),S("x","y","z",1,-1,e,t,r,s,d,4),S("x","y","z",-1,-1,e,t,-r,s,d,5),this.setIndex(c),this.setAttribute("position",new Wt(u,3)),this.setAttribute("normal",new Wt(h,3)),this.setAttribute("uv",new Wt(m,2));function S(b,T,w,A,I,P,B,L,z,Z,W){const J=P/z,ue=B/Z,we=P/2,ie=B/2,ge=L/2,Me=z+1,de=Z+1;let re=0,ve=0;const Oe=new ce;for(let le=0;le<de;le++){const Q=le*ue-ie;for(let me=0;me<Me;me++){const Ce=me*J-we;Oe[b]=Ce*A,Oe[T]=Q*I,Oe[w]=ge,u.push(Oe.x,Oe.y,Oe.z),Oe[b]=0,Oe[T]=0,Oe[w]=L>0?1:-1,h.push(Oe.x,Oe.y,Oe.z),m.push(me/z),m.push(1-le/Z),re+=1}}for(let le=0;le<Z;le++)for(let Q=0;Q<z;Q++){const me=v+Q+Me*le,Ce=v+Q+Me*(le+1),tt=v+(Q+1)+Me*(le+1),$e=v+(Q+1)+Me*le;c.push(me,Ce,$e),c.push(Ce,tt,$e),ve+=6}n.addGroup(y,ve,W),y+=ve,v+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _e(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function pn(M){const e={};for(const t in M){e[t]={};for(const r in M[t]){const s=M[t][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=s.clone():Array.isArray(s)?e[t][r]=s.slice():e[t][r]=s}}return e}function Nn(M){const e={};for(let t=0;t<M.length;t++){const r=pn(M[t]);for(const s in r)e[s]=r[s]}return e}function ni(M){const e=[];for(let t=0;t<M.length;t++)e.push(M[t].clone());return e}function cn(M){const e=M.getRenderTarget();return e===null?M.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ka.workingColorSpace}const $t={clone:pn,merge:Nn};var ui=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ji=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class pa extends vn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ui,this.fragmentShader=Ji,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pn(e.uniforms),this.uniformsGroups=ni(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const i=this.uniforms[s].value;i&&i.isTexture?t.uniforms[s]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[s]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[s]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[s]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[s]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[s]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[s]={type:"m4",value:i.toArray()}:t.uniforms[s]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class ia extends Se{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ui,this.projectionMatrix=new Ui,this.projectionMatrixInverse=new Ui,this.coordinateSystem=Or,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const fs=new ce,jl=new nn,Yd=new nn;class Yo extends ia{constructor(e=50,t=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Zl*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ic*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Zl*2*Math.atan(Math.tan(ic*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){fs.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(fs.x,fs.y).multiplyScalar(-e/fs.z),fs.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(fs.x,fs.y).multiplyScalar(-e/fs.z)}getViewSize(e,t){return this.getViewBounds(e,jl,Yd),t.subVectors(Yd,jl)}setViewOffset(e,t,r,s,d,i){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=d,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ic*.5*this.fov)/this.zoom,r=2*t,s=this.aspect*r,d=-.5*s;const i=this.view;if(this.view!==null&&this.view.enabled){const c=i.fullWidth,u=i.fullHeight;d+=i.offsetX*s/c,t-=i.offsetY*r/u,s*=i.width/c,r*=i.height/u}const n=this.filmOffset;n!==0&&(d+=e*n/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+s,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const vc=-90,vu=1;class qd extends Se{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Yo(vc,vu,e,t);s.layers=this.layers,this.add(s);const d=new Yo(vc,vu,e,t);d.layers=this.layers,this.add(d);const i=new Yo(vc,vu,e,t);i.layers=this.layers,this.add(i);const n=new Yo(vc,vu,e,t);n.layers=this.layers,this.add(n);const c=new Yo(vc,vu,e,t);c.layers=this.layers,this.add(c);const u=new Yo(vc,vu,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,s,d,i,n,c]=t;for(const u of t)this.remove(u);if(e===Or)r.up.set(0,1,0),r.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),d.up.set(0,0,-1),d.lookAt(0,1,0),i.up.set(0,0,1),i.lookAt(0,-1,0),n.up.set(0,1,0),n.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===gl)r.up.set(0,-1,0),r.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),d.up.set(0,0,1),d.lookAt(0,1,0),i.up.set(0,0,-1),i.lookAt(0,-1,0),n.up.set(0,-1,0),n.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[d,i,n,c,u,h]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const b=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,s),e.render(t,d),e.setRenderTarget(r,1,s),e.render(t,i),e.setRenderTarget(r,2,s),e.render(t,n),e.setRenderTarget(r,3,s),e.render(t,c),e.setRenderTarget(r,4,s),e.render(t,u),r.texture.generateMipmaps=b,e.setRenderTarget(r,5,s),e.render(t,h),e.setRenderTarget(m,v,y),e.xr.enabled=S,r.texture.needsPMREMUpdate=!0}}class Ml extends oo{constructor(e=[],t=nr,r,s,d,i,n,c,u,h){super(e,t,r,s,d,i,n,c,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class gu extends du{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},s=[r,r,r,r,r,r];this.texture=new Ml(s),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new _e(5,5,5),d=new pa({name:"CubemapFromEquirect",uniforms:pn(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:di,blending:st});d.uniforms.tEquirect.value=t;const i=new Un(s,d),n=t.minFilter;return t.minFilter===va&&(t.minFilter=Nr),new qd(1,10,this).update(e,i),t.minFilter=n,i.geometry.dispose(),i.material.dispose(),this}clear(e,t=!0,r=!0,s=!0){const d=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,r,s);e.setRenderTarget(d)}}class lc extends Se{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Qf={type:"move"};class Jd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new lc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new lc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new lc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let s=null,d=null,i=null;const n=this._targetRay,c=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){i=!0;for(const b of e.hand.values()){const T=t.getJointPose(b,r),w=this._getHandJoint(u,b);T!==null&&(w.matrix.fromArray(T.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=T.radius),w.visible=T!==null}const h=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],v=h.position.distanceTo(m.position),y=.02,S=.005;u.inputState.pinching&&v>y+S?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&v<=y-S&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(d=t.getPose(e.gripSpace,r),d!==null&&(c.matrix.fromArray(d.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,d.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(d.linearVelocity)):c.hasLinearVelocity=!1,d.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(d.angularVelocity)):c.hasAngularVelocity=!1));n!==null&&(s=t.getPose(e.targetRaySpace,r),s===null&&d!==null&&(s=d),s!==null&&(n.matrix.fromArray(s.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,s.linearVelocity?(n.hasLinearVelocity=!0,n.linearVelocity.copy(s.linearVelocity)):n.hasLinearVelocity=!1,s.angularVelocity?(n.hasAngularVelocity=!0,n.angularVelocity.copy(s.angularVelocity)):n.hasAngularVelocity=!1,this.dispatchEvent(Qf)))}return n!==null&&(n.visible=s!==null),c!==null&&(c.visible=d!==null),u!==null&&(u.visible=i!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new lc;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class Qd{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ot(e),this.density=t}clone(){return new Qd(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class md{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new ot(e),this.near=t,this.far=r}clone(){return new md(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class eh extends Se{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new bo,this.environmentIntensity=1,this.environmentRotation=new bo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class vd{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ul,this.updateRanges=[],this.version=0,this.uuid=us()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let s=0,d=this.stride;s<d;s++)this.array[e+s]=t.array[r+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=us()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=us()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fs=new ce;class Lc{constructor(e,t,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Fs.fromBufferAttribute(this,t),Fs.applyMatrix4(e),this.setXYZ(t,Fs.x,Fs.y,Fs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Fs.fromBufferAttribute(this,t),Fs.applyNormalMatrix(e),this.setXYZ(t,Fs.x,Fs.y,Fs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Fs.fromBufferAttribute(this,t),Fs.transformDirection(e),this.setXYZ(t,Fs.x,Fs.y,Fs.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=gs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=rr(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=rr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=rr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=rr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=rr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=gs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=gs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=gs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=gs(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),s=rr(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,t,r,s,d){return e=e*this.data.stride+this.offset,this.normalized&&(t=rr(t,this.array),r=rr(r,this.array),s=rr(s,this.array),d=rr(d,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=d,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)t.push(this.data.array[s+d])}return new Pt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Lc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)t.push(this.data.array[s+d])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Y extends vn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Be;const pt=new ce,dt=new ce,Ve=new ce,un=new nn,Bn=new nn,ri=new Ui,qn=new ce,Mi=new ce,zi=new ce,Si=new nn,wr=new nn,wa=new nn;class _o extends Se{constructor(e=new Y){if(super(),this.isSprite=!0,this.type="Sprite",Be===void 0){Be=new H;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new vd(t,5);Be.setIndex([0,1,2,0,2,3]),Be.setAttribute("position",new Lc(r,3,0,!1)),Be.setAttribute("uv",new Lc(r,2,3,!1))}this.geometry=Be,this.material=e,this.center=new nn(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),dt.setFromMatrixScale(this.matrixWorld),ri.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ve.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&dt.multiplyScalar(-Ve.z);const r=this.material.rotation;let s,d;r!==0&&(d=Math.cos(r),s=Math.sin(r));const i=this.center;Da(qn.set(-.5,-.5,0),Ve,i,dt,s,d),Da(Mi.set(.5,-.5,0),Ve,i,dt,s,d),Da(zi.set(.5,.5,0),Ve,i,dt,s,d),Si.set(0,0),wr.set(1,0),wa.set(1,1);let n=e.ray.intersectTriangle(qn,Mi,zi,!1,pt);if(n===null&&(Da(Mi.set(-.5,.5,0),Ve,i,dt,s,d),wr.set(0,1),n=e.ray.intersectTriangle(qn,zi,Mi,!1,pt),n===null))return;const c=e.ray.origin.distanceTo(pt);c<e.near||c>e.far||t.push({distance:c,point:pt.clone(),uv:se.getInterpolation(pt,qn,Mi,zi,Si,wr,wa,new nn),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Da(M,e,t,r,s,d){un.subVectors(M,t).addScalar(.5).multiply(r),s!==void 0?(Bn.x=d*un.x-s*un.y,Bn.y=s*un.x+d*un.y):Bn.copy(un),M.copy(e),M.x+=Bn.x,M.y+=Bn.y,M.applyMatrix4(ri)}const Pa=new ce,Ti=new ce;class vo extends Se{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,s=t.length;r<s;r++){const d=t[r];this.addLevel(d.object.clone(),d.distance,d.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const s=this.levels;let d;for(d=0;d<s.length&&!(t<s[d].distance);d++);return s.splice(d,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const s=t.splice(r,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,s;for(r=1,s=t.length;r<s;r++){let d=t[r].distance;if(t[r].object.visible&&(d-=d*t[r].hysteresis),e<d)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Pa.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(Pa);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Pa.setFromMatrixPosition(e.matrixWorld),Ti.setFromMatrixPosition(this.matrixWorld);const r=Pa.distanceTo(Ti)/e.zoom;t[0].object.visible=!0;let s,d;for(s=1,d=t.length;s<d;s++){let i=t[s].distance;if(t[s].object.visible&&(i-=i*t[s].hysteresis),r>=i)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<d;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let s=0,d=r.length;s<d;s++){const i=r[s];t.object.levels.push({object:i.object.uuid,distance:i.distance,hysteresis:i.hysteresis})}return t}}const Qr=new ce,nl=new so,Uc=new so,il=new ce,yu=new Ui,Ba=new ce,zs=new Io,Hs=new Ui,qo=new Oc;class Rs extends Un{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Ur,this.bindMatrix=new Ui,this.bindMatrixInverse=new Ui,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Uo),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ba),this.boundingBox.expandByPoint(Ba)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Io),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ba),this.boundingSphere.expandByPoint(Ba)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,s=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zs.copy(this.boundingSphere),zs.applyMatrix4(s),e.ray.intersectsSphere(zs)!==!1&&(Hs.copy(s).invert(),qo.copy(e.ray).applyMatrix4(Hs),!(this.boundingBox!==null&&qo.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,qo)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new so,t=this.geometry.attributes.skinWeight;for(let r=0,s=t.count;r<s;r++){e.fromBufferAttribute(t,r);const d=1/e.manhattanLength();d!==1/0?e.multiplyScalar(d):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Ur?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lo?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,s=this.geometry;nl.fromBufferAttribute(s.attributes.skinIndex,e),Uc.fromBufferAttribute(s.attributes.skinWeight,e),Qr.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let d=0;d<4;d++){const i=Uc.getComponent(d);if(i!==0){const n=nl.getComponent(d);yu.multiplyMatrices(r.bones[n].matrixWorld,r.boneInverses[n]),t.addScaledVector(il.copy(Qr).applyMatrix4(yu),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Fu extends Se{constructor(){super(),this.isBone=!0,this.type="Bone"}}class jr extends oo{constructor(e=null,t=1,r=1,s,d,i,n,c,u=vi,h=vi,m,v){super(null,i,n,c,u,h,s,d,m,v),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const th=new Ui,xu=new Ui;class gd{constructor(e=[],t=[]){this.uuid=us(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new Ui)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Ui;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let d=0,i=e.length;d<i;d++){const n=e[d]?e[d].matrixWorld:xu;th.multiplyMatrices(n,t[d]),th.toArray(r,d*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new gd(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new jr(t,e,e,Ni,uo);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,s=e.bones.length;r<s;r++){const d=e.bones[r];let i=t[d];i===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",d),i=new Fu),this.bones.push(i),this.boneInverses.push(new Ui().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let s=0,d=t.length;s<d;s++){const i=t[s];e.bones.push(i.uuid);const n=r[s];e.boneInverses.push(n.toArray())}return e}}class zu extends Pt{constructor(e,t,r,s=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Hu=new Ui,_h=new Ui,ef=[],nh=new Uo,Gh=new Ui,yd=new Un,Su=new Io;class xd extends Un{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new zu(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<r;s++)this.setMatrixAt(s,Gh)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Uo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Hu),nh.copy(e.boundingBox).applyMatrix4(Hu),this.boundingBox.union(nh)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Io),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Hu),Su.copy(e.boundingSphere).applyMatrix4(Hu),this.boundingSphere.union(Su)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,s=this.morphTexture.source.data.data,d=r.length+1,i=e*d+1;for(let n=0;n<r.length;n++)r[n]=s[i+n]}raycast(e,t){const r=this.matrixWorld,s=this.count;if(yd.geometry=this.geometry,yd.material=this.material,yd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Su.copy(this.boundingSphere),Su.applyMatrix4(r),e.ray.intersectsSphere(Su)!==!1))for(let d=0;d<s;d++){this.getMatrixAt(d,Hu),_h.multiplyMatrices(r,Hu),yd.matrixWorld=_h,yd.raycast(e,ef);for(let i=0,n=ef.length;i<n;i++){const c=ef[i];c.instanceId=d,c.object=this,t.push(c)}ef.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new zu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,s=r.length+1;this.morphTexture===null&&(this.morphTexture=new jr(new Float32Array(s*this.count),s,this.count,ho,uo));const d=this.morphTexture.source.data.data;let i=0;for(let u=0;u<r.length;u++)i+=r[u];const n=this.geometry.morphTargetsRelative?1:1-i,c=s*e;d[c]=n,d.set(r,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ih=new ce,Ss=new ce,Of=new Js;class Zu{constructor(e=new ce(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,s){return this.normal.set(e,t,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const s=ih.subVectors(r,t).cross(Ss.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(ih),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const d=-(e.start.dot(this.normal)+this.constant)/s;return d<0||d>1?null:t.copy(e.start).addScaledVector(r,d)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Of.getNormalMatrix(e),s=this.coplanarPoint(ih).applyMatrix4(e),d=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(d),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Bc=new Io,kh=new nn(.5,.5),Vu=new ce;class Sd{constructor(e=new Zu,t=new Zu,r=new Zu,s=new Zu,d=new Zu,i=new Zu){this.planes=[e,t,r,s,d,i]}set(e,t,r,s,d,i){const n=this.planes;return n[0].copy(e),n[1].copy(t),n[2].copy(r),n[3].copy(s),n[4].copy(d),n[5].copy(i),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Or,r=!1){const s=this.planes,d=e.elements,i=d[0],n=d[1],c=d[2],u=d[3],h=d[4],m=d[5],v=d[6],y=d[7],S=d[8],b=d[9],T=d[10],w=d[11],A=d[12],I=d[13],P=d[14],B=d[15];if(s[0].setComponents(u-i,y-h,w-S,B-A).normalize(),s[1].setComponents(u+i,y+h,w+S,B+A).normalize(),s[2].setComponents(u+n,y+m,w+b,B+I).normalize(),s[3].setComponents(u-n,y-m,w-b,B-I).normalize(),r)s[4].setComponents(c,v,T,P).normalize(),s[5].setComponents(u-c,y-v,w-T,B-P).normalize();else if(s[4].setComponents(u-c,y-v,w-T,B-P).normalize(),t===Or)s[5].setComponents(u+c,y+v,w+T,B+P).normalize();else if(t===gl)s[5].setComponents(c,v,T,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Bc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Bc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Bc)}intersectsSprite(e){Bc.center.set(0,0,0);const t=kh.distanceTo(e.center);return Bc.radius=.7071067811865476+t,Bc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bc)}intersectsSphere(e){const t=this.planes,r=e.center,s=-e.radius;for(let d=0;d<6;d++)if(t[d].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const s=t[r];if(Vu.x=s.normal.x>0?e.max.x:e.min.x,Vu.y=s.normal.y>0?e.max.y:e.min.y,Vu.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Vu)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Is=new Ui,Zs=new Sd;class Wo{constructor(){this.coordinateSystem=Or}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const s=t.cameras[r];if(Is.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Zs.setFromProjectionMatrix(Is,s.coordinateSystem,s.reversedDepth),Zs.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const s=t.cameras[r];if(Is.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Zs.setFromProjectionMatrix(Is,s.coordinateSystem,s.reversedDepth),Zs.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const s=t.cameras[r];if(Is.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Zs.setFromProjectionMatrix(Is,s.coordinateSystem,s.reversedDepth),Zs.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const s=t.cameras[r];if(Is.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Zs.setFromProjectionMatrix(Is,s.coordinateSystem,s.reversedDepth),Zs.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const s=t.cameras[r];if(Is.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Zs.setFromProjectionMatrix(Is,s.coordinateSystem,s.reversedDepth),Zs.containsPoint(e))return!0}return!1}clone(){return new Wo}}function Df(M,e){return M-e}function Wh(M,e){return M.z-e.z}function tf(M,e){return e.z-M.z}class nf{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,s){const d=this.pool,i=this.list;this.index>=d.length&&d.push({start:-1,count:-1,z:-1,index:-1});const n=d[this.index];i.push(n),this.index++,n.start=e,n.count=t,n.z=r,n.index=s}reset(){this.list.length=0,this.index=0}}const bs=new Ui,Lf=new ot(1,1,1),Mh=new Sd,jh=new Wo,hl=new Uo,bu=new Io,rf=new ce,gc=new ce,rh=new ce,ah=new nf,hs=new Un,Fc=[];function rl(M,e,t=0){const r=e.itemSize;if(M.isInterleavedBufferAttribute||M.array.constructor!==e.array.constructor){const s=M.count;for(let d=0;d<s;d++)for(let i=0;i<r;i++)e.setComponent(d+t,i,M.getComponent(d,i))}else e.array.set(M.array,t*r);e.needsUpdate=!0}function Jo(M,e){if(M.constructor!==e.constructor){const t=Math.min(M.length,e.length);for(let r=0;r<t;r++)e[r]=M[r]}else{const t=Math.min(M.length,e.length);e.set(new M.constructor(M.buffer,0,t))}}class oh extends Un{constructor(e,t,r=t*2,s){super(new H,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new jr(t,e,e,Ni,uo);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new jr(t,e,e,Oa,Co);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new jr(t,e,e,Ni,uo);r.colorSpace=ka.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const d in e.attributes){const i=e.getAttribute(d),{array:n,itemSize:c,normalized:u}=i,h=new n.constructor(r*c),m=new Pt(h,c,u);t.setAttribute(d,m)}if(e.getIndex()!==null){const d=r>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Pt(d,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const s=e.getAttribute(r),d=t.getAttribute(r);if(s.itemSize!==d.itemSize||s.normalized!==d.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Uo);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,s=t.length;r<s;r++){if(t[r].active===!1)continue;const d=t[r].geometryIndex;this.getMatrixAt(r,bs),this.getBoundingBoxAt(d,hl).applyMatrix4(bs),e.union(hl)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Io);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,s=t.length;r<s;r++){if(t[r].active===!1)continue;const d=t[r].geometryIndex;this.getMatrixAt(r,bs),this.getBoundingSphereAt(d,bu).applyMatrix4(bs),e.union(bu)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Df),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=r):(s=this._instanceInfo.length,this._instanceInfo.push(r));const d=this._matricesTexture;bs.identity().toArray(d.image.data,s*16),d.needsUpdate=!0;const i=this._colorsTexture;return i&&(Lf.toArray(i.image.data,s*4),i.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},d=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const i=e.getIndex();if(i!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=r===-1?i.count:r),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Df),c=this._availableGeometryIds.shift(),d[c]=s):(c=this._geometryCount,this._geometryCount++,d.push(s)),this.setGeometryAt(c,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,s=r.getIndex()!==null,d=r.getIndex(),i=t.getIndex(),n=this._geometryInfo[e];if(s&&i.count>n.reservedIndexCount||t.attributes.position.count>n.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=n.vertexStart,u=n.reservedVertexCount;n.vertexCount=t.getAttribute("position").count;for(const h in r.attributes){const m=t.getAttribute(h),v=r.getAttribute(h);rl(m,v,c);const y=m.itemSize;for(let S=m.count,b=u;S<b;S++){const T=c+S;for(let w=0;w<y;w++)v.setComponent(T,w,0)}v.needsUpdate=!0,v.addUpdateRange(c*y,u*y)}if(s){const h=n.indexStart,m=n.reservedIndexCount;n.indexCount=t.getIndex().count;for(let v=0;v<i.count;v++)d.setX(h+v,c+i.getX(v));for(let v=i.count,y=m;v<y;v++)d.setX(h+v,c);d.needsUpdate=!0,d.addUpdateRange(h,n.reservedIndexCount)}return n.start=s?n.indexStart:n.vertexStart,n.count=s?n.indexCount:n.vertexCount,n.boundingBox=null,t.boundingBox!==null&&(n.boundingBox=t.boundingBox.clone()),n.boundingSphere=null,t.boundingSphere!==null&&(n.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let s=0,d=r.length;s<d;s++)r[s].active&&r[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,s=r.map((i,n)=>n).sort((i,n)=>r[i].vertexStart-r[n].vertexStart),d=this.geometry;for(let i=0,n=r.length;i<n;i++){const c=s[i],u=r[c];if(u.active!==!1){if(d.index!==null){if(u.indexStart!==t){const{indexStart:h,vertexStart:m,reservedIndexCount:v}=u,y=d.index,S=y.array,b=e-m;for(let T=h;T<h+v;T++)S[T]=S[T]+b;y.array.copyWithin(t,h,h+v),y.addUpdateRange(t,v),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:m}=u,v=d.attributes;for(const y in v){const S=v[y],{array:b,itemSize:T}=S;b.copyWithin(e*T,h*T,(h+m)*T),S.addUpdateRange(e*T,m*T)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=d.index?u.indexStart:u.vertexStart,this._nextIndexStart=d.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const d=new Uo,i=r.index,n=r.attributes.position;for(let c=s.start,u=s.start+s.count;c<u;c++){let h=c;i&&(h=i.getX(h)),d.expandByPoint(rf.fromBufferAttribute(n,h))}s.boundingBox=d}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const d=new Io;this.getBoundingBoxAt(e,hl),hl.getCenter(d.center);const i=r.index,n=r.attributes.position;let c=0;for(let u=s.start,h=s.start+s.count;u<h;u++){let m=u;i&&(m=i.getX(m)),rf.fromBufferAttribute(n,m),c=Math.max(c,d.center.distanceToSquared(rf))}d.radius=Math.sqrt(c),s.boundingSphere=d}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(Df);t[t.length-1]===r.length-1;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),d=new Int32Array(e);Jo(this._multiDrawCounts,s),Jo(this._multiDrawStarts,d),this._multiDrawCounts=s,this._multiDrawStarts=d,this._maxInstanceCount=e;const i=this._indirectTexture,n=this._matricesTexture,c=this._colorsTexture;i.dispose(),this._initIndirectTexture(),Jo(i.image.data,this._indirectTexture.image.data),n.dispose(),this._initMatricesTexture(),Jo(n.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Jo(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(n=>n.active);if(Math.max(...r.map(n=>n.vertexStart+n.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const d=this.geometry;d.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new H,this._initializeGeometry(d));const i=this.geometry;d.index&&Jo(d.index.array,i.index.array);for(const n in d.attributes)Jo(d.attributes[n].array,i.attributes[n].array)}raycast(e,t){const r=this._instanceInfo,s=this._geometryInfo,d=this.matrixWorld,i=this.geometry;hs.material=this.material,hs.geometry.index=i.index,hs.geometry.attributes=i.attributes,hs.geometry.boundingBox===null&&(hs.geometry.boundingBox=new Uo),hs.geometry.boundingSphere===null&&(hs.geometry.boundingSphere=new Io);for(let n=0,c=r.length;n<c;n++){if(!r[n].visible||!r[n].active)continue;const u=r[n].geometryIndex,h=s[u];hs.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(n,hs.matrixWorld).premultiply(d),this.getBoundingBoxAt(u,hs.geometry.boundingBox),this.getBoundingSphereAt(u,hs.geometry.boundingSphere),hs.raycast(e,Fc);for(let m=0,v=Fc.length;m<v;m++){const y=Fc[m];y.object=this,y.batchId=n,t.push(y)}Fc.length=0}hs.material=null,hs.geometry.index=null,hs.geometry.attributes={},hs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>cl(Qi({},t),{boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>Qi({},t)),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,s,d){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const i=s.getIndex(),n=i===null?1:i.array.BYTES_PER_ELEMENT,c=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,m=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,S=y.image.data,b=r.isArrayCamera?jh:Mh;v&&!r.isArrayCamera&&(bs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),Mh.setFromProjectionMatrix(bs,r.coordinateSystem,r.reversedDepth));let T=0;if(this.sortObjects){bs.copy(this.matrixWorld).invert(),rf.setFromMatrixPosition(r.matrixWorld).applyMatrix4(bs),gc.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(bs);for(let I=0,P=c.length;I<P;I++)if(c[I].visible&&c[I].active){const B=c[I].geometryIndex;this.getMatrixAt(I,bs),this.getBoundingSphereAt(B,bu).applyMatrix4(bs);let L=!1;if(v&&(L=!b.intersectsSphere(bu,r)),!L){const z=m[B],Z=rh.subVectors(bu.center,rf).dot(gc);ah.push(z.start,z.count,Z,I)}}const w=ah.list,A=this.customSort;A===null?w.sort(d.transparent?tf:Wh):A.call(this,w,r);for(let I=0,P=w.length;I<P;I++){const B=w[I];u[T]=B.start*n,h[T]=B.count,S[T]=B.index,T++}ah.reset()}else for(let w=0,A=c.length;w<A;w++)if(c[w].visible&&c[w].active){const I=c[w].geometryIndex;let P=!1;if(v&&(this.getMatrixAt(w,bs),this.getBoundingSphereAt(I,bu).applyMatrix4(bs),P=!b.intersectsSphere(bu,r)),!P){const B=m[I];u[T]=B.start*n,h[T]=B.count,S[T]=w,T++}}y.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,r,s,d,i){this.onBeforeRender(e,null,s,d,i)}}class Qo extends vn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ot(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const zc=new ce,Gu=new ce,af=new Ui,Vs=new Oc,Ps=new Io,Hc=new ce,yc=new ce;class Gs extends Se{constructor(e=new H,t=new Qo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let s=1,d=t.count;s<d;s++)zc.fromBufferAttribute(t,s-1),Gu.fromBufferAttribute(t,s),r[s]=r[s-1],r[s]+=zc.distanceTo(Gu);e.setAttribute("lineDistance",new Wt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,d=e.params.Line.threshold,i=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ps.copy(r.boundingSphere),Ps.applyMatrix4(s),Ps.radius+=d,e.ray.intersectsSphere(Ps)===!1)return;af.copy(s).invert(),Vs.copy(e.ray).applyMatrix4(af);const n=d/((this.scale.x+this.scale.y+this.scale.z)/3),c=n*n,u=this.isLineSegments?2:1,h=r.index,v=r.attributes.position;if(h!==null){const y=Math.max(0,i.start),S=Math.min(h.count,i.start+i.count);for(let b=y,T=S-1;b<T;b+=u){const w=h.getX(b),A=h.getX(b+1),I=es(this,e,Vs,c,w,A,b);I&&t.push(I)}if(this.isLineLoop){const b=h.getX(S-1),T=h.getX(y),w=es(this,e,Vs,c,b,T,S-1);w&&t.push(w)}}else{const y=Math.max(0,i.start),S=Math.min(v.count,i.start+i.count);for(let b=y,T=S-1;b<T;b+=u){const w=es(this,e,Vs,c,b,b+1,b);w&&t.push(w)}if(this.isLineLoop){const b=es(this,e,Vs,c,S-1,y,S-1);b&&t.push(b)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,i=s.length;d<i;d++){const n=s[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=d}}}}}function es(M,e,t,r,s,d,i){const n=M.geometry.attributes.position;if(zc.fromBufferAttribute(n,s),Gu.fromBufferAttribute(n,d),t.distanceSqToSegment(zc,Gu,Hc,yc)>r)return;Hc.applyMatrix4(M.matrixWorld);const u=e.ray.origin.distanceTo(Hc);if(!(u<e.near||u>e.far))return{distance:u,point:yc.clone().applyMatrix4(M.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:M}}const bd=new ce,Zc=new ce;class ks extends Gs{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let s=0,d=t.count;s<d;s+=2)bd.fromBufferAttribute(t,s),Zc.fromBufferAttribute(t,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+bd.distanceTo(Zc);e.setAttribute("lineDistance",new Wt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ws extends Gs{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class _s extends vn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ya=new Ui,El=new Oc,Cl=new Io,_d=new ce;class Tl extends Se{constructor(e=new H,t=new _s){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,d=e.params.Points.threshold,i=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Cl.copy(r.boundingSphere),Cl.applyMatrix4(s),Cl.radius+=d,e.ray.intersectsSphere(Cl)===!1)return;ya.copy(s).invert(),El.copy(e.ray).applyMatrix4(ya);const n=d/((this.scale.x+this.scale.y+this.scale.z)/3),c=n*n,u=r.index,m=r.attributes.position;if(u!==null){const v=Math.max(0,i.start),y=Math.min(u.count,i.start+i.count);for(let S=v,b=y;S<b;S++){const T=u.getX(S);_d.fromBufferAttribute(m,T),ku(_d,T,c,s,e,t,this)}}else{const v=Math.max(0,i.start),y=Math.min(m.count,i.start+i.count);for(let S=v,b=y;S<b;S++)_d.fromBufferAttribute(m,S),ku(_d,S,c,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,i=s.length;d<i;d++){const n=s[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=d}}}}}function ku(M,e,t,r,s,d,i){const n=El.distanceSqToPoint(M);if(n<t){const c=new ce;El.closestPointToPoint(M,c),c.applyMatrix4(r);const u=s.ray.origin.distanceTo(c);if(u<s.near||u>s.far)return;d.push({distance:u,distanceToRay:Math.sqrt(n),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:i})}}class of extends oo{constructor(e,t,r,s,d=Nr,i=Nr,n,c,u){super(e,t,r,s,d,i,n,c,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function m(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(m))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class sf extends of{constructor(e,t,r,s,d,i,n,c){super({},e,t,r,s,d,i,n,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Wu extends oo{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=vi,this.minFilter=vi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Md extends oo{constructor(e,t,r,s,d,i,n,c,u,h,m,v){super(null,i,n,c,u,h,s,d,m,v),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Uf extends Md{constructor(e,t,r,s,d,i){super(e,t,r,d,i),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Tn,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class sh extends Md{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,nr),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Ed extends oo{constructor(e,t,r,s,d,i,n,c,u){super(e,t,r,s,d,i,n,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lf extends oo{constructor(e,t,r=Co,s,d,i,n=vi,c=vi,u,h=fr,m=1){if(h!==fr&&h!==qr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:m};super(v,s,d,i,n,c,h,r,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new kl(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class lh extends oo{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Vc extends H{constructor(e=1,t=1,r=4,s=8,d=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:s,heightSegments:d},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),s=Math.max(3,Math.floor(s)),d=Math.max(1,Math.floor(d));const i=[],n=[],c=[],u=[],h=t/2,m=Math.PI/2*e,v=t,y=2*m+v,S=r*2+d,b=s+1,T=new ce,w=new ce;for(let A=0;A<=S;A++){let I=0,P=0,B=0,L=0;if(A<=r){const W=A/r,J=W*Math.PI/2;P=-h-e*Math.cos(J),B=e*Math.sin(J),L=-e*Math.cos(J),I=W*m}else if(A<=r+d){const W=(A-r)/d;P=-h+W*t,B=e,L=0,I=m+W*v}else{const W=(A-r-d)/r,J=W*Math.PI/2;P=h+e*Math.sin(J),B=e*Math.cos(J),L=e*Math.sin(J),I=m+v+W*m}const z=Math.max(0,Math.min(1,I/y));let Z=0;A===0?Z=.5/s:A===S&&(Z=-.5/s);for(let W=0;W<=s;W++){const J=W/s,ue=J*Math.PI*2,we=Math.sin(ue),ie=Math.cos(ue);w.x=-B*ie,w.y=P,w.z=B*we,n.push(w.x,w.y,w.z),T.set(-B*ie,L,B*we),T.normalize(),c.push(T.x,T.y,T.z),u.push(J+Z,z)}if(A>0){const W=(A-1)*b;for(let J=0;J<s;J++){const ue=W+J,we=W+J+1,ie=A*b+J,ge=A*b+J+1;i.push(ue,we,ie),i.push(we,ge,ie)}}}this.setIndex(i),this.setAttribute("position",new Wt(n,3)),this.setAttribute("normal",new Wt(c,3)),this.setAttribute("uv",new Wt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vc(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Gc extends H{constructor(e=1,t=32,r=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:s},t=Math.max(3,t);const d=[],i=[],n=[],c=[],u=new ce,h=new nn;i.push(0,0,0),n.push(0,0,1),c.push(.5,.5);for(let m=0,v=3;m<=t;m++,v+=3){const y=r+m/t*s;u.x=e*Math.cos(y),u.y=e*Math.sin(y),i.push(u.x,u.y,u.z),n.push(0,0,1),h.x=(i[v]/e+1)/2,h.y=(i[v+1]/e+1)/2,c.push(h.x,h.y)}for(let m=1;m<=t;m++)d.push(m,m+1,0);this.setIndex(d),this.setAttribute("position",new Wt(i,3)),this.setAttribute("normal",new Wt(n,3)),this.setAttribute("uv",new Wt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Xl extends H{constructor(e=1,t=1,r=1,s=32,d=1,i=!1,n=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:s,heightSegments:d,openEnded:i,thetaStart:n,thetaLength:c};const u=this;s=Math.floor(s),d=Math.floor(d);const h=[],m=[],v=[],y=[];let S=0;const b=[],T=r/2;let w=0;A(),i===!1&&(e>0&&I(!0),t>0&&I(!1)),this.setIndex(h),this.setAttribute("position",new Wt(m,3)),this.setAttribute("normal",new Wt(v,3)),this.setAttribute("uv",new Wt(y,2));function A(){const P=new ce,B=new ce;let L=0;const z=(t-e)/r;for(let Z=0;Z<=d;Z++){const W=[],J=Z/d,ue=J*(t-e)+e;for(let we=0;we<=s;we++){const ie=we/s,ge=ie*c+n,Me=Math.sin(ge),de=Math.cos(ge);B.x=ue*Me,B.y=-J*r+T,B.z=ue*de,m.push(B.x,B.y,B.z),P.set(Me,z,de).normalize(),v.push(P.x,P.y,P.z),y.push(ie,1-J),W.push(S++)}b.push(W)}for(let Z=0;Z<s;Z++)for(let W=0;W<d;W++){const J=b[W][Z],ue=b[W+1][Z],we=b[W+1][Z+1],ie=b[W][Z+1];(e>0||W!==0)&&(h.push(J,ue,ie),L+=3),(t>0||W!==d-1)&&(h.push(ue,we,ie),L+=3)}u.addGroup(w,L,0),w+=L}function I(P){const B=S,L=new nn,z=new ce;let Z=0;const W=P===!0?e:t,J=P===!0?1:-1;for(let we=1;we<=s;we++)m.push(0,T*J,0),v.push(0,J,0),y.push(.5,.5),S++;const ue=S;for(let we=0;we<=s;we++){const ge=we/s*c+n,Me=Math.cos(ge),de=Math.sin(ge);z.x=W*de,z.y=T*J,z.z=W*Me,m.push(z.x,z.y,z.z),v.push(0,J,0),L.x=Me*.5+.5,L.y=de*.5*J+.5,y.push(L.x,L.y),S++}for(let we=0;we<s;we++){const ie=B+we,ge=ue+we;P===!0?h.push(ge,ge+1,ie):h.push(ge+1,ge,ie),Z+=3}u.addGroup(w,Z,P===!0?1:2),w+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ju extends Xl{constructor(e=1,t=1,r=32,s=1,d=!1,i=0,n=Math.PI*2){super(0,e,t,r,s,d,i,n),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:s,openEnded:d,thetaStart:i,thetaLength:n}}static fromJSON(e){return new ju(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _u extends H{constructor(e=[],t=[],r=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:s};const d=[],i=[];n(s),u(r),h(),this.setAttribute("position",new Wt(d,3)),this.setAttribute("normal",new Wt(d.slice(),3)),this.setAttribute("uv",new Wt(i,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function n(A){const I=new ce,P=new ce,B=new ce;for(let L=0;L<t.length;L+=3)y(t[L+0],I),y(t[L+1],P),y(t[L+2],B),c(I,P,B,A)}function c(A,I,P,B){const L=B+1,z=[];for(let Z=0;Z<=L;Z++){z[Z]=[];const W=A.clone().lerp(P,Z/L),J=I.clone().lerp(P,Z/L),ue=L-Z;for(let we=0;we<=ue;we++)we===0&&Z===L?z[Z][we]=W:z[Z][we]=W.clone().lerp(J,we/ue)}for(let Z=0;Z<L;Z++)for(let W=0;W<2*(L-Z)-1;W++){const J=Math.floor(W/2);W%2===0?(v(z[Z][J+1]),v(z[Z+1][J]),v(z[Z][J])):(v(z[Z][J+1]),v(z[Z+1][J+1]),v(z[Z+1][J]))}}function u(A){const I=new ce;for(let P=0;P<d.length;P+=3)I.x=d[P+0],I.y=d[P+1],I.z=d[P+2],I.normalize().multiplyScalar(A),d[P+0]=I.x,d[P+1]=I.y,d[P+2]=I.z}function h(){const A=new ce;for(let I=0;I<d.length;I+=3){A.x=d[I+0],A.y=d[I+1],A.z=d[I+2];const P=T(A)/2/Math.PI+.5,B=w(A)/Math.PI+.5;i.push(P,1-B)}S(),m()}function m(){for(let A=0;A<i.length;A+=6){const I=i[A+0],P=i[A+2],B=i[A+4],L=Math.max(I,P,B),z=Math.min(I,P,B);L>.9&&z<.1&&(I<.2&&(i[A+0]+=1),P<.2&&(i[A+2]+=1),B<.2&&(i[A+4]+=1))}}function v(A){d.push(A.x,A.y,A.z)}function y(A,I){const P=A*3;I.x=e[P+0],I.y=e[P+1],I.z=e[P+2]}function S(){const A=new ce,I=new ce,P=new ce,B=new ce,L=new nn,z=new nn,Z=new nn;for(let W=0,J=0;W<d.length;W+=9,J+=6){A.set(d[W+0],d[W+1],d[W+2]),I.set(d[W+3],d[W+4],d[W+5]),P.set(d[W+6],d[W+7],d[W+8]),L.set(i[J+0],i[J+1]),z.set(i[J+2],i[J+3]),Z.set(i[J+4],i[J+5]),B.copy(A).add(I).add(P).divideScalar(3);const ue=T(B);b(L,J+0,A,ue),b(z,J+2,I,ue),b(Z,J+4,P,ue)}}function b(A,I,P,B){B<0&&A.x===1&&(i[I]=A.x-1),P.x===0&&P.z===0&&(i[I]=B/2/Math.PI+.5)}function T(A){return Math.atan2(A.z,-A.x)}function w(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _u(e.vertices,e.indices,e.radius,e.details)}}class Mu extends _u{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,s=1/r,d=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],i=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(d,i,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Mu(e.radius,e.detail)}}const Cd=new ce,Xu=new ce,Eu=new ce,kc=new se;class Td extends H{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),d=Math.cos(ic*t),i=e.getIndex(),n=e.getAttribute("position"),c=i?i.count:n.count,u=[0,0,0],h=["a","b","c"],m=new Array(3),v={},y=[];for(let S=0;S<c;S+=3){i?(u[0]=i.getX(S),u[1]=i.getX(S+1),u[2]=i.getX(S+2)):(u[0]=S,u[1]=S+1,u[2]=S+2);const{a:b,b:T,c:w}=kc;if(b.fromBufferAttribute(n,u[0]),T.fromBufferAttribute(n,u[1]),w.fromBufferAttribute(n,u[2]),kc.getNormal(Eu),m[0]=`${Math.round(b.x*s)},${Math.round(b.y*s)},${Math.round(b.z*s)}`,m[1]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,m[2]=`${Math.round(w.x*s)},${Math.round(w.y*s)},${Math.round(w.z*s)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let A=0;A<3;A++){const I=(A+1)%3,P=m[A],B=m[I],L=kc[h[A]],z=kc[h[I]],Z=`${P}_${B}`,W=`${B}_${P}`;W in v&&v[W]?(Eu.dot(v[W].normal)<=d&&(y.push(L.x,L.y,L.z),y.push(z.x,z.y,z.z)),v[W]=null):Z in v||(v[Z]={index0:u[A],index1:u[I],normal:Eu.clone()})}}for(const S in v)if(v[S]){const{index0:b,index1:T}=v[S];Cd.fromBufferAttribute(n,b),Xu.fromBufferAttribute(n,T),y.push(Cd.x,Cd.y,Cd.z),y.push(Xu.x,Xu.y,Xu.z)}this.setAttribute("position",new Wt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ns{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,s=this.getPoint(0),d=0;t.push(0);for(let i=1;i<=e;i++)r=this.getPoint(i/e),d+=r.distanceTo(s),t.push(d),s=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let s=0;const d=r.length;let i;t?i=t:i=e*r[d-1];let n=0,c=d-1,u;for(;n<=c;)if(s=Math.floor(n+(c-n)/2),u=r[s]-i,u<0)n=s+1;else if(u>0)c=s-1;else{c=s;break}if(s=c,r[s]===i)return s/(d-1);const h=r[s],v=r[s+1]-h,y=(i-h)/v;return(s+y)/(d-1)}getTangent(e,t){let s=e-1e-4,d=e+1e-4;s<0&&(s=0),d>1&&(d=1);const i=this.getPoint(s),n=this.getPoint(d),c=t||(i.isVector2?new nn:new ce);return c.copy(n).sub(i).normalize(),c}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new ce,s=[],d=[],i=[],n=new ce,c=new Ui;for(let y=0;y<=e;y++){const S=y/e;s[y]=this.getTangentAt(S,new ce)}d[0]=new ce,i[0]=new ce;let u=Number.MAX_VALUE;const h=Math.abs(s[0].x),m=Math.abs(s[0].y),v=Math.abs(s[0].z);h<=u&&(u=h,r.set(1,0,0)),m<=u&&(u=m,r.set(0,1,0)),v<=u&&r.set(0,0,1),n.crossVectors(s[0],r).normalize(),d[0].crossVectors(s[0],n),i[0].crossVectors(s[0],d[0]);for(let y=1;y<=e;y++){if(d[y]=d[y-1].clone(),i[y]=i[y-1].clone(),n.crossVectors(s[y-1],s[y]),n.length()>Number.EPSILON){n.normalize();const S=Math.acos(Ri(s[y-1].dot(s[y]),-1,1));d[y].applyMatrix4(c.makeRotationAxis(n,S))}i[y].crossVectors(s[y],d[y])}if(t===!0){let y=Math.acos(Ri(d[0].dot(d[e]),-1,1));y/=e,s[0].dot(n.crossVectors(d[0],d[e]))>0&&(y=-y);for(let S=1;S<=e;S++)d[S].applyMatrix4(c.makeRotationAxis(s[S],y*S)),i[S].crossVectors(s[S],d[S])}return{tangents:s,normals:d,binormals:i}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wd extends Ns{constructor(e=0,t=0,r=1,s=1,d=0,i=Math.PI*2,n=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=s,this.aStartAngle=d,this.aEndAngle=i,this.aClockwise=n,this.aRotation=c}getPoint(e,t=new nn){const r=t,s=Math.PI*2;let d=this.aEndAngle-this.aStartAngle;const i=Math.abs(d)<Number.EPSILON;for(;d<0;)d+=s;for(;d>s;)d-=s;d<Number.EPSILON&&(i?d=0:d=s),this.aClockwise===!0&&!i&&(d===s?d=-s:d=d-s);const n=this.aStartAngle+e*d;let c=this.aX+this.xRadius*Math.cos(n),u=this.aY+this.yRadius*Math.sin(n);if(this.aRotation!==0){const h=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=c-this.aX,y=u-this.aY;c=v*h-y*m+this.aX,u=v*m+y*h+this.aY}return r.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Wc extends wd{constructor(e,t,r,s,d,i){super(e,t,r,r,s,d,i),this.isArcCurve=!0,this.type="ArcCurve"}}function Ad(){let M=0,e=0,t=0,r=0;function s(d,i,n,c){M=d,e=n,t=-3*d+3*i-2*n-c,r=2*d-2*i+n+c}return{initCatmullRom:function(d,i,n,c,u){s(i,n,u*(n-d),u*(c-i))},initNonuniformCatmullRom:function(d,i,n,c,u,h,m){let v=(i-d)/u-(n-d)/(u+h)+(n-i)/h,y=(n-i)/h-(c-i)/(h+m)+(c-n)/m;v*=h,y*=h,s(i,n,v,y)},calc:function(d){const i=d*d,n=i*d;return M+e*d+t*i+r*n}}}const al=new ce,$l=new Ad,jo=new Ad,xc=new Ad;class Ar extends Ns{constructor(e=[],t=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=s}getPoint(e,t=new ce){const r=t,s=this.points,d=s.length,i=(d-(this.closed?0:1))*e;let n=Math.floor(i),c=i-n;this.closed?n+=n>0?0:(Math.floor(Math.abs(n)/d)+1)*d:c===0&&n===d-1&&(n=d-2,c=1);let u,h;this.closed||n>0?u=s[(n-1)%d]:(al.subVectors(s[0],s[1]).add(s[0]),u=al);const m=s[n%d],v=s[(n+1)%d];if(this.closed||n+2<d?h=s[(n+2)%d]:(al.subVectors(s[d-1],s[d-2]).add(s[d-1]),h=al),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let S=Math.pow(u.distanceToSquared(m),y),b=Math.pow(m.distanceToSquared(v),y),T=Math.pow(v.distanceToSquared(h),y);b<1e-4&&(b=1),S<1e-4&&(S=b),T<1e-4&&(T=b),$l.initNonuniformCatmullRom(u.x,m.x,v.x,h.x,S,b,T),jo.initNonuniformCatmullRom(u.y,m.y,v.y,h.y,S,b,T),xc.initNonuniformCatmullRom(u.z,m.z,v.z,h.z,S,b,T)}else this.curveType==="catmullrom"&&($l.initCatmullRom(u.x,m.x,v.x,h.x,this.tension),jo.initCatmullRom(u.y,m.y,v.y,h.y,this.tension),xc.initCatmullRom(u.z,m.z,v.z,h.z,this.tension));return r.set($l.calc(c),jo.calc(c),xc.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(new ce().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Fa(M,e,t,r,s){const d=(r-e)*.5,i=(s-t)*.5,n=M*M,c=M*n;return(2*t-2*r+d+i)*c+(-3*t+3*r-2*d-i)*n+d*M+t}function ts(M,e){const t=1-M;return t*t*e}function Bf(M,e){return 2*(1-M)*M*e}function Rd(M,e){return M*M*e}function cc(M,e,t,r){return ts(M,e)+Bf(M,t)+Rd(M,r)}function Ff(M,e){const t=1-M;return t*t*t*e}function Id(M,e){const t=1-M;return 3*t*t*M*e}function Pd(M,e){return 3*(1-M)*M*M*e}function Xh(M,e){return M*M*M*e}function $u(M,e,t,r,s){return Ff(M,e)+Id(M,t)+Pd(M,r)+Xh(M,s)}class Kl extends Ns{constructor(e=new nn,t=new nn,r=new nn,s=new nn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new nn){const r=t,s=this.v0,d=this.v1,i=this.v2,n=this.v3;return r.set($u(e,s.x,d.x,i.x,n.x),$u(e,s.y,d.y,i.y,n.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Cu extends Ns{constructor(e=new ce,t=new ce,r=new ce,s=new ce){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new ce){const r=t,s=this.v0,d=this.v1,i=this.v2,n=this.v3;return r.set($u(e,s.x,d.x,i.x,n.x),$u(e,s.y,d.y,i.y,n.y),$u(e,s.z,d.z,i.z,n.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Sc extends Ns{constructor(e=new nn,t=new nn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new nn){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new nn){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jc extends Ns{constructor(e=new ce,t=new ce){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ce){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ce){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cf extends Ns{constructor(e=new nn,t=new nn,r=new nn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new nn){const r=t,s=this.v0,d=this.v1,i=this.v2;return r.set(cc(e,s.x,d.x,i.x),cc(e,s.y,d.y,i.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zf extends Ns{constructor(e=new ce,t=new ce,r=new ce){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ce){const r=t,s=this.v0,d=this.v1,i=this.v2;return r.set(cc(e,s.x,d.x,i.x),cc(e,s.y,d.y,i.y),cc(e,s.z,d.z,i.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hf extends Ns{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new nn){const r=t,s=this.points,d=(s.length-1)*e,i=Math.floor(d),n=d-i,c=s[i===0?i:i-1],u=s[i],h=s[i>s.length-2?s.length-1:i+1],m=s[i>s.length-3?s.length-1:i+2];return r.set(Fa(n,c.x,u.x,h.x,m.x),Fa(n,c.y,u.y,h.y,m.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(new nn().fromArray(s))}return this}}var Xo=Object.freeze({__proto__:null,ArcCurve:Wc,CatmullRomCurve3:Ar,CubicBezierCurve:Kl,CubicBezierCurve3:Cu,EllipseCurve:wd,LineCurve:Sc,LineCurve3:jc,QuadraticBezierCurve:cf,QuadraticBezierCurve3:zf,SplineCurve:Hf});class Zf extends Ns{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Xo[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),s=this.getCurveLengths();let d=0;for(;d<s.length;){if(s[d]>=r){const i=s[d]-r,n=this.curves[d],c=n.getLength(),u=c===0?0:1-i/c;return n.getPointAt(u,t)}d++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,s=this.curves.length;r<s;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let s=0,d=this.curves;s<d.length;s++){const i=d[s],n=i.isEllipseCurve?e*2:i.isLineCurve||i.isLineCurve3?1:i.isSplineCurve?e*i.points.length:e,c=i.getPoints(n);for(let u=0;u<c.length;u++){const h=c[u];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const s=e.curves[t];this.curves.push(new Xo[s.type]().fromJSON(s))}return this}}class Ku extends Zf{constructor(e){super(),this.type="Path",this.currentPoint=new nn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Sc(this.currentPoint.clone(),new nn(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,s){const d=new cf(this.currentPoint.clone(),new nn(e,t),new nn(r,s));return this.curves.push(d),this.currentPoint.set(r,s),this}bezierCurveTo(e,t,r,s,d,i){const n=new Kl(this.currentPoint.clone(),new nn(e,t),new nn(r,s),new nn(d,i));return this.curves.push(n),this.currentPoint.set(d,i),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Hf(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,s,d,i){const n=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+n,t+c,r,s,d,i),this}absarc(e,t,r,s,d,i){return this.absellipse(e,t,r,r,s,d,i),this}ellipse(e,t,r,s,d,i,n,c){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,r,s,d,i,n,c),this}absellipse(e,t,r,s,d,i,n,c){const u=new wd(e,t,r,s,d,i,n,c);if(this.curves.length>0){const m=u.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class pl extends Ku{constructor(e){super(e),this.uuid=us(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,s=this.holes.length;r<s;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const s=e.holes[t];this.holes.push(new Ku().fromJSON(s))}return this}}function bc(M,e,t=2){const r=e&&e.length,s=r?e[0]*t:M.length;let d=uf(M,0,s,t,!0);const i=[];if(!d||d.next===d.prev)return i;let n,c,u;if(r&&(d=Fo(M,e,d,t)),M.length>80*t){n=1/0,c=1/0;let h=-1/0,m=-1/0;for(let v=t;v<s;v+=t){const y=M[v],S=M[v+1];y<n&&(n=y),S<c&&(c=S),y>h&&(h=y),S>m&&(m=S)}u=Math.max(h-n,m-c),u=u!==0?32767/u:0}return Nd(d,i,t,n,c,u,0),i}function uf(M,e,t,r,s){let d;if(s===ml(M,e,t,r)>0)for(let i=e;i<t;i+=r)d=eo(i/r|0,M[i],M[i+1],d);else for(let i=t-r;i>=e;i-=r)d=eo(i/r|0,M[i],M[i+1],d);return d&&Xc(d,d.next)&&(Ms(d),d=d.next),d}function Yu(M,e){if(!M)return M;e||(e=M);let t=M,r;do if(r=!1,!t.steiner&&(Xc(t,t.next)||Qa(t.prev,t,t.next)===0)){if(Ms(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Nd(M,e,t,r,s,d,i){if(!M)return;!i&&d&&ns(M,r,s,d);let n=M;for(;M.prev!==M.next;){const c=M.prev,u=M.next;if(d?Eh(M,r,s,d):Bo(M)){e.push(c.i,M.i,u.i),Ms(M),M=u.next,n=u.next;continue}if(M=u,M===n){i?i===1?(M=Tu(Yu(M),e),Nd(M,e,t,r,s,d,2)):i===2&&_c(M,e,t,r,s,d):Nd(Yu(M),e,t,r,s,d,1);break}}}function Bo(M){const e=M.prev,t=M,r=M.next;if(Qa(e,t,r)>=0)return!1;const s=e.x,d=t.x,i=r.x,n=e.y,c=t.y,u=r.y,h=Math.min(s,d,i),m=Math.min(n,c,u),v=Math.max(s,d,i),y=Math.max(n,c,u);let S=r.next;for(;S!==e;){if(S.x>=h&&S.x<=v&&S.y>=m&&S.y<=y&&Rl(s,n,d,c,i,u,S.x,S.y)&&Qa(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function Eh(M,e,t,r){const s=M.prev,d=M,i=M.next;if(Qa(s,d,i)>=0)return!1;const n=s.x,c=d.x,u=i.x,h=s.y,m=d.y,v=i.y,y=Math.min(n,c,u),S=Math.min(h,m,v),b=Math.max(n,c,u),T=Math.max(h,m,v),w=Al(y,S,e,t,r),A=Al(b,T,e,t,r);let I=M.prevZ,P=M.nextZ;for(;I&&I.z>=w&&P&&P.z<=A;){if(I.x>=y&&I.x<=b&&I.y>=S&&I.y<=T&&I!==s&&I!==i&&Rl(n,h,c,m,u,v,I.x,I.y)&&Qa(I.prev,I,I.next)>=0||(I=I.prevZ,P.x>=y&&P.x<=b&&P.y>=S&&P.y<=T&&P!==s&&P!==i&&Rl(n,h,c,m,u,v,P.x,P.y)&&Qa(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;I&&I.z>=w;){if(I.x>=y&&I.x<=b&&I.y>=S&&I.y<=T&&I!==s&&I!==i&&Rl(n,h,c,m,u,v,I.x,I.y)&&Qa(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;P&&P.z<=A;){if(P.x>=y&&P.x<=b&&P.y>=S&&P.y<=T&&P!==s&&P!==i&&Rl(n,h,c,m,u,v,P.x,P.y)&&Qa(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function Tu(M,e){let t=M;do{const r=t.prev,s=t.next.next;!Xc(r,s)&&Yl(r,t,t.next,s)&&La(r,s)&&La(s,r)&&(e.push(r.i,t.i,s.i),Ms(t),Ms(t.next),t=M=s),t=t.next}while(t!==M);return Yu(t)}function _c(M,e,t,r,s,d){let i=M;do{let n=i.next.next;for(;n!==i.prev;){if(i.i!==n.i&&Vf(i,n)){let c=ra(i,n);i=Yu(i,i.next),c=Yu(c,c.next),Nd(i,e,t,r,s,d,0),Nd(c,e,t,r,s,d,0);return}n=n.next}i=i.next}while(i!==M)}function Fo(M,e,t,r){const s=[];for(let d=0,i=e.length;d<i;d++){const n=e[d]*r,c=d<i-1?e[d+1]*r:M.length,u=uf(M,n,c,r,!1);u===u.next&&(u.steiner=!0),s.push(qu(u))}s.sort(ch);for(let d=0;d<s.length;d++)t=Ch(s[d],t);return t}function ch(M,e){let t=M.x-e.x;if(t===0&&(t=M.y-e.y,t===0)){const r=(M.next.y-M.y)/(M.next.x-M.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=r-s}return t}function Ch(M,e){const t=ps(M,e);if(!t)return e;const r=ra(t,M);return Yu(r,r.next),Yu(t,t.next)}function ps(M,e){let t=e;const r=M.x,s=M.y;let d=-1/0,i;if(Xc(M,t))return t;do{if(Xc(M,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const m=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=r&&m>d&&(d=m,i=t.x<t.next.x?t:t.next,m===r))return i}t=t.next}while(t!==e);if(!i)return null;const n=i,c=i.x,u=i.y;let h=1/0;t=i;do{if(r>=t.x&&t.x>=c&&r!==t.x&&Th(s<u?r:d,s,c,u,s<u?d:r,s,t.x,t.y)){const m=Math.abs(s-t.y)/(r-t.x);La(t,M)&&(m<h||m===h&&(t.x>i.x||t.x===i.x&&$h(i,t)))&&(i=t,h=m)}t=t.next}while(t!==n);return i}function $h(M,e){return Qa(M.prev,M,e.prev)<0&&Qa(e.next,M,M.next)<0}function ns(M,e,t,r){let s=M;do s.z===0&&(s.z=Al(s.x,s.y,e,t,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==M);s.prevZ.nextZ=null,s.prevZ=null,wl(s)}function wl(M){let e,t=1;do{let r=M,s;M=null;let d=null;for(e=0;r;){e++;let i=r,n=0;for(let u=0;u<t&&(n++,i=i.nextZ,!!i);u++);let c=t;for(;n>0||c>0&&i;)n!==0&&(c===0||!i||r.z<=i.z)?(s=r,r=r.nextZ,n--):(s=i,i=i.nextZ,c--),d?d.nextZ=s:M=s,s.prevZ=d,d=s;r=i}d.nextZ=null,t*=2}while(e>1);return M}function Al(M,e,t,r,s){return M=(M-t)*s|0,e=(e-r)*s|0,M=(M|M<<8)&16711935,M=(M|M<<4)&252645135,M=(M|M<<2)&858993459,M=(M|M<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,M|e<<1}function qu(M){let e=M,t=M;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==M);return t}function Th(M,e,t,r,s,d,i,n){return(s-i)*(e-n)>=(M-i)*(d-n)&&(M-i)*(r-n)>=(t-i)*(e-n)&&(t-i)*(d-n)>=(s-i)*(r-n)}function Rl(M,e,t,r,s,d,i,n){return!(M===i&&e===n)&&Th(M,e,t,r,s,d,i,n)}function Vf(M,e){return M.next.i!==e.i&&M.prev.i!==e.i&&!Wa(M,e)&&(La(M,e)&&La(e,M)&&Xr(M,e)&&(Qa(M.prev,M,e.prev)||Qa(M,e.prev,e))||Xc(M,e)&&Qa(M.prev,M,M.next)>0&&Qa(e.prev,e,e.next)>0)}function Qa(M,e,t){return(e.y-M.y)*(t.x-e.x)-(e.x-M.x)*(t.y-e.y)}function Xc(M,e){return M.x===e.x&&M.y===e.y}function Yl(M,e,t,r){const s=$c(Qa(M,e,t)),d=$c(Qa(M,e,r)),i=$c(Qa(t,r,M)),n=$c(Qa(t,r,e));return!!(s!==d&&i!==n||s===0&&wu(M,t,e)||d===0&&wu(M,r,e)||i===0&&wu(t,M,r)||n===0&&wu(t,e,r))}function wu(M,e,t){return e.x<=Math.max(M.x,t.x)&&e.x>=Math.min(M.x,t.x)&&e.y<=Math.max(M.y,t.y)&&e.y>=Math.min(M.y,t.y)}function $c(M){return M>0?1:M<0?-1:0}function Wa(M,e){let t=M;do{if(t.i!==M.i&&t.next.i!==M.i&&t.i!==e.i&&t.next.i!==e.i&&Yl(t,t.next,M,e))return!0;t=t.next}while(t!==M);return!1}function La(M,e){return Qa(M.prev,M,M.next)<0?Qa(M,e,M.next)>=0&&Qa(M,M.prev,e)>=0:Qa(M,e,M.prev)<0||Qa(M,M.next,e)<0}function Xr(M,e){let t=M,r=!1;const s=(M.x+e.x)/2,d=(M.y+e.y)/2;do t.y>d!=t.next.y>d&&t.next.y!==t.y&&s<(t.next.x-t.x)*(d-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==M);return r}function ra(M,e){const t=ql(M.i,M.x,M.y),r=ql(e.i,e.x,e.y),s=M.next,d=e.prev;return M.next=e,e.prev=M,t.next=s,s.prev=t,r.next=t,t.prev=r,d.next=r,r.prev=d,r}function eo(M,e,t,r){const s=ql(M,e,t);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function Ms(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function ql(M,e,t){return{i:M,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ml(M,e,t,r){let s=0;for(let d=e,i=t-r;d<t;d+=r)s+=(M[i]-M[d])*(M[d+1]+M[i+1]),i=d;return s}class Gf{static triangulate(e,t,r=2){return bc(e,t,r)}}class is{static area(e){const t=e.length;let r=0;for(let s=t-1,d=0;d<t;s=d++)r+=e[s].x*e[d].y-e[d].x*e[s].y;return r*.5}static isClockWise(e){return is.area(e)<0}static triangulateShape(e,t){const r=[],s=[],d=[];Mo(e),Kc(r,e);let i=e.length;t.forEach(Mo);for(let c=0;c<t.length;c++)s.push(i),i+=t[c].length,Kc(r,t[c]);const n=Gf.triangulate(r,s);for(let c=0;c<n.length;c+=3)d.push(n.slice(c,c+3));return d}}function Mo(M){const e=M.length;e>2&&M[e-1].equals(M[0])&&M.pop()}function Kc(M,e){for(let t=0;t<e.length;t++)M.push(e[t].x),M.push(e[t].y)}class Mc extends H{constructor(e=new pl([new nn(.5,.5),new nn(-.5,.5),new nn(-.5,-.5),new nn(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,s=[],d=[];for(let n=0,c=e.length;n<c;n++){const u=e[n];i(u)}this.setAttribute("position",new Wt(s,3)),this.setAttribute("uv",new Wt(d,2)),this.computeVertexNormals();function i(n){const c=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:y-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:uh;let I,P=!1,B,L,z,Z;w&&(I=w.getSpacedPoints(h),P=!0,v=!1,B=w.computeFrenetFrames(h,!1),L=new ce,z=new ce,Z=new ce),v||(T=0,y=0,S=0,b=0);const W=n.extractPoints(u);let J=W.shape;const ue=W.holes;if(!is.isClockWise(J)){J=J.reverse();for(let be=0,Le=ue.length;be<Le;be++){const Je=ue[be];is.isClockWise(Je)&&(ue[be]=Je.reverse())}}function ie(be){const Je=10000000000000001e-36;let Ke=be[0];for(let Fe=1;Fe<=be.length;Fe++){const Ct=Fe%be.length,ke=be[Ct],Bt=ke.x-Ke.x,bn=ke.y-Ke.y,Qt=Bt*Bt+bn*bn,ht=Math.max(Math.abs(ke.x),Math.abs(ke.y),Math.abs(Ke.x),Math.abs(Ke.y)),Ft=Je*ht*ht;if(Qt<=Ft){be.splice(Ct,1),Fe--;continue}Ke=ke}}ie(J),ue.forEach(ie);const ge=ue.length,Me=J;for(let be=0;be<ge;be++){const Le=ue[be];J=J.concat(Le)}function de(be,Le,Je){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),be.clone().addScaledVector(Le,Je)}const re=J.length;function ve(be,Le,Je){let Ke,Fe,Ct;const ke=be.x-Le.x,Bt=be.y-Le.y,bn=Je.x-be.x,Qt=Je.y-be.y,ht=ke*ke+Bt*Bt,Ft=ke*Qt-Bt*bn;if(Math.abs(Ft)>Number.EPSILON){const In=Math.sqrt(ht),vt=Math.sqrt(bn*bn+Qt*Qt),On=Le.x-Bt/In,_n=Le.y+ke/In,Wi=Je.x-Qt/vt,ji=Je.y+bn/vt,za=((Wi-On)*Qt-(ji-_n)*bn)/(ke*Qt-Bt*bn);Ke=On+ke*za-be.x,Fe=_n+Bt*za-be.y;const ea=Ke*Ke+Fe*Fe;if(ea<=2)return new nn(Ke,Fe);Ct=Math.sqrt(ea/2)}else{let In=!1;ke>Number.EPSILON?bn>Number.EPSILON&&(In=!0):ke<-Number.EPSILON?bn<-Number.EPSILON&&(In=!0):Math.sign(Bt)===Math.sign(Qt)&&(In=!0),In?(Ke=-Bt,Fe=ke,Ct=Math.sqrt(ht)):(Ke=ke,Fe=Bt,Ct=Math.sqrt(ht/2))}return new nn(Ke/Ct,Fe/Ct)}const Oe=[];for(let be=0,Le=Me.length,Je=Le-1,Ke=be+1;be<Le;be++,Je++,Ke++)Je===Le&&(Je=0),Ke===Le&&(Ke=0),Oe[be]=ve(Me[be],Me[Je],Me[Ke]);const le=[];let Q,me=Oe.concat();for(let be=0,Le=ge;be<Le;be++){const Je=ue[be];Q=[];for(let Ke=0,Fe=Je.length,Ct=Fe-1,ke=Ke+1;Ke<Fe;Ke++,Ct++,ke++)Ct===Fe&&(Ct=0),ke===Fe&&(ke=0),Q[Ke]=ve(Je[Ke],Je[Ct],Je[ke]);le.push(Q),me=me.concat(Q)}let Ce;if(T===0)Ce=is.triangulateShape(Me,ue);else{const be=[],Le=[];for(let Je=0;Je<T;Je++){const Ke=Je/T,Fe=y*Math.cos(Ke*Math.PI/2),Ct=S*Math.sin(Ke*Math.PI/2)+b;for(let ke=0,Bt=Me.length;ke<Bt;ke++){const bn=de(Me[ke],Oe[ke],Ct);at(bn.x,bn.y,-Fe),Ke===0&&be.push(bn)}for(let ke=0,Bt=ge;ke<Bt;ke++){const bn=ue[ke];Q=le[ke];const Qt=[];for(let ht=0,Ft=bn.length;ht<Ft;ht++){const In=de(bn[ht],Q[ht],Ct);at(In.x,In.y,-Fe),Ke===0&&Qt.push(In)}Ke===0&&Le.push(Qt)}}Ce=is.triangulateShape(be,Le)}const tt=Ce.length,$e=S+b;for(let be=0;be<re;be++){const Le=v?de(J[be],me[be],$e):J[be];P?(z.copy(B.normals[0]).multiplyScalar(Le.x),L.copy(B.binormals[0]).multiplyScalar(Le.y),Z.copy(I[0]).add(z).add(L),at(Z.x,Z.y,Z.z)):at(Le.x,Le.y,0)}for(let be=1;be<=h;be++)for(let Le=0;Le<re;Le++){const Je=v?de(J[Le],me[Le],$e):J[Le];P?(z.copy(B.normals[be]).multiplyScalar(Je.x),L.copy(B.binormals[be]).multiplyScalar(Je.y),Z.copy(I[be]).add(z).add(L),at(Z.x,Z.y,Z.z)):at(Je.x,Je.y,m/h*be)}for(let be=T-1;be>=0;be--){const Le=be/T,Je=y*Math.cos(Le*Math.PI/2),Ke=S*Math.sin(Le*Math.PI/2)+b;for(let Fe=0,Ct=Me.length;Fe<Ct;Fe++){const ke=de(Me[Fe],Oe[Fe],Ke);at(ke.x,ke.y,m+Je)}for(let Fe=0,Ct=ue.length;Fe<Ct;Fe++){const ke=ue[Fe];Q=le[Fe];for(let Bt=0,bn=ke.length;Bt<bn;Bt++){const Qt=de(ke[Bt],Q[Bt],Ke);P?at(Qt.x,Qt.y+I[h-1].y,I[h-1].x+Je):at(Qt.x,Qt.y,m+Je)}}}Qe(),ft();function Qe(){const be=s.length/3;if(v){let Le=0,Je=re*Le;for(let Ke=0;Ke<tt;Ke++){const Fe=Ce[Ke];De(Fe[2]+Je,Fe[1]+Je,Fe[0]+Je)}Le=h+T*2,Je=re*Le;for(let Ke=0;Ke<tt;Ke++){const Fe=Ce[Ke];De(Fe[0]+Je,Fe[1]+Je,Fe[2]+Je)}}else{for(let Le=0;Le<tt;Le++){const Je=Ce[Le];De(Je[2],Je[1],Je[0])}for(let Le=0;Le<tt;Le++){const Je=Ce[Le];De(Je[0]+re*h,Je[1]+re*h,Je[2]+re*h)}}r.addGroup(be,s.length/3-be,0)}function ft(){const be=s.length/3;let Le=0;Dt(Me,Le),Le+=Me.length;for(let Je=0,Ke=ue.length;Je<Ke;Je++){const Fe=ue[Je];Dt(Fe,Le),Le+=Fe.length}r.addGroup(be,s.length/3-be,1)}function Dt(be,Le){let Je=be.length;for(;--Je>=0;){const Ke=Je;let Fe=Je-1;Fe<0&&(Fe=be.length-1);for(let Ct=0,ke=h+T*2;Ct<ke;Ct++){const Bt=re*Ct,bn=re*(Ct+1),Qt=Le+Ke+Bt,ht=Le+Fe+Bt,Ft=Le+Fe+bn,In=Le+Ke+bn;je(Qt,ht,Ft,In)}}}function at(be,Le,Je){c.push(be),c.push(Le),c.push(Je)}function De(be,Le,Je){et(be),et(Le),et(Je);const Ke=s.length/3,Fe=A.generateTopUV(r,s,Ke-3,Ke-2,Ke-1);Re(Fe[0]),Re(Fe[1]),Re(Fe[2])}function je(be,Le,Je,Ke){et(be),et(Le),et(Ke),et(Le),et(Je),et(Ke);const Fe=s.length/3,Ct=A.generateSideWallUV(r,s,Fe-6,Fe-3,Fe-2,Fe-1);Re(Ct[0]),Re(Ct[1]),Re(Ct[3]),Re(Ct[1]),Re(Ct[2]),Re(Ct[3])}function et(be){s.push(c[be*3+0]),s.push(c[be*3+1]),s.push(c[be*3+2])}function Re(be){d.push(be.x),d.push(be.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return Il(t,r,e)}static fromJSON(e,t){const r=[];for(let d=0,i=e.shapes.length;d<i;d++){const n=t[e.shapes[d]];r.push(n)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new Xo[s.type]().fromJSON(s)),new Mc(r,e.options)}}const uh={generateTopUV:function(M,e,t,r,s){const d=e[t*3],i=e[t*3+1],n=e[r*3],c=e[r*3+1],u=e[s*3],h=e[s*3+1];return[new nn(d,i),new nn(n,c),new nn(u,h)]},generateSideWallUV:function(M,e,t,r,s,d){const i=e[t*3],n=e[t*3+1],c=e[t*3+2],u=e[r*3],h=e[r*3+1],m=e[r*3+2],v=e[s*3],y=e[s*3+1],S=e[s*3+2],b=e[d*3],T=e[d*3+1],w=e[d*3+2];return Math.abs(n-h)<Math.abs(i-u)?[new nn(i,1-c),new nn(u,1-m),new nn(v,1-S),new nn(b,1-w)]:[new nn(n,1-c),new nn(h,1-m),new nn(y,1-S),new nn(T,1-w)]}};function Il(M,e,t){if(t.shapes=[],Array.isArray(M))for(let r=0,s=M.length;r<s;r++){const d=M[r];t.shapes.push(d.uuid)}else t.shapes.push(M.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class ms extends _u{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],d=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,d,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ms(e.radius,e.detail)}}class Yc extends H{constructor(e=[new nn(0,-.5),new nn(.5,0),new nn(0,.5)],t=12,r=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:s},t=Math.floor(t),s=Ri(s,0,Math.PI*2);const d=[],i=[],n=[],c=[],u=[],h=1/t,m=new ce,v=new nn,y=new ce,S=new ce,b=new ce;let T=0,w=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:T=e[A+1].x-e[A].x,w=e[A+1].y-e[A].y,y.x=w*1,y.y=-T,y.z=w*0,b.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(b.x,b.y,b.z);break;default:T=e[A+1].x-e[A].x,w=e[A+1].y-e[A].y,y.x=w*1,y.y=-T,y.z=w*0,S.copy(y),y.x+=b.x,y.y+=b.y,y.z+=b.z,y.normalize(),c.push(y.x,y.y,y.z),b.copy(S)}for(let A=0;A<=t;A++){const I=r+A*h*s,P=Math.sin(I),B=Math.cos(I);for(let L=0;L<=e.length-1;L++){m.x=e[L].x*P,m.y=e[L].y,m.z=e[L].x*B,i.push(m.x,m.y,m.z),v.x=A/t,v.y=L/(e.length-1),n.push(v.x,v.y);const z=c[3*L+0]*P,Z=c[3*L+1],W=c[3*L+0]*B;u.push(z,Z,W)}}for(let A=0;A<t;A++)for(let I=0;I<e.length-1;I++){const P=I+A*e.length,B=P,L=P+e.length,z=P+e.length+1,Z=P+1;d.push(B,L,Z),d.push(z,Z,L)}this.setIndex(d),this.setAttribute("position",new Wt(i,3)),this.setAttribute("uv",new Wt(n,2)),this.setAttribute("normal",new Wt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yc(e.points,e.segments,e.phiStart,e.phiLength)}}class js extends _u{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new js(e.radius,e.detail)}}class qc extends H{constructor(e=1,t=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:s};const d=e/2,i=t/2,n=Math.floor(r),c=Math.floor(s),u=n+1,h=c+1,m=e/n,v=t/c,y=[],S=[],b=[],T=[];for(let w=0;w<h;w++){const A=w*v-i;for(let I=0;I<u;I++){const P=I*m-d;S.push(P,-A,0),b.push(0,0,1),T.push(I/n),T.push(1-w/c)}}for(let w=0;w<c;w++)for(let A=0;A<n;A++){const I=A+u*w,P=A+u*(w+1),B=A+1+u*(w+1),L=A+1+u*w;y.push(I,P,L),y.push(P,B,L)}this.setIndex(y),this.setAttribute("position",new Wt(S,3)),this.setAttribute("normal",new Wt(b,3)),this.setAttribute("uv",new Wt(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qc(e.width,e.height,e.widthSegments,e.heightSegments)}}class Od extends H{constructor(e=.5,t=1,r=32,s=1,d=0,i=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:s,thetaStart:d,thetaLength:i},r=Math.max(3,r),s=Math.max(1,s);const n=[],c=[],u=[],h=[];let m=e;const v=(t-e)/s,y=new ce,S=new nn;for(let b=0;b<=s;b++){for(let T=0;T<=r;T++){const w=d+T/r*i;y.x=m*Math.cos(w),y.y=m*Math.sin(w),c.push(y.x,y.y,y.z),u.push(0,0,1),S.x=(y.x/t+1)/2,S.y=(y.y/t+1)/2,h.push(S.x,S.y)}m+=v}for(let b=0;b<s;b++){const T=b*(r+1);for(let w=0;w<r;w++){const A=w+T,I=A,P=A+r+1,B=A+r+2,L=A+1;n.push(I,P,L),n.push(P,B,L)}}this.setIndex(n),this.setAttribute("position",new Wt(c,3)),this.setAttribute("normal",new Wt(u,3)),this.setAttribute("uv",new Wt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Od(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Jl extends H{constructor(e=new pl([new nn(0,.5),new nn(-.5,-.5),new nn(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],s=[],d=[],i=[];let n=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(n,c,h),n+=c,c=0;this.setIndex(r),this.setAttribute("position",new Wt(s,3)),this.setAttribute("normal",new Wt(d,3)),this.setAttribute("uv",new Wt(i,2));function u(h){const m=s.length/3,v=h.extractPoints(t);let y=v.shape;const S=v.holes;is.isClockWise(y)===!1&&(y=y.reverse());for(let T=0,w=S.length;T<w;T++){const A=S[T];is.isClockWise(A)===!0&&(S[T]=A.reverse())}const b=is.triangulateShape(y,S);for(let T=0,w=S.length;T<w;T++){const A=S[T];y=y.concat(A)}for(let T=0,w=y.length;T<w;T++){const A=y[T];s.push(A.x,A.y,0),d.push(0,0,1),i.push(A.x,A.y)}for(let T=0,w=b.length;T<w;T++){const A=b[T],I=A[0]+m,P=A[1]+m,B=A[2]+m;r.push(I,P,B),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return kf(t,e)}static fromJSON(e,t){const r=[];for(let s=0,d=e.shapes.length;s<d;s++){const i=t[e.shapes[s]];r.push(i)}return new Jl(r,e.curveSegments)}}function kf(M,e){if(e.shapes=[],Array.isArray(M))for(let t=0,r=M.length;t<r;t++){const s=M[t];e.shapes.push(s.uuid)}else e.shapes.push(M.uuid);return e}class Ql extends H{constructor(e=1,t=32,r=16,s=0,d=Math.PI*2,i=0,n=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:s,phiLength:d,thetaStart:i,thetaLength:n},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const c=Math.min(i+n,Math.PI);let u=0;const h=[],m=new ce,v=new ce,y=[],S=[],b=[],T=[];for(let w=0;w<=r;w++){const A=[],I=w/r;let P=0;w===0&&i===0?P=.5/t:w===r&&c===Math.PI&&(P=-.5/t);for(let B=0;B<=t;B++){const L=B/t;m.x=-e*Math.cos(s+L*d)*Math.sin(i+I*n),m.y=e*Math.cos(i+I*n),m.z=e*Math.sin(s+L*d)*Math.sin(i+I*n),S.push(m.x,m.y,m.z),v.copy(m).normalize(),b.push(v.x,v.y,v.z),T.push(L+P,1-I),A.push(u++)}h.push(A)}for(let w=0;w<r;w++)for(let A=0;A<t;A++){const I=h[w][A+1],P=h[w][A],B=h[w+1][A],L=h[w+1][A+1];(w!==0||i>0)&&y.push(I,P,L),(w!==r-1||c<Math.PI)&&y.push(P,B,L)}this.setIndex(y),this.setAttribute("position",new Wt(S,3)),this.setAttribute("normal",new Wt(b,3)),this.setAttribute("uv",new Wt(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ql(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ju extends _u{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ju(e.radius,e.detail)}}class Ec extends H{constructor(e=1,t=.4,r=12,s=48,d=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:s,arc:d},r=Math.floor(r),s=Math.floor(s);const i=[],n=[],c=[],u=[],h=new ce,m=new ce,v=new ce;for(let y=0;y<=r;y++)for(let S=0;S<=s;S++){const b=S/s*d,T=y/r*Math.PI*2;m.x=(e+t*Math.cos(T))*Math.cos(b),m.y=(e+t*Math.cos(T))*Math.sin(b),m.z=t*Math.sin(T),n.push(m.x,m.y,m.z),h.x=e*Math.cos(b),h.y=e*Math.sin(b),v.subVectors(m,h).normalize(),c.push(v.x,v.y,v.z),u.push(S/s),u.push(y/r)}for(let y=1;y<=r;y++)for(let S=1;S<=s;S++){const b=(s+1)*y+S-1,T=(s+1)*(y-1)+S-1,w=(s+1)*(y-1)+S,A=(s+1)*y+S;i.push(b,T,A),i.push(T,w,A)}this.setIndex(i),this.setAttribute("position",new Wt(n,3)),this.setAttribute("normal",new Wt(c,3)),this.setAttribute("uv",new Wt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ec(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Au extends H{constructor(e=1,t=.4,r=64,s=8,d=2,i=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:s,p:d,q:i},r=Math.floor(r),s=Math.floor(s);const n=[],c=[],u=[],h=[],m=new ce,v=new ce,y=new ce,S=new ce,b=new ce,T=new ce,w=new ce;for(let I=0;I<=r;++I){const P=I/r*d*Math.PI*2;A(P,d,i,e,y),A(P+.01,d,i,e,S),T.subVectors(S,y),w.addVectors(S,y),b.crossVectors(T,w),w.crossVectors(b,T),b.normalize(),w.normalize();for(let B=0;B<=s;++B){const L=B/s*Math.PI*2,z=-t*Math.cos(L),Z=t*Math.sin(L);m.x=y.x+(z*w.x+Z*b.x),m.y=y.y+(z*w.y+Z*b.y),m.z=y.z+(z*w.z+Z*b.z),c.push(m.x,m.y,m.z),v.subVectors(m,y).normalize(),u.push(v.x,v.y,v.z),h.push(I/r),h.push(B/s)}}for(let I=1;I<=r;I++)for(let P=1;P<=s;P++){const B=(s+1)*(I-1)+(P-1),L=(s+1)*I+(P-1),z=(s+1)*I+P,Z=(s+1)*(I-1)+P;n.push(B,L,Z),n.push(L,z,Z)}this.setIndex(n),this.setAttribute("position",new Wt(c,3)),this.setAttribute("normal",new Wt(u,3)),this.setAttribute("uv",new Wt(h,2));function A(I,P,B,L,z){const Z=Math.cos(I),W=Math.sin(I),J=B/P*I,ue=Math.cos(J);z.x=L*(2+ue)*.5*Z,z.y=L*(2+ue)*W*.5,z.z=L*Math.sin(J)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Au(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Dd extends H{constructor(e=new zf(new ce(-1,-1,0),new ce(-1,1,0),new ce(1,1,0)),t=64,r=1,s=8,d=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:s,closed:d};const i=e.computeFrenetFrames(t,d);this.tangents=i.tangents,this.normals=i.normals,this.binormals=i.binormals;const n=new ce,c=new ce,u=new nn;let h=new ce;const m=[],v=[],y=[],S=[];b(),this.setIndex(S),this.setAttribute("position",new Wt(m,3)),this.setAttribute("normal",new Wt(v,3)),this.setAttribute("uv",new Wt(y,2));function b(){for(let I=0;I<t;I++)T(I);T(d===!1?t:0),A(),w()}function T(I){h=e.getPointAt(I/t,h);const P=i.normals[I],B=i.binormals[I];for(let L=0;L<=s;L++){const z=L/s*Math.PI*2,Z=Math.sin(z),W=-Math.cos(z);c.x=W*P.x+Z*B.x,c.y=W*P.y+Z*B.y,c.z=W*P.z+Z*B.z,c.normalize(),v.push(c.x,c.y,c.z),n.x=h.x+r*c.x,n.y=h.y+r*c.y,n.z=h.z+r*c.z,m.push(n.x,n.y,n.z)}}function w(){for(let I=1;I<=t;I++)for(let P=1;P<=s;P++){const B=(s+1)*(I-1)+(P-1),L=(s+1)*I+(P-1),z=(s+1)*I+P,Z=(s+1)*(I-1)+P;S.push(B,L,Z),S.push(L,z,Z)}}function A(){for(let I=0;I<=t;I++)for(let P=0;P<=s;P++)u.x=I/t,u.y=P/s,y.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Dd(new Xo[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Wf extends H{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,s=new ce,d=new ce;if(e.index!==null){const i=e.attributes.position,n=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:n.count,materialIndex:0}]);for(let u=0,h=c.length;u<h;++u){const m=c[u],v=m.start,y=m.count;for(let S=v,b=v+y;S<b;S+=3)for(let T=0;T<3;T++){const w=n.getX(S+T),A=n.getX(S+(T+1)%3);s.fromBufferAttribute(i,w),d.fromBufferAttribute(i,A),Ld(s,d,r)===!0&&(t.push(s.x,s.y,s.z),t.push(d.x,d.y,d.z))}}}else{const i=e.attributes.position;for(let n=0,c=i.count/3;n<c;n++)for(let u=0;u<3;u++){const h=3*n+u,m=3*n+(u+1)%3;s.fromBufferAttribute(i,h),d.fromBufferAttribute(i,m),Ld(s,d,r)===!0&&(t.push(s.x,s.y,s.z),t.push(d.x,d.y,d.z))}}this.setAttribute("position",new Wt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Ld(M,e,t){const r=`${M.x},${M.y},${M.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${M.x},${M.y},${M.z}`;return t.has(r)===!0||t.has(s)===!0?!1:(t.add(r),t.add(s),!0)}var jf=Object.freeze({__proto__:null,BoxGeometry:_e,CapsuleGeometry:Vc,CircleGeometry:Gc,ConeGeometry:ju,CylinderGeometry:Xl,DodecahedronGeometry:Mu,EdgesGeometry:Td,ExtrudeGeometry:Mc,IcosahedronGeometry:ms,LatheGeometry:Yc,OctahedronGeometry:js,PlaneGeometry:qc,PolyhedronGeometry:_u,RingGeometry:Od,ShapeGeometry:Jl,SphereGeometry:Ql,TetrahedronGeometry:Ju,TorusGeometry:Ec,TorusKnotGeometry:Au,TubeGeometry:Dd,WireframeGeometry:Wf});class a extends vn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ot(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class l extends pa{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class f extends vn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ot(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tr,this.normalScale=new nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class x extends f{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new nn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ri(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ot(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ot(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ot(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class E extends vn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ot(16777215),this.specular=new ot(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tr,this.normalScale=new nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bo,this.combine=Yi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class N extends vn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ot(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tr,this.normalScale=new nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class K extends vn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tr,this.normalScale=new nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class pe extends vn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tr,this.normalScale=new nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bo,this.combine=Yi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xe extends vn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Xn,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ot extends vn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Sn extends vn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ot(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tr,this.normalScale=new nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kn extends Qo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Hn(M,e){return!M||M.constructor===e?M:typeof e.BYTES_PER_ELEMENT=="number"?new e(M):Array.prototype.slice.call(M)}function pr(M){return ArrayBuffer.isView(M)&&!(M instanceof DataView)}function Pl(M){function e(s,d){return M[s]-M[d]}const t=M.length,r=new Array(t);for(let s=0;s!==t;++s)r[s]=s;return r.sort(e),r}function Qu(M,e,t){const r=M.length,s=new M.constructor(r);for(let d=0,i=0;i!==r;++d){const n=t[d]*e;for(let c=0;c!==e;++c)s[i++]=M[n+c]}return s}function Jc(M,e,t,r){let s=1,d=M[0];for(;d!==void 0&&d[r]===void 0;)d=M[s++];if(d===void 0)return;let i=d[r];if(i!==void 0)if(Array.isArray(i))do i=d[r],i!==void 0&&(e.push(d.time),t.push(...i)),d=M[s++];while(d!==void 0);else if(i.toArray!==void 0)do i=d[r],i!==void 0&&(e.push(d.time),i.toArray(t,t.length)),d=M[s++];while(d!==void 0);else do i=d[r],i!==void 0&&(e.push(d.time),t.push(i)),d=M[s++];while(d!==void 0)}function nt(M,e,t,r,s=30){const d=M.clone();d.name=e;const i=[];for(let c=0;c<d.tracks.length;++c){const u=d.tracks[c],h=u.getValueSize(),m=[],v=[];for(let y=0;y<u.times.length;++y){const S=u.times[y]*s;if(!(S<t||S>=r)){m.push(u.times[y]);for(let b=0;b<h;++b)v.push(u.values[y*h+b])}}m.length!==0&&(u.times=Hn(m,u.times.constructor),u.values=Hn(v,u.values.constructor),i.push(u))}d.tracks=i;let n=1/0;for(let c=0;c<d.tracks.length;++c)n>d.tracks[c].times[0]&&(n=d.tracks[c].times[0]);for(let c=0;c<d.tracks.length;++c)d.tracks[c].shift(-1*n);return d.resetDuration(),d}function Ge(M,e=0,t=M,r=30){r<=0&&(r=30);const s=t.tracks.length,d=e/r;for(let i=0;i<s;++i){const n=t.tracks[i],c=n.ValueTypeName;if(c==="bool"||c==="string")continue;const u=M.tracks.find(function(w){return w.name===n.name&&w.ValueTypeName===c});if(u===void 0)continue;let h=0;const m=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);let v=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const S=n.times.length-1;let b;if(d<=n.times[0]){const w=h,A=m-h;b=n.values.slice(w,A)}else if(d>=n.times[S]){const w=S*m+h,A=w+m-h;b=n.values.slice(w,A)}else{const w=n.createInterpolant(),A=h,I=m-h;w.evaluate(d),b=w.resultBuffer.slice(A,I)}c==="quaternion"&&new ws().fromArray(b).normalize().conjugate().toArray(b);const T=u.times.length;for(let w=0;w<T;++w){const A=w*y+v;if(c==="quaternion")ws.multiplyQuaternionsFlat(u.values,A,b,0,u.values,A);else{const I=y-v*2;for(let P=0;P<I;++P)u.values[A+P]-=b[P]}}}return M.blendMode=li,M}class mt{static convertArray(e,t){return Hn(e,t)}static isTypedArray(e){return pr(e)}static getKeyframeOrder(e){return Pl(e)}static sortedArray(e,t,r){return Qu(e,t,r)}static flattenJSON(e,t,r,s){Jc(e,t,r,s)}static subclip(e,t,r,s,d=30){return nt(e,t,r,s,d)}static makeClipAdditive(e,t=0,r=e,s=30){return Ge(e,t,r,s)}}class fn{constructor(e,t,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,s=t[r],d=t[r-1];e:{t:{let i;n:{i:if(!(e<s)){for(let n=r+2;;){if(s===void 0){if(e<d)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===n)break;if(d=s,s=t[++r],e<s)break t}i=t.length;break n}if(!(e>=d)){const n=t[1];e<n&&(r=2,d=n);for(let c=r-2;;){if(d===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(s=d,d=t[--r-1],e>=d)break t}i=r,r=0;break n}break e}for(;r<i;){const n=r+i>>>1;e<t[n]?i=n:r=n+1}if(s=t[r],d=t[r-1],d===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,d,s)}return this.interpolate_(r,d,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,d=e*s;for(let i=0;i!==s;++i)t[i]=r[d+i];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class bi extends fn{constructor(e,t,r,s){super(e,t,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:jn,endingEnd:jn}}intervalChanged_(e,t,r){const s=this.parameterPositions;let d=e-2,i=e+1,n=s[d],c=s[i];if(n===void 0)switch(this.getSettings_().endingStart){case xn:d=e,n=2*t-r;break;case Ut:d=s.length-2,n=t+s[d]-s[d+1];break;default:d=e,n=r}if(c===void 0)switch(this.getSettings_().endingEnd){case xn:i=e,c=2*r-t;break;case Ut:i=1,c=r+s[1]-s[0];break;default:i=e-1,c=t}const u=(r-t)*.5,h=this.valueSize;this._weightPrev=u/(t-n),this._weightNext=u/(c-r),this._offsetPrev=d*h,this._offsetNext=i*h}interpolate_(e,t,r,s){const d=this.resultBuffer,i=this.sampleValues,n=this.valueSize,c=e*n,u=c-n,h=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,S=(r-t)/(s-t),b=S*S,T=b*S,w=-v*T+2*v*b-v*S,A=(1+v)*T+(-1.5-2*v)*b+(-.5+v)*S+1,I=(-1-y)*T+(1.5+y)*b+.5*S,P=y*T-y*b;for(let B=0;B!==n;++B)d[B]=w*i[h+B]+A*i[u+B]+I*i[c+B]+P*i[m+B];return d}}class to extends fn{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const d=this.resultBuffer,i=this.sampleValues,n=this.valueSize,c=e*n,u=c-n,h=(r-t)/(s-t),m=1-h;for(let v=0;v!==n;++v)d[v]=i[u+v]*m+i[c+v]*h;return d}}class $i extends fn{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class mr{constructor(e,t,r,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hn(t,this.TimeBufferType),this.values=Hn(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Hn(e.times,Array),values:Hn(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new $i(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new to(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new bi(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Jn:t=this.InterpolantFactoryMethodDiscrete;break;case Zn:t=this.InterpolantFactoryMethodLinear;break;case Xt:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jn;case this.InterpolantFactoryMethodLinear:return Zn;case this.InterpolantFactoryMethodSmooth:return Xt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]*=e}return this}trim(e,t){const r=this.times,s=r.length;let d=0,i=s-1;for(;d!==s&&r[d]<e;)++d;for(;i!==-1&&r[i]>t;)--i;if(++i,d!==0||i!==s){d>=i&&(i=Math.max(i,1),d=i-1);const n=this.getValueSize();this.times=r.slice(d,i),this.values=this.values.slice(d*n,i*n)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,d=r.length;d===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let i=null;for(let n=0;n!==d;n++){const c=r[n];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,n,c),e=!1;break}if(i!==null&&i>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,n,c,i),e=!1;break}i=c}if(s!==void 0&&pr(s))for(let n=0,c=s.length;n!==c;++n){const u=s[n];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,n,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),s=this.getInterpolation()===Xt,d=e.length-1;let i=1;for(let n=1;n<d;++n){let c=!1;const u=e[n],h=e[n+1];if(u!==h&&(n!==1||u!==e[0]))if(s)c=!0;else{const m=n*r,v=m-r,y=m+r;for(let S=0;S!==r;++S){const b=t[m+S];if(b!==t[v+S]||b!==t[y+S]){c=!0;break}}}if(c){if(n!==i){e[i]=e[n];const m=n*r,v=i*r;for(let y=0;y!==r;++y)t[v+y]=t[m+y]}++i}}if(d>0){e[i]=e[d];for(let n=d*r,c=i*r,u=0;u!==r;++u)t[c+u]=t[n+u];++i}return i!==e.length?(this.times=e.slice(0,i),this.values=t.slice(0,i*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,s=new r(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}mr.prototype.ValueTypeName="",mr.prototype.TimeBufferType=Float32Array,mr.prototype.ValueBufferType=Float32Array,mr.prototype.DefaultInterpolation=Zn;class no extends mr{constructor(e,t,r){super(e,t,r)}}no.prototype.ValueTypeName="bool",no.prototype.ValueBufferType=Array,no.prototype.DefaultInterpolation=Jn,no.prototype.InterpolantFactoryMethodLinear=void 0,no.prototype.InterpolantFactoryMethodSmooth=void 0;class aa extends mr{constructor(e,t,r,s){super(e,t,r,s)}}aa.prototype.ValueTypeName="color";class ec extends mr{constructor(e,t,r,s){super(e,t,r,s)}}ec.prototype.ValueTypeName="number";class wh extends fn{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const d=this.resultBuffer,i=this.sampleValues,n=this.valueSize,c=(r-t)/(s-t);let u=e*n;for(let h=u+n;u!==h;u+=4)ws.slerpFlat(d,0,i,u-n,i,u,c);return d}}class dh extends mr{constructor(e,t,r,s){super(e,t,r,s)}InterpolantFactoryMethodLinear(e){return new wh(this.times,this.values,this.getValueSize(),e)}}dh.prototype.ValueTypeName="quaternion",dh.prototype.InterpolantFactoryMethodSmooth=void 0;class df extends mr{constructor(e,t,r){super(e,t,r)}}df.prototype.ValueTypeName="string",df.prototype.ValueBufferType=Array,df.prototype.DefaultInterpolation=Jn,df.prototype.InterpolantFactoryMethodLinear=void 0,df.prototype.InterpolantFactoryMethodSmooth=void 0;class fh extends mr{constructor(e,t,r,s){super(e,t,r,s)}}fh.prototype.ValueTypeName="vector";class hh{constructor(e="",t=-1,r=[],s=St){this.name=e,this.tracks=r,this.duration=t,this.blendMode=s,this.uuid=us(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,s=1/(e.fps||1);for(let i=0,n=r.length;i!==n;++i)t.push(lm(r[i]).scale(s));const d=new this(e.name,e.duration,t,e.blendMode);return d.uuid=e.uuid,d.userData=JSON.parse(e.userData||"{}"),d}static toJSON(e){const t=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let d=0,i=r.length;d!==i;++d)t.push(mr.toJSON(r[d]));return s}static CreateFromMorphTargetSequence(e,t,r,s){const d=t.length,i=[];for(let n=0;n<d;n++){let c=[],u=[];c.push((n+d-1)%d,n,(n+1)%d),u.push(0,1,0);const h=Pl(c);c=Qu(c,1,h),u=Qu(u,1,h),!s&&c[0]===0&&(c.push(d),u.push(u[0])),i.push(new ec(".morphTargetInfluences["+t[n].name+"]",c,u).scale(1/r))}return new this(e,-1,i)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===t)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const s={},d=/^([\w-]*?)([\d]+)$/;for(let n=0,c=e.length;n<c;n++){const u=e[n],h=u.name.match(d);if(h&&h.length>1){const m=h[1];let v=s[m];v||(s[m]=v=[]),v.push(u)}}const i=[];for(const n in s)i.push(this.CreateFromMorphTargetSequence(n,s[n],t,r));return i}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(m,v,y,S,b){if(y.length!==0){const T=[],w=[];Jc(y,T,w,S),T.length!==0&&b.push(new m(v,T,w))}},s=[],d=e.name||"default",i=e.fps||30,n=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let m=0;m<u.length;m++){const v=u[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let S;for(S=0;S<v.length;S++)if(v[S].morphTargets)for(let b=0;b<v[S].morphTargets.length;b++)y[v[S].morphTargets[b]]=-1;for(const b in y){const T=[],w=[];for(let A=0;A!==v[S].morphTargets.length;++A){const I=v[S];T.push(I.time),w.push(I.morphTarget===b?1:0)}s.push(new ec(".morphTargetInfluence["+b+"]",T,w))}c=y.length*i}else{const y=".bones["+t[m].name+"]";r(fh,y+".position",v,"pos",s),r(dh,y+".quaternion",v,"rot",s),r(fh,y+".scale",v,"scl",s)}}return s.length===0?null:new this(d,c,s,n)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,s=e.length;r!==s;++r){const d=this.tracks[r];t=Math.max(t,d.times[d.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function bp(M){switch(M.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ec;case"vector":case"vector2":case"vector3":case"vector4":return fh;case"color":return aa;case"quaternion":return dh;case"bool":case"boolean":return no;case"string":return df}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+M)}function lm(M){if(M.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=bp(M.type);if(M.times===void 0){const t=[],r=[];Jc(M.keys,t,r,"value"),M.times=t,M.values=r}return e.parse!==void 0?e.parse(M):new e(M.name,M.times,M.values,M.interpolation)}const Qc={enabled:!1,files:{},add:function(M,e){this.enabled!==!1&&(this.files[M]=e)},get:function(M){if(this.enabled!==!1)return this.files[M]},remove:function(M){delete this.files[M]},clear:function(){this.files={}}};class Kh{constructor(e,t,r){const s=this;let d=!1,i=0,n=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.abortController=new AbortController,this.itemStart=function(h){n++,d===!1&&s.onStart!==void 0&&s.onStart(h,i,n),d=!0},this.itemEnd=function(h){i++,s.onProgress!==void 0&&s.onProgress(h,i,n),i===n&&(d=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(h){s.onError!==void 0&&s.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,m){return u.push(h,m),this},this.removeHandler=function(h){const m=u.indexOf(h);return m!==-1&&u.splice(m,2),this},this.getHandler=function(h){for(let m=0,v=u.length;m<v;m+=2){const y=u[m],S=u[m+1];if(y.global&&(y.lastIndex=0),y.test(h))return S}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const ph=new Kh;class tc{constructor(e){this.manager=e!==void 0?e:ph,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(s,d){r.load(e,s,t,d)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}tc.DEFAULT_MATERIAL_NAME="__DEFAULT";const ed={};class cm extends Error{constructor(e,t){super(e),this.response=t}}class td extends tc{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const d=Qc.get(`file:${e}`);if(d!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(d),this.manager.itemEnd(e)},0),d;if(ed[e]!==void 0){ed[e].push({onLoad:t,onProgress:r,onError:s});return}ed[e]=[],ed[e].push({onLoad:t,onProgress:r,onError:s});const i=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),n=this.mimeType,c=this.responseType;fetch(i).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||u.body===void 0||u.body.getReader===void 0)return u;const h=ed[e],m=u.body.getReader(),v=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),y=v?parseInt(v):0,S=y!==0;let b=0;const T=new ReadableStream({start(w){A();function A(){m.read().then(({done:I,value:P})=>{if(I)w.close();else{b+=P.byteLength;const B=new ProgressEvent("progress",{lengthComputable:S,loaded:b,total:y});for(let L=0,z=h.length;L<z;L++){const Z=h[L];Z.onProgress&&Z.onProgress(B)}w.enqueue(P),A()}},I=>{w.error(I)})}}});return new Response(T)}else throw new cm(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,n));case"json":return u.json();default:if(n==="")return u.text();{const m=/charset="?([^;"\s]*)"?/i.exec(n),v=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(v);return u.arrayBuffer().then(S=>y.decode(S))}}}).then(u=>{Qc.add(`file:${e}`,u);const h=ed[e];delete ed[e];for(let m=0,v=h.length;m<v;m++){const y=h[m];y.onLoad&&y.onLoad(u)}}).catch(u=>{const h=ed[e];if(h===void 0)throw this.manager.itemError(e),u;delete ed[e];for(let m=0,v=h.length;m<v;m++){const y=h[m];y.onError&&y.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class um extends tc{constructor(e){super(e)}load(e,t,r,s){const d=this,i=new td(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(n){try{t(d.parse(JSON.parse(n)))}catch(c){s?s(c):console.error(c),d.manager.itemError(e)}},r,s)}parse(e){const t=[];for(let r=0;r<e.length;r++){const s=hh.parse(e[r]);t.push(s)}return t}}class _p extends tc{constructor(e){super(e)}load(e,t,r,s){const d=this,i=[],n=new Md,c=new td(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(d.withCredentials);let u=0;function h(m){c.load(e[m],function(v){const y=d.parse(v,!0);i[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(n.minFilter=Nr),n.image=i,n.format=y.format,n.needsUpdate=!0,t&&t(n))},r,s)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)h(m);else c.load(e,function(m){const v=d.parse(m,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let S=0;S<y;S++){i[S]={mipmaps:[]};for(let b=0;b<v.mipmapCount;b++)i[S].mipmaps.push(v.mipmaps[S*v.mipmapCount+b]),i[S].format=v.format,i[S].width=v.width,i[S].height=v.height}n.image=i}else n.image.width=v.width,n.image.height=v.height,n.mipmaps=v.mipmaps;v.mipmapCount===1&&(n.minFilter=Nr),n.format=v.format,n.needsUpdate=!0,t&&t(n)},r,s);return n}}const Xf=new WeakMap;class mh extends tc{constructor(e){super(e)}load(e,t,r,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const d=this,i=Qc.get(`image:${e}`);if(i!==void 0){if(i.complete===!0)d.manager.itemStart(e),setTimeout(function(){t&&t(i),d.manager.itemEnd(e)},0);else{let m=Xf.get(i);m===void 0&&(m=[],Xf.set(i,m)),m.push({onLoad:t,onError:s})}return i}const n=cu("img");function c(){h(),t&&t(this);const m=Xf.get(this)||[];for(let v=0;v<m.length;v++){const y=m[v];y.onLoad&&y.onLoad(this)}Xf.delete(this),d.manager.itemEnd(e)}function u(m){h(),s&&s(m),Qc.remove(`image:${e}`);const v=Xf.get(this)||[];for(let y=0;y<v.length;y++){const S=v[y];S.onError&&S.onError(m)}Xf.delete(this),d.manager.itemError(e),d.manager.itemEnd(e)}function h(){n.removeEventListener("load",c,!1),n.removeEventListener("error",u,!1)}return n.addEventListener("load",c,!1),n.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(n.crossOrigin=this.crossOrigin),Qc.add(`image:${e}`,n),d.manager.itemStart(e),n.src=e,n}}class dm extends tc{constructor(e){super(e)}load(e,t,r,s){const d=new Ml;d.colorSpace=Vr;const i=new mh(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);let n=0;function c(u){i.load(e[u],function(h){d.images[u]=h,n++,n===6&&(d.needsUpdate=!0,t&&t(d))},void 0,s)}for(let u=0;u<e.length;++u)c(u);return d}}class Ah extends tc{constructor(e){super(e)}load(e,t,r,s){const d=this,i=new jr,n=new td(this.manager);return n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setPath(this.path),n.setWithCredentials(d.withCredentials),n.load(e,function(c){let u;try{u=d.parse(c)}catch(h){if(s!==void 0)s(h);else{console.error(h);return}}u.image!==void 0?i.image=u.image:u.data!==void 0&&(i.image.width=u.width,i.image.height=u.height,i.image.data=u.data),i.wrapS=u.wrapS!==void 0?u.wrapS:Tn,i.wrapT=u.wrapT!==void 0?u.wrapT:Tn,i.magFilter=u.magFilter!==void 0?u.magFilter:Nr,i.minFilter=u.minFilter!==void 0?u.minFilter:Nr,i.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(i.colorSpace=u.colorSpace),u.flipY!==void 0&&(i.flipY=u.flipY),u.format!==void 0&&(i.format=u.format),u.type!==void 0&&(i.type=u.type),u.mipmaps!==void 0&&(i.mipmaps=u.mipmaps,i.minFilter=va),u.mipmapCount===1&&(i.minFilter=Nr),u.generateMipmaps!==void 0&&(i.generateMipmaps=u.generateMipmaps),i.needsUpdate=!0,t&&t(i,u)},r,s),i}}class fm extends tc{constructor(e){super(e)}load(e,t,r,s){const d=new oo,i=new mh(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,function(n){d.image=n,d.needsUpdate=!0,t!==void 0&&t(d)},r,s),d}}class Ud extends Se{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ot(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class Mp extends Ud{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Se.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ot(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Yh=new Ui,qh=new ce,Ep=new ce;class Jh{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nn(512,512),this.mapType=co,this.map=null,this.mapPass=null,this.matrix=new Ui,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Sd,this._frameExtents=new nn(1,1),this._viewportCount=1,this._viewports=[new so(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;qh.setFromMatrixPosition(e.matrixWorld),t.position.copy(qh),Ep.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ep),t.updateMatrixWorld(),Yh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yh,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Yh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class hm extends Jh{constructor(){super(new Yo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=Zl*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,d=e.distance||t.far;(r!==t.fov||s!==t.aspect||d!==t.far)&&(t.fov=r,t.aspect=s,t.far=d,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Cp extends Ud{constructor(e,t,r=0,s=Math.PI/3,d=0,i=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Se.DEFAULT_UP),this.updateMatrix(),this.target=new Se,this.distance=r,this.angle=s,this.penumbra=d,this.decay=i,this.map=null,this.shadow=new hm}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Tp=new Ui,vh=new ce,Qh=new ce;class pm extends Jh{constructor(){super(new Yo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new nn(4,2),this._viewportCount=6,this._viewports=[new so(2,1,1,1),new so(0,1,1,1),new so(3,1,1,1),new so(1,1,1,1),new so(3,0,1,1),new so(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,s=this.matrix,d=e.distance||r.far;d!==r.far&&(r.far=d,r.updateProjectionMatrix()),vh.setFromMatrixPosition(e.matrixWorld),r.position.copy(vh),Qh.copy(r.position),Qh.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Qh),r.updateMatrixWorld(),s.makeTranslation(-vh.x,-vh.y,-vh.z),Tp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Tp,r.coordinateSystem,r.reversedDepth)}}class wp extends Ud{constructor(e,t,r=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new pm}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ep extends ia{constructor(e=-1,t=1,r=1,s=-1,d=.1,i=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=s,this.near=d,this.far=i,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,s,d,i){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=d,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let d=r-e,i=r+e,n=s+t,c=s-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=u*this.view.offsetX,i=d+u*this.view.width,n-=h*this.view.offsetY,c=n-h*this.view.height}this.projectionMatrix.makeOrthographic(d,i,n,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class mm extends Jh{constructor(){super(new ep(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ap extends Ud{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Se.DEFAULT_UP),this.updateMatrix(),this.target=new Se,this.shadow=new mm}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Rp extends Ud{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tp extends Ud{constructor(e,t,r=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Ip{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ce)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,s=e.y,d=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*s),t.addScaledVector(i[2],.488603*d),t.addScaledVector(i[3],.488603*r),t.addScaledVector(i[4],1.092548*(r*s)),t.addScaledVector(i[5],1.092548*(s*d)),t.addScaledVector(i[6],.315392*(3*d*d-1)),t.addScaledVector(i[7],1.092548*(r*d)),t.addScaledVector(i[8],.546274*(r*r-s*s)),t}getIrradianceAt(e,t){const r=e.x,s=e.y,d=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],2*.511664*s),t.addScaledVector(i[2],2*.511664*d),t.addScaledVector(i[3],2*.511664*r),t.addScaledVector(i[4],2*.429043*r*s),t.addScaledVector(i[5],2*.429043*s*d),t.addScaledVector(i[6],.743125*d*d-.247708),t.addScaledVector(i[7],2*.429043*r*d),t.addScaledVector(i[8],.429043*(r*r-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const r=e.x,s=e.y,d=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*d,t[3]=.488603*r,t[4]=1.092548*r*s,t[5]=1.092548*s*d,t[6]=.315392*(3*d*d-1),t[7]=1.092548*r*d,t[8]=.546274*(r*r-s*s)}}class Pp extends Ud{constructor(e=new Ip,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Rh extends tc{constructor(e){super(e),this.textures={}}load(e,t,r,s){const d=this,i=new td(d.manager);i.setPath(d.path),i.setRequestHeader(d.requestHeader),i.setWithCredentials(d.withCredentials),i.load(e,function(n){try{t(d.parse(JSON.parse(n)))}catch(c){s?s(c):console.error(c),d.manager.itemError(e)}},r,s)}parse(e){const t=this.textures;function r(d){return t[d]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",d),t[d]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new ot().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const d in e.uniforms){const i=e.uniforms[d];switch(s.uniforms[d]={},i.type){case"t":s.uniforms[d].value=r(i.value);break;case"c":s.uniforms[d].value=new ot().setHex(i.value);break;case"v2":s.uniforms[d].value=new nn().fromArray(i.value);break;case"v3":s.uniforms[d].value=new ce().fromArray(i.value);break;case"v4":s.uniforms[d].value=new so().fromArray(i.value);break;case"m3":s.uniforms[d].value=new Js().fromArray(i.value);break;case"m4":s.uniforms[d].value=new Ui().fromArray(i.value);break;default:s.uniforms[d].value=i.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const d in e.extensions)s.extensions[d]=e.extensions[d];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=r(e.map)),e.matcap!==void 0&&(s.matcap=r(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let d=e.normalScale;Array.isArray(d)===!1&&(d=[d,d]),s.normalScale=new nn().fromArray(d)}return e.displacementMap!==void 0&&(s.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=r(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new nn().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=r(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Rh.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:a,SpriteMaterial:Y,RawShaderMaterial:l,ShaderMaterial:pa,PointsMaterial:_s,MeshPhysicalMaterial:x,MeshStandardMaterial:f,MeshPhongMaterial:E,MeshToonMaterial:N,MeshNormalMaterial:K,MeshLambertMaterial:pe,MeshDepthMaterial:Xe,MeshDistanceMaterial:Ot,MeshBasicMaterial:Rt,MeshMatcapMaterial:Sn,LineDashedMaterial:kn,LineBasicMaterial:Qo,Material:vn};return new t[e]}}class np{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ip extends H{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Np extends tc{constructor(e){super(e)}load(e,t,r,s){const d=this,i=new td(d.manager);i.setPath(d.path),i.setRequestHeader(d.requestHeader),i.setWithCredentials(d.withCredentials),i.load(e,function(n){try{t(d.parse(JSON.parse(n)))}catch(c){s?s(c):console.error(c),d.manager.itemError(e)}},r,s)}parse(e){const t={},r={};function s(y,S){if(t[S]!==void 0)return t[S];const T=y.interleavedBuffers[S],w=d(y,T.buffer),A=dl(T.type,w),I=new vd(A,T.stride);return I.uuid=T.uuid,t[S]=I,I}function d(y,S){if(r[S]!==void 0)return r[S];const T=y.arrayBuffers[S],w=new Uint32Array(T).buffer;return r[S]=w,w}const i=e.isInstancedBufferGeometry?new ip:new H,n=e.data.index;if(n!==void 0){const y=dl(n.type,n.array);i.setIndex(new Pt(y,1))}const c=e.data.attributes;for(const y in c){const S=c[y];let b;if(S.isInterleavedBufferAttribute){const T=s(e.data,S.data);b=new Lc(T,S.itemSize,S.offset,S.normalized)}else{const T=dl(S.type,S.array),w=S.isInstancedBufferAttribute?zu:Pt;b=new w(T,S.itemSize,S.normalized)}S.name!==void 0&&(b.name=S.name),S.usage!==void 0&&b.setUsage(S.usage),i.setAttribute(y,b)}const u=e.data.morphAttributes;if(u)for(const y in u){const S=u[y],b=[];for(let T=0,w=S.length;T<w;T++){const A=S[T];let I;if(A.isInterleavedBufferAttribute){const P=s(e.data,A.data);I=new Lc(P,A.itemSize,A.offset,A.normalized)}else{const P=dl(A.type,A.array);I=new Pt(P,A.itemSize,A.normalized)}A.name!==void 0&&(I.name=A.name),b.push(I)}i.morphAttributes[y]=b}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,S=m.length;y!==S;++y){const b=m[y];i.addGroup(b.start,b.count,b.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(i.boundingSphere=new Io().fromJSON(v)),e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class vm extends tc{constructor(e){super(e)}load(e,t,r,s){const d=this,i=this.path===""?np.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const n=new td(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,function(c){let u=null;try{u=JSON.parse(c)}catch(m){s!==void 0&&s(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}d.parse(u,t)},r,s)}loadAsync(e,t){return yf(this,null,function*(){const r=this,s=this.path===""?np.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const d=new td(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials);const i=yield d.loadAsync(e,t),n=JSON.parse(i),c=n.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield r.parseAsync(n)})}parse(e,t){const r=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),d=this.parseGeometries(e.geometries,s),i=this.parseImages(e.images,function(){t!==void 0&&t(u)}),n=this.parseTextures(e.textures,i),c=this.parseMaterials(e.materials,n),u=this.parseObject(e.object,d,c,n,r),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let m=!1;for(const v in i)if(i[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(u)}return u}parseAsync(e){return yf(this,null,function*(){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),d=yield this.parseImagesAsync(e.images),i=this.parseTextures(e.textures,d),n=this.parseMaterials(e.materials,i),c=this.parseObject(e.object,s,n,i,t),u=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,u),this.bindLightTargets(c),c})}parseShapes(e){const t={};if(e!==void 0)for(let r=0,s=e.length;r<s;r++){const d=new pl().fromJSON(e[r]);t[d.uuid]=d}return t}parseSkeletons(e,t){const r={},s={};if(t.traverse(function(d){d.isBone&&(s[d.uuid]=d)}),e!==void 0)for(let d=0,i=e.length;d<i;d++){const n=new gd().fromJSON(e[d],s);r[n.uuid]=n}return r}parseGeometries(e,t){const r={};if(e!==void 0){const s=new Np;for(let d=0,i=e.length;d<i;d++){let n;const c=e[d];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":n=s.parse(c);break;default:c.type in jf?n=jf[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}n.uuid=c.uuid,c.name!==void 0&&(n.name=c.name),c.userData!==void 0&&(n.userData=c.userData),r[c.uuid]=n}}return r}parseMaterials(e,t){const r={},s={};if(e!==void 0){const d=new Rh;d.setTextures(t);for(let i=0,n=e.length;i<n;i++){const c=e[i];r[c.uuid]===void 0&&(r[c.uuid]=d.parse(c)),s[c.uuid]=r[c.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const s=e[r],d=hh.parse(s);t[d.uuid]=d}return t}parseImages(e,t){const r=this,s={};let d;function i(c){return r.manager.itemStart(c),d.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function n(c){if(typeof c=="string"){const u=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return i(h)}else return c.data?{data:dl(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new Kh(t);d=new mh(c),d.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const m=e[u],v=m.url;if(Array.isArray(v)){const y=[];for(let S=0,b=v.length;S<b;S++){const T=v[S],w=n(T);w!==null&&(w instanceof HTMLImageElement?y.push(w):y.push(new jr(w.data,w.width,w.height)))}s[m.uuid]=new kl(y)}else{const y=n(m.url);s[m.uuid]=new kl(y)}}}return s}parseImagesAsync(e){return yf(this,null,function*(){const t=this,r={};let s;function d(i){return yf(this,null,function*(){if(typeof i=="string"){const n=i,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return yield s.loadAsync(c)}else return i.data?{data:dl(i.type,i.data),width:i.width,height:i.height}:null})}if(e!==void 0&&e.length>0){s=new mh(this.manager),s.setCrossOrigin(this.crossOrigin);for(let i=0,n=e.length;i<n;i++){const c=e[i],u=c.url;if(Array.isArray(u)){const h=[];for(let m=0,v=u.length;m<v;m++){const y=u[m],S=yield d(y);S!==null&&(S instanceof HTMLImageElement?h.push(S):h.push(new jr(S.data,S.width,S.height)))}r[c.uuid]=new kl(h)}else{const h=yield d(c.url);r[c.uuid]=new kl(h)}}}return r})}parseTextures(e,t){function r(d,i){return typeof d=="number"?d:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",d),i[d])}const s={};if(e!==void 0)for(let d=0,i=e.length;d<i;d++){const n=e[d];n.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',n.uuid),t[n.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",n.image);const c=t[n.image],u=c.data;let h;Array.isArray(u)?(h=new Ml,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new jr:h=new oo,u&&(h.needsUpdate=!0)),h.source=c,h.uuid=n.uuid,n.name!==void 0&&(h.name=n.name),n.mapping!==void 0&&(h.mapping=r(n.mapping,gm)),n.channel!==void 0&&(h.channel=n.channel),n.offset!==void 0&&h.offset.fromArray(n.offset),n.repeat!==void 0&&h.repeat.fromArray(n.repeat),n.center!==void 0&&h.center.fromArray(n.center),n.rotation!==void 0&&(h.rotation=n.rotation),n.wrap!==void 0&&(h.wrapS=r(n.wrap[0],Op),h.wrapT=r(n.wrap[1],Op)),n.format!==void 0&&(h.format=n.format),n.internalFormat!==void 0&&(h.internalFormat=n.internalFormat),n.type!==void 0&&(h.type=n.type),n.colorSpace!==void 0&&(h.colorSpace=n.colorSpace),n.minFilter!==void 0&&(h.minFilter=r(n.minFilter,Dp)),n.magFilter!==void 0&&(h.magFilter=r(n.magFilter,Dp)),n.anisotropy!==void 0&&(h.anisotropy=n.anisotropy),n.flipY!==void 0&&(h.flipY=n.flipY),n.generateMipmaps!==void 0&&(h.generateMipmaps=n.generateMipmaps),n.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=n.premultiplyAlpha),n.unpackAlignment!==void 0&&(h.unpackAlignment=n.unpackAlignment),n.compareFunction!==void 0&&(h.compareFunction=n.compareFunction),n.userData!==void 0&&(h.userData=n.userData),s[n.uuid]=h}return s}parseObject(e,t,r,s,d){let i;function n(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let S=0,b=v.length;S<b;S++){const T=v[S];r[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),y.push(r[T])}return y}return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),r[v]}}function u(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let h,m;switch(e.type){case"Scene":i=new eh,e.background!==void 0&&(Number.isInteger(e.background)?i.background=new ot(e.background):i.background=u(e.background)),e.environment!==void 0&&(i.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?i.fog=new md(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(i.fog=new Qd(e.fog.color,e.fog.density)),e.fog.name!==""&&(i.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(i.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(i.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&i.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(i.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&i.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":i=new Yo(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(i.focus=e.focus),e.zoom!==void 0&&(i.zoom=e.zoom),e.filmGauge!==void 0&&(i.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(i.filmOffset=e.filmOffset),e.view!==void 0&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new ep(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(i.zoom=e.zoom),e.view!==void 0&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Rp(e.color,e.intensity);break;case"DirectionalLight":i=new Ap(e.color,e.intensity),i.target=e.target||"";break;case"PointLight":i=new wp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new tp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Cp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),i.target=e.target||"";break;case"HemisphereLight":i=new Mp(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=new Pp().fromJSON(e);break;case"SkinnedMesh":h=n(e.geometry),m=c(e.material),i=new Rs(h,m),e.bindMode!==void 0&&(i.bindMode=e.bindMode),e.bindMatrix!==void 0&&i.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(i.skeleton=e.skeleton);break;case"Mesh":h=n(e.geometry),m=c(e.material),i=new Un(h,m);break;case"InstancedMesh":h=n(e.geometry),m=c(e.material);const v=e.count,y=e.instanceMatrix,S=e.instanceColor;i=new xd(h,m,v),i.instanceMatrix=new zu(new Float32Array(y.array),16),S!==void 0&&(i.instanceColor=new zu(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":h=n(e.geometry),m=c(e.material),i=new oh(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),i.geometry=h,i.perObjectFrustumCulled=e.perObjectFrustumCulled,i.sortObjects=e.sortObjects,i._drawRanges=e.drawRanges,i._reservedRanges=e.reservedRanges,i._geometryInfo=e.geometryInfo.map(b=>{let T=null,w=null;return b.boundingBox!==void 0&&(T=new Uo().fromJSON(b.boundingBox)),b.boundingSphere!==void 0&&(w=new Io().fromJSON(b.boundingSphere)),cl(Qi({},b),{boundingBox:T,boundingSphere:w})}),i._instanceInfo=e.instanceInfo,i._availableInstanceIds=e._availableInstanceIds,i._availableGeometryIds=e._availableGeometryIds,i._nextIndexStart=e.nextIndexStart,i._nextVertexStart=e.nextVertexStart,i._geometryCount=e.geometryCount,i._maxInstanceCount=e.maxInstanceCount,i._maxVertexCount=e.maxVertexCount,i._maxIndexCount=e.maxIndexCount,i._geometryInitialized=e.geometryInitialized,i._matricesTexture=u(e.matricesTexture.uuid),i._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(i._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(i.boundingSphere=new Io().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(i.boundingBox=new Uo().fromJSON(e.boundingBox));break;case"LOD":i=new vo;break;case"Line":i=new Gs(n(e.geometry),c(e.material));break;case"LineLoop":i=new Ws(n(e.geometry),c(e.material));break;case"LineSegments":i=new ks(n(e.geometry),c(e.material));break;case"PointCloud":case"Points":i=new Tl(n(e.geometry),c(e.material));break;case"Sprite":i=new _o(c(e.material));break;case"Group":i=new lc;break;case"Bone":i=new Fu;break;default:i=new Se}if(i.uuid=e.uuid,e.name!==void 0&&(i.name=e.name),e.matrix!==void 0?(i.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(e.position!==void 0&&i.position.fromArray(e.position),e.rotation!==void 0&&i.rotation.fromArray(e.rotation),e.quaternion!==void 0&&i.quaternion.fromArray(e.quaternion),e.scale!==void 0&&i.scale.fromArray(e.scale)),e.up!==void 0&&i.up.fromArray(e.up),e.castShadow!==void 0&&(i.castShadow=e.castShadow),e.receiveShadow!==void 0&&(i.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(i.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(i.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(i.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(i.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&i.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(i.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(i.visible=e.visible),e.frustumCulled!==void 0&&(i.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(i.renderOrder=e.renderOrder),e.userData!==void 0&&(i.userData=e.userData),e.layers!==void 0&&(i.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)i.add(this.parseObject(v[y],t,r,s,d))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const S=v[y];i.animations.push(d[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(i.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const S=v[y],b=i.getObjectByProperty("uuid",S.object);b!==void 0&&i.addLevel(b,S.distance,S.hysteresis)}}return i}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const s=t[r.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(s,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,s=e.getObjectByProperty("uuid",r);s!==void 0?t.target=s:t.target=new Se}})}}const gm={UVMapping:yo,CubeReflectionMapping:nr,CubeRefractionMapping:io,EquirectangularReflectionMapping:X,EquirectangularRefractionMapping:xe,CubeUVReflectionMapping:It},Op={RepeatWrapping:Ht,ClampToEdgeWrapping:Tn,MirroredRepeatWrapping:Yn},Dp={NearestFilter:vi,NearestMipmapNearestFilter:ca,NearestMipmapLinearFilter:vr,LinearFilter:Nr,LinearMipmapNearestFilter:xo,LinearMipmapLinearFilter:va},rp=new WeakMap;class ym extends tc{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const d=this,i=Qc.get(`image-bitmap:${e}`);if(i!==void 0){if(d.manager.itemStart(e),i.then){i.then(u=>{if(rp.has(i)===!0)s&&s(rp.get(i)),d.manager.itemError(e),d.manager.itemEnd(e);else return t&&t(u),d.manager.itemEnd(e),u});return}return setTimeout(function(){t&&t(i),d.manager.itemEnd(e)},0),i}const n={};n.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",n.headers=this.requestHeader,n.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,n).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(d.options,{colorSpaceConversion:"none"}))}).then(function(u){return Qc.add(`image-bitmap:${e}`,u),t&&t(u),d.manager.itemEnd(e),u}).catch(function(u){s&&s(u),rp.set(c,u),Qc.remove(`image-bitmap:${e}`),d.manager.itemError(e),d.manager.itemEnd(e)});Qc.add(`image-bitmap:${e}`,c),d.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Ih;class ap{static getContext(){return Ih===void 0&&(Ih=new(window.AudioContext||window.webkitAudioContext)),Ih}static setContext(e){Ih=e}}class xm extends tc{constructor(e){super(e)}load(e,t,r,s){const d=this,i=new td(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(c){try{const u=c.slice(0);ap.getContext().decodeAudioData(u,function(m){t(m)}).catch(n)}catch(u){n(u)}},r,s);function n(c){s?s(c):console.error(c),d.manager.itemError(e)}}}const Lp=new Ui,Up=new Ui,ff=new Ui;class Sm{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ff.copy(e.projectionMatrix);const s=t.eyeSep/2,d=s*t.near/t.focus,i=t.near*Math.tan(ic*t.fov*.5)/t.zoom;let n,c;Up.elements[12]=-s,Lp.elements[12]=s,n=-i*t.aspect+d,c=i*t.aspect+d,ff.elements[0]=2*t.near/(c-n),ff.elements[8]=(c+n)/(c-n),this.cameraL.projectionMatrix.copy(ff),n=-i*t.aspect-d,c=i*t.aspect-d,ff.elements[0]=2*t.near/(c-n),ff.elements[8]=(c+n)/(c-n),this.cameraR.projectionMatrix.copy(ff)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Up),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Lp)}}class bm extends Yo{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Bp{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const hf=new ce,op=new ws,_m=new ce,pf=new ce,mf=new ce;class Mm extends Se{constructor(){super(),this.type="AudioListener",this.context=ap.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Bp}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(hf,op,_m),pf.set(0,0,-1).applyQuaternion(op),mf.set(0,1,0).applyQuaternion(op),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(hf.x,r),t.positionY.linearRampToValueAtTime(hf.y,r),t.positionZ.linearRampToValueAtTime(hf.z,r),t.forwardX.linearRampToValueAtTime(pf.x,r),t.forwardY.linearRampToValueAtTime(pf.y,r),t.forwardZ.linearRampToValueAtTime(pf.z,r),t.upX.linearRampToValueAtTime(mf.x,r),t.upY.linearRampToValueAtTime(mf.y,r),t.upZ.linearRampToValueAtTime(mf.z,r)}else t.setPosition(hf.x,hf.y,hf.z),t.setOrientation(pf.x,pf.y,pf.z,mf.x,mf.y,mf.z)}}class Fp extends Se{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const vf=new ce,zp=new ws,Em=new ce,gf=new ce;class Cm extends Fp{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(vf,zp,Em),gf.set(0,0,1).applyQuaternion(zp);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(vf.x,r),t.positionY.linearRampToValueAtTime(vf.y,r),t.positionZ.linearRampToValueAtTime(vf.z,r),t.orientationX.linearRampToValueAtTime(gf.x,r),t.orientationY.linearRampToValueAtTime(gf.y,r),t.orientationZ.linearRampToValueAtTime(gf.z,r)}else t.setPosition(vf.x,vf.y,vf.z),t.setOrientation(gf.x,gf.y,gf.z)}}class Tm{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class sp{constructor(e,t,r){this.binding=e,this.valueSize=r;let s,d,i;switch(t){case"quaternion":s=this._slerp,d=this._slerpAdditive,i=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":s=this._select,d=this._select,i=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:s=this._lerp,d=this._lerpAdditive,i=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=d,this._setIdentity=i,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,s=this.valueSize,d=e*s+s;let i=this.cumulativeWeight;if(i===0){for(let n=0;n!==s;++n)r[d+n]=r[n];i=t}else{i+=t;const n=t/i;this._mixBufferRegion(r,d,0,n,s)}this.cumulativeWeight=i}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,s=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,s=e*t+t,d=this.cumulativeWeight,i=this.cumulativeWeightAdditive,n=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,d<1){const c=t*this._origIndex;this._mixBufferRegion(r,s,c,1-d,t)}i>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*t,1,t);for(let c=t,u=t+t;c!==u;++c)if(r[c]!==r[c+t]){n.setValue(r,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,s=r*this._origIndex;e.getValue(t,s);for(let d=r,i=s;d!==i;++d)t[d]=t[s+d%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,s,d){if(s>=.5)for(let i=0;i!==d;++i)e[t+i]=e[r+i]}_slerp(e,t,r,s){ws.slerpFlat(e,t,e,t,e,r,s)}_slerpAdditive(e,t,r,s,d){const i=this._workIndex*d;ws.multiplyQuaternionsFlat(e,i,e,t,e,r),ws.slerpFlat(e,t,e,t,e,i,s)}_lerp(e,t,r,s,d){const i=1-s;for(let n=0;n!==d;++n){const c=t+n;e[c]=e[c]*i+e[r+n]*s}}_lerpAdditive(e,t,r,s,d){for(let i=0;i!==d;++i){const n=t+i;e[n]=e[n]+e[r+i]*s}}}const lp="\\[\\]\\.:\\/",wm=new RegExp("["+lp+"]","g"),cp="[^"+lp+"]",Am="[^"+lp.replace("\\.","")+"]",up=/((?:WC+[\/:])*)/.source.replace("WC",cp),Rm=/(WCOD+)?/.source.replace("WCOD",Am),dp=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cp),Im=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cp),Pm=new RegExp("^"+up+Rm+dp+Im+"$"),Nm=["material","materials","bones","map"];class Hp{constructor(e,t,r){const s=r||Na.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,d=r.length;s!==d;++s)r[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Na{constructor(e,t,r){this.path=t,this.parsedPath=r||Na.parseTrackName(t),this.node=Na.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Na.Composite(e,t,r):new Na(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(wm,"")}static parseTrackName(e){const t=Pm.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const d=r.nodeName.substring(s+1);Nm.indexOf(d)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=d)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(d){for(let i=0;i<d.length;i++){const n=d[i];if(n.name===t||n.uuid===t)return n;const c=r(n.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let s=0,d=r.length;s!==d;++s)e[t++]=r[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let s=0,d=r.length;s!==d;++s)r[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,d=r.length;s!==d;++s)r[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,d=r.length;s!==d;++s)r[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,s=t.propertyName;let d=t.propertyIndex;if(e||(e=Na.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const i=e[s];if(i===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",e);return}let n=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?n=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(n=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(d!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[d]!==void 0&&(d=e.morphTargetDictionary[d])}c=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=d}else i.fromArray!==void 0&&i.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(c=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][n]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Na.Composite=Hp,Na.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Na.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Na.prototype.GetterByBindingType=[Na.prototype._getValue_direct,Na.prototype._getValue_array,Na.prototype._getValue_arrayElement,Na.prototype._getValue_toArray],Na.prototype.SetterByBindingTypeAndVersioning=[[Na.prototype._setValue_direct,Na.prototype._setValue_direct_setNeedsUpdate,Na.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Na.prototype._setValue_array,Na.prototype._setValue_array_setNeedsUpdate,Na.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Na.prototype._setValue_arrayElement,Na.prototype._setValue_arrayElement_setNeedsUpdate,Na.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Na.prototype._setValue_fromArray,Na.prototype._setValue_fromArray_setNeedsUpdate,Na.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Om{constructor(){this.isAnimationObjectGroup=!0,this.uuid=us(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,s=arguments.length;r!==s;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,s=this._parsedPaths,d=this._bindings,i=d.length;let n,c=e.length,u=this.nCachedObjects_;for(let h=0,m=arguments.length;h!==m;++h){const v=arguments[h],y=v.uuid;let S=t[y];if(S===void 0){S=c++,t[y]=S,e.push(v);for(let b=0,T=i;b!==T;++b)d[b].push(new Na(v,r[b],s[b]))}else if(S<u){n=e[S];const b=--u,T=e[b];t[T.uuid]=S,e[S]=T,t[y]=b,e[b]=v;for(let w=0,A=i;w!==A;++w){const I=d[w],P=I[b];let B=I[S];I[S]=P,B===void 0&&(B=new Na(v,r[w],s[w])),I[b]=B}}else e[S]!==n&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,s=r.length;let d=this.nCachedObjects_;for(let i=0,n=arguments.length;i!==n;++i){const c=arguments[i],u=c.uuid,h=t[u];if(h!==void 0&&h>=d){const m=d++,v=e[m];t[v.uuid]=h,e[h]=v,t[u]=m,e[m]=c;for(let y=0,S=s;y!==S;++y){const b=r[y],T=b[m],w=b[h];b[h]=T,b[m]=w}}}this.nCachedObjects_=d}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,s=r.length;let d=this.nCachedObjects_,i=e.length;for(let n=0,c=arguments.length;n!==c;++n){const u=arguments[n],h=u.uuid,m=t[h];if(m!==void 0)if(delete t[h],m<d){const v=--d,y=e[v],S=--i,b=e[S];t[y.uuid]=m,e[m]=y,t[b.uuid]=v,e[v]=b,e.pop();for(let T=0,w=s;T!==w;++T){const A=r[T],I=A[v],P=A[S];A[m]=I,A[v]=P,A.pop()}}else{const v=--i,y=e[v];v>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let S=0,b=s;S!==b;++S){const T=r[S];T[m]=T[v],T.pop()}}}this.nCachedObjects_=d}subscribe_(e,t){const r=this._bindingsIndicesByPath;let s=r[e];const d=this._bindings;if(s!==void 0)return d[s];const i=this._paths,n=this._parsedPaths,c=this._objects,u=c.length,h=this.nCachedObjects_,m=new Array(u);s=d.length,r[e]=s,i.push(e),n.push(t),d.push(m);for(let v=h,y=c.length;v!==y;++v){const S=c[v];m[v]=new Na(S,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const s=this._paths,d=this._parsedPaths,i=this._bindings,n=i.length-1,c=i[n],u=e[n];t[u]=r,i[r]=c,i.pop(),d[r]=d[n],d.pop(),s[r]=s[n],s.pop()}}}class Zp{constructor(e,t,r=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=s;const d=t.tracks,i=d.length,n=new Array(i),c={endingStart:jn,endingEnd:jn};for(let u=0;u!==i;++u){const h=d[u].createInterpolant(null);n[u]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=n,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=it,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),r===!0){const s=this._clip.duration,d=e._clip.duration,i=d/s,n=s/d;e.warp(1,i,t),this.warp(n,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const s=this._mixer,d=s.time,i=this.timeScale;let n=this._timeScaleInterpolant;n===null&&(n=s._lendControlInterpolant(),this._timeScaleInterpolant=n);const c=n.parameterPositions,u=n.sampleValues;return c[0]=d,c[1]=d+r,u[0]=e/i,u[1]=t/i,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,s){if(!this.enabled){this._updateWeight(e);return}const d=this._startTime;if(d!==null){const c=(e-d)*r;c<0||r===0?t=0:(this._startTime=null,t=r*c)}t*=this._updateTimeScale(e);const i=this._updateTime(t),n=this._updateWeight(e);if(n>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case li:for(let h=0,m=c.length;h!==m;++h)c[h].evaluate(i),u[h].accumulateAdditive(n);break;case St:default:for(let h=0,m=c.length;h!==m;++h)c[h].evaluate(i),u[h].accumulate(s,n)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const s=r.evaluate(e)[0];t*=s,e>r.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const s=r.evaluate(e)[0];t*=s,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let s=this.time+e,d=this._loopCount;const i=r===Gt;if(e===0)return d===-1?s:i&&(d&1)===1?t-s:s;if(r===Ne){d===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(d===-1&&(e>=0?(d=0,this._setEndings(!0,this.repetitions===0,i)):this._setEndings(this.repetitions===0,!0,i)),s>=t||s<0){const n=Math.floor(s/t);s-=t*n,d+=Math.abs(n);const c=this.repetitions-d;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const u=e<0;this._setEndings(u,!u,i)}else this._setEndings(!1,!1,i);this._loopCount=d,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=s;if(i&&(d&1)===1)return t-s}return s}_setEndings(e,t,r){const s=this._interpolantSettings;r?(s.endingStart=xn,s.endingEnd=xn):(e?s.endingStart=this.zeroSlopeAtStart?xn:jn:s.endingStart=Ut,t?s.endingEnd=this.zeroSlopeAtEnd?xn:jn:s.endingEnd=Ut)}_scheduleFading(e,t,r){const s=this._mixer,d=s.time;let i=this._weightInterpolant;i===null&&(i=s._lendControlInterpolant(),this._weightInterpolant=i);const n=i.parameterPositions,c=i.sampleValues;return n[0]=d,c[0]=t,n[1]=d+e,c[1]=r,this}}const Dm=new Float32Array(1);class Lm extends Ts{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,s=e._clip.tracks,d=s.length,i=e._propertyBindings,n=e._interpolants,c=r.uuid,u=this._bindingsByRootAndName;let h=u[c];h===void 0&&(h={},u[c]=h);for(let m=0;m!==d;++m){const v=s[m],y=v.name;let S=h[y];if(S!==void 0)++S.referenceCount,i[m]=S;else{if(S=i[m],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,c,y));continue}const b=t&&t._propertyBindings[m].binding.parsedPath;S=new sp(Na.create(r,y,b),v.ValueTypeName,v.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,c,y),i[m]=S}n[m].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,s=e._clip.uuid,d=this._actionsByClip[s];this._bindAction(e,d&&d.knownActions[0]),this._addInactiveAction(e,s,r)}const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const d=t[r];d.useCount++===0&&(this._lendBinding(d),d.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const d=t[r];--d.useCount===0&&(d.restoreOriginalState(),this._takeBackBinding(d))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const s=this._actions,d=this._actionsByClip;let i=d[t];if(i===void 0)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,d[t]=i;else{const n=i.knownActions;e._byClipCacheIndex=n.length,n.push(e)}e._cacheIndex=s.length,s.push(e),i.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],s=e._cacheIndex;r._cacheIndex=s,t[s]=r,t.pop(),e._cacheIndex=null;const d=e._clip.uuid,i=this._actionsByClip,n=i[d],c=n.knownActions,u=c[c.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,c[h]=u,c.pop(),e._byClipCacheIndex=null;const m=n.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],c.length===0&&delete i[d],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const d=t[r];--d.referenceCount===0&&this._removeInactiveBinding(d)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,s=this._nActiveActions++,d=t[s];e._cacheIndex=s,t[s]=e,d._cacheIndex=r,t[r]=d}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,s=--this._nActiveActions,d=t[s];e._cacheIndex=s,t[s]=e,d._cacheIndex=r,t[r]=d}_addInactiveBinding(e,t,r){const s=this._bindingsByRootAndName,d=this._bindings;let i=s[t];i===void 0&&(i={},s[t]=i),i[r]=e,e._cacheIndex=d.length,d.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,s=r.rootNode.uuid,d=r.path,i=this._bindingsByRootAndName,n=i[s],c=t[t.length-1],u=e._cacheIndex;c._cacheIndex=u,t[u]=c,t.pop(),delete n[d],Object.keys(n).length===0&&delete i[s]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,s=this._nActiveBindings++,d=t[s];e._cacheIndex=s,t[s]=e,d._cacheIndex=r,t[r]=d}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,s=--this._nActiveBindings,d=t[s];e._cacheIndex=s,t[s]=e,d._cacheIndex=r,t[r]=d}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new to(new Float32Array(2),new Float32Array(2),1,Dm),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,s=--this._nActiveControlInterpolants,d=t[s];e.__cacheIndex=s,t[s]=e,d.__cacheIndex=r,t[r]=d}clipAction(e,t,r){const s=t||this._root,d=s.uuid;let i=typeof e=="string"?hh.findByName(s,e):e;const n=i!==null?i.uuid:e,c=this._actionsByClip[n];let u=null;if(r===void 0&&(i!==null?r=i.blendMode:r=St),c!==void 0){const m=c.actionByRoot[d];if(m!==void 0&&m.blendMode===r)return m;u=c.knownActions[0],i===null&&(i=u._clip)}if(i===null)return null;const h=new Zp(this,i,t,r);return this._bindAction(h,u),this._addInactiveAction(h,n,d),h}existingAction(e,t){const r=t||this._root,s=r.uuid,d=typeof e=="string"?hh.findByName(r,e):e,i=d?d.uuid:e,n=this._actionsByClip[i];return n!==void 0&&n.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,s=this.time+=e,d=Math.sign(e),i=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(s,e,d,i);const n=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)n[u].apply(i);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,s=this._actionsByClip,d=s[r];if(d!==void 0){const i=d.knownActions;for(let n=0,c=i.length;n!==c;++n){const u=i[n];this._deactivateAction(u);const h=u._cacheIndex,m=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,m._cacheIndex=h,t[h]=m,t.pop(),this._removeInactiveBindingsForAction(u)}delete s[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const i in r){const n=r[i].actionByRoot,c=n[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName,d=s[t];if(d!==void 0)for(const i in d){const n=d[i];n.restoreOriginalState(),this._removeInactiveBinding(n)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Um extends Ic{constructor(e=1,t=1,r=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=r,this.texture=new Sl(null,e,t,r),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class fp{constructor(e){this.value=e}clone(){return new fp(this.value.clone===void 0?this.value:this.value.clone())}}let Bm=0;class Fm extends Ts{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Bm++}),this.name="",this.usage=ul,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,s=t.length;r<s;r++){const d=Array.isArray(t[r])?t[r]:[t[r]];for(let i=0;i<d.length;i++)this.uniforms.push(d[i].clone())}return this}clone(){return new this.constructor().copy(this)}}class zm extends vd{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Hm{constructor(e,t,r,s,d,i=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=s,this.count=d,this.normalized=i,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Vp=new Ui;class Zm{constructor(e,t,r=0,s=1/0){this.ray=new Oc(e,t),this.near=r,this.far=s,this.camera=null,this.layers=new Wl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Vp.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Vp),this}intersectObject(e,t=!0,r=[]){return hp(e,this,r,t),r.sort(Gp),r}intersectObjects(e,t=!0,r=[]){for(let s=0,d=e.length;s<d;s++)hp(e[s],this,r,t);return r.sort(Gp),r}}function Gp(M,e){return M.distance-e.distance}function hp(M,e,t,r){let s=!0;if(M.layers.test(e.layers)&&M.raycast(e,t)===!1&&(s=!1),s===!0&&r===!0){const d=M.children;for(let i=0,n=d.length;i<n;i++)hp(d[i],e,t,!0)}}class Vm{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Gm.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Gm(){this._document.hidden===!1&&this.reset()}class km{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ri(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ri(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Wm{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class pp{constructor(e,t,r,s){pp.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,s){const d=this.elements;return d[0]=e,d[2]=t,d[1]=r,d[3]=s,this}}const kp=new nn;class jm{constructor(e=new nn(1/0,1/0),t=new nn(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=kp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kp).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Wp=new ce,Ph=new ce,$f=new ce,Kf=new ce,Nh=new ce,Xm=new ce,$m=new ce;class Km{constructor(e=new ce,t=new ce){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Wp.subVectors(e,this.start),Ph.subVectors(this.end,this.start);const r=Ph.dot(Ph);let d=Ph.dot(Wp)/r;return t&&(d=Ri(d,0,1)),d}closestPointToPoint(e,t,r){const s=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(s).add(this.start)}distanceSqToLine3(e,t=Xm,r=$m){const s=10000000000000001e-32;let d,i;const n=this.start,c=e.start,u=this.end,h=e.end;$f.subVectors(u,n),Kf.subVectors(h,c),Nh.subVectors(n,c);const m=$f.dot($f),v=Kf.dot(Kf),y=Kf.dot(Nh);if(m<=s&&v<=s)return t.copy(n),r.copy(c),t.sub(r),t.dot(t);if(m<=s)d=0,i=y/v,i=Ri(i,0,1);else{const S=$f.dot(Nh);if(v<=s)i=0,d=Ri(-S/m,0,1);else{const b=$f.dot(Kf),T=m*v-b*b;T!==0?d=Ri((b*y-S*v)/T,0,1):d=0,i=(b*d+y)/v,i<0?(i=0,d=Ri(-S/m,0,1)):i>1&&(i=1,d=Ri((b-S)/m,0,1))}}return t.copy(n).add($f.multiplyScalar(d)),r.copy(c).add(Kf.multiplyScalar(i)),t.sub(r),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const jp=new ce;class Ym extends Se{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new H,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let i=0,n=1,c=32;i<c;i++,n++){const u=i/c*Math.PI*2,h=n/c*Math.PI*2;s.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new Wt(s,3));const d=new Qo({fog:!1,toneMapped:!1});this.cone=new ks(r,d),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),jp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jp),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bd=new ce,Oh=new Ui,mp=new Ui;class qm extends ks{constructor(e){const t=Xp(e),r=new H,s=[],d=[];for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),d.push(0,0,0),d.push(0,0,0))}r.setAttribute("position",new Wt(s,3)),r.setAttribute("color",new Wt(d,3));const i=new Qo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,i),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const n=new ot(255),c=new ot(65280);this.setColors(n,c)}updateMatrixWorld(e){const t=this.bones,r=this.geometry,s=r.getAttribute("position");mp.copy(this.root.matrixWorld).invert();for(let d=0,i=0;d<t.length;d++){const n=t[d];n.parent&&n.parent.isBone&&(Oh.multiplyMatrices(mp,n.matrixWorld),Bd.setFromMatrixPosition(Oh),s.setXYZ(i,Bd.x,Bd.y,Bd.z),Oh.multiplyMatrices(mp,n.parent.matrixWorld),Bd.setFromMatrixPosition(Oh),s.setXYZ(i+1,Bd.x,Bd.y,Bd.z),i+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const s=this.geometry.getAttribute("color");for(let d=0;d<s.count;d+=2)s.setXYZ(d,e.r,e.g,e.b),s.setXYZ(d+1,t.r,t.g,t.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xp(M){const e=[];M.isBone===!0&&e.push(M);for(let t=0;t<M.children.length;t++)e.push(...Xp(M.children[t]));return e}class Jm extends Un{constructor(e,t,r){const s=new Ql(t,4,2),d=new Rt({wireframe:!0,fog:!1,toneMapped:!1});super(s,d),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Qm=new ce,$p=new ot,Kp=new ot;class e0 extends Se{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const s=new js(t);s.rotateY(Math.PI*.5),this.material=new Rt({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const d=s.getAttribute("position"),i=new Float32Array(d.count*3);s.setAttribute("color",new Pt(i,3)),this.add(new Un(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");$p.copy(this.light.color),Kp.copy(this.light.groundColor);for(let r=0,s=t.count;r<s;r++){const d=r<s/2?$p:Kp;t.setXYZ(r,d.r,d.g,d.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Qm.setFromMatrixPosition(this.light.matrixWorld).negate())}}class t0 extends ks{constructor(e=10,t=10,r=4473924,s=8947848){r=new ot(r),s=new ot(s);const d=t/2,i=e/t,n=e/2,c=[],u=[];for(let v=0,y=0,S=-n;v<=t;v++,S+=i){c.push(-n,0,S,n,0,S),c.push(S,0,-n,S,0,n);const b=v===d?r:s;b.toArray(u,y),y+=3,b.toArray(u,y),y+=3,b.toArray(u,y),y+=3,b.toArray(u,y),y+=3}const h=new H;h.setAttribute("position",new Wt(c,3)),h.setAttribute("color",new Wt(u,3));const m=new Qo({vertexColors:!0,toneMapped:!1});super(h,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class n0 extends ks{constructor(e=10,t=16,r=8,s=64,d=4473924,i=8947848){d=new ot(d),i=new ot(i);const n=[],c=[];if(t>1)for(let m=0;m<t;m++){const v=m/t*(Math.PI*2),y=Math.sin(v)*e,S=Math.cos(v)*e;n.push(0,0,0),n.push(y,0,S);const b=m&1?d:i;c.push(b.r,b.g,b.b),c.push(b.r,b.g,b.b)}for(let m=0;m<r;m++){const v=m&1?d:i,y=e-e/r*m;for(let S=0;S<s;S++){let b=S/s*(Math.PI*2),T=Math.sin(b)*y,w=Math.cos(b)*y;n.push(T,0,w),c.push(v.r,v.g,v.b),b=(S+1)/s*(Math.PI*2),T=Math.sin(b)*y,w=Math.cos(b)*y,n.push(T,0,w),c.push(v.r,v.g,v.b)}}const u=new H;u.setAttribute("position",new Wt(n,3)),u.setAttribute("color",new Wt(c,3));const h=new Qo({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Yp=new ce,Dh=new ce,qp=new ce;class i0 extends Se{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new H;s.setAttribute("position",new Wt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const d=new Qo({fog:!1,toneMapped:!1});this.lightPlane=new Gs(s,d),this.add(this.lightPlane),s=new H,s.setAttribute("position",new Wt([0,0,0,0,0,1],3)),this.targetLine=new Gs(s,d),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Yp.setFromMatrixPosition(this.light.matrixWorld),Dh.setFromMatrixPosition(this.light.target.matrixWorld),qp.subVectors(Dh,Yp),this.lightPlane.lookAt(Dh),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dh),this.targetLine.scale.z=qp.length()}}const Lh=new ce,rs=new ia;class r0 extends ks{constructor(e){const t=new H,r=new Qo({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],d=[],i={};n("n1","n2"),n("n2","n4"),n("n4","n3"),n("n3","n1"),n("f1","f2"),n("f2","f4"),n("f4","f3"),n("f3","f1"),n("n1","f1"),n("n2","f2"),n("n3","f3"),n("n4","f4"),n("p","n1"),n("p","n2"),n("p","n3"),n("p","n4"),n("u1","u2"),n("u2","u3"),n("u3","u1"),n("c","t"),n("p","c"),n("cn1","cn2"),n("cn3","cn4"),n("cf1","cf2"),n("cf3","cf4");function n(S,b){c(S),c(b)}function c(S){s.push(0,0,0),d.push(0,0,0),i[S]===void 0&&(i[S]=[]),i[S].push(s.length/3-1)}t.setAttribute("position",new Wt(s,3)),t.setAttribute("color",new Wt(d,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=i,this.update();const u=new ot(16755200),h=new ot(16711680),m=new ot(43775),v=new ot(16777215),y=new ot(3355443);this.setColors(u,h,m,v,y)}setColors(e,t,r,s,d){const n=this.geometry.getAttribute("color");return n.setXYZ(0,e.r,e.g,e.b),n.setXYZ(1,e.r,e.g,e.b),n.setXYZ(2,e.r,e.g,e.b),n.setXYZ(3,e.r,e.g,e.b),n.setXYZ(4,e.r,e.g,e.b),n.setXYZ(5,e.r,e.g,e.b),n.setXYZ(6,e.r,e.g,e.b),n.setXYZ(7,e.r,e.g,e.b),n.setXYZ(8,e.r,e.g,e.b),n.setXYZ(9,e.r,e.g,e.b),n.setXYZ(10,e.r,e.g,e.b),n.setXYZ(11,e.r,e.g,e.b),n.setXYZ(12,e.r,e.g,e.b),n.setXYZ(13,e.r,e.g,e.b),n.setXYZ(14,e.r,e.g,e.b),n.setXYZ(15,e.r,e.g,e.b),n.setXYZ(16,e.r,e.g,e.b),n.setXYZ(17,e.r,e.g,e.b),n.setXYZ(18,e.r,e.g,e.b),n.setXYZ(19,e.r,e.g,e.b),n.setXYZ(20,e.r,e.g,e.b),n.setXYZ(21,e.r,e.g,e.b),n.setXYZ(22,e.r,e.g,e.b),n.setXYZ(23,e.r,e.g,e.b),n.setXYZ(24,t.r,t.g,t.b),n.setXYZ(25,t.r,t.g,t.b),n.setXYZ(26,t.r,t.g,t.b),n.setXYZ(27,t.r,t.g,t.b),n.setXYZ(28,t.r,t.g,t.b),n.setXYZ(29,t.r,t.g,t.b),n.setXYZ(30,t.r,t.g,t.b),n.setXYZ(31,t.r,t.g,t.b),n.setXYZ(32,r.r,r.g,r.b),n.setXYZ(33,r.r,r.g,r.b),n.setXYZ(34,r.r,r.g,r.b),n.setXYZ(35,r.r,r.g,r.b),n.setXYZ(36,r.r,r.g,r.b),n.setXYZ(37,r.r,r.g,r.b),n.setXYZ(38,s.r,s.g,s.b),n.setXYZ(39,s.r,s.g,s.b),n.setXYZ(40,d.r,d.g,d.b),n.setXYZ(41,d.r,d.g,d.b),n.setXYZ(42,d.r,d.g,d.b),n.setXYZ(43,d.r,d.g,d.b),n.setXYZ(44,d.r,d.g,d.b),n.setXYZ(45,d.r,d.g,d.b),n.setXYZ(46,d.r,d.g,d.b),n.setXYZ(47,d.r,d.g,d.b),n.setXYZ(48,d.r,d.g,d.b),n.setXYZ(49,d.r,d.g,d.b),n.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,r=1,s=1;let d,i;if(rs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)d=1,i=0;else if(this.camera.coordinateSystem===Or)d=-1,i=1;else if(this.camera.coordinateSystem===gl)d=0,i=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);vs("c",t,e,rs,0,0,d),vs("t",t,e,rs,0,0,i),vs("n1",t,e,rs,-r,-s,d),vs("n2",t,e,rs,r,-s,d),vs("n3",t,e,rs,-r,s,d),vs("n4",t,e,rs,r,s,d),vs("f1",t,e,rs,-r,-s,i),vs("f2",t,e,rs,r,-s,i),vs("f3",t,e,rs,-r,s,i),vs("f4",t,e,rs,r,s,i),vs("u1",t,e,rs,r*.7,s*1.1,d),vs("u2",t,e,rs,-r*.7,s*1.1,d),vs("u3",t,e,rs,0,s*2,d),vs("cf1",t,e,rs,-r,0,i),vs("cf2",t,e,rs,r,0,i),vs("cf3",t,e,rs,0,-s,i),vs("cf4",t,e,rs,0,s,i),vs("cn1",t,e,rs,-r,0,d),vs("cn2",t,e,rs,r,0,d),vs("cn3",t,e,rs,0,-s,d),vs("cn4",t,e,rs,0,s,d),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function vs(M,e,t,r,s,d,i){Lh.set(s,d,i).unproject(r);const n=e[M];if(n!==void 0){const c=t.getAttribute("position");for(let u=0,h=n.length;u<h;u++)c.setXYZ(n[u],Lh.x,Lh.y,Lh.z)}}const gh=new Uo;class a0 extends ks{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),d=new H;d.setIndex(new Pt(r,1)),d.setAttribute("position",new Pt(s,3)),super(d,new Qo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&gh.setFromObject(this.object),gh.isEmpty())return;const e=gh.min,t=gh.max,r=this.geometry.attributes.position,s=r.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class o0 extends ks{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],d=new H;d.setIndex(new Pt(r,1)),d.setAttribute("position",new Wt(s,3)),super(d,new Qo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class s0 extends Gs{constructor(e,t=1,r=16776960){const s=r,d=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],i=new H;i.setAttribute("position",new Wt(d,3)),i.computeBoundingSphere(),super(i,new Qo({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const n=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new H;c.setAttribute("position",new Wt(n,3)),c.computeBoundingSphere(),this.add(new Un(c,new Rt({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Uh=new ce;let Bh,vp;class Jp extends Se{constructor(e=new ce(0,0,1),t=new ce(0,0,0),r=1,s=16776960,d=r*.2,i=d*.2){super(),this.type="ArrowHelper",Bh===void 0&&(Bh=new H,Bh.setAttribute("position",new Wt([0,0,0,0,1,0],3)),vp=new ju(.5,1,5,1),vp.translate(0,-.5,0)),this.position.copy(t),this.line=new Gs(Bh,new Qo({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Un(vp,new Rt({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,d,i)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Uh.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Uh,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class l0 extends ks{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new H;s.setAttribute("position",new Wt(t,3)),s.setAttribute("color",new Wt(r,3));const d=new Qo({vertexColors:!0,toneMapped:!1});super(s,d),this.type="AxesHelper"}setColors(e,t,r){const s=new ot,d=this.geometry.attributes.color.array;return s.set(e),s.toArray(d,0),s.toArray(d,3),s.set(t),s.toArray(d,6),s.toArray(d,9),s.set(r),s.toArray(d,12),s.toArray(d,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Qp{constructor(){this.type="ShapePath",this.color=new ot,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ku,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,s){return this.currentPath.quadraticCurveTo(e,t,r,s),this}bezierCurveTo(e,t,r,s,d,i){return this.currentPath.bezierCurveTo(e,t,r,s,d,i),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const A=[];for(let I=0,P=w.length;I<P;I++){const B=w[I],L=new pl;L.curves=B.curves,A.push(L)}return A}function r(w,A){const I=A.length;let P=!1;for(let B=I-1,L=0;L<I;B=L++){let z=A[B],Z=A[L],W=Z.x-z.x,J=Z.y-z.y;if(Math.abs(J)>Number.EPSILON){if(J<0&&(z=A[L],W=-W,Z=A[B],J=-J),w.y<z.y||w.y>Z.y)continue;if(w.y===z.y){if(w.x===z.x)return!0}else{const ue=J*(w.x-z.x)-W*(w.y-z.y);if(ue===0)return!0;if(ue<0)continue;P=!P}}else{if(w.y!==z.y)continue;if(Z.x<=w.x&&w.x<=z.x||z.x<=w.x&&w.x<=Z.x)return!0}}return P}const s=is.isClockWise,d=this.subPaths;if(d.length===0)return[];let i,n,c;const u=[];if(d.length===1)return n=d[0],c=new pl,c.curves=n.curves,u.push(c),u;let h=!s(d[0].getPoints());h=e?!h:h;const m=[],v=[];let y=[],S=0,b;v[S]=void 0,y[S]=[];for(let w=0,A=d.length;w<A;w++)n=d[w],b=n.getPoints(),i=s(b),i=e?!i:i,i?(!h&&v[S]&&S++,v[S]={s:new pl,p:b},v[S].s.curves=n.curves,h&&S++,y[S]=[]):y[S].push({h:n,p:b[0]});if(!v[0])return t(d);if(v.length>1){let w=!1,A=0;for(let I=0,P=v.length;I<P;I++)m[I]=[];for(let I=0,P=v.length;I<P;I++){const B=y[I];for(let L=0;L<B.length;L++){const z=B[L];let Z=!0;for(let W=0;W<v.length;W++)r(z.p,v[W].p)&&(I!==W&&A++,Z?(Z=!1,m[W].push(z)):w=!0);Z&&m[I].push(z)}}A>0&&w===!1&&(y=m)}let T;for(let w=0,A=v.length;w<A;w++){c=v[w].s,u.push(c),T=y[w];for(let I=0,P=T.length;I<P;I++)c.holes.push(T[I].h)}return u}}class c0 extends Ts{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function u0(M,e){const t=M.image&&M.image.width?M.image.width/M.image.height:1;return t>e?(M.repeat.x=1,M.repeat.y=t/e,M.offset.x=0,M.offset.y=(1-M.repeat.y)/2):(M.repeat.x=e/t,M.repeat.y=1,M.offset.x=(1-M.repeat.x)/2,M.offset.y=0),M}function d0(M,e){const t=M.image&&M.image.width?M.image.width/M.image.height:1;return t>e?(M.repeat.x=e/t,M.repeat.y=1,M.offset.x=(1-M.repeat.x)/2,M.offset.y=0):(M.repeat.x=1,M.repeat.y=t/e,M.offset.x=0,M.offset.y=(1-M.repeat.y)/2),M}function f0(M){return M.repeat.x=1,M.repeat.y=1,M.offset.x=0,M.offset.y=0,M}function em(M,e,t,r){const s=tm(r);switch(t){case Ln:return M*e;case ho:return M*e/s.components*s.byteLength;case Oa:return M*e/s.components*s.byteLength;case Vo:return M*e*2/s.components*s.byteLength;case Te:return M*e*2/s.components*s.byteLength;case gr:return M*e*3/s.components*s.byteLength;case Ni:return M*e*4/s.components*s.byteLength;case Et:return M*e*4/s.components*s.byteLength;case lt:case an:return Math.floor((M+3)/4)*Math.floor((e+3)/4)*8;case Oi:case Br:return Math.floor((M+3)/4)*Math.floor((e+3)/4)*16;case _i:case cr:return Math.max(M,16)*Math.max(e,8)/4;case Fr:case Ai:return Math.max(M,8)*Math.max(e,8)/2;case Aa:case yr:return Math.floor((M+3)/4)*Math.floor((e+3)/4)*8;case ro:return Math.floor((M+3)/4)*Math.floor((e+3)/4)*16;case Do:return Math.floor((M+3)/4)*Math.floor((e+3)/4)*16;case To:return Math.floor((M+4)/5)*Math.floor((e+3)/4)*16;case Go:return Math.floor((M+4)/5)*Math.floor((e+4)/5)*16;case zr:return Math.floor((M+5)/6)*Math.floor((e+4)/5)*16;case po:return Math.floor((M+5)/6)*Math.floor((e+5)/6)*16;case da:return Math.floor((M+7)/8)*Math.floor((e+4)/5)*16;case Di:return Math.floor((M+7)/8)*Math.floor((e+5)/6)*16;case Ya:return Math.floor((M+7)/8)*Math.floor((e+7)/8)*16;case So:return Math.floor((M+9)/10)*Math.floor((e+4)/5)*16;case _a:return Math.floor((M+9)/10)*Math.floor((e+5)/6)*16;case Es:return Math.floor((M+9)/10)*Math.floor((e+7)/8)*16;case Bl:return Math.floor((M+9)/10)*Math.floor((e+9)/10)*16;case Cs:return Math.floor((M+11)/12)*Math.floor((e+9)/10)*16;case ls:return Math.floor((M+11)/12)*Math.floor((e+11)/12)*16;case $s:case Lo:case Ma:return Math.ceil(M/4)*Math.ceil(e/4)*16;case wo:case F:return Math.ceil(M/4)*Math.ceil(e/4)*8;case G:case ne:return Math.ceil(M/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function tm(M){switch(M){case co:case ss:return{byteLength:1,components:1};case $a:case ua:case $o:return{byteLength:2,components:1};case Zo:case fo:return{byteLength:2,components:4};case Co:case Ka:case uo:return{byteLength:4,components:1};case Yt:case zn:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${M}.`)}class h0{static contain(e,t){return u0(e,t)}static cover(e,t){return d0(e,t)}static fill(e){return f0(e)}static getByteLength(e,t,r,s){return em(e,t,r,s)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:p}})),typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=p)},99477:function(Li,hn,k){"use strict";k.r(hn),k.d(hn,{ACESFilmicToneMapping:function(){return p.LY2},AddEquation:function(){return p.bGH},AddOperation:function(){return p.NDo},AdditiveAnimationBlendMode:function(){return p.gSk},AdditiveBlending:function(){return p.WMw},AgXToneMapping:function(){return p.Bgp},AlphaFormat:function(){return p.OTo},AlwaysCompare:function(){return p.T6w},AlwaysDepth:function(){return p.Se2},AlwaysStencilFunc:function(){return p.cum},AmbientLight:function(){return p.Mig},AnimationAction:function(){return p.bBp},AnimationClip:function(){return p.m7l},AnimationLoader:function(){return p.sYA},AnimationMixer:function(){return p.Xcj},AnimationObjectGroup:function(){return p.mzJ},AnimationUtils:function(){return p.ZZA},ArcCurve:function(){return p.T__},ArrayCamera:function(){return p.HkE},ArrowHelper:function(){return p.tGC},AttachedBindMode:function(){return p.$wi},Audio:function(){return p.BbS},AudioAnalyser:function(){return p.kqm},AudioContext:function(){return p.Hmr},AudioListener:function(){return p.SJI},AudioLoader:function(){return p.mTL},AxesHelper:function(){return p.y8_},BackSide:function(){return p._Li},BasicDepthPacking:function(){return p.z81},BasicShadowMap:function(){return p._MY},BatchedMesh:function(){return p.zwN},Bone:function(){return p.N$j},BooleanKeyframeTrack:function(){return p._YM},Box2:function(){return p.TUj},Box3:function(){return p.ZzF},Box3Helper:function(){return p.GQ},BoxGeometry:function(){return p.DvJ},BoxHelper:function(){return p.fQA},BufferAttribute:function(){return p.TlE},BufferGeometry:function(){return p.u9r},BufferGeometryLoader:function(){return p.s4_},ByteType:function(){return p.T95},Cache:function(){return p.CtF},Camera:function(){return p.V1s},CameraHelper:function(){return p.Rki},CanvasTexture:function(){return p.ROQ},CapsuleGeometry:function(){return p.BVQ},CatmullRomCurve3:function(){return p.YT8},CineonToneMapping:function(){return p.YGz},CircleGeometry:function(){return p.zf8},ClampToEdgeWrapping:function(){return p.uWy},Clock:function(){return p.SUY},Color:function(){return p.Ilk},ColorKeyframeTrack:function(){return p.R2R},ColorManagement:function(){return p.epp},CompressedArrayTexture:function(){return p.Z_g},CompressedCubeTexture:function(){return p.qVC},CompressedTexture:function(){return p.EB7},CompressedTextureLoader:function(){return p.DqL},ConeGeometry:function(){return p.b_z},ConstantAlphaFactor:function(){return p.jes},ConstantColorFactor:function(){return p._wr},Controls:function(){return p.ZXd},CubeCamera:function(){return p._am},CubeReflectionMapping:function(){return p.fY$},CubeRefractionMapping:function(){return p.vxC},CubeTexture:function(){return p.BtG},CubeTextureLoader:function(){return p.cBK},CubeUVReflectionMapping:function(){return p.g8_},CubicBezierCurve:function(){return p.AXT},CubicBezierCurve3:function(){return p.yj7},CubicInterpolant:function(){return p.dYG},CullFaceBack:function(){return p.tm_},CullFaceFront:function(){return p.S2y},CullFaceFrontBack:function(){return p.B02},CullFaceNone:function(){return p.PeU},Curve:function(){return p.Hyl},CurvePath:function(){return p.Wqd},CustomBlending:function(){return p.Xaj},CustomToneMapping:function(){return p.dZ3},CylinderGeometry:function(){return p.fHI},Cylindrical:function(){return p.LBq},Data3DTexture:function(){return p.JUT},DataArrayTexture:function(){return p.p3g},DataTexture:function(){return p.IEO},DataTextureLoader:function(){return p.yxD},DataUtils:function(){return p.A5E},DecrementStencilOp:function(){return p.jfJ},DecrementWrapStencilOp:function(){return p.T_J},DefaultLoadingManager:function(){return p.tEQ},DepthFormat:function(){return p.qkB},DepthStencilFormat:function(){return p.brP},DepthTexture:function(){return p.$YQ},DetachedBindMode:function(){return p.msZ},DirectionalLight:function(){return p.Ox3},DirectionalLightHelper:function(){return p.cBI},DiscreteInterpolant:function(){return p.cU9},DodecahedronGeometry:function(){return p.Kgo},DoubleSide:function(){return p.ehD},DstAlphaFactor:function(){return p.fSK},DstColorFactor:function(){return p.Vdb},DynamicCopyUsage:function(){return p.l8J},DynamicDrawUsage:function(){return p.dj0},DynamicReadUsage:function(){return p.QM0},EdgesGeometry:function(){return p.TOt},EllipseCurve:function(){return p.Ny0},EqualCompare:function(){return p.F1y},EqualDepth:function(){return p.eD},EqualStencilFunc:function(){return p.jwo},EquirectangularReflectionMapping:function(){return p.dSO},EquirectangularRefractionMapping:function(){return p.Bf4},Euler:function(){return p.USm},EventDispatcher:function(){return p.pBf},ExternalTexture:function(){return p.xnb},ExtrudeGeometry:function(){return p.O7d},FileLoader:function(){return p.hH6},Float16BufferAttribute:function(){return p.e62},Float32BufferAttribute:function(){return p.a$l},FloatType:function(){return p.VzW},Fog:function(){return p.ybr},FogExp2:function(){return p.yo9},FramebufferTexture:function(){return p.Wzm},FrontSide:function(){return p.Wl3},Frustum:function(){return p.iWj},FrustumArray:function(){return p.gJg},GLBufferAttribute:function(){return p.ylh},GLSL1:function(){return p.v9Y},GLSL3:function(){return p.LSk},GreaterCompare:function(){return p.Zen},GreaterDepth:function(){return p.w$m},GreaterEqualCompare:function(){return p.Jjb},GreaterEqualDepth:function(){return p.ksN},GreaterEqualStencilFunc:function(){return p.j4z},GreaterStencilFunc:function(){return p.OAl},GridHelper:function(){return p.VLJ},Group:function(){return p.ZAu},HalfFloatType:function(){return p.cLu},HemisphereLight:function(){return p.vmT},HemisphereLightHelper:function(){return p.Qpg},IcosahedronGeometry:function(){return p.cJO},ImageBitmapLoader:function(){return p.QRU},ImageLoader:function(){return p.S3k},ImageUtils:function(){return p.PpQ},IncrementStencilOp:function(){return p.ZRs},IncrementWrapStencilOp:function(){return p.oqc},InstancedBufferAttribute:function(){return p.lb7},InstancedBufferGeometry:function(){return p.L5s},InstancedInterleavedBuffer:function(){return p.$TI},InstancedMesh:function(){return p.SPe},Int16BufferAttribute:function(){return p.aVm},Int32BufferAttribute:function(){return p.j87},Int8BufferAttribute:function(){return p.RNb},IntType:function(){return p.Kz5},InterleavedBuffer:function(){return p.vpT},InterleavedBufferAttribute:function(){return p.kB5},Interpolant:function(){return p._C8},InterpolateDiscrete:function(){return p.Syv},InterpolateLinear:function(){return p.NMF},InterpolateSmooth:function(){return p.pIN},InterpolationSamplingMode:function(){return p.zT$},InterpolationSamplingType:function(){return p.cE1},InvertStencilOp:function(){return p.eMJ},KeepStencilOp:function(){return p.x5V},KeyframeTrack:function(){return p.tUh},LOD:function(){return p.z8B},LatheGeometry:function(){return p.p7y},Layers:function(){return p.S9g},LessCompare:function(){return p.D67},LessDepth:function(){return p.Zr5},LessEqualCompare:function(){return p.M$G},LessEqualDepth:function(){return p.vCF},LessEqualStencilFunc:function(){return p.yt0},LessStencilFunc:function(){return p.uXU},Light:function(){return p._kC},LightProbe:function(){return p.lk7},Line:function(){return p.x12},Line3:function(){return p.Zzh},LineBasicMaterial:function(){return p.nls},LineCurve:function(){return p.g_z},LineCurve3:function(){return p.U7},LineDashedMaterial:function(){return p.FT0},LineLoop:function(){return p.blk},LineSegments:function(){return p.ejS},LinearFilter:function(){return p.wem},LinearInterpolant:function(){return p.lfu},LinearMipMapLinearFilter:function(){return p.FDw},LinearMipMapNearestFilter:function(){return p.lRj},LinearMipmapLinearFilter:function(){return p.D1R},LinearMipmapNearestFilter:function(){return p.qyh},LinearSRGBColorSpace:function(){return p.GUF},LinearToneMapping:function(){return p.EoG},LinearTransfer:function(){return p.l6D},Loader:function(){return p.aNw},LoaderUtils:function(){return p.Zp0},LoadingManager:function(){return p.lLk},LoopOnce:function(){return p.jAl},LoopPingPong:function(){return p.uEv},LoopRepeat:function(){return p.YKA},MOUSE:function(){return p.RsA},Material:function(){return p.F5T},MaterialLoader:function(){return p.u7G},MathUtils:function(){return p.M8C},Matrix2:function(){return p.UcC},Matrix3:function(){return p.Vkp},Matrix4:function(){return p.yGw},MaxEquation:function(){return p.Sm8},Mesh:function(){return p.Kj0},MeshBasicMaterial:function(){return p.vBJ},MeshDepthMaterial:function(){return p.lRF},MeshDistanceMaterial:function(){return p.Lun},MeshLambertMaterial:function(){return p.YBo},MeshMatcapMaterial:function(){return p.kaV},MeshNormalMaterial:function(){return p.RSm},MeshPhongMaterial:function(){return p.xoR},MeshPhysicalMaterial:function(){return p.EJi},MeshStandardMaterial:function(){return p.Wid},MeshToonMaterial:function(){return p.IKL},MinEquation:function(){return p.r_},MirroredRepeatWrapping:function(){return p.OoA},MixOperation:function(){return p.qhX},MultiplyBlending:function(){return p.M5h},MultiplyOperation:function(){return p.Ns1},NearestFilter:function(){return p.TyD},NearestMipMapLinearFilter:function(){return p.vZf},NearestMipMapNearestFilter:function(){return p.HTd},NearestMipmapLinearFilter:function(){return p.aH4},NearestMipmapNearestFilter:function(){return p.YLQ},NeutralToneMapping:function(){return p.ORg},NeverCompare:function(){return p.xoQ},NeverDepth:function(){return p.BVF},NeverStencilFunc:function(){return p.MyG},NoBlending:function(){return p.jFi},NoColorSpace:function(){return p.aCh},NoToneMapping:function(){return p.uL9},NormalAnimationBlendMode:function(){return p.IFH},NormalBlending:function(){return p.bdR},NotEqualCompare:function(){return p.O78},NotEqualDepth:function(){return p.M6v},NotEqualStencilFunc:function(){return p.RvT},NumberKeyframeTrack:function(){return p.dUE},Object3D:function(){return p.Tme},ObjectLoader:function(){return p.Gql},ObjectSpaceNormalMap:function(){return p.PA7},OctahedronGeometry:function(){return p.pQR},OneFactor:function(){return p.ghN},OneMinusConstantAlphaFactor:function(){return p.NKc},OneMinusConstantColorFactor:function(){return p.Cy},OneMinusDstAlphaFactor:function(){return p.Hy8},OneMinusDstColorFactor:function(){return p.Wpd},OneMinusSrcAlphaFactor:function(){return p.LgZ},OneMinusSrcColorFactor:function(){return p.iWC},OrthographicCamera:function(){return p.iKG},PCFShadowMap:function(){return p._iA},PCFSoftShadowMap:function(){return p.ntZ},PMREMGenerator:function(){return Fl},Path:function(){return p.y$t},PerspectiveCamera:function(){return p.cPb},Plane:function(){return p.JOQ},PlaneGeometry:function(){return p._12},PlaneHelper:function(){return p.tJx},PointLight:function(){return p.cek},PointLightHelper:function(){return p.xG9},Points:function(){return p.woe},PointsMaterial:function(){return p.UY4},PolarGridHelper:function(){return p.aq0},PolyhedronGeometry:function(){return p.Uol},PositionalAudio:function(){return p.VYz},PropertyBinding:function(){return p.iUV},PropertyMixer:function(){return p.tf},QuadraticBezierCurve:function(){return p.ZQ6},QuadraticBezierCurve3:function(){return p.mXe},Quaternion:function(){return p._fP},QuaternionKeyframeTrack:function(){return p.iLg},QuaternionLinearInterpolant:function(){return p.zbs},RED_GREEN_RGTC2_Format:function(){return p.ZTh},RED_RGTC1_Format:function(){return p.HdW},REVISION:function(){return p.UZH},RGBADepthPacking:function(){return p.mSO},RGBAFormat:function(){return p.wk1},RGBAIntegerFormat:function(){return p.E2K},RGBA_ASTC_10x10_Format:function(){return p.FUD},RGBA_ASTC_10x5_Format:function(){return p.pKu},RGBA_ASTC_10x6_Format:function(){return p.GG6},RGBA_ASTC_10x8_Format:function(){return p.Gih},RGBA_ASTC_12x10_Format:function(){return p.iiP},RGBA_ASTC_12x12_Format:function(){return p.SvJ},RGBA_ASTC_4x4_Format:function(){return p.ptH},RGBA_ASTC_5x4_Format:function(){return p.jZA},RGBA_ASTC_5x5_Format:function(){return p.y2t},RGBA_ASTC_6x5_Format:function(){return p.gi4},RGBA_ASTC_6x6_Format:function(){return p.Djp},RGBA_ASTC_8x5_Format:function(){return p.BG$},RGBA_ASTC_8x6_Format:function(){return p.NYV},RGBA_ASTC_8x8_Format:function(){return p.xJs},RGBA_BPTC_Format:function(){return p.bsb},RGBA_ETC2_EAC_Format:function(){return p.ekQ},RGBA_PVRTC_2BPPV1_Format:function(){return p.CaW},RGBA_PVRTC_4BPPV1_Format:function(){return p.eaV},RGBA_S3TC_DXT1_Format:function(){return p.BFQ},RGBA_S3TC_DXT3_Format:function(){return p.v3W},RGBA_S3TC_DXT5_Format:function(){return p.ILR},RGBDepthPacking:function(){return p._7h},RGBFormat:function(){return p.UCm},RGBIntegerFormat:function(){return p.F5G},RGB_BPTC_SIGNED_Format:function(){return p.f2y},RGB_BPTC_UNSIGNED_Format:function(){return p.QO2},RGB_ETC1_Format:function(){return p.fto},RGB_ETC2_Format:function(){return p.l0P},RGB_PVRTC_2BPPV1_Format:function(){return p.vCx},RGB_PVRTC_4BPPV1_Format:function(){return p._AM},RGB_S3TC_DXT1_Format:function(){return p.wuA},RGDepthPacking:function(){return p.PzK},RGFormat:function(){return p.av9},RGIntegerFormat:function(){return p.CtA},RawShaderMaterial:function(){return p.FIo},Ray:function(){return p.zHn},Raycaster:function(){return p.iMs},RectAreaLight:function(){return p.T_f},RedFormat:function(){return p.hEm},RedIntegerFormat:function(){return p.D9w},ReinhardToneMapping:function(){return p.CdI},RenderTarget:function(){return p.ACn},RenderTarget3D:function(){return p.ppL},RepeatWrapping:function(){return p.rpg},ReplaceStencilOp:function(){return p.ce8},ReverseSubtractEquation:function(){return p.rOj},RingGeometry:function(){return p.o8S},SIGNED_RED_GREEN_RGTC2_Format:function(){return p.lGU},SIGNED_RED_RGTC1_Format:function(){return p.vuL},SRGBColorSpace:function(){return p.KI_},SRGBTransfer:function(){return p.j17},Scene:function(){return p.xsS},ShaderChunk:function(){return Ut},ShaderLib:function(){return li},ShaderMaterial:function(){return p.jyz},ShadowMaterial:function(){return p.Tn7},Shape:function(){return p.bnF},ShapeGeometry:function(){return p.oa8},ShapePath:function(){return p.T_1},ShapeUtils:function(){return p.iDF},ShortType:function(){return p.iAb},Skeleton:function(){return p.OdW},SkeletonHelper:function(){return p._YX},SkinnedMesh:function(){return p.TUv},Source:function(){return p.Hw6},Sphere:function(){return p.aLr},SphereGeometry:function(){return p.xo$},Spherical:function(){return p.$V},SphericalHarmonics3:function(){return p.lDi},SplineCurve:function(){return p.gti},SpotLight:function(){return p.PMe},SpotLightHelper:function(){return p.FvO},Sprite:function(){return p.jyi},SpriteMaterial:function(){return p.xeV},SrcAlphaFactor:function(){return p.k74},SrcAlphaSaturateFactor:function(){return p.RlZ},SrcColorFactor:function(){return p.KhW},StaticCopyUsage:function(){return p.HgB},StaticDrawUsage:function(){return p.W2J},StaticReadUsage:function(){return p.JWc},StereoCamera:function(){return p.u37},StreamCopyUsage:function(){return p.Z6B},StreamDrawUsage:function(){return p.QZ1},StreamReadUsage:function(){return p.Ir4},StringKeyframeTrack:function(){return p.NwF},SubtractEquation:function(){return p.Wbm},SubtractiveBlending:function(){return p.N4l},TOUCH:function(){return p.QmN},TangentSpaceNormalMap:function(){return p.IOt},TetrahedronGeometry:function(){return p.H$k},Texture:function(){return p.xEZ},TextureLoader:function(){return p.dpR},TextureUtils:function(){return p.Oau},Timer:function(){return p.B7y},TimestampQuery:function(){return p.eS_},TorusGeometry:function(){return p.XvJ},TorusKnotGeometry:function(){return p.FE5},Triangle:function(){return p.CJI},TriangleFanDrawMode:function(){return p.z$h},TriangleStripDrawMode:function(){return p.UlW},TrianglesDrawMode:function(){return p.WwZ},TubeGeometry:function(){return p.WXh},UVMapping:function(){return p.xfE},Uint16BufferAttribute:function(){return p.qlB},Uint32BufferAttribute:function(){return p.lCJ},Uint8BufferAttribute:function(){return p.WTc},Uint8ClampedBufferAttribute:function(){return p.rAo},Uniform:function(){return p.xWb},UniformsGroup:function(){return p.gH0},UniformsLib:function(){return St},UniformsUtils:function(){return p.rDY},UnsignedByteType:function(){return p.ywz},UnsignedInt101111Type:function(){return p.dVD},UnsignedInt248Type:function(){return p.wJv},UnsignedInt5999Type:function(){return p.tQZ},UnsignedIntType:function(){return p.JQ4},UnsignedShort4444Type:function(){return p.k0A},UnsignedShort5551Type:function(){return p.irR},UnsignedShortType:function(){return p.LsT},VSMShadowMap:function(){return p.dwk},Vector2:function(){return p.FM8},Vector3:function(){return p.Pa4},Vector4:function(){return p.Ltg},VectorKeyframeTrack:function(){return p.yC1},VideoFrameTexture:function(){return p.v2s},VideoTexture:function(){return p.fO1},WebGL3DRenderTarget:function(){return p.Ywn},WebGLArrayRenderTarget:function(){return p.GVz},WebGLCoordinateSystem:function(){return p._RZ},WebGLCubeRenderTarget:function(){return p.oAp},WebGLRenderTarget:function(){return p.dd2},WebGLRenderer:function(){return sc},WebGLUtils:function(){return Us},WebGPUCoordinateSystem:function(){return p.JCZ},WebXRController:function(){return p.NiX},WireframeGeometry:function(){return p.Uk6},WrapAroundEnding:function(){return p._sL},ZeroCurvatureEnding:function(){return p.Pnf},ZeroFactor:function(){return p.c8b},ZeroSlopeEnding:function(){return p._lf},ZeroStencilOp:function(){return p.ad5},createCanvasElement:function(){return p.O5A}});var p=k(74250);function he(){let g=null,R=!1,_=null,U=null;function q($,fe){_($,fe),U=g.requestAnimationFrame(q)}return{start:function(){R!==!0&&_!==null&&(U=g.requestAnimationFrame(q),R=!0)},stop:function(){g.cancelAnimationFrame(U),R=!1},setAnimationLoop:function($){_=$},setContext:function($){g=$}}}function mn(g){const R=new WeakMap;function _(ae,rt){const ze=ae.array,ut=ae.usage,Se=ze.byteLength,Ie=g.createBuffer();g.bindBuffer(rt,Ie),g.bufferData(rt,ze,ut),ae.onUploadCallback();let He;if(ze instanceof Float32Array)He=g.FLOAT;else if(typeof Float16Array!="undefined"&&ze instanceof Float16Array)He=g.HALF_FLOAT;else if(ze instanceof Uint16Array)ae.isFloat16BufferAttribute?He=g.HALF_FLOAT:He=g.UNSIGNED_SHORT;else if(ze instanceof Int16Array)He=g.SHORT;else if(ze instanceof Uint32Array)He=g.UNSIGNED_INT;else if(ze instanceof Int32Array)He=g.INT;else if(ze instanceof Int8Array)He=g.BYTE;else if(ze instanceof Uint8Array)He=g.UNSIGNED_BYTE;else if(ze instanceof Uint8ClampedArray)He=g.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+ze);return{buffer:Ie,type:He,bytesPerElement:ze.BYTES_PER_ELEMENT,version:ae.version,size:Se}}function U(ae,rt,ze){const ut=rt.array,Se=rt.updateRanges;if(g.bindBuffer(ze,ae),Se.length===0)g.bufferSubData(ze,0,ut);else{Se.sort((He,At)=>He.start-At.start);let Ie=0;for(let He=1;He<Se.length;He++){const At=Se[Ie],Pe=Se[He];Pe.start<=At.start+At.count+1?At.count=Math.max(At.count,Pe.start+Pe.count-At.start):(++Ie,Se[Ie]=Pe)}Se.length=Ie+1;for(let He=0,At=Se.length;He<At;He++){const Pe=Se[He];g.bufferSubData(ze,Pe.start*ut.BYTES_PER_ELEMENT,ut,Pe.start,Pe.count)}rt.clearUpdateRanges()}rt.onUploadCallback()}function q(ae){return ae.isInterleavedBufferAttribute&&(ae=ae.data),R.get(ae)}function $(ae){ae.isInterleavedBufferAttribute&&(ae=ae.data);const rt=R.get(ae);rt&&(g.deleteBuffer(rt.buffer),R.delete(ae))}function fe(ae,rt){if(ae.isInterleavedBufferAttribute&&(ae=ae.data),ae.isGLBufferAttribute){const ut=R.get(ae);(!ut||ut.version<ae.version)&&R.set(ae,{buffer:ae.buffer,type:ae.type,bytesPerElement:ae.elementSize,version:ae.version});return}const ze=R.get(ae);if(ze===void 0)R.set(ae,_(ae,rt));else if(ze.version<ae.version){if(ze.size!==ae.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");U(ze.buffer,ae,rt),ze.version=ae.version}}return{get:q,remove:$,update:fe}}var Ue=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,j=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,en=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,D=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dn=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Kr=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ei=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Mt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,hi=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,di=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Xi=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,st=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ln=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,tn=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,C=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Nt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,wn=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Wn=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,O=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Vi=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Pn=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,An=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Dn=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Mr=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Hi=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Rr=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Kn=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$n=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,pi="gl_FragColor = linearToOutputTexel( gl_FragColor );",ii=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Er=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Lr=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ha=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Kt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,En=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rn=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Mn=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ci=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Rn=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,sr=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Yr=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ir=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Yi=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Za=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ma=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xr=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ta=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,qi=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Pr=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Cr=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lr=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ba=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,la=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Ur=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,lo=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yo=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nr=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,io=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,X=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,It=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ht=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Tn=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Yn=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,vi=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ca=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Gi=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,vr=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,na=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Nr=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,xo=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Va=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,va=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,os=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,co=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ss=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ua=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$a=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Ka=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Co=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,uo=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$o=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Zo=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,fo=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Ae=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,zn=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Ln=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gr=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Ni=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,fr=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,qr=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ho=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Oa=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Vo=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Te=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,_t=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Et=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,lt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,an=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Oi=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Br=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Fr=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_i=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ut={alphahash_fragment:Ue,alphahash_pars_fragment:j,alphamap_fragment:en,alphamap_pars_fragment:D,alphatest_fragment:dn,alphatest_pars_fragment:Kr,aomap_fragment:Ei,aomap_pars_fragment:Mt,batching_pars_vertex:hi,batching_vertex:di,begin_vertex:Xi,beginnormal_vertex:st,bsdfs:ln,iridescence_fragment:tn,bumpmap_pars_fragment:C,clipping_planes_fragment:Nt,clipping_planes_pars_fragment:wn,clipping_planes_pars_vertex:Wn,clipping_planes_vertex:O,color_fragment:Vi,color_pars_fragment:Pn,color_pars_vertex:An,color_vertex:Dn,common:jt,cube_uv_reflection_fragment:Mr,defaultnormal_vertex:Hi,displacementmap_pars_vertex:Rr,displacementmap_vertex:qt,emissivemap_fragment:Kn,emissivemap_pars_fragment:$n,colorspace_fragment:pi,colorspace_pars_fragment:ii,envmap_fragment:Er,envmap_common_pars_fragment:Lr,envmap_pars_fragment:Ha,envmap_pars_vertex:xt,envmap_physical_pars_fragment:Za,envmap_vertex:Kt,fog_vertex:En,fog_pars_vertex:rn,fog_fragment:Mn,fog_pars_fragment:Ci,gradientmap_pars_fragment:Rn,lightmap_pars_fragment:sr,lights_lambert_fragment:Yr,lights_lambert_pars_fragment:Ir,lights_pars_begin:Yi,lights_toon_fragment:ma,lights_toon_pars_fragment:xr,lights_phong_fragment:ta,lights_phong_pars_fragment:qi,lights_physical_fragment:Pr,lights_physical_pars_fragment:Cr,lights_fragment_begin:lr,lights_fragment_maps:ba,lights_fragment_end:la,logdepthbuf_fragment:Ur,logdepthbuf_pars_fragment:lo,logdepthbuf_pars_vertex:yo,logdepthbuf_vertex:nr,map_fragment:io,map_pars_fragment:X,map_particle_fragment:xe,map_particle_pars_fragment:It,metalnessmap_fragment:Ht,metalnessmap_pars_fragment:Tn,morphinstance_vertex:Yn,morphcolor_vertex:vi,morphnormal_vertex:ca,morphtarget_pars_vertex:Gi,morphtarget_vertex:vr,normal_fragment_begin:na,normal_fragment_maps:Nr,normal_pars_fragment:xo,normal_pars_vertex:Va,normal_vertex:va,normalmap_pars_fragment:os,clearcoat_normal_fragment_begin:co,clearcoat_normal_fragment_maps:ss,clearcoat_pars_fragment:ua,iridescence_pars_fragment:$a,opaque_fragment:Ka,packing:Co,premultiplied_alpha_fragment:uo,project_vertex:$o,dithering_fragment:Zo,dithering_pars_fragment:fo,roughnessmap_fragment:Ae,roughnessmap_pars_fragment:Yt,shadowmap_pars_fragment:zn,shadowmap_pars_vertex:Ln,shadowmap_vertex:gr,shadowmask_pars_fragment:Ni,skinbase_vertex:fr,skinning_pars_vertex:qr,skinning_vertex:ho,skinnormal_vertex:Oa,specularmap_fragment:Vo,specularmap_pars_fragment:Te,tonemapping_fragment:_t,tonemapping_pars_fragment:Et,transmission_fragment:lt,transmission_pars_fragment:an,uv_pars_fragment:Oi,uv_pars_vertex:Br,uv_vertex:Fr,worldpos_vertex:_i,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},St={common:{diffuse:{value:new p.Ilk(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new p.Vkp},alphaMap:{value:null},alphaMapTransform:{value:new p.Vkp},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new p.Vkp}},envmap:{envMap:{value:null},envMapRotation:{value:new p.Vkp},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new p.Vkp}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new p.Vkp}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new p.Vkp},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new p.Vkp},normalScale:{value:new p.FM8(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new p.Vkp},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new p.Vkp}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new p.Vkp}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new p.Vkp}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new p.Ilk(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new p.Ilk(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new p.Vkp},alphaTest:{value:0},uvTransform:{value:new p.Vkp}},sprite:{diffuse:{value:new p.Ilk(16777215)},opacity:{value:1},center:{value:new p.FM8(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new p.Vkp},alphaMap:{value:null},alphaMapTransform:{value:new p.Vkp},alphaTest:{value:0}}},li={basic:{uniforms:(0,p.Rhp)([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.fog]),vertexShader:Ut.meshbasic_vert,fragmentShader:Ut.meshbasic_frag},lambert:{uniforms:(0,p.Rhp)([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.fog,St.lights,{emissive:{value:new p.Ilk(0)}}]),vertexShader:Ut.meshlambert_vert,fragmentShader:Ut.meshlambert_frag},phong:{uniforms:(0,p.Rhp)([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.fog,St.lights,{emissive:{value:new p.Ilk(0)},specular:{value:new p.Ilk(1118481)},shininess:{value:30}}]),vertexShader:Ut.meshphong_vert,fragmentShader:Ut.meshphong_frag},standard:{uniforms:(0,p.Rhp)([St.common,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.roughnessmap,St.metalnessmap,St.fog,St.lights,{emissive:{value:new p.Ilk(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag},toon:{uniforms:(0,p.Rhp)([St.common,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.gradientmap,St.fog,St.lights,{emissive:{value:new p.Ilk(0)}}]),vertexShader:Ut.meshtoon_vert,fragmentShader:Ut.meshtoon_frag},matcap:{uniforms:(0,p.Rhp)([St.common,St.bumpmap,St.normalmap,St.displacementmap,St.fog,{matcap:{value:null}}]),vertexShader:Ut.meshmatcap_vert,fragmentShader:Ut.meshmatcap_frag},points:{uniforms:(0,p.Rhp)([St.points,St.fog]),vertexShader:Ut.points_vert,fragmentShader:Ut.points_frag},dashed:{uniforms:(0,p.Rhp)([St.common,St.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ut.linedashed_vert,fragmentShader:Ut.linedashed_frag},depth:{uniforms:(0,p.Rhp)([St.common,St.displacementmap]),vertexShader:Ut.depth_vert,fragmentShader:Ut.depth_frag},normal:{uniforms:(0,p.Rhp)([St.common,St.bumpmap,St.normalmap,St.displacementmap,{opacity:{value:1}}]),vertexShader:Ut.meshnormal_vert,fragmentShader:Ut.meshnormal_frag},sprite:{uniforms:(0,p.Rhp)([St.sprite,St.fog]),vertexShader:Ut.sprite_vert,fragmentShader:Ut.sprite_frag},background:{uniforms:{uvTransform:{value:new p.Vkp},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ut.background_vert,fragmentShader:Ut.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new p.Vkp}},vertexShader:Ut.backgroundCube_vert,fragmentShader:Ut.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ut.cube_vert,fragmentShader:Ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ut.equirect_vert,fragmentShader:Ut.equirect_frag},distanceRGBA:{uniforms:(0,p.Rhp)([St.common,St.displacementmap,{referencePosition:{value:new p.Pa4},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ut.distanceRGBA_vert,fragmentShader:Ut.distanceRGBA_frag},shadow:{uniforms:(0,p.Rhp)([St.lights,St.fog,{color:{value:new p.Ilk(0)},opacity:{value:1}}]),vertexShader:Ut.shadow_vert,fragmentShader:Ut.shadow_frag}};li.physical={uniforms:(0,p.Rhp)([li.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new p.Vkp},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new p.Vkp},clearcoatNormalScale:{value:new p.FM8(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new p.Vkp},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new p.Vkp},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new p.Vkp},sheen:{value:0},sheenColor:{value:new p.Ilk(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new p.Vkp},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new p.Vkp},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new p.Vkp},transmissionSamplerSize:{value:new p.FM8},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new p.Vkp},attenuationDistance:{value:0},attenuationColor:{value:new p.Ilk(0)},specularColor:{value:new p.Ilk(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new p.Vkp},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new p.Vkp},anisotropyVector:{value:new p.FM8},anisotropyMap:{value:null},anisotropyMapTransform:{value:new p.Vkp}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag};const ur={r:0,b:0,g:0},hr=new p.USm,ki=new p.yGw;function Xn(g,R,_,U,q,$,fe){const ae=new p.Ilk(0);let rt=$===!0?0:1,ze,ut,Se=null,Ie=0,He=null;function At(Ye){let Ee=Ye.isScene===!0?Ye.background:null;return Ee&&Ee.isTexture&&(Ee=(Ye.backgroundBlurriness>0?_:R).get(Ee)),Ee}function Pe(Ye){let Ee=!1;const bt=At(Ye);bt===null?V(ae,rt):bt&&bt.isColor&&(V(bt,1),Ee=!0);const qe=g.xr.getEnvironmentBlendMode();qe==="additive"?U.buffers.color.setClear(0,0,0,1,fe):qe==="alpha-blend"&&U.buffers.color.setClear(0,0,0,0,fe),(g.autoClear||Ee)&&(U.buffers.depth.setTest(!0),U.buffers.depth.setMask(!0),U.buffers.color.setMask(!0),g.clear(g.autoClearColor,g.autoClearDepth,g.autoClearStencil))}function ee(Ye,Ee){const bt=At(Ee);bt&&(bt.isCubeTexture||bt.mapping===p.g8_)?(ut===void 0&&(ut=new p.Kj0(new p.DvJ(1,1,1),new p.jyz({name:"BackgroundCubeMaterial",uniforms:(0,p.dwf)(li.backgroundCube.uniforms),vertexShader:li.backgroundCube.vertexShader,fragmentShader:li.backgroundCube.fragmentShader,side:p._Li,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),ut.geometry.deleteAttribute("normal"),ut.geometry.deleteAttribute("uv"),ut.onBeforeRender=function(qe,yt,kt){this.matrixWorld.copyPosition(kt.matrixWorld)},Object.defineProperty(ut.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),q.update(ut)),hr.copy(Ee.backgroundRotation),hr.x*=-1,hr.y*=-1,hr.z*=-1,bt.isCubeTexture&&bt.isRenderTargetTexture===!1&&(hr.y*=-1,hr.z*=-1),ut.material.uniforms.envMap.value=bt,ut.material.uniforms.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1,ut.material.uniforms.backgroundBlurriness.value=Ee.backgroundBlurriness,ut.material.uniforms.backgroundIntensity.value=Ee.backgroundIntensity,ut.material.uniforms.backgroundRotation.value.setFromMatrix4(ki.makeRotationFromEuler(hr)),ut.material.toneMapped=p.epp.getTransfer(bt.colorSpace)!==p.j17,(Se!==bt||Ie!==bt.version||He!==g.toneMapping)&&(ut.material.needsUpdate=!0,Se=bt,Ie=bt.version,He=g.toneMapping),ut.layers.enableAll(),Ye.unshift(ut,ut.geometry,ut.material,0,0,null)):bt&&bt.isTexture&&(ze===void 0&&(ze=new p.Kj0(new p._12(2,2),new p.jyz({name:"BackgroundMaterial",uniforms:(0,p.dwf)(li.background.uniforms),vertexShader:li.background.vertexShader,fragmentShader:li.background.fragmentShader,side:p.Wl3,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),ze.geometry.deleteAttribute("normal"),Object.defineProperty(ze.material,"map",{get:function(){return this.uniforms.t2D.value}}),q.update(ze)),ze.material.uniforms.t2D.value=bt,ze.material.uniforms.backgroundIntensity.value=Ee.backgroundIntensity,ze.material.toneMapped=p.epp.getTransfer(bt.colorSpace)!==p.j17,bt.matrixAutoUpdate===!0&&bt.updateMatrix(),ze.material.uniforms.uvTransform.value.copy(bt.matrix),(Se!==bt||Ie!==bt.version||He!==g.toneMapping)&&(ze.material.needsUpdate=!0,Se=bt,Ie=bt.version,He=g.toneMapping),ze.layers.enableAll(),Ye.unshift(ze,ze.geometry,ze.material,0,0,null))}function V(Ye,Ee){Ye.getRGB(ur,(0,p.oDz)(g)),U.buffers.color.setClear(ur.r,ur.g,ur.b,Ee,fe)}function ct(){ut!==void 0&&(ut.geometry.dispose(),ut.material.dispose(),ut=void 0),ze!==void 0&&(ze.geometry.dispose(),ze.material.dispose(),ze=void 0)}return{getClearColor:function(){return ae},setClearColor:function(Ye,Ee=1){ae.set(Ye),rt=Ee,V(ae,rt)},getClearAlpha:function(){return rt},setClearAlpha:function(Ye){rt=Ye,V(ae,rt)},render:Pe,addToRenderList:ee,dispose:ct}}function Gn(g,R){const _=g.getParameter(g.MAX_VERTEX_ATTRIBS),U={},q=Ie(null);let $=q,fe=!1;function ae(oe,Ze,Tt,Jt,ot){let Zt=!1;const Lt=Se(Jt,Tt,Ze);$!==Lt&&($=Lt,ze($.object)),Zt=He(oe,Jt,Tt,ot),Zt&&At(oe,Jt,Tt,ot),ot!==null&&R.update(ot,g.ELEMENT_ARRAY_BUFFER),(Zt||fe)&&(fe=!1,Ee(oe,Ze,Tt,Jt),ot!==null&&g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,R.get(ot).buffer))}function rt(){return g.createVertexArray()}function ze(oe){return g.bindVertexArray(oe)}function ut(oe){return g.deleteVertexArray(oe)}function Se(oe,Ze,Tt){const Jt=Tt.wireframe===!0;let ot=U[oe.id];ot===void 0&&(ot={},U[oe.id]=ot);let Zt=ot[Ze.id];Zt===void 0&&(Zt={},ot[Ze.id]=Zt);let Lt=Zt[Jt];return Lt===void 0&&(Lt=Ie(rt()),Zt[Jt]=Lt),Lt}function Ie(oe){const Ze=[],Tt=[],Jt=[];for(let ot=0;ot<_;ot++)Ze[ot]=0,Tt[ot]=0,Jt[ot]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ze,enabledAttributes:Tt,attributeDivisors:Jt,object:oe,attributes:{},index:null}}function He(oe,Ze,Tt,Jt){const ot=$.attributes,Zt=Ze.attributes;let Lt=0;const vn=Tt.getAttributes();for(const Rt in vn)if(vn[Rt].location>=0){const Bi=ot[Rt];let sn=Zt[Rt];if(sn===void 0&&(Rt==="instanceMatrix"&&oe.instanceMatrix&&(sn=oe.instanceMatrix),Rt==="instanceColor"&&oe.instanceColor&&(sn=oe.instanceColor)),Bi===void 0||Bi.attribute!==sn||sn&&Bi.data!==sn.data)return!0;Lt++}return $.attributesNum!==Lt||$.index!==Jt}function At(oe,Ze,Tt,Jt){const ot={},Zt=Ze.attributes;let Lt=0;const vn=Tt.getAttributes();for(const Rt in vn)if(vn[Rt].location>=0){let Bi=Zt[Rt];Bi===void 0&&(Rt==="instanceMatrix"&&oe.instanceMatrix&&(Bi=oe.instanceMatrix),Rt==="instanceColor"&&oe.instanceColor&&(Bi=oe.instanceColor));const sn={};sn.attribute=Bi,Bi&&Bi.data&&(sn.data=Bi.data),ot[Rt]=sn,Lt++}$.attributes=ot,$.attributesNum=Lt,$.index=Jt}function Pe(){const oe=$.newAttributes;for(let Ze=0,Tt=oe.length;Ze<Tt;Ze++)oe[Ze]=0}function ee(oe){V(oe,0)}function V(oe,Ze){const Tt=$.newAttributes,Jt=$.enabledAttributes,ot=$.attributeDivisors;Tt[oe]=1,Jt[oe]===0&&(g.enableVertexAttribArray(oe),Jt[oe]=1),ot[oe]!==Ze&&(g.vertexAttribDivisor(oe,Ze),ot[oe]=Ze)}function ct(){const oe=$.newAttributes,Ze=$.enabledAttributes;for(let Tt=0,Jt=Ze.length;Tt<Jt;Tt++)Ze[Tt]!==oe[Tt]&&(g.disableVertexAttribArray(Tt),Ze[Tt]=0)}function Ye(oe,Ze,Tt,Jt,ot,Zt,Lt){Lt===!0?g.vertexAttribIPointer(oe,Ze,Tt,ot,Zt):g.vertexAttribPointer(oe,Ze,Tt,Jt,ot,Zt)}function Ee(oe,Ze,Tt,Jt){Pe();const ot=Jt.attributes,Zt=Tt.getAttributes(),Lt=Ze.defaultAttributeValues;for(const vn in Zt){const Rt=Zt[vn];if(Rt.location>=0){let ei=ot[vn];if(ei===void 0&&(vn==="instanceMatrix"&&oe.instanceMatrix&&(ei=oe.instanceMatrix),vn==="instanceColor"&&oe.instanceColor&&(ei=oe.instanceColor)),ei!==void 0){const Bi=ei.normalized,sn=ei.itemSize,Zr=R.get(ei);if(Zr===void 0)continue;const Po=Zr.buffer,ar=Zr.type,Gr=Zr.bytesPerElement,Vt=ar===g.INT||ar===g.UNSIGNED_INT||ei.gpuType===p.Kz5;if(ei.isInterleavedBufferAttribute){const Pt=ei.data,si=Pt.stride,Zi=ei.offset;if(Pt.isInstancedInterleavedBuffer){for(let yi=0;yi<Rt.locationSize;yi++)V(Rt.location+yi,Pt.meshPerAttribute);oe.isInstancedMesh!==!0&&Jt._maxInstanceCount===void 0&&(Jt._maxInstanceCount=Pt.meshPerAttribute*Pt.count)}else for(let yi=0;yi<Rt.locationSize;yi++)ee(Rt.location+yi);g.bindBuffer(g.ARRAY_BUFFER,Po);for(let yi=0;yi<Rt.locationSize;yi++)Ye(Rt.location+yi,sn/Rt.locationSize,ar,Bi,si*Gr,(Zi+sn/Rt.locationSize*yi)*Gr,Vt)}else{if(ei.isInstancedBufferAttribute){for(let Pt=0;Pt<Rt.locationSize;Pt++)V(Rt.location+Pt,ei.meshPerAttribute);oe.isInstancedMesh!==!0&&Jt._maxInstanceCount===void 0&&(Jt._maxInstanceCount=ei.meshPerAttribute*ei.count)}else for(let Pt=0;Pt<Rt.locationSize;Pt++)ee(Rt.location+Pt);g.bindBuffer(g.ARRAY_BUFFER,Po);for(let Pt=0;Pt<Rt.locationSize;Pt++)Ye(Rt.location+Pt,sn/Rt.locationSize,ar,Bi,sn*Gr,sn/Rt.locationSize*Pt*Gr,Vt)}}else if(Lt!==void 0){const Bi=Lt[vn];if(Bi!==void 0)switch(Bi.length){case 2:g.vertexAttrib2fv(Rt.location,Bi);break;case 3:g.vertexAttrib3fv(Rt.location,Bi);break;case 4:g.vertexAttrib4fv(Rt.location,Bi);break;default:g.vertexAttrib1fv(Rt.location,Bi)}}}}ct()}function bt(){kt();for(const oe in U){const Ze=U[oe];for(const Tt in Ze){const Jt=Ze[Tt];for(const ot in Jt)ut(Jt[ot].object),delete Jt[ot];delete Ze[Tt]}delete U[oe]}}function qe(oe){if(U[oe.id]===void 0)return;const Ze=U[oe.id];for(const Tt in Ze){const Jt=Ze[Tt];for(const ot in Jt)ut(Jt[ot].object),delete Jt[ot];delete Ze[Tt]}delete U[oe.id]}function yt(oe){for(const Ze in U){const Tt=U[Ze];if(Tt[oe.id]===void 0)continue;const Jt=Tt[oe.id];for(const ot in Jt)ut(Jt[ot].object),delete Jt[ot];delete Tt[oe.id]}}function kt(){se(),fe=!0,$!==q&&($=q,ze($.object))}function se(){q.geometry=null,q.program=null,q.wireframe=!1}return{setup:ae,reset:kt,resetDefaultState:se,dispose:bt,releaseStatesOfGeometry:qe,releaseStatesOfProgram:yt,initAttributes:Pe,enableAttribute:ee,disableUnusedAttributes:ct}}function gi(g,R,_){let U;function q(ze){U=ze}function $(ze,ut){g.drawArrays(U,ze,ut),_.update(ut,U,1)}function fe(ze,ut,Se){Se!==0&&(g.drawArraysInstanced(U,ze,ut,Se),_.update(ut,U,Se))}function ae(ze,ut,Se){if(Se===0)return;R.get("WEBGL_multi_draw").multiDrawArraysWEBGL(U,ze,0,ut,0,Se);let He=0;for(let At=0;At<Se;At++)He+=ut[At];_.update(He,U,1)}function rt(ze,ut,Se,Ie){if(Se===0)return;const He=R.get("WEBGL_multi_draw");if(He===null)for(let At=0;At<ze.length;At++)fe(ze[At],ut[At],Ie[At]);else{He.multiDrawArraysInstancedWEBGL(U,ze,0,ut,0,Ie,0,Se);let At=0;for(let Pe=0;Pe<Se;Pe++)At+=ut[Pe]*Ie[Pe];_.update(At,U,1)}}this.setMode=q,this.render=$,this.renderInstances=fe,this.renderMultiDraw=ae,this.renderMultiDrawInstances=rt}function Hr(g,R,_,U){let q;function $(){if(q!==void 0)return q;if(R.has("EXT_texture_filter_anisotropic")===!0){const yt=R.get("EXT_texture_filter_anisotropic");q=g.getParameter(yt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else q=0;return q}function fe(yt){return!(yt!==p.wk1&&U.convert(yt)!==g.getParameter(g.IMPLEMENTATION_COLOR_READ_FORMAT))}function ae(yt){const kt=yt===p.cLu&&(R.has("EXT_color_buffer_half_float")||R.has("EXT_color_buffer_float"));return!(yt!==p.ywz&&U.convert(yt)!==g.getParameter(g.IMPLEMENTATION_COLOR_READ_TYPE)&&yt!==p.VzW&&!kt)}function rt(yt){if(yt==="highp"){if(g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.HIGH_FLOAT).precision>0&&g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_FLOAT).precision>0)return"highp";yt="mediump"}return yt==="mediump"&&g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.MEDIUM_FLOAT).precision>0&&g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let ze=_.precision!==void 0?_.precision:"highp";const ut=rt(ze);ut!==ze&&(console.warn("THREE.WebGLRenderer:",ze,"not supported, using",ut,"instead."),ze=ut);const Se=_.logarithmicDepthBuffer===!0,Ie=_.reversedDepthBuffer===!0&&R.has("EXT_clip_control"),He=g.getParameter(g.MAX_TEXTURE_IMAGE_UNITS),At=g.getParameter(g.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Pe=g.getParameter(g.MAX_TEXTURE_SIZE),ee=g.getParameter(g.MAX_CUBE_MAP_TEXTURE_SIZE),V=g.getParameter(g.MAX_VERTEX_ATTRIBS),ct=g.getParameter(g.MAX_VERTEX_UNIFORM_VECTORS),Ye=g.getParameter(g.MAX_VARYING_VECTORS),Ee=g.getParameter(g.MAX_FRAGMENT_UNIFORM_VECTORS),bt=At>0,qe=g.getParameter(g.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:$,getMaxPrecision:rt,textureFormatReadable:fe,textureTypeReadable:ae,precision:ze,logarithmicDepthBuffer:Se,reversedDepthBuffer:Ie,maxTextures:He,maxVertexTextures:At,maxTextureSize:Pe,maxCubemapSize:ee,maxAttributes:V,maxVertexUniforms:ct,maxVaryings:Ye,maxFragmentUniforms:Ee,vertexTextures:bt,maxSamples:qe}}function Tr(g){const R=this;let _=null,U=0,q=!1,$=!1;const fe=new p.JOQ,ae=new p.Vkp,rt={value:null,needsUpdate:!1};this.uniform=rt,this.numPlanes=0,this.numIntersection=0,this.init=function(Se,Ie){const He=Se.length!==0||Ie||U!==0||q;return q=Ie,U=Se.length,He},this.beginShadows=function(){$=!0,ut(null)},this.endShadows=function(){$=!1},this.setGlobalState=function(Se,Ie){_=ut(Se,Ie,0)},this.setState=function(Se,Ie,He){const At=Se.clippingPlanes,Pe=Se.clipIntersection,ee=Se.clipShadows,V=g.get(Se);if(!q||At===null||At.length===0||$&&!ee)$?ut(null):ze();else{const ct=$?0:U,Ye=ct*4;let Ee=V.clippingState||null;rt.value=Ee,Ee=ut(At,Ie,Ye,He);for(let bt=0;bt!==Ye;++bt)Ee[bt]=_[bt];V.clippingState=Ee,this.numIntersection=Pe?this.numPlanes:0,this.numPlanes+=ct}};function ze(){rt.value!==_&&(rt.value=_,rt.needsUpdate=U>0),R.numPlanes=U,R.numIntersection=0}function ut(Se,Ie,He,At){const Pe=Se!==null?Se.length:0;let ee=null;if(Pe!==0){if(ee=rt.value,At!==!0||ee===null){const V=He+Pe*4,ct=Ie.matrixWorldInverse;ae.getNormalMatrix(ct),(ee===null||ee.length<V)&&(ee=new Float32Array(V));for(let Ye=0,Ee=He;Ye!==Pe;++Ye,Ee+=4)fe.copy(Se[Ye]).applyMatrix4(ct,ae),fe.normal.toArray(ee,Ee),ee[Ee+3]=fe.constant}rt.value=ee,rt.needsUpdate=!0}return R.numPlanes=Pe,R.numIntersection=0,ee}}function ir(g){let R=new WeakMap;function _(fe,ae){return ae===p.dSO?fe.mapping=p.fY$:ae===p.Bf4&&(fe.mapping=p.vxC),fe}function U(fe){if(fe&&fe.isTexture){const ae=fe.mapping;if(ae===p.dSO||ae===p.Bf4)if(R.has(fe)){const rt=R.get(fe).texture;return _(rt,fe.mapping)}else{const rt=fe.image;if(rt&&rt.height>0){const ze=new p.oAp(rt.height);return ze.fromEquirectangularTexture(g,fe),R.set(fe,ze),fe.addEventListener("dispose",q),_(ze.texture,fe.mapping)}else return null}}return fe}function q(fe){const ae=fe.target;ae.removeEventListener("dispose",q);const rt=R.get(ae);rt!==void 0&&(R.delete(ae),rt.dispose())}function $(){R=new WeakMap}return{get:U,dispose:$}}const Ea=4,Vr=[.125,.215,.35,.446,.526,.582],Sr=20,fa=new p.iKG,ko=new p.Ilk;let qa=null,Ko=0,br=0,Jr=!1;const Ao=(1+Math.sqrt(5))/2,cs=1/Ao,Ks=[new p.Pa4(-Ao,cs,0),new p.Pa4(Ao,cs,0),new p.Pa4(-cs,0,Ao),new p.Pa4(cs,0,Ao),new p.Pa4(0,Ao,-cs),new p.Pa4(0,Ao,cs),new p.Pa4(-1,1,-1),new p.Pa4(1,1,-1),new p.Pa4(-1,1,1),new p.Pa4(1,1,1)],vl=new p.Pa4;class Fl{constructor(R){this._renderer=R,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(R,_=0,U=.1,q=100,$={}){const{size:fe=256,position:ae=vl}=$;qa=this._renderer.getRenderTarget(),Ko=this._renderer.getActiveCubeFace(),br=this._renderer.getActiveMipmapLevel(),Jr=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(fe);const rt=this._allocateTargets();return rt.depthBuffer=!0,this._sceneToCubeUV(R,U,q,rt,ae),_>0&&this._blur(rt,0,0,_),this._applyPMREM(rt),this._cleanup(rt),rt}fromEquirectangular(R,_=null){return this._fromTexture(R,_)}fromCubemap(R,_=null){return this._fromTexture(R,_)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Ca(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=dr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(R){this._lodMax=Math.floor(Math.log2(R)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let R=0;R<this._lodPlanes.length;R++)this._lodPlanes[R].dispose()}_cleanup(R){this._renderer.setRenderTarget(qa,Ko,br),this._renderer.xr.enabled=Jr,R.scissorTest=!1,Ra(R,0,0,R.width,R.height)}_fromTexture(R,_){R.mapping===p.fY$||R.mapping===p.vxC?this._setSize(R.image.length===0?16:R.image[0].width||R.image[0].image.width):this._setSize(R.image.width/4),qa=this._renderer.getRenderTarget(),Ko=this._renderer.getActiveCubeFace(),br=this._renderer.getActiveMipmapLevel(),Jr=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const U=_||this._allocateTargets();return this._textureToCubeUV(R,U),this._applyPMREM(U),this._cleanup(U),U}_allocateTargets(){const R=3*Math.max(this._cubeSize,112),_=4*this._cubeSize,U={magFilter:p.wem,minFilter:p.wem,generateMipmaps:!1,type:p.cLu,format:p.wk1,colorSpace:p.GUF,depthBuffer:!1},q=mo(R,_,U);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==R||this._pingPongRenderTarget.height!==_){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mo(R,_,U);const{_lodMax:$}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Cc($)),this._blurMaterial=Qn($,R,_)}return q}_compileMaterial(R){const _=new p.Kj0(this._lodPlanes[0],R);this._renderer.compile(_,fa)}_sceneToCubeUV(R,_,U,q,$){const rt=new p.cPb(90,1,_,U),ze=[1,-1,1,1,1,1],ut=[1,1,1,-1,-1,-1],Se=this._renderer,Ie=Se.autoClear,He=Se.toneMapping;Se.getClearColor(ko),Se.toneMapping=p.uL9,Se.autoClear=!1,Se.state.buffers.depth.getReversed()&&(Se.setRenderTarget(q),Se.clearDepth(),Se.setRenderTarget(null));const Pe=new p.vBJ({name:"PMREM.Background",side:p._Li,depthWrite:!1,depthTest:!1}),ee=new p.Kj0(new p.DvJ,Pe);let V=!1;const ct=R.background;ct?ct.isColor&&(Pe.color.copy(ct),R.background=null,V=!0):(Pe.color.copy(ko),V=!0);for(let Ye=0;Ye<6;Ye++){const Ee=Ye%3;Ee===0?(rt.up.set(0,ze[Ye],0),rt.position.set($.x,$.y,$.z),rt.lookAt($.x+ut[Ye],$.y,$.z)):Ee===1?(rt.up.set(0,0,ze[Ye]),rt.position.set($.x,$.y,$.z),rt.lookAt($.x,$.y+ut[Ye],$.z)):(rt.up.set(0,ze[Ye],0),rt.position.set($.x,$.y,$.z),rt.lookAt($.x,$.y,$.z+ut[Ye]));const bt=this._cubeSize;Ra(q,Ee*bt,Ye>2?bt:0,bt,bt),Se.setRenderTarget(q),V&&Se.render(ee,rt),Se.render(R,rt)}ee.geometry.dispose(),ee.material.dispose(),Se.toneMapping=He,Se.autoClear=Ie,R.background=ct}_textureToCubeUV(R,_){const U=this._renderer,q=R.mapping===p.fY$||R.mapping===p.vxC;q?(this._cubemapMaterial===null&&(this._cubemapMaterial=Ca()),this._cubemapMaterial.uniforms.flipEnvMap.value=R.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=dr());const $=q?this._cubemapMaterial:this._equirectMaterial,fe=new p.Kj0(this._lodPlanes[0],$),ae=$.uniforms;ae.envMap.value=R;const rt=this._cubeSize;Ra(_,0,0,3*rt,2*rt),U.setRenderTarget(_),U.render(fe,fa)}_applyPMREM(R){const _=this._renderer,U=_.autoClear;_.autoClear=!1;const q=this._lodPlanes.length;for(let $=1;$<q;$++){const fe=Math.sqrt(this._sigmas[$]*this._sigmas[$]-this._sigmas[$-1]*this._sigmas[$-1]),ae=Ks[(q-$-1)%Ks.length];this._blur(R,$-1,$,fe,ae)}_.autoClear=U}_blur(R,_,U,q,$){const fe=this._pingPongRenderTarget;this._halfBlur(R,fe,_,U,q,"latitudinal",$),this._halfBlur(fe,R,U,U,q,"longitudinal",$)}_halfBlur(R,_,U,q,$,fe,ae){const rt=this._renderer,ze=this._blurMaterial;fe!=="latitudinal"&&fe!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const ut=3,Se=new p.Kj0(this._lodPlanes[q],ze),Ie=ze.uniforms,He=this._sizeLods[U]-1,At=isFinite($)?Math.PI/(2*He):2*Math.PI/(2*Sr-1),Pe=$/At,ee=isFinite($)?1+Math.floor(ut*Pe):Sr;ee>Sr&&console.warn(`sigmaRadians, ${$}, is too large and will clip, as it requested ${ee} samples when the maximum is set to ${Sr}`);const V=[];let ct=0;for(let yt=0;yt<Sr;++yt){const kt=yt/Pe,se=Math.exp(-kt*kt/2);V.push(se),yt===0?ct+=se:yt<ee&&(ct+=2*se)}for(let yt=0;yt<V.length;yt++)V[yt]=V[yt]/ct;Ie.envMap.value=R.texture,Ie.samples.value=ee,Ie.weights.value=V,Ie.latitudinal.value=fe==="latitudinal",ae&&(Ie.poleAxis.value=ae);const{_lodMax:Ye}=this;Ie.dTheta.value=At,Ie.mipInt.value=Ye-U;const Ee=this._sizeLods[q],bt=3*Ee*(q>Ye-Ea?q-Ye+Ea:0),qe=4*(this._cubeSize-Ee);Ra(_,bt,qe,3*Ee,2*Ee),rt.setRenderTarget(_),rt.render(Se,fa)}}function Cc(g){const R=[],_=[],U=[];let q=g;const $=g-Ea+1+Vr.length;for(let fe=0;fe<$;fe++){const ae=Math.pow(2,q);_.push(ae);let rt=1/ae;fe>g-Ea?rt=Vr[fe-g+Ea-1]:fe===0&&(rt=0),U.push(rt);const ze=1/(ae-2),ut=-ze,Se=1+ze,Ie=[ut,ut,Se,ut,Se,Se,ut,ut,Se,Se,ut,Se],He=6,At=6,Pe=3,ee=2,V=1,ct=new Float32Array(Pe*At*He),Ye=new Float32Array(ee*At*He),Ee=new Float32Array(V*At*He);for(let qe=0;qe<He;qe++){const yt=qe%3*2/3-1,kt=qe>2?0:-1,se=[yt,kt,0,yt+2/3,kt,0,yt+2/3,kt+1,0,yt,kt,0,yt+2/3,kt+1,0,yt,kt+1,0];ct.set(se,Pe*At*qe),Ye.set(Ie,ee*At*qe);const oe=[qe,qe,qe,qe,qe,qe];Ee.set(oe,V*At*qe)}const bt=new p.u9r;bt.setAttribute("position",new p.TlE(ct,Pe)),bt.setAttribute("uv",new p.TlE(Ye,ee)),bt.setAttribute("faceIndex",new p.TlE(Ee,V)),R.push(bt),q>Ea&&q--}return{lodPlanes:R,sizeLods:_,sigmas:U}}function mo(g,R,_){const U=new p.dd2(g,R,_);return U.texture.mapping=p.g8_,U.texture.name="PMREM.cubeUv",U.scissorTest=!0,U}function Ra(g,R,_,U,q){g.viewport.set(R,_,U,q),g.scissor.set(R,_,U,q)}function Qn(g,R,_){const U=new Float32Array(Sr),q=new p.Pa4(0,1,0);return new p.jyz({name:"SphericalGaussianBlur",defines:{n:Sr,CUBEUV_TEXEL_WIDTH:1/R,CUBEUV_TEXEL_HEIGHT:1/_,CUBEUV_MAX_MIP:`${g}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:U},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:q}},vertexShader:Ys(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:p.jFi,depthTest:!1,depthWrite:!1})}function dr(){return new p.jyz({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ys(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:p.jFi,depthTest:!1,depthWrite:!1})}function Ca(){return new p.jyz({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ys(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:p.jFi,depthTest:!1,depthWrite:!1})}function Ys(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zl(g){let R=new WeakMap,_=null;function U(ae){if(ae&&ae.isTexture){const rt=ae.mapping,ze=rt===p.dSO||rt===p.Bf4,ut=rt===p.fY$||rt===p.vxC;if(ze||ut){let Se=R.get(ae);const Ie=Se!==void 0?Se.texture.pmremVersion:0;if(ae.isRenderTargetTexture&&ae.pmremVersion!==Ie)return _===null&&(_=new Fl(g)),Se=ze?_.fromEquirectangular(ae,Se):_.fromCubemap(ae,Se),Se.texture.pmremVersion=ae.pmremVersion,R.set(ae,Se),Se.texture;if(Se!==void 0)return Se.texture;{const He=ae.image;return ze&&He&&He.height>0||ut&&He&&q(He)?(_===null&&(_=new Fl(g)),Se=ze?_.fromEquirectangular(ae):_.fromCubemap(ae),Se.texture.pmremVersion=ae.pmremVersion,R.set(ae,Se),ae.addEventListener("dispose",$),Se.texture):null}}}return ae}function q(ae){let rt=0;const ze=6;for(let ut=0;ut<ze;ut++)ae[ut]!==void 0&&rt++;return rt===ze}function $(ae){const rt=ae.target;rt.removeEventListener("dispose",$);const ze=R.get(rt);ze!==void 0&&(R.delete(rt),ze.dispose())}function fe(){R=new WeakMap,_!==null&&(_.dispose(),_=null)}return{get:U,dispose:fe}}function Fd(g){const R={};function _(U){if(R[U]!==void 0)return R[U];let q;switch(U){case"WEBGL_depth_texture":q=g.getExtension("WEBGL_depth_texture")||g.getExtension("MOZ_WEBGL_depth_texture")||g.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":q=g.getExtension("EXT_texture_filter_anisotropic")||g.getExtension("MOZ_EXT_texture_filter_anisotropic")||g.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":q=g.getExtension("WEBGL_compressed_texture_s3tc")||g.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||g.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":q=g.getExtension("WEBGL_compressed_texture_pvrtc")||g.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:q=g.getExtension(U)}return R[U]=q,q}return{has:function(U){return _(U)!==null},init:function(){_("EXT_color_buffer_float"),_("WEBGL_clip_cull_distance"),_("OES_texture_float_linear"),_("EXT_color_buffer_half_float"),_("WEBGL_multisampled_render_to_texture"),_("WEBGL_render_shared_exponent")},get:function(U){const q=_(U);return q===null&&(0,p.O4K)("THREE.WebGLRenderer: "+U+" extension not supported."),q}}}function xf(g,R,_,U){const q={},$=new WeakMap;function fe(Se){const Ie=Se.target;Ie.index!==null&&R.remove(Ie.index);for(const At in Ie.attributes)R.remove(Ie.attributes[At]);Ie.removeEventListener("dispose",fe),delete q[Ie.id];const He=$.get(Ie);He&&(R.remove(He),$.delete(Ie)),U.releaseStatesOfGeometry(Ie),Ie.isInstancedBufferGeometry===!0&&delete Ie._maxInstanceCount,_.memory.geometries--}function ae(Se,Ie){return q[Ie.id]===!0||(Ie.addEventListener("dispose",fe),q[Ie.id]=!0,_.memory.geometries++),Ie}function rt(Se){const Ie=Se.attributes;for(const He in Ie)R.update(Ie[He],g.ARRAY_BUFFER)}function ze(Se){const Ie=[],He=Se.index,At=Se.attributes.position;let Pe=0;if(He!==null){const ct=He.array;Pe=He.version;for(let Ye=0,Ee=ct.length;Ye<Ee;Ye+=3){const bt=ct[Ye+0],qe=ct[Ye+1],yt=ct[Ye+2];Ie.push(bt,qe,qe,yt,yt,bt)}}else if(At!==void 0){const ct=At.array;Pe=At.version;for(let Ye=0,Ee=ct.length/3-1;Ye<Ee;Ye+=3){const bt=Ye+0,qe=Ye+1,yt=Ye+2;Ie.push(bt,qe,qe,yt,yt,bt)}}else return;const ee=new((0,p.H7L)(Ie)?p.lCJ:p.qlB)(Ie,1);ee.version=Pe;const V=$.get(Se);V&&R.remove(V),$.set(Se,ee)}function ut(Se){const Ie=$.get(Se);if(Ie){const He=Se.index;He!==null&&Ie.version<He.version&&ze(Se)}else ze(Se);return $.get(Se)}return{get:ae,update:rt,getWireframeAttribute:ut}}function Sf(g,R,_){let U;function q(Ie){U=Ie}let $,fe;function ae(Ie){$=Ie.type,fe=Ie.bytesPerElement}function rt(Ie,He){g.drawElements(U,He,$,Ie*fe),_.update(He,U,1)}function ze(Ie,He,At){At!==0&&(g.drawElementsInstanced(U,He,$,Ie*fe,At),_.update(He,U,At))}function ut(Ie,He,At){if(At===0)return;R.get("WEBGL_multi_draw").multiDrawElementsWEBGL(U,He,0,$,Ie,0,At);let ee=0;for(let V=0;V<At;V++)ee+=He[V];_.update(ee,U,1)}function Se(Ie,He,At,Pe){if(At===0)return;const ee=R.get("WEBGL_multi_draw");if(ee===null)for(let V=0;V<Ie.length;V++)ze(Ie[V]/fe,He[V],Pe[V]);else{ee.multiDrawElementsInstancedWEBGL(U,He,0,$,Ie,0,Pe,0,At);let V=0;for(let ct=0;ct<At;ct++)V+=He[ct]*Pe[ct];_.update(V,U,1)}}this.setMode=q,this.setIndex=ae,this.render=rt,this.renderInstances=ze,this.renderMultiDraw=ut,this.renderMultiDrawInstances=Se}function bf(g){const R={geometries:0,textures:0},_={frame:0,calls:0,triangles:0,points:0,lines:0};function U($,fe,ae){switch(_.calls++,fe){case g.TRIANGLES:_.triangles+=ae*($/3);break;case g.LINES:_.lines+=ae*($/2);break;case g.LINE_STRIP:_.lines+=ae*($-1);break;case g.LINE_LOOP:_.lines+=ae*$;break;case g.POINTS:_.points+=ae*$;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",fe);break}}function q(){_.calls=0,_.triangles=0,_.points=0,_.lines=0}return{memory:R,render:_,programs:null,autoReset:!0,reset:q,update:U}}function zd(g,R,_){const U=new WeakMap,q=new p.Ltg;function $(fe,ae,rt){const ze=fe.morphTargetInfluences,ut=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Se=ut!==void 0?ut.length:0;let Ie=U.get(ae);if(Ie===void 0||Ie.count!==Se){let se=function(){yt.dispose(),U.delete(ae),ae.removeEventListener("dispose",se)};Ie!==void 0&&Ie.texture.dispose();const He=ae.morphAttributes.position!==void 0,At=ae.morphAttributes.normal!==void 0,Pe=ae.morphAttributes.color!==void 0,ee=ae.morphAttributes.position||[],V=ae.morphAttributes.normal||[],ct=ae.morphAttributes.color||[];let Ye=0;He===!0&&(Ye=1),At===!0&&(Ye=2),Pe===!0&&(Ye=3);let Ee=ae.attributes.position.count*Ye,bt=1;Ee>R.maxTextureSize&&(bt=Math.ceil(Ee/R.maxTextureSize),Ee=R.maxTextureSize);const qe=new Float32Array(Ee*bt*4*Se),yt=new p.p3g(qe,Ee,bt,Se);yt.type=p.VzW,yt.needsUpdate=!0;const kt=Ye*4;for(let oe=0;oe<Se;oe++){const Ze=ee[oe],Tt=V[oe],Jt=ct[oe],ot=Ee*bt*4*oe;for(let Zt=0;Zt<Ze.count;Zt++){const Lt=Zt*kt;He===!0&&(q.fromBufferAttribute(Ze,Zt),qe[ot+Lt+0]=q.x,qe[ot+Lt+1]=q.y,qe[ot+Lt+2]=q.z,qe[ot+Lt+3]=0),At===!0&&(q.fromBufferAttribute(Tt,Zt),qe[ot+Lt+4]=q.x,qe[ot+Lt+5]=q.y,qe[ot+Lt+6]=q.z,qe[ot+Lt+7]=0),Pe===!0&&(q.fromBufferAttribute(Jt,Zt),qe[ot+Lt+8]=q.x,qe[ot+Lt+9]=q.y,qe[ot+Lt+10]=q.z,qe[ot+Lt+11]=Jt.itemSize===4?q.w:1)}}Ie={count:Se,texture:yt,size:new p.FM8(Ee,bt)},U.set(ae,Ie),ae.addEventListener("dispose",se)}if(fe.isInstancedMesh===!0&&fe.morphTexture!==null)rt.getUniforms().setValue(g,"morphTexture",fe.morphTexture,_);else{let He=0;for(let Pe=0;Pe<ze.length;Pe++)He+=ze[Pe];const At=ae.morphTargetsRelative?1:1-He;rt.getUniforms().setValue(g,"morphTargetBaseInfluence",At),rt.getUniforms().setValue(g,"morphTargetInfluences",ze)}rt.getUniforms().setValue(g,"morphTargetsTexture",Ie.texture,_),rt.getUniforms().setValue(g,"morphTargetsTextureSize",Ie.size)}return{update:$}}function Hd(g,R,_,U){let q=new WeakMap;function $(rt){const ze=U.render.frame,ut=rt.geometry,Se=R.get(rt,ut);if(q.get(Se)!==ze&&(R.update(Se),q.set(Se,ze)),rt.isInstancedMesh&&(rt.hasEventListener("dispose",ae)===!1&&rt.addEventListener("dispose",ae),q.get(rt)!==ze&&(_.update(rt.instanceMatrix,g.ARRAY_BUFFER),rt.instanceColor!==null&&_.update(rt.instanceColor,g.ARRAY_BUFFER),q.set(rt,ze))),rt.isSkinnedMesh){const Ie=rt.skeleton;q.get(Ie)!==ze&&(Ie.update(),q.set(Ie,ze))}return Se}function fe(){q=new WeakMap}function ae(rt){const ze=rt.target;ze.removeEventListener("dispose",ae),_.remove(ze.instanceMatrix),ze.instanceColor!==null&&_.remove(ze.instanceColor)}return{update:$,dispose:fe}}const Zd=new p.xEZ,ul=new p.$YQ(1,1),nd=new p.p3g,id=new p.JUT,Vd=new p.BtG,Iu=[],Gd=[],Hl=new Float32Array(16),rd=new Float32Array(9),kd=new Float32Array(4);function Tc(g,R,_){const U=g[0];if(U<=0||U>0)return g;const q=R*_;let $=Iu[q];if($===void 0&&($=new Float32Array(q),Iu[q]=$),R!==0){U.toArray($,0);for(let fe=1,ae=0;fe!==R;++fe)ae+=_,g[fe].toArray($,ae)}return $}function Ga(g,R){if(g.length!==R.length)return!1;for(let _=0,U=g.length;_<U;_++)if(g[_]!==R[_])return!1;return!0}function Or(g,R){for(let _=0,U=R.length;_<U;_++)g[_]=R[_]}function gl(g,R){let _=Gd[R];_===void 0&&(_=new Int32Array(R),Gd[R]=_);for(let U=0;U!==R;++U)_[U]=g.allocateTextureUnit();return _}function ad(g,R){const _=this.cache;_[0]!==R&&(g.uniform1f(this.addr,R),_[0]=R)}function ru(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y)&&(g.uniform2f(this.addr,R.x,R.y),_[0]=R.x,_[1]=R.y);else{if(Ga(_,R))return;g.uniform2fv(this.addr,R),Or(_,R)}}function od(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y||_[2]!==R.z)&&(g.uniform3f(this.addr,R.x,R.y,R.z),_[0]=R.x,_[1]=R.y,_[2]=R.z);else if(R.r!==void 0)(_[0]!==R.r||_[1]!==R.g||_[2]!==R.b)&&(g.uniform3f(this.addr,R.r,R.g,R.b),_[0]=R.r,_[1]=R.g,_[2]=R.b);else{if(Ga(_,R))return;g.uniform3fv(this.addr,R),Or(_,R)}}function Ts(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y||_[2]!==R.z||_[3]!==R.w)&&(g.uniform4f(this.addr,R.x,R.y,R.z,R.w),_[0]=R.x,_[1]=R.y,_[2]=R.z,_[3]=R.w);else{if(Ga(_,R))return;g.uniform4fv(this.addr,R),Or(_,R)}}function ga(g,R){const _=this.cache,U=R.elements;if(U===void 0){if(Ga(_,R))return;g.uniformMatrix2fv(this.addr,!1,R),Or(_,R)}else{if(Ga(_,U))return;kd.set(U),g.uniformMatrix2fv(this.addr,!1,kd),Or(_,U)}}function wc(g,R){const _=this.cache,U=R.elements;if(U===void 0){if(Ga(_,R))return;g.uniformMatrix3fv(this.addr,!1,R),Or(_,R)}else{if(Ga(_,U))return;rd.set(U),g.uniformMatrix3fv(this.addr,!1,rd),Or(_,U)}}function ic(g,R){const _=this.cache,U=R.elements;if(U===void 0){if(Ga(_,R))return;g.uniformMatrix4fv(this.addr,!1,R),Or(_,R)}else{if(Ga(_,U))return;Hl.set(U),g.uniformMatrix4fv(this.addr,!1,Hl),Or(_,U)}}function Zl(g,R){const _=this.cache;_[0]!==R&&(g.uniform1i(this.addr,R),_[0]=R)}function us(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y)&&(g.uniform2i(this.addr,R.x,R.y),_[0]=R.x,_[1]=R.y);else{if(Ga(_,R))return;g.uniform2iv(this.addr,R),Or(_,R)}}function Ri(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y||_[2]!==R.z)&&(g.uniform3i(this.addr,R.x,R.y,R.z),_[0]=R.x,_[1]=R.y,_[2]=R.z);else{if(Ga(_,R))return;g.uniform3iv(this.addr,R),Or(_,R)}}function au(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y||_[2]!==R.z||_[3]!==R.w)&&(g.uniform4i(this.addr,R.x,R.y,R.z,R.w),_[0]=R.x,_[1]=R.y,_[2]=R.z,_[3]=R.w);else{if(Ga(_,R))return;g.uniform4iv(this.addr,R),Or(_,R)}}function _f(g,R){const _=this.cache;_[0]!==R&&(g.uniform1ui(this.addr,R),_[0]=R)}function qs(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y)&&(g.uniform2ui(this.addr,R.x,R.y),_[0]=R.x,_[1]=R.y);else{if(Ga(_,R))return;g.uniform2uiv(this.addr,R),Or(_,R)}}function ou(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y||_[2]!==R.z)&&(g.uniform3ui(this.addr,R.x,R.y,R.z),_[0]=R.x,_[1]=R.y,_[2]=R.z);else{if(Ga(_,R))return;g.uniform3uiv(this.addr,R),Or(_,R)}}function Wd(g,R){const _=this.cache;if(R.x!==void 0)(_[0]!==R.x||_[1]!==R.y||_[2]!==R.z||_[3]!==R.w)&&(g.uniform4ui(this.addr,R.x,R.y,R.z,R.w),_[0]=R.x,_[1]=R.y,_[2]=R.z,_[3]=R.w);else{if(Ga(_,R))return;g.uniform4uiv(this.addr,R),Or(_,R)}}function Mf(g,R,_){const U=this.cache,q=_.allocateTextureUnit();U[0]!==q&&(g.uniform1i(this.addr,q),U[0]=q);let $;this.type===g.SAMPLER_2D_SHADOW?(ul.compareFunction=p.M$G,$=ul):$=Zd,_.setTexture2D(R||$,q)}function Ef(g,R,_){const U=this.cache,q=_.allocateTextureUnit();U[0]!==q&&(g.uniform1i(this.addr,q),U[0]=q),_.setTexture3D(R||id,q)}function sd(g,R,_){const U=this.cache,q=_.allocateTextureUnit();U[0]!==q&&(g.uniform1i(this.addr,q),U[0]=q),_.setTextureCube(R||Vd,q)}function jd(g,R,_){const U=this.cache,q=_.allocateTextureUnit();U[0]!==q&&(g.uniform1i(this.addr,q),U[0]=q),_.setTexture2DArray(R||nd,q)}function Cf(g){switch(g){case 5126:return ad;case 35664:return ru;case 35665:return od;case 35666:return Ts;case 35674:return ga;case 35675:return wc;case 35676:return ic;case 5124:case 35670:return Zl;case 35667:case 35671:return us;case 35668:case 35672:return Ri;case 35669:case 35673:return au;case 5125:return _f;case 36294:return qs;case 36295:return ou;case 36296:return Wd;case 35678:case 36198:case 36298:case 36306:case 35682:return Mf;case 35679:case 36299:case 36307:return Ef;case 35680:case 36300:case 36308:case 36293:return sd;case 36289:case 36303:case 36311:case 36292:return jd}}function ld(g,R){g.uniform1fv(this.addr,R)}function Pu(g,R){const _=Tc(R,this.size,2);g.uniform2fv(this.addr,_)}function ao(g,R){const _=Tc(R,this.size,3);g.uniform3fv(this.addr,_)}function Tf(g,R){const _=Tc(R,this.size,4);g.uniform4fv(this.addr,_)}function Nu(g,R){const _=Tc(R,this.size,4);g.uniformMatrix2fv(this.addr,!1,_)}function cd(g,R){const _=Tc(R,this.size,9);g.uniformMatrix3fv(this.addr,!1,_)}function su(g,R){const _=Tc(R,this.size,16);g.uniformMatrix4fv(this.addr,!1,_)}function uc(g,R){g.uniform1iv(this.addr,R)}function gs(g,R){g.uniform2iv(this.addr,R)}function rr(g,R){g.uniform3iv(this.addr,R)}function Ac(g,R){g.uniform4iv(this.addr,R)}function nn(g,R){g.uniform1uiv(this.addr,R)}function ws(g,R){g.uniform2uiv(this.addr,R)}function ce(g,R){g.uniform3uiv(this.addr,R)}function ud(g,R){g.uniform4uiv(this.addr,R)}function dd(g,R,_){const U=this.cache,q=R.length,$=gl(_,q);Ga(U,$)||(g.uniform1iv(this.addr,$),Or(U,$));for(let fe=0;fe!==q;++fe)_.setTexture2D(R[fe]||Zd,$[fe])}function Js(g,R,_){const U=this.cache,q=R.length,$=gl(_,q);Ga(U,$)||(g.uniform1iv(this.addr,$),Or(U,$));for(let fe=0;fe!==q;++fe)_.setTexture3D(R[fe]||id,$[fe])}function lu(g,R,_){const U=this.cache,q=R.length,$=gl(_,q);Ga(U,$)||(g.uniform1iv(this.addr,$),Or(U,$));for(let fe=0;fe!==q;++fe)_.setTextureCube(R[fe]||Vd,$[fe])}function Xd(g,R,_){const U=this.cache,q=R.length,$=gl(_,q);Ga(U,$)||(g.uniform1iv(this.addr,$),Or(U,$));for(let fe=0;fe!==q;++fe)_.setTexture2DArray(R[fe]||nd,$[fe])}function wf(g){switch(g){case 5126:return ld;case 35664:return Pu;case 35665:return ao;case 35666:return Tf;case 35674:return Nu;case 35675:return cd;case 35676:return su;case 5124:case 35670:return uc;case 35667:case 35671:return gs;case 35668:case 35672:return rr;case 35669:case 35673:return Ac;case 5125:return nn;case 36294:return ws;case 36295:return ce;case 36296:return ud;case 35678:case 36198:case 36298:case 36306:case 35682:return dd;case 35679:case 36299:case 36307:return Js;case 35680:case 36300:case 36308:case 36293:return lu;case 36289:case 36303:case 36311:case 36292:return Xd}}class dl{constructor(R,_,U){this.id=R,this.addr=U,this.cache=[],this.type=_.type,this.setValue=Cf(_.type)}}class cu{constructor(R,_,U){this.id=R,this.addr=U,this.cache=[],this.type=_.type,this.size=_.size,this.setValue=wf(_.type)}}class yl{constructor(R){this.id=R,this.seq=[],this.map={}}setValue(R,_,U){const q=this.seq;for(let $=0,fe=q.length;$!==fe;++$){const ae=q[$];ae.setValue(R,_[ae.id],U)}}}const dc=/(\w+)(\])?(\[|\.)?/g;function uu(g,R){g.seq.push(R),g.map[R.id]=R}function qf(g,R,_){const U=g.name,q=U.length;for(dc.lastIndex=0;;){const $=dc.exec(U),fe=dc.lastIndex;let ae=$[1];const rt=$[2]==="]",ze=$[3];if(rt&&(ae=ae|0),ze===void 0||ze==="["&&fe+2===q){uu(_,ze===void 0?new dl(ae,g,R):new cu(ae,g,R));break}else{let Se=_.map[ae];Se===void 0&&(Se=new yl(ae),uu(_,Se)),_=Se}}}class Rc{constructor(R,_){this.seq=[],this.map={};const U=R.getProgramParameter(_,R.ACTIVE_UNIFORMS);for(let q=0;q<U;++q){const $=R.getActiveUniform(_,q),fe=R.getUniformLocation(_,$.name);qf($,fe,this)}}setValue(R,_,U,q){const $=this.map[_];$!==void 0&&$.setValue(R,U,q)}setOptional(R,_,U){const q=_[U];q!==void 0&&this.setValue(R,U,q)}static upload(R,_,U,q){for(let $=0,fe=_.length;$!==fe;++$){const ae=_[$],rt=U[ae.id];rt.needsUpdate!==!1&&ae.setValue(R,rt.value,q)}}static seqWithValue(R,_){const U=[];for(let q=0,$=R.length;q!==$;++q){const fe=R[q];fe.id in _&&U.push(fe)}return U}}function ys(g,R,_){const U=g.createShader(R);return g.shaderSource(U,_),g.compileShader(U),U}const Af=37297;let ka=0;function Vl(g,R){const _=g.split(`
`),U=[],q=Math.max(R-6,0),$=Math.min(R+6,_.length);for(let fe=q;fe<$;fe++){const ae=fe+1;U.push(`${ae===R?">":" "} ${ae}: ${_[fe]}`)}return U.join(`
`)}const xs=new p.Vkp;function xl(g){p.epp._getMatrix(xs,p.epp.workingColorSpace,g);const R=`mat3( ${xs.elements.map(_=>_.toFixed(4))} )`;switch(p.epp.getTransfer(g)){case p.l6D:return[R,"LinearTransferOETF"];case p.j17:return[R,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",g),[R,"LinearTransferOETF"]}}function Gl(g,R,_){const U=g.getShaderParameter(R,g.COMPILE_STATUS),$=(g.getShaderInfoLog(R)||"").trim();if(U&&$==="")return"";const fe=/ERROR: 0:(\d+)/.exec($);if(fe){const ae=parseInt(fe[1]);return _.toUpperCase()+`

`+$+`

`+Vl(g.getShaderSource(R),ae)}else return $}function $d(g,R){const _=xl(R);return[`vec4 ${g}( vec4 value ) {`,`	return ${_[1]}( vec4( value.rgb * ${_[0]}, value.a ) );`,"}"].join(`
`)}function kl(g,R){let _;switch(R){case p.EoG:_="Linear";break;case p.CdI:_="Reinhard";break;case p.YGz:_="Cineon";break;case p.LY2:_="ACESFilmic";break;case p.Bgp:_="AgX";break;case p.ORg:_="Neutral";break;case p.dZ3:_="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",R),_="Linear"}return"vec3 "+g+"( vec3 color ) { return "+_+"ToneMapping( color ); }"}const Qs=new p.Pa4;function Rf(){p.epp.getLuminanceCoefficients(Qs);const g=Qs.x.toFixed(4),R=Qs.y.toFixed(4),_=Qs.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${g}, ${R}, ${_} );`,"	return dot( weights, rgb );","}"].join(`
`)}function rc(g){return[g.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",g.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ic).join(`
`)}function oo(g){const R=[];for(const _ in g){const U=g[_];U!==!1&&R.push("#define "+_+" "+U)}return R.join(`
`)}function so(g,R){const _={},U=g.getProgramParameter(R,g.ACTIVE_ATTRIBUTES);for(let q=0;q<U;q++){const $=g.getActiveAttrib(R,q),fe=$.name;let ae=1;$.type===g.FLOAT_MAT2&&(ae=2),$.type===g.FLOAT_MAT3&&(ae=3),$.type===g.FLOAT_MAT4&&(ae=4),_[fe]={type:$.type,location:g.getAttribLocation(R,fe),locationSize:ae}}return _}function Ic(g){return g!==""}function du(g,R){const _=R.numSpotLightShadows+R.numSpotLightMaps-R.numSpotLightShadowsWithMaps;return g.replace(/NUM_DIR_LIGHTS/g,R.numDirLights).replace(/NUM_SPOT_LIGHTS/g,R.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,R.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,_).replace(/NUM_RECT_AREA_LIGHTS/g,R.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,R.numPointLights).replace(/NUM_HEMI_LIGHTS/g,R.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,R.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,R.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,R.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,R.numPointLightShadows)}function fu(g,R){return g.replace(/NUM_CLIPPING_PLANES/g,R.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,R.numClippingPlanes-R.numClipIntersection)}const If=/^[ \t]*#include +<([\w\d./]+)>/gm;function Sl(g){return g.replace(If,Uo)}const fd=new Map;function Uo(g,R){let _=Ut[R];if(_===void 0){const U=fd.get(R);if(U!==void 0)_=Ut[U],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',R,U);else throw new Error("Can not resolve #include <"+R+">")}return Sl(_)}const As=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ds(g){return g.replace(As,Pc)}function Pc(g,R,_,U){let q="";for(let $=parseInt(R);$<parseInt(_);$++)q+=U.replace(/\[\s*i\s*\]/g,"[ "+$+" ]").replace(/UNROLLED_LOOP_INDEX/g,$);return q}function el(g){let R=`precision ${g.precision} float;
	precision ${g.precision} int;
	precision ${g.precision} sampler2D;
	precision ${g.precision} samplerCube;
	precision ${g.precision} sampler3D;
	precision ${g.precision} sampler2DArray;
	precision ${g.precision} sampler2DShadow;
	precision ${g.precision} samplerCubeShadow;
	precision ${g.precision} sampler2DArrayShadow;
	precision ${g.precision} isampler2D;
	precision ${g.precision} isampler3D;
	precision ${g.precision} isamplerCube;
	precision ${g.precision} isampler2DArray;
	precision ${g.precision} usampler2D;
	precision ${g.precision} usampler3D;
	precision ${g.precision} usamplerCube;
	precision ${g.precision} usampler2DArray;
	`;return g.precision==="highp"?R+=`
#define HIGH_PRECISION`:g.precision==="mediump"?R+=`
#define MEDIUM_PRECISION`:g.precision==="lowp"&&(R+=`
#define LOW_PRECISION`),R}function Ro(g){let R="SHADOWMAP_TYPE_BASIC";return g.shadowMapType===p._iA?R="SHADOWMAP_TYPE_PCF":g.shadowMapType===p.ntZ?R="SHADOWMAP_TYPE_PCF_SOFT":g.shadowMapType===p.dwk&&(R="SHADOWMAP_TYPE_VSM"),R}function fc(g){let R="ENVMAP_TYPE_CUBE";if(g.envMap)switch(g.envMapMode){case p.fY$:case p.vxC:R="ENVMAP_TYPE_CUBE";break;case p.g8_:R="ENVMAP_TYPE_CUBE_UV";break}return R}function Ia(g){let R="ENVMAP_MODE_REFLECTION";if(g.envMap)switch(g.envMapMode){case p.vxC:R="ENVMAP_MODE_REFRACTION";break}return R}function bl(g){let R="ENVMAP_BLENDING_NONE";if(g.envMap)switch(g.combine){case p.Ns1:R="ENVMAP_BLENDING_MULTIPLY";break;case p.qhX:R="ENVMAP_BLENDING_MIX";break;case p.NDo:R="ENVMAP_BLENDING_ADD";break}return R}function _l(g){const R=g.envMapCubeUVHeight;if(R===null)return null;const _=Math.log2(R)-2,U=1/R;return{texelWidth:1/(3*Math.max(Math.pow(2,_),7*16)),texelHeight:U,maxMip:_}}function hc(g,R,_,U){const q=g.getContext(),$=_.defines;let fe=_.vertexShader,ae=_.fragmentShader;const rt=Ro(_),ze=fc(_),ut=Ia(_),Se=bl(_),Ie=_l(_),He=rc(_),At=oo($),Pe=q.createProgram();let ee,V,ct=_.glslVersion?"#version "+_.glslVersion+`
`:"";_.isRawShaderMaterial?(ee=["#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,At].filter(Ic).join(`
`),ee.length>0&&(ee+=`
`),V=["#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,At].filter(Ic).join(`
`),V.length>0&&(V+=`
`)):(ee=[el(_),"#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,At,_.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",_.batching?"#define USE_BATCHING":"",_.batchingColor?"#define USE_BATCHING_COLOR":"",_.instancing?"#define USE_INSTANCING":"",_.instancingColor?"#define USE_INSTANCING_COLOR":"",_.instancingMorph?"#define USE_INSTANCING_MORPH":"",_.useFog&&_.fog?"#define USE_FOG":"",_.useFog&&_.fogExp2?"#define FOG_EXP2":"",_.map?"#define USE_MAP":"",_.envMap?"#define USE_ENVMAP":"",_.envMap?"#define "+ut:"",_.lightMap?"#define USE_LIGHTMAP":"",_.aoMap?"#define USE_AOMAP":"",_.bumpMap?"#define USE_BUMPMAP":"",_.normalMap?"#define USE_NORMALMAP":"",_.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",_.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",_.displacementMap?"#define USE_DISPLACEMENTMAP":"",_.emissiveMap?"#define USE_EMISSIVEMAP":"",_.anisotropy?"#define USE_ANISOTROPY":"",_.anisotropyMap?"#define USE_ANISOTROPYMAP":"",_.clearcoatMap?"#define USE_CLEARCOATMAP":"",_.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_.specularMap?"#define USE_SPECULARMAP":"",_.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",_.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",_.roughnessMap?"#define USE_ROUGHNESSMAP":"",_.metalnessMap?"#define USE_METALNESSMAP":"",_.alphaMap?"#define USE_ALPHAMAP":"",_.alphaHash?"#define USE_ALPHAHASH":"",_.transmission?"#define USE_TRANSMISSION":"",_.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_.thicknessMap?"#define USE_THICKNESSMAP":"",_.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",_.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",_.mapUv?"#define MAP_UV "+_.mapUv:"",_.alphaMapUv?"#define ALPHAMAP_UV "+_.alphaMapUv:"",_.lightMapUv?"#define LIGHTMAP_UV "+_.lightMapUv:"",_.aoMapUv?"#define AOMAP_UV "+_.aoMapUv:"",_.emissiveMapUv?"#define EMISSIVEMAP_UV "+_.emissiveMapUv:"",_.bumpMapUv?"#define BUMPMAP_UV "+_.bumpMapUv:"",_.normalMapUv?"#define NORMALMAP_UV "+_.normalMapUv:"",_.displacementMapUv?"#define DISPLACEMENTMAP_UV "+_.displacementMapUv:"",_.metalnessMapUv?"#define METALNESSMAP_UV "+_.metalnessMapUv:"",_.roughnessMapUv?"#define ROUGHNESSMAP_UV "+_.roughnessMapUv:"",_.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+_.anisotropyMapUv:"",_.clearcoatMapUv?"#define CLEARCOATMAP_UV "+_.clearcoatMapUv:"",_.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+_.clearcoatNormalMapUv:"",_.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+_.clearcoatRoughnessMapUv:"",_.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+_.iridescenceMapUv:"",_.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+_.iridescenceThicknessMapUv:"",_.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+_.sheenColorMapUv:"",_.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+_.sheenRoughnessMapUv:"",_.specularMapUv?"#define SPECULARMAP_UV "+_.specularMapUv:"",_.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+_.specularColorMapUv:"",_.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+_.specularIntensityMapUv:"",_.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+_.transmissionMapUv:"",_.thicknessMapUv?"#define THICKNESSMAP_UV "+_.thicknessMapUv:"",_.vertexTangents&&_.flatShading===!1?"#define USE_TANGENT":"",_.vertexColors?"#define USE_COLOR":"",_.vertexAlphas?"#define USE_COLOR_ALPHA":"",_.vertexUv1s?"#define USE_UV1":"",_.vertexUv2s?"#define USE_UV2":"",_.vertexUv3s?"#define USE_UV3":"",_.pointsUvs?"#define USE_POINTS_UV":"",_.flatShading?"#define FLAT_SHADED":"",_.skinning?"#define USE_SKINNING":"",_.morphTargets?"#define USE_MORPHTARGETS":"",_.morphNormals&&_.flatShading===!1?"#define USE_MORPHNORMALS":"",_.morphColors?"#define USE_MORPHCOLORS":"",_.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+_.morphTextureStride:"",_.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+_.morphTargetsCount:"",_.doubleSided?"#define DOUBLE_SIDED":"",_.flipSided?"#define FLIP_SIDED":"",_.shadowMapEnabled?"#define USE_SHADOWMAP":"",_.shadowMapEnabled?"#define "+rt:"",_.sizeAttenuation?"#define USE_SIZEATTENUATION":"",_.numLightProbes>0?"#define USE_LIGHT_PROBES":"",_.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",_.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ic).join(`
`),V=[el(_),"#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,At,_.useFog&&_.fog?"#define USE_FOG":"",_.useFog&&_.fogExp2?"#define FOG_EXP2":"",_.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",_.map?"#define USE_MAP":"",_.matcap?"#define USE_MATCAP":"",_.envMap?"#define USE_ENVMAP":"",_.envMap?"#define "+ze:"",_.envMap?"#define "+ut:"",_.envMap?"#define "+Se:"",Ie?"#define CUBEUV_TEXEL_WIDTH "+Ie.texelWidth:"",Ie?"#define CUBEUV_TEXEL_HEIGHT "+Ie.texelHeight:"",Ie?"#define CUBEUV_MAX_MIP "+Ie.maxMip+".0":"",_.lightMap?"#define USE_LIGHTMAP":"",_.aoMap?"#define USE_AOMAP":"",_.bumpMap?"#define USE_BUMPMAP":"",_.normalMap?"#define USE_NORMALMAP":"",_.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",_.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",_.emissiveMap?"#define USE_EMISSIVEMAP":"",_.anisotropy?"#define USE_ANISOTROPY":"",_.anisotropyMap?"#define USE_ANISOTROPYMAP":"",_.clearcoat?"#define USE_CLEARCOAT":"",_.clearcoatMap?"#define USE_CLEARCOATMAP":"",_.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_.dispersion?"#define USE_DISPERSION":"",_.iridescence?"#define USE_IRIDESCENCE":"",_.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_.specularMap?"#define USE_SPECULARMAP":"",_.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",_.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",_.roughnessMap?"#define USE_ROUGHNESSMAP":"",_.metalnessMap?"#define USE_METALNESSMAP":"",_.alphaMap?"#define USE_ALPHAMAP":"",_.alphaTest?"#define USE_ALPHATEST":"",_.alphaHash?"#define USE_ALPHAHASH":"",_.sheen?"#define USE_SHEEN":"",_.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",_.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",_.transmission?"#define USE_TRANSMISSION":"",_.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_.thicknessMap?"#define USE_THICKNESSMAP":"",_.vertexTangents&&_.flatShading===!1?"#define USE_TANGENT":"",_.vertexColors||_.instancingColor||_.batchingColor?"#define USE_COLOR":"",_.vertexAlphas?"#define USE_COLOR_ALPHA":"",_.vertexUv1s?"#define USE_UV1":"",_.vertexUv2s?"#define USE_UV2":"",_.vertexUv3s?"#define USE_UV3":"",_.pointsUvs?"#define USE_POINTS_UV":"",_.gradientMap?"#define USE_GRADIENTMAP":"",_.flatShading?"#define FLAT_SHADED":"",_.doubleSided?"#define DOUBLE_SIDED":"",_.flipSided?"#define FLIP_SIDED":"",_.shadowMapEnabled?"#define USE_SHADOWMAP":"",_.shadowMapEnabled?"#define "+rt:"",_.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",_.numLightProbes>0?"#define USE_LIGHT_PROBES":"",_.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",_.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",_.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",_.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",_.toneMapping!==p.uL9?"#define TONE_MAPPING":"",_.toneMapping!==p.uL9?Ut.tonemapping_pars_fragment:"",_.toneMapping!==p.uL9?kl("toneMapping",_.toneMapping):"",_.dithering?"#define DITHERING":"",_.opaque?"#define OPAQUE":"",Ut.colorspace_pars_fragment,$d("linearToOutputTexel",_.outputColorSpace),Rf(),_.useDepthPacking?"#define DEPTH_PACKING "+_.depthPacking:"",`
`].filter(Ic).join(`
`)),fe=Sl(fe),fe=du(fe,_),fe=fu(fe,_),ae=Sl(ae),ae=du(ae,_),ae=fu(ae,_),fe=Ds(fe),ae=Ds(ae),_.isRawShaderMaterial!==!0&&(ct=`#version 300 es
`,ee=[He,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+ee,V=["#define varying in",_.glslVersion===p.LSk?"":"layout(location = 0) out highp vec4 pc_fragColor;",_.glslVersion===p.LSk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+V);const Ye=ct+ee+fe,Ee=ct+V+ae,bt=ys(q,q.VERTEX_SHADER,Ye),qe=ys(q,q.FRAGMENT_SHADER,Ee);q.attachShader(Pe,bt),q.attachShader(Pe,qe),_.index0AttributeName!==void 0?q.bindAttribLocation(Pe,0,_.index0AttributeName):_.morphTargets===!0&&q.bindAttribLocation(Pe,0,"position"),q.linkProgram(Pe);function yt(Ze){if(g.debug.checkShaderErrors){const Tt=q.getProgramInfoLog(Pe)||"",Jt=q.getShaderInfoLog(bt)||"",ot=q.getShaderInfoLog(qe)||"",Zt=Tt.trim(),Lt=Jt.trim(),vn=ot.trim();let Rt=!0,ei=!0;if(q.getProgramParameter(Pe,q.LINK_STATUS)===!1)if(Rt=!1,typeof g.debug.onShaderError=="function")g.debug.onShaderError(q,Pe,bt,qe);else{const Bi=Gl(q,bt,"vertex"),sn=Gl(q,qe,"fragment");console.error("THREE.WebGLProgram: Shader Error "+q.getError()+" - VALIDATE_STATUS "+q.getProgramParameter(Pe,q.VALIDATE_STATUS)+`

Material Name: `+Ze.name+`
Material Type: `+Ze.type+`

Program Info Log: `+Zt+`
`+Bi+`
`+sn)}else Zt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Zt):(Lt===""||vn==="")&&(ei=!1);ei&&(Ze.diagnostics={runnable:Rt,programLog:Zt,vertexShader:{log:Lt,prefix:ee},fragmentShader:{log:vn,prefix:V}})}q.deleteShader(bt),q.deleteShader(qe),kt=new Rc(q,Pe),se=so(q,Pe)}let kt;this.getUniforms=function(){return kt===void 0&&yt(this),kt};let se;this.getAttributes=function(){return se===void 0&&yt(this),se};let oe=_.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return oe===!1&&(oe=q.getProgramParameter(Pe,Af)),oe},this.destroy=function(){U.releaseStatesOfProgram(this),q.deleteProgram(Pe),this.program=void 0},this.type=_.shaderType,this.name=_.shaderName,this.id=ka++,this.cacheKey=R,this.usedTimes=1,this.program=Pe,this.vertexShader=bt,this.fragmentShader=qe,this}let Ou=0;class tl{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(R){const _=R.vertexShader,U=R.fragmentShader,q=this._getShaderStage(_),$=this._getShaderStage(U),fe=this._getShaderCacheForMaterial(R);return fe.has(q)===!1&&(fe.add(q),q.usedTimes++),fe.has($)===!1&&(fe.add($),$.usedTimes++),this}remove(R){const _=this.materialCache.get(R);for(const U of _)U.usedTimes--,U.usedTimes===0&&this.shaderCache.delete(U.code);return this.materialCache.delete(R),this}getVertexShaderID(R){return this._getShaderStage(R.vertexShader).id}getFragmentShaderID(R){return this._getShaderStage(R.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(R){const _=this.materialCache;let U=_.get(R);return U===void 0&&(U=new Set,_.set(R,U)),U}_getShaderStage(R){const _=this.shaderCache;let U=_.get(R);return U===void 0&&(U=new Nc(R),_.set(R,U)),U}}class Nc{constructor(R){this.id=Ou++,this.code=R,this.usedTimes=0}}function Du(g,R,_,U,q,$,fe){const ae=new p.S9g,rt=new tl,ze=new Set,ut=[],Se=q.logarithmicDepthBuffer,Ie=q.vertexTextures;let He=q.precision;const At={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Pe(se){return ze.add(se),se===0?"uv":`uv${se}`}function ee(se,oe,Ze,Tt,Jt){const ot=Tt.fog,Zt=Jt.geometry,Lt=se.isMeshStandardMaterial?Tt.environment:null,vn=(se.isMeshStandardMaterial?_:R).get(se.envMap||Lt),Rt=vn&&vn.mapping===p.g8_?vn.image.height:null,ei=At[se.type];se.precision!==null&&(He=q.getMaxPrecision(se.precision),He!==se.precision&&console.warn("THREE.WebGLProgram.getParameters:",se.precision,"not supported, using",He,"instead."));const Bi=Zt.morphAttributes.position||Zt.morphAttributes.normal||Zt.morphAttributes.color,sn=Bi!==void 0?Bi.length:0;let Zr=0;Zt.morphAttributes.position!==void 0&&(Zr=1),Zt.morphAttributes.normal!==void 0&&(Zr=2),Zt.morphAttributes.color!==void 0&&(Zr=3);let Po,ar,Gr,Vt;if(ei){const ia=li[ei];Po=ia.vertexShader,ar=ia.fragmentShader}else Po=se.vertexShader,ar=se.fragmentShader,rt.update(se),Gr=rt.getVertexShaderID(se),Vt=rt.getFragmentShaderID(se);const Pt=g.getRenderTarget(),si=g.state.buffers.depth.getReversed(),Zi=Jt.isInstancedMesh===!0,yi=Jt.isBatchedMesh===!0,kr=!!se.map,ds=!!se.matcap,ye=!!vn,Ja=!!se.aoMap,Fi=!!se.lightMap,Wt=!!se.bumpMap,ai=!!se.normalMap,Dr=!!se.displacementMap,oi=!!se.emissiveMap,er=!!se.metalnessMap,ha=!!se.roughnessMap,Wr=se.anisotropy>0,te=se.clearcoat>0,H=se.dispersion>0,We=se.iridescence>0,wt=se.sheen>0,on=se.transmission>0,gt=Wr&&!!se.anisotropyMap,ti=te&&!!se.clearcoatMap,Cn=te&&!!se.clearcoatNormalMap,ci=te&&!!se.clearcoatRoughnessMap,fi=We&&!!se.iridescenceMap,gn=We&&!!se.iridescenceThicknessMap,Vn=wt&&!!se.sheenColorMap,Ii=wt&&!!se.sheenRoughnessMap,Un=!!se.specularMap,Fn=!!se.specularColorMap,Pi=!!se.specularIntensityMap,_e=on&&!!se.transmissionMap,pn=on&&!!se.thicknessMap,Nn=!!se.gradientMap,ni=!!se.alphaMap,cn=se.alphaTest>0,$t=!!se.alphaHash,ui=!!se.extensions;let Ji=p.uL9;se.toneMapped&&(Pt===null||Pt.isXRRenderTarget===!0)&&(Ji=g.toneMapping);const pa={shaderID:ei,shaderType:se.type,shaderName:se.name,vertexShader:Po,fragmentShader:ar,defines:se.defines,customVertexShaderID:Gr,customFragmentShaderID:Vt,isRawShaderMaterial:se.isRawShaderMaterial===!0,glslVersion:se.glslVersion,precision:He,batching:yi,batchingColor:yi&&Jt._colorsTexture!==null,instancing:Zi,instancingColor:Zi&&Jt.instanceColor!==null,instancingMorph:Zi&&Jt.morphTexture!==null,supportsVertexTextures:Ie,outputColorSpace:Pt===null?g.outputColorSpace:Pt.isXRRenderTarget===!0?Pt.texture.colorSpace:p.GUF,alphaToCoverage:!!se.alphaToCoverage,map:kr,matcap:ds,envMap:ye,envMapMode:ye&&vn.mapping,envMapCubeUVHeight:Rt,aoMap:Ja,lightMap:Fi,bumpMap:Wt,normalMap:ai,displacementMap:Ie&&Dr,emissiveMap:oi,normalMapObjectSpace:ai&&se.normalMapType===p.PA7,normalMapTangentSpace:ai&&se.normalMapType===p.IOt,metalnessMap:er,roughnessMap:ha,anisotropy:Wr,anisotropyMap:gt,clearcoat:te,clearcoatMap:ti,clearcoatNormalMap:Cn,clearcoatRoughnessMap:ci,dispersion:H,iridescence:We,iridescenceMap:fi,iridescenceThicknessMap:gn,sheen:wt,sheenColorMap:Vn,sheenRoughnessMap:Ii,specularMap:Un,specularColorMap:Fn,specularIntensityMap:Pi,transmission:on,transmissionMap:_e,thicknessMap:pn,gradientMap:Nn,opaque:se.transparent===!1&&se.blending===p.bdR&&se.alphaToCoverage===!1,alphaMap:ni,alphaTest:cn,alphaHash:$t,combine:se.combine,mapUv:kr&&Pe(se.map.channel),aoMapUv:Ja&&Pe(se.aoMap.channel),lightMapUv:Fi&&Pe(se.lightMap.channel),bumpMapUv:Wt&&Pe(se.bumpMap.channel),normalMapUv:ai&&Pe(se.normalMap.channel),displacementMapUv:Dr&&Pe(se.displacementMap.channel),emissiveMapUv:oi&&Pe(se.emissiveMap.channel),metalnessMapUv:er&&Pe(se.metalnessMap.channel),roughnessMapUv:ha&&Pe(se.roughnessMap.channel),anisotropyMapUv:gt&&Pe(se.anisotropyMap.channel),clearcoatMapUv:ti&&Pe(se.clearcoatMap.channel),clearcoatNormalMapUv:Cn&&Pe(se.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ci&&Pe(se.clearcoatRoughnessMap.channel),iridescenceMapUv:fi&&Pe(se.iridescenceMap.channel),iridescenceThicknessMapUv:gn&&Pe(se.iridescenceThicknessMap.channel),sheenColorMapUv:Vn&&Pe(se.sheenColorMap.channel),sheenRoughnessMapUv:Ii&&Pe(se.sheenRoughnessMap.channel),specularMapUv:Un&&Pe(se.specularMap.channel),specularColorMapUv:Fn&&Pe(se.specularColorMap.channel),specularIntensityMapUv:Pi&&Pe(se.specularIntensityMap.channel),transmissionMapUv:_e&&Pe(se.transmissionMap.channel),thicknessMapUv:pn&&Pe(se.thicknessMap.channel),alphaMapUv:ni&&Pe(se.alphaMap.channel),vertexTangents:!!Zt.attributes.tangent&&(ai||Wr),vertexColors:se.vertexColors,vertexAlphas:se.vertexColors===!0&&!!Zt.attributes.color&&Zt.attributes.color.itemSize===4,pointsUvs:Jt.isPoints===!0&&!!Zt.attributes.uv&&(kr||ni),fog:!!ot,useFog:se.fog===!0,fogExp2:!!ot&&ot.isFogExp2,flatShading:se.flatShading===!0&&se.wireframe===!1,sizeAttenuation:se.sizeAttenuation===!0,logarithmicDepthBuffer:Se,reversedDepthBuffer:si,skinning:Jt.isSkinnedMesh===!0,morphTargets:Zt.morphAttributes.position!==void 0,morphNormals:Zt.morphAttributes.normal!==void 0,morphColors:Zt.morphAttributes.color!==void 0,morphTargetsCount:sn,morphTextureStride:Zr,numDirLights:oe.directional.length,numPointLights:oe.point.length,numSpotLights:oe.spot.length,numSpotLightMaps:oe.spotLightMap.length,numRectAreaLights:oe.rectArea.length,numHemiLights:oe.hemi.length,numDirLightShadows:oe.directionalShadowMap.length,numPointLightShadows:oe.pointShadowMap.length,numSpotLightShadows:oe.spotShadowMap.length,numSpotLightShadowsWithMaps:oe.numSpotLightShadowsWithMaps,numLightProbes:oe.numLightProbes,numClippingPlanes:fe.numPlanes,numClipIntersection:fe.numIntersection,dithering:se.dithering,shadowMapEnabled:g.shadowMap.enabled&&Ze.length>0,shadowMapType:g.shadowMap.type,toneMapping:Ji,decodeVideoTexture:kr&&se.map.isVideoTexture===!0&&p.epp.getTransfer(se.map.colorSpace)===p.j17,decodeVideoTextureEmissive:oi&&se.emissiveMap.isVideoTexture===!0&&p.epp.getTransfer(se.emissiveMap.colorSpace)===p.j17,premultipliedAlpha:se.premultipliedAlpha,doubleSided:se.side===p.ehD,flipSided:se.side===p._Li,useDepthPacking:se.depthPacking>=0,depthPacking:se.depthPacking||0,index0AttributeName:se.index0AttributeName,extensionClipCullDistance:ui&&se.extensions.clipCullDistance===!0&&U.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ui&&se.extensions.multiDraw===!0||yi)&&U.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:U.has("KHR_parallel_shader_compile"),customProgramCacheKey:se.customProgramCacheKey()};return pa.vertexUv1s=ze.has(1),pa.vertexUv2s=ze.has(2),pa.vertexUv3s=ze.has(3),ze.clear(),pa}function V(se){const oe=[];if(se.shaderID?oe.push(se.shaderID):(oe.push(se.customVertexShaderID),oe.push(se.customFragmentShaderID)),se.defines!==void 0)for(const Ze in se.defines)oe.push(Ze),oe.push(se.defines[Ze]);return se.isRawShaderMaterial===!1&&(ct(oe,se),Ye(oe,se),oe.push(g.outputColorSpace)),oe.push(se.customProgramCacheKey),oe.join()}function ct(se,oe){se.push(oe.precision),se.push(oe.outputColorSpace),se.push(oe.envMapMode),se.push(oe.envMapCubeUVHeight),se.push(oe.mapUv),se.push(oe.alphaMapUv),se.push(oe.lightMapUv),se.push(oe.aoMapUv),se.push(oe.bumpMapUv),se.push(oe.normalMapUv),se.push(oe.displacementMapUv),se.push(oe.emissiveMapUv),se.push(oe.metalnessMapUv),se.push(oe.roughnessMapUv),se.push(oe.anisotropyMapUv),se.push(oe.clearcoatMapUv),se.push(oe.clearcoatNormalMapUv),se.push(oe.clearcoatRoughnessMapUv),se.push(oe.iridescenceMapUv),se.push(oe.iridescenceThicknessMapUv),se.push(oe.sheenColorMapUv),se.push(oe.sheenRoughnessMapUv),se.push(oe.specularMapUv),se.push(oe.specularColorMapUv),se.push(oe.specularIntensityMapUv),se.push(oe.transmissionMapUv),se.push(oe.thicknessMapUv),se.push(oe.combine),se.push(oe.fogExp2),se.push(oe.sizeAttenuation),se.push(oe.morphTargetsCount),se.push(oe.morphAttributeCount),se.push(oe.numDirLights),se.push(oe.numPointLights),se.push(oe.numSpotLights),se.push(oe.numSpotLightMaps),se.push(oe.numHemiLights),se.push(oe.numRectAreaLights),se.push(oe.numDirLightShadows),se.push(oe.numPointLightShadows),se.push(oe.numSpotLightShadows),se.push(oe.numSpotLightShadowsWithMaps),se.push(oe.numLightProbes),se.push(oe.shadowMapType),se.push(oe.toneMapping),se.push(oe.numClippingPlanes),se.push(oe.numClipIntersection),se.push(oe.depthPacking)}function Ye(se,oe){ae.disableAll(),oe.supportsVertexTextures&&ae.enable(0),oe.instancing&&ae.enable(1),oe.instancingColor&&ae.enable(2),oe.instancingMorph&&ae.enable(3),oe.matcap&&ae.enable(4),oe.envMap&&ae.enable(5),oe.normalMapObjectSpace&&ae.enable(6),oe.normalMapTangentSpace&&ae.enable(7),oe.clearcoat&&ae.enable(8),oe.iridescence&&ae.enable(9),oe.alphaTest&&ae.enable(10),oe.vertexColors&&ae.enable(11),oe.vertexAlphas&&ae.enable(12),oe.vertexUv1s&&ae.enable(13),oe.vertexUv2s&&ae.enable(14),oe.vertexUv3s&&ae.enable(15),oe.vertexTangents&&ae.enable(16),oe.anisotropy&&ae.enable(17),oe.alphaHash&&ae.enable(18),oe.batching&&ae.enable(19),oe.dispersion&&ae.enable(20),oe.batchingColor&&ae.enable(21),oe.gradientMap&&ae.enable(22),se.push(ae.mask),ae.disableAll(),oe.fog&&ae.enable(0),oe.useFog&&ae.enable(1),oe.flatShading&&ae.enable(2),oe.logarithmicDepthBuffer&&ae.enable(3),oe.reversedDepthBuffer&&ae.enable(4),oe.skinning&&ae.enable(5),oe.morphTargets&&ae.enable(6),oe.morphNormals&&ae.enable(7),oe.morphColors&&ae.enable(8),oe.premultipliedAlpha&&ae.enable(9),oe.shadowMapEnabled&&ae.enable(10),oe.doubleSided&&ae.enable(11),oe.flipSided&&ae.enable(12),oe.useDepthPacking&&ae.enable(13),oe.dithering&&ae.enable(14),oe.transmission&&ae.enable(15),oe.sheen&&ae.enable(16),oe.opaque&&ae.enable(17),oe.pointsUvs&&ae.enable(18),oe.decodeVideoTexture&&ae.enable(19),oe.decodeVideoTextureEmissive&&ae.enable(20),oe.alphaToCoverage&&ae.enable(21),se.push(ae.mask)}function Ee(se){const oe=At[se.type];let Ze;if(oe){const Tt=li[oe];Ze=p.rDY.clone(Tt.uniforms)}else Ze=se.uniforms;return Ze}function bt(se,oe){let Ze;for(let Tt=0,Jt=ut.length;Tt<Jt;Tt++){const ot=ut[Tt];if(ot.cacheKey===oe){Ze=ot,++Ze.usedTimes;break}}return Ze===void 0&&(Ze=new hc(g,oe,se,$),ut.push(Ze)),Ze}function qe(se){if(--se.usedTimes===0){const oe=ut.indexOf(se);ut[oe]=ut[ut.length-1],ut.pop(),se.destroy()}}function yt(se){rt.remove(se)}function kt(){rt.dispose()}return{getParameters:ee,getProgramCacheKey:V,getUniforms:Ee,acquireProgram:bt,releaseProgram:qe,releaseShaderCache:yt,programs:ut,dispose:kt}}function hu(){let g=new WeakMap;function R(fe){return g.has(fe)}function _(fe){let ae=g.get(fe);return ae===void 0&&(ae={},g.set(fe,ae)),ae}function U(fe){g.delete(fe)}function q(fe,ae,rt){g.get(fe)[ae]=rt}function $(){g=new WeakMap}return{has:R,get:_,remove:U,update:q,dispose:$}}function pu(g,R){return g.groupOrder!==R.groupOrder?g.groupOrder-R.groupOrder:g.renderOrder!==R.renderOrder?g.renderOrder-R.renderOrder:g.material.id!==R.material.id?g.material.id-R.material.id:g.z!==R.z?g.z-R.z:g.id-R.id}function Lu(g,R){return g.groupOrder!==R.groupOrder?g.groupOrder-R.groupOrder:g.renderOrder!==R.renderOrder?g.renderOrder-R.renderOrder:g.z!==R.z?R.z-g.z:g.id-R.id}function Io(){const g=[];let R=0;const _=[],U=[],q=[];function $(){R=0,_.length=0,U.length=0,q.length=0}function fe(Se,Ie,He,At,Pe,ee){let V=g[R];return V===void 0?(V={id:Se.id,object:Se,geometry:Ie,material:He,groupOrder:At,renderOrder:Se.renderOrder,z:Pe,group:ee},g[R]=V):(V.id=Se.id,V.object=Se,V.geometry=Ie,V.material=He,V.groupOrder=At,V.renderOrder=Se.renderOrder,V.z=Pe,V.group=ee),R++,V}function ae(Se,Ie,He,At,Pe,ee){const V=fe(Se,Ie,He,At,Pe,ee);He.transmission>0?U.push(V):He.transparent===!0?q.push(V):_.push(V)}function rt(Se,Ie,He,At,Pe,ee){const V=fe(Se,Ie,He,At,Pe,ee);He.transmission>0?U.unshift(V):He.transparent===!0?q.unshift(V):_.unshift(V)}function ze(Se,Ie){_.length>1&&_.sort(Se||pu),U.length>1&&U.sort(Ie||Lu),q.length>1&&q.sort(Ie||Lu)}function ut(){for(let Se=R,Ie=g.length;Se<Ie;Se++){const He=g[Se];if(He.id===null)break;He.id=null,He.object=null,He.geometry=null,He.material=null,He.group=null}}return{opaque:_,transmissive:U,transparent:q,init:$,push:ae,unshift:rt,finish:ut,sort:ze}}function ac(){let g=new WeakMap;function R(U,q){const $=g.get(U);let fe;return $===void 0?(fe=new Io,g.set(U,[fe])):q>=$.length?(fe=new Io,$.push(fe)):fe=$[q],fe}function _(){g=new WeakMap}return{get:R,dispose:_}}function Uu(){const g={};return{get:function(R){if(g[R.id]!==void 0)return g[R.id];let _;switch(R.type){case"DirectionalLight":_={direction:new p.Pa4,color:new p.Ilk};break;case"SpotLight":_={position:new p.Pa4,direction:new p.Pa4,color:new p.Ilk,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":_={position:new p.Pa4,color:new p.Ilk,distance:0,decay:0};break;case"HemisphereLight":_={direction:new p.Pa4,skyColor:new p.Ilk,groundColor:new p.Ilk};break;case"RectAreaLight":_={color:new p.Ilk,position:new p.Pa4,halfWidth:new p.Pa4,halfHeight:new p.Pa4};break}return g[R.id]=_,_}}}function mu(){const g={};return{get:function(R){if(g[R.id]!==void 0)return g[R.id];let _;switch(R.type){case"DirectionalLight":_={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new p.FM8};break;case"SpotLight":_={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new p.FM8};break;case"PointLight":_={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new p.FM8,shadowCameraNear:1,shadowCameraFar:1e3};break}return g[R.id]=_,_}}}let pc=0;function Kd(g,R){return(R.castShadow?2:0)-(g.castShadow?2:0)+(R.map?1:0)-(g.map?1:0)}function hd(g){const R=new Uu,_=mu(),U={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let ze=0;ze<9;ze++)U.probe.push(new p.Pa4);const q=new p.Pa4,$=new p.yGw,fe=new p.yGw;function ae(ze){let ut=0,Se=0,Ie=0;for(let se=0;se<9;se++)U.probe[se].set(0,0,0);let He=0,At=0,Pe=0,ee=0,V=0,ct=0,Ye=0,Ee=0,bt=0,qe=0,yt=0;ze.sort(Kd);for(let se=0,oe=ze.length;se<oe;se++){const Ze=ze[se],Tt=Ze.color,Jt=Ze.intensity,ot=Ze.distance,Zt=Ze.shadow&&Ze.shadow.map?Ze.shadow.map.texture:null;if(Ze.isAmbientLight)ut+=Tt.r*Jt,Se+=Tt.g*Jt,Ie+=Tt.b*Jt;else if(Ze.isLightProbe){for(let Lt=0;Lt<9;Lt++)U.probe[Lt].addScaledVector(Ze.sh.coefficients[Lt],Jt);yt++}else if(Ze.isDirectionalLight){const Lt=R.get(Ze);if(Lt.color.copy(Ze.color).multiplyScalar(Ze.intensity),Ze.castShadow){const vn=Ze.shadow,Rt=_.get(Ze);Rt.shadowIntensity=vn.intensity,Rt.shadowBias=vn.bias,Rt.shadowNormalBias=vn.normalBias,Rt.shadowRadius=vn.radius,Rt.shadowMapSize=vn.mapSize,U.directionalShadow[He]=Rt,U.directionalShadowMap[He]=Zt,U.directionalShadowMatrix[He]=Ze.shadow.matrix,ct++}U.directional[He]=Lt,He++}else if(Ze.isSpotLight){const Lt=R.get(Ze);Lt.position.setFromMatrixPosition(Ze.matrixWorld),Lt.color.copy(Tt).multiplyScalar(Jt),Lt.distance=ot,Lt.coneCos=Math.cos(Ze.angle),Lt.penumbraCos=Math.cos(Ze.angle*(1-Ze.penumbra)),Lt.decay=Ze.decay,U.spot[Pe]=Lt;const vn=Ze.shadow;if(Ze.map&&(U.spotLightMap[bt]=Ze.map,bt++,vn.updateMatrices(Ze),Ze.castShadow&&qe++),U.spotLightMatrix[Pe]=vn.matrix,Ze.castShadow){const Rt=_.get(Ze);Rt.shadowIntensity=vn.intensity,Rt.shadowBias=vn.bias,Rt.shadowNormalBias=vn.normalBias,Rt.shadowRadius=vn.radius,Rt.shadowMapSize=vn.mapSize,U.spotShadow[Pe]=Rt,U.spotShadowMap[Pe]=Zt,Ee++}Pe++}else if(Ze.isRectAreaLight){const Lt=R.get(Ze);Lt.color.copy(Tt).multiplyScalar(Jt),Lt.halfWidth.set(Ze.width*.5,0,0),Lt.halfHeight.set(0,Ze.height*.5,0),U.rectArea[ee]=Lt,ee++}else if(Ze.isPointLight){const Lt=R.get(Ze);if(Lt.color.copy(Ze.color).multiplyScalar(Ze.intensity),Lt.distance=Ze.distance,Lt.decay=Ze.decay,Ze.castShadow){const vn=Ze.shadow,Rt=_.get(Ze);Rt.shadowIntensity=vn.intensity,Rt.shadowBias=vn.bias,Rt.shadowNormalBias=vn.normalBias,Rt.shadowRadius=vn.radius,Rt.shadowMapSize=vn.mapSize,Rt.shadowCameraNear=vn.camera.near,Rt.shadowCameraFar=vn.camera.far,U.pointShadow[At]=Rt,U.pointShadowMap[At]=Zt,U.pointShadowMatrix[At]=Ze.shadow.matrix,Ye++}U.point[At]=Lt,At++}else if(Ze.isHemisphereLight){const Lt=R.get(Ze);Lt.skyColor.copy(Ze.color).multiplyScalar(Jt),Lt.groundColor.copy(Ze.groundColor).multiplyScalar(Jt),U.hemi[V]=Lt,V++}}ee>0&&(g.has("OES_texture_float_linear")===!0?(U.rectAreaLTC1=St.LTC_FLOAT_1,U.rectAreaLTC2=St.LTC_FLOAT_2):(U.rectAreaLTC1=St.LTC_HALF_1,U.rectAreaLTC2=St.LTC_HALF_2)),U.ambient[0]=ut,U.ambient[1]=Se,U.ambient[2]=Ie;const kt=U.hash;(kt.directionalLength!==He||kt.pointLength!==At||kt.spotLength!==Pe||kt.rectAreaLength!==ee||kt.hemiLength!==V||kt.numDirectionalShadows!==ct||kt.numPointShadows!==Ye||kt.numSpotShadows!==Ee||kt.numSpotMaps!==bt||kt.numLightProbes!==yt)&&(U.directional.length=He,U.spot.length=Pe,U.rectArea.length=ee,U.point.length=At,U.hemi.length=V,U.directionalShadow.length=ct,U.directionalShadowMap.length=ct,U.pointShadow.length=Ye,U.pointShadowMap.length=Ye,U.spotShadow.length=Ee,U.spotShadowMap.length=Ee,U.directionalShadowMatrix.length=ct,U.pointShadowMatrix.length=Ye,U.spotLightMatrix.length=Ee+bt-qe,U.spotLightMap.length=bt,U.numSpotLightShadowsWithMaps=qe,U.numLightProbes=yt,kt.directionalLength=He,kt.pointLength=At,kt.spotLength=Pe,kt.rectAreaLength=ee,kt.hemiLength=V,kt.numDirectionalShadows=ct,kt.numPointShadows=Ye,kt.numSpotShadows=Ee,kt.numSpotMaps=bt,kt.numLightProbes=yt,U.version=pc++)}function rt(ze,ut){let Se=0,Ie=0,He=0,At=0,Pe=0;const ee=ut.matrixWorldInverse;for(let V=0,ct=ze.length;V<ct;V++){const Ye=ze[V];if(Ye.isDirectionalLight){const Ee=U.directional[Se];Ee.direction.setFromMatrixPosition(Ye.matrixWorld),q.setFromMatrixPosition(Ye.target.matrixWorld),Ee.direction.sub(q),Ee.direction.transformDirection(ee),Se++}else if(Ye.isSpotLight){const Ee=U.spot[He];Ee.position.setFromMatrixPosition(Ye.matrixWorld),Ee.position.applyMatrix4(ee),Ee.direction.setFromMatrixPosition(Ye.matrixWorld),q.setFromMatrixPosition(Ye.target.matrixWorld),Ee.direction.sub(q),Ee.direction.transformDirection(ee),He++}else if(Ye.isRectAreaLight){const Ee=U.rectArea[At];Ee.position.setFromMatrixPosition(Ye.matrixWorld),Ee.position.applyMatrix4(ee),fe.identity(),$.copy(Ye.matrixWorld),$.premultiply(ee),fe.extractRotation($),Ee.halfWidth.set(Ye.width*.5,0,0),Ee.halfHeight.set(0,Ye.height*.5,0),Ee.halfWidth.applyMatrix4(fe),Ee.halfHeight.applyMatrix4(fe),At++}else if(Ye.isPointLight){const Ee=U.point[Ie];Ee.position.setFromMatrixPosition(Ye.matrixWorld),Ee.position.applyMatrix4(ee),Ie++}else if(Ye.isHemisphereLight){const Ee=U.hemi[Pe];Ee.direction.setFromMatrixPosition(Ye.matrixWorld),Ee.direction.transformDirection(ee),Pe++}}}return{setup:ae,setupView:rt,state:U}}function Bu(g){const R=new hd(g),_=[],U=[];function q(ut){ze.camera=ut,_.length=0,U.length=0}function $(ut){_.push(ut)}function fe(ut){U.push(ut)}function ae(){R.setup(_)}function rt(ut){R.setupView(_,ut)}const ze={lightsArray:_,shadowsArray:U,camera:null,lights:R,transmissionRenderTarget:{}};return{init:q,state:ze,setupLights:ae,setupLightsView:rt,pushLight:$,pushShadow:fe}}function Oc(g){let R=new WeakMap;function _(q,$=0){const fe=R.get(q);let ae;return fe===void 0?(ae=new Bu(g),R.set(q,[ae])):$>=fe.length?(ae=new Bu(g),fe.push(ae)):ae=fe[$],ae}function U(){R=new WeakMap}return{get:_,dispose:U}}const Ui=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,oc=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function fl(g,R,_){let U=new p.iWj;const q=new p.FM8,$=new p.FM8,fe=new p.Ltg,ae=new p.lRF({depthPacking:p.mSO}),rt=new p.Lun,ze={},ut=_.maxTextureSize,Se={[p.Wl3]:p._Li,[p._Li]:p.Wl3,[p.ehD]:p.ehD},Ie=new p.jyz({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new p.FM8},radius:{value:4}},vertexShader:Ui,fragmentShader:oc}),He=Ie.clone();He.defines.HORIZONTAL_PASS=1;const At=new p.u9r;At.setAttribute("position",new p.TlE(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Pe=new p.Kj0(At,Ie),ee=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p._iA;let V=this.type;this.render=function(qe,yt,kt){if(ee.enabled===!1||ee.autoUpdate===!1&&ee.needsUpdate===!1||qe.length===0)return;const se=g.getRenderTarget(),oe=g.getActiveCubeFace(),Ze=g.getActiveMipmapLevel(),Tt=g.state;Tt.setBlending(p.jFi),Tt.buffers.depth.getReversed()===!0?Tt.buffers.color.setClear(0,0,0,0):Tt.buffers.color.setClear(1,1,1,1),Tt.buffers.depth.setTest(!0),Tt.setScissorTest(!1);const Jt=V!==p.dwk&&this.type===p.dwk,ot=V===p.dwk&&this.type!==p.dwk;for(let Zt=0,Lt=qe.length;Zt<Lt;Zt++){const vn=qe[Zt],Rt=vn.shadow;if(Rt===void 0){console.warn("THREE.WebGLShadowMap:",vn,"has no shadow.");continue}if(Rt.autoUpdate===!1&&Rt.needsUpdate===!1)continue;q.copy(Rt.mapSize);const ei=Rt.getFrameExtents();if(q.multiply(ei),$.copy(Rt.mapSize),(q.x>ut||q.y>ut)&&(q.x>ut&&($.x=Math.floor(ut/ei.x),q.x=$.x*ei.x,Rt.mapSize.x=$.x),q.y>ut&&($.y=Math.floor(ut/ei.y),q.y=$.y*ei.y,Rt.mapSize.y=$.y)),Rt.map===null||Jt===!0||ot===!0){const sn=this.type!==p.dwk?{minFilter:p.TyD,magFilter:p.TyD}:{};Rt.map!==null&&Rt.map.dispose(),Rt.map=new p.dd2(q.x,q.y,sn),Rt.map.texture.name=vn.name+".shadowMap",Rt.camera.updateProjectionMatrix()}g.setRenderTarget(Rt.map),g.clear();const Bi=Rt.getViewportCount();for(let sn=0;sn<Bi;sn++){const Zr=Rt.getViewport(sn);fe.set($.x*Zr.x,$.y*Zr.y,$.x*Zr.z,$.y*Zr.w),Tt.viewport(fe),Rt.updateMatrices(vn,sn),U=Rt.getFrustum(),Ee(yt,kt,Rt.camera,vn,this.type)}Rt.isPointLightShadow!==!0&&this.type===p.dwk&&ct(Rt,kt),Rt.needsUpdate=!1}V=this.type,ee.needsUpdate=!1,g.setRenderTarget(se,oe,Ze)};function ct(qe,yt){const kt=R.update(Pe);Ie.defines.VSM_SAMPLES!==qe.blurSamples&&(Ie.defines.VSM_SAMPLES=qe.blurSamples,He.defines.VSM_SAMPLES=qe.blurSamples,Ie.needsUpdate=!0,He.needsUpdate=!0),qe.mapPass===null&&(qe.mapPass=new p.dd2(q.x,q.y)),Ie.uniforms.shadow_pass.value=qe.map.texture,Ie.uniforms.resolution.value=qe.mapSize,Ie.uniforms.radius.value=qe.radius,g.setRenderTarget(qe.mapPass),g.clear(),g.renderBufferDirect(yt,null,kt,Ie,Pe,null),He.uniforms.shadow_pass.value=qe.mapPass.texture,He.uniforms.resolution.value=qe.mapSize,He.uniforms.radius.value=qe.radius,g.setRenderTarget(qe.map),g.clear(),g.renderBufferDirect(yt,null,kt,He,Pe,null)}function Ye(qe,yt,kt,se){let oe=null;const Ze=kt.isPointLight===!0?qe.customDistanceMaterial:qe.customDepthMaterial;if(Ze!==void 0)oe=Ze;else if(oe=kt.isPointLight===!0?rt:ae,g.localClippingEnabled&&yt.clipShadows===!0&&Array.isArray(yt.clippingPlanes)&&yt.clippingPlanes.length!==0||yt.displacementMap&&yt.displacementScale!==0||yt.alphaMap&&yt.alphaTest>0||yt.map&&yt.alphaTest>0||yt.alphaToCoverage===!0){const Tt=oe.uuid,Jt=yt.uuid;let ot=ze[Tt];ot===void 0&&(ot={},ze[Tt]=ot);let Zt=ot[Jt];Zt===void 0&&(Zt=oe.clone(),ot[Jt]=Zt,yt.addEventListener("dispose",bt)),oe=Zt}if(oe.visible=yt.visible,oe.wireframe=yt.wireframe,se===p.dwk?oe.side=yt.shadowSide!==null?yt.shadowSide:yt.side:oe.side=yt.shadowSide!==null?yt.shadowSide:Se[yt.side],oe.alphaMap=yt.alphaMap,oe.alphaTest=yt.alphaToCoverage===!0?.5:yt.alphaTest,oe.map=yt.map,oe.clipShadows=yt.clipShadows,oe.clippingPlanes=yt.clippingPlanes,oe.clipIntersection=yt.clipIntersection,oe.displacementMap=yt.displacementMap,oe.displacementScale=yt.displacementScale,oe.displacementBias=yt.displacementBias,oe.wireframeLinewidth=yt.wireframeLinewidth,oe.linewidth=yt.linewidth,kt.isPointLight===!0&&oe.isMeshDistanceMaterial===!0){const Tt=g.properties.get(oe);Tt.light=kt}return oe}function Ee(qe,yt,kt,se,oe){if(qe.visible===!1)return;if(qe.layers.test(yt.layers)&&(qe.isMesh||qe.isLine||qe.isPoints)&&(qe.castShadow||qe.receiveShadow&&oe===p.dwk)&&(!qe.frustumCulled||U.intersectsObject(qe))){qe.modelViewMatrix.multiplyMatrices(kt.matrixWorldInverse,qe.matrixWorld);const Jt=R.update(qe),ot=qe.material;if(Array.isArray(ot)){const Zt=Jt.groups;for(let Lt=0,vn=Zt.length;Lt<vn;Lt++){const Rt=Zt[Lt],ei=ot[Rt.materialIndex];if(ei&&ei.visible){const Bi=Ye(qe,ei,se,oe);qe.onBeforeShadow(g,qe,yt,kt,Jt,Bi,Rt),g.renderBufferDirect(kt,null,Jt,Bi,qe,Rt),qe.onAfterShadow(g,qe,yt,kt,Jt,Bi,Rt)}}}else if(ot.visible){const Zt=Ye(qe,ot,se,oe);qe.onBeforeShadow(g,qe,yt,kt,Jt,Zt,null),g.renderBufferDirect(kt,null,Jt,Zt,qe,null),qe.onAfterShadow(g,qe,yt,kt,Jt,Zt,null)}}const Tt=qe.children;for(let Jt=0,ot=Tt.length;Jt<ot;Jt++)Ee(Tt[Jt],yt,kt,se,oe)}function bt(qe){qe.target.removeEventListener("dispose",bt);for(const kt in ze){const se=ze[kt],oe=qe.target.uuid;oe in se&&(se[oe].dispose(),delete se[oe])}}}const Pf={[p.BVF]:p.Se2,[p.Zr5]:p.w$m,[p.eD]:p.M6v,[p.vCF]:p.ksN,[p.Se2]:p.BVF,[p.w$m]:p.Zr5,[p.M6v]:p.eD,[p.ksN]:p.vCF};function mc(g,R){function _(){let _e=!1;const pn=new p.Ltg;let Nn=null;const ni=new p.Ltg(0,0,0,0);return{setMask:function(cn){Nn!==cn&&!_e&&(g.colorMask(cn,cn,cn,cn),Nn=cn)},setLocked:function(cn){_e=cn},setClear:function(cn,$t,ui,Ji,pa){pa===!0&&(cn*=Ji,$t*=Ji,ui*=Ji),pn.set(cn,$t,ui,Ji),ni.equals(pn)===!1&&(g.clearColor(cn,$t,ui,Ji),ni.copy(pn))},reset:function(){_e=!1,Nn=null,ni.set(-1,0,0,0)}}}function U(){let _e=!1,pn=!1,Nn=null,ni=null,cn=null;return{setReversed:function($t){if(pn!==$t){const ui=R.get("EXT_clip_control");$t?ui.clipControlEXT(ui.LOWER_LEFT_EXT,ui.ZERO_TO_ONE_EXT):ui.clipControlEXT(ui.LOWER_LEFT_EXT,ui.NEGATIVE_ONE_TO_ONE_EXT),pn=$t;const Ji=cn;cn=null,this.setClear(Ji)}},getReversed:function(){return pn},setTest:function($t){$t?Pt(g.DEPTH_TEST):si(g.DEPTH_TEST)},setMask:function($t){Nn!==$t&&!_e&&(g.depthMask($t),Nn=$t)},setFunc:function($t){if(pn&&($t=Pf[$t]),ni!==$t){switch($t){case p.BVF:g.depthFunc(g.NEVER);break;case p.Se2:g.depthFunc(g.ALWAYS);break;case p.Zr5:g.depthFunc(g.LESS);break;case p.vCF:g.depthFunc(g.LEQUAL);break;case p.eD:g.depthFunc(g.EQUAL);break;case p.ksN:g.depthFunc(g.GEQUAL);break;case p.w$m:g.depthFunc(g.GREATER);break;case p.M6v:g.depthFunc(g.NOTEQUAL);break;default:g.depthFunc(g.LEQUAL)}ni=$t}},setLocked:function($t){_e=$t},setClear:function($t){cn!==$t&&(pn&&($t=1-$t),g.clearDepth($t),cn=$t)},reset:function(){_e=!1,Nn=null,ni=null,cn=null,pn=!1}}}function q(){let _e=!1,pn=null,Nn=null,ni=null,cn=null,$t=null,ui=null,Ji=null,pa=null;return{setTest:function(ia){_e||(ia?Pt(g.STENCIL_TEST):si(g.STENCIL_TEST))},setMask:function(ia){pn!==ia&&!_e&&(g.stencilMask(ia),pn=ia)},setFunc:function(ia,fs,jl){(Nn!==ia||ni!==fs||cn!==jl)&&(g.stencilFunc(ia,fs,jl),Nn=ia,ni=fs,cn=jl)},setOp:function(ia,fs,jl){($t!==ia||ui!==fs||Ji!==jl)&&(g.stencilOp(ia,fs,jl),$t=ia,ui=fs,Ji=jl)},setLocked:function(ia){_e=ia},setClear:function(ia){pa!==ia&&(g.clearStencil(ia),pa=ia)},reset:function(){_e=!1,pn=null,Nn=null,ni=null,cn=null,$t=null,ui=null,Ji=null,pa=null}}}const $=new _,fe=new U,ae=new q,rt=new WeakMap,ze=new WeakMap;let ut={},Se={},Ie=new WeakMap,He=[],At=null,Pe=!1,ee=null,V=null,ct=null,Ye=null,Ee=null,bt=null,qe=null,yt=new p.Ilk(0,0,0),kt=0,se=!1,oe=null,Ze=null,Tt=null,Jt=null,ot=null;const Zt=g.getParameter(g.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Lt=!1,vn=0;const Rt=g.getParameter(g.VERSION);Rt.indexOf("WebGL")!==-1?(vn=parseFloat(/^WebGL (\d)/.exec(Rt)[1]),Lt=vn>=1):Rt.indexOf("OpenGL ES")!==-1&&(vn=parseFloat(/^OpenGL ES (\d)/.exec(Rt)[1]),Lt=vn>=2);let ei=null,Bi={};const sn=g.getParameter(g.SCISSOR_BOX),Zr=g.getParameter(g.VIEWPORT),Po=new p.Ltg().fromArray(sn),ar=new p.Ltg().fromArray(Zr);function Gr(_e,pn,Nn,ni){const cn=new Uint8Array(4),$t=g.createTexture();g.bindTexture(_e,$t),g.texParameteri(_e,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(_e,g.TEXTURE_MAG_FILTER,g.NEAREST);for(let ui=0;ui<Nn;ui++)_e===g.TEXTURE_3D||_e===g.TEXTURE_2D_ARRAY?g.texImage3D(pn,0,g.RGBA,1,1,ni,0,g.RGBA,g.UNSIGNED_BYTE,cn):g.texImage2D(pn+ui,0,g.RGBA,1,1,0,g.RGBA,g.UNSIGNED_BYTE,cn);return $t}const Vt={};Vt[g.TEXTURE_2D]=Gr(g.TEXTURE_2D,g.TEXTURE_2D,1),Vt[g.TEXTURE_CUBE_MAP]=Gr(g.TEXTURE_CUBE_MAP,g.TEXTURE_CUBE_MAP_POSITIVE_X,6),Vt[g.TEXTURE_2D_ARRAY]=Gr(g.TEXTURE_2D_ARRAY,g.TEXTURE_2D_ARRAY,1,1),Vt[g.TEXTURE_3D]=Gr(g.TEXTURE_3D,g.TEXTURE_3D,1,1),$.setClear(0,0,0,1),fe.setClear(1),ae.setClear(0),Pt(g.DEPTH_TEST),fe.setFunc(p.vCF),Wt(!1),ai(p.tm_),Pt(g.CULL_FACE),Ja(p.jFi);function Pt(_e){ut[_e]!==!0&&(g.enable(_e),ut[_e]=!0)}function si(_e){ut[_e]!==!1&&(g.disable(_e),ut[_e]=!1)}function Zi(_e,pn){return Se[_e]!==pn?(g.bindFramebuffer(_e,pn),Se[_e]=pn,_e===g.DRAW_FRAMEBUFFER&&(Se[g.FRAMEBUFFER]=pn),_e===g.FRAMEBUFFER&&(Se[g.DRAW_FRAMEBUFFER]=pn),!0):!1}function yi(_e,pn){let Nn=He,ni=!1;if(_e){Nn=Ie.get(pn),Nn===void 0&&(Nn=[],Ie.set(pn,Nn));const cn=_e.textures;if(Nn.length!==cn.length||Nn[0]!==g.COLOR_ATTACHMENT0){for(let $t=0,ui=cn.length;$t<ui;$t++)Nn[$t]=g.COLOR_ATTACHMENT0+$t;Nn.length=cn.length,ni=!0}}else Nn[0]!==g.BACK&&(Nn[0]=g.BACK,ni=!0);ni&&g.drawBuffers(Nn)}function kr(_e){return At!==_e?(g.useProgram(_e),At=_e,!0):!1}const ds={[p.bGH]:g.FUNC_ADD,[p.Wbm]:g.FUNC_SUBTRACT,[p.rOj]:g.FUNC_REVERSE_SUBTRACT};ds[p.r_]=g.MIN,ds[p.Sm8]=g.MAX;const ye={[p.c8b]:g.ZERO,[p.ghN]:g.ONE,[p.KhW]:g.SRC_COLOR,[p.k74]:g.SRC_ALPHA,[p.RlZ]:g.SRC_ALPHA_SATURATE,[p.Vdb]:g.DST_COLOR,[p.fSK]:g.DST_ALPHA,[p.iWC]:g.ONE_MINUS_SRC_COLOR,[p.LgZ]:g.ONE_MINUS_SRC_ALPHA,[p.Wpd]:g.ONE_MINUS_DST_COLOR,[p.Hy8]:g.ONE_MINUS_DST_ALPHA,[p._wr]:g.CONSTANT_COLOR,[p.Cy]:g.ONE_MINUS_CONSTANT_COLOR,[p.jes]:g.CONSTANT_ALPHA,[p.NKc]:g.ONE_MINUS_CONSTANT_ALPHA};function Ja(_e,pn,Nn,ni,cn,$t,ui,Ji,pa,ia){if(_e===p.jFi){Pe===!0&&(si(g.BLEND),Pe=!1);return}if(Pe===!1&&(Pt(g.BLEND),Pe=!0),_e!==p.Xaj){if(_e!==ee||ia!==se){if((V!==p.bGH||Ee!==p.bGH)&&(g.blendEquation(g.FUNC_ADD),V=p.bGH,Ee=p.bGH),ia)switch(_e){case p.bdR:g.blendFuncSeparate(g.ONE,g.ONE_MINUS_SRC_ALPHA,g.ONE,g.ONE_MINUS_SRC_ALPHA);break;case p.WMw:g.blendFunc(g.ONE,g.ONE);break;case p.N4l:g.blendFuncSeparate(g.ZERO,g.ONE_MINUS_SRC_COLOR,g.ZERO,g.ONE);break;case p.M5h:g.blendFuncSeparate(g.DST_COLOR,g.ONE_MINUS_SRC_ALPHA,g.ZERO,g.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",_e);break}else switch(_e){case p.bdR:g.blendFuncSeparate(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA,g.ONE,g.ONE_MINUS_SRC_ALPHA);break;case p.WMw:g.blendFuncSeparate(g.SRC_ALPHA,g.ONE,g.ONE,g.ONE);break;case p.N4l:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case p.M5h:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",_e);break}ct=null,Ye=null,bt=null,qe=null,yt.set(0,0,0),kt=0,ee=_e,se=ia}return}cn=cn||pn,$t=$t||Nn,ui=ui||ni,(pn!==V||cn!==Ee)&&(g.blendEquationSeparate(ds[pn],ds[cn]),V=pn,Ee=cn),(Nn!==ct||ni!==Ye||$t!==bt||ui!==qe)&&(g.blendFuncSeparate(ye[Nn],ye[ni],ye[$t],ye[ui]),ct=Nn,Ye=ni,bt=$t,qe=ui),(Ji.equals(yt)===!1||pa!==kt)&&(g.blendColor(Ji.r,Ji.g,Ji.b,pa),yt.copy(Ji),kt=pa),ee=_e,se=!1}function Fi(_e,pn){_e.side===p.ehD?si(g.CULL_FACE):Pt(g.CULL_FACE);let Nn=_e.side===p._Li;pn&&(Nn=!Nn),Wt(Nn),_e.blending===p.bdR&&_e.transparent===!1?Ja(p.jFi):Ja(_e.blending,_e.blendEquation,_e.blendSrc,_e.blendDst,_e.blendEquationAlpha,_e.blendSrcAlpha,_e.blendDstAlpha,_e.blendColor,_e.blendAlpha,_e.premultipliedAlpha),fe.setFunc(_e.depthFunc),fe.setTest(_e.depthTest),fe.setMask(_e.depthWrite),$.setMask(_e.colorWrite);const ni=_e.stencilWrite;ae.setTest(ni),ni&&(ae.setMask(_e.stencilWriteMask),ae.setFunc(_e.stencilFunc,_e.stencilRef,_e.stencilFuncMask),ae.setOp(_e.stencilFail,_e.stencilZFail,_e.stencilZPass)),oi(_e.polygonOffset,_e.polygonOffsetFactor,_e.polygonOffsetUnits),_e.alphaToCoverage===!0?Pt(g.SAMPLE_ALPHA_TO_COVERAGE):si(g.SAMPLE_ALPHA_TO_COVERAGE)}function Wt(_e){oe!==_e&&(_e?g.frontFace(g.CW):g.frontFace(g.CCW),oe=_e)}function ai(_e){_e!==p.PeU?(Pt(g.CULL_FACE),_e!==Ze&&(_e===p.tm_?g.cullFace(g.BACK):_e===p.S2y?g.cullFace(g.FRONT):g.cullFace(g.FRONT_AND_BACK))):si(g.CULL_FACE),Ze=_e}function Dr(_e){_e!==Tt&&(Lt&&g.lineWidth(_e),Tt=_e)}function oi(_e,pn,Nn){_e?(Pt(g.POLYGON_OFFSET_FILL),(Jt!==pn||ot!==Nn)&&(g.polygonOffset(pn,Nn),Jt=pn,ot=Nn)):si(g.POLYGON_OFFSET_FILL)}function er(_e){_e?Pt(g.SCISSOR_TEST):si(g.SCISSOR_TEST)}function ha(_e){_e===void 0&&(_e=g.TEXTURE0+Zt-1),ei!==_e&&(g.activeTexture(_e),ei=_e)}function Wr(_e,pn,Nn){Nn===void 0&&(ei===null?Nn=g.TEXTURE0+Zt-1:Nn=ei);let ni=Bi[Nn];ni===void 0&&(ni={type:void 0,texture:void 0},Bi[Nn]=ni),(ni.type!==_e||ni.texture!==pn)&&(ei!==Nn&&(g.activeTexture(Nn),ei=Nn),g.bindTexture(_e,pn||Vt[_e]),ni.type=_e,ni.texture=pn)}function te(){const _e=Bi[ei];_e!==void 0&&_e.type!==void 0&&(g.bindTexture(_e.type,null),_e.type=void 0,_e.texture=void 0)}function H(){try{g.compressedTexImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function We(){try{g.compressedTexImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function wt(){try{g.texSubImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function on(){try{g.texSubImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function gt(){try{g.compressedTexSubImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function ti(){try{g.compressedTexSubImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Cn(){try{g.texStorage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function ci(){try{g.texStorage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function fi(){try{g.texImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function gn(){try{g.texImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Vn(_e){Po.equals(_e)===!1&&(g.scissor(_e.x,_e.y,_e.z,_e.w),Po.copy(_e))}function Ii(_e){ar.equals(_e)===!1&&(g.viewport(_e.x,_e.y,_e.z,_e.w),ar.copy(_e))}function Un(_e,pn){let Nn=ze.get(pn);Nn===void 0&&(Nn=new WeakMap,ze.set(pn,Nn));let ni=Nn.get(_e);ni===void 0&&(ni=g.getUniformBlockIndex(pn,_e.name),Nn.set(_e,ni))}function Fn(_e,pn){const ni=ze.get(pn).get(_e);rt.get(pn)!==ni&&(g.uniformBlockBinding(pn,ni,_e.__bindingPointIndex),rt.set(pn,ni))}function Pi(){g.disable(g.BLEND),g.disable(g.CULL_FACE),g.disable(g.DEPTH_TEST),g.disable(g.POLYGON_OFFSET_FILL),g.disable(g.SCISSOR_TEST),g.disable(g.STENCIL_TEST),g.disable(g.SAMPLE_ALPHA_TO_COVERAGE),g.blendEquation(g.FUNC_ADD),g.blendFunc(g.ONE,g.ZERO),g.blendFuncSeparate(g.ONE,g.ZERO,g.ONE,g.ZERO),g.blendColor(0,0,0,0),g.colorMask(!0,!0,!0,!0),g.clearColor(0,0,0,0),g.depthMask(!0),g.depthFunc(g.LESS),fe.setReversed(!1),g.clearDepth(1),g.stencilMask(4294967295),g.stencilFunc(g.ALWAYS,0,4294967295),g.stencilOp(g.KEEP,g.KEEP,g.KEEP),g.clearStencil(0),g.cullFace(g.BACK),g.frontFace(g.CCW),g.polygonOffset(0,0),g.activeTexture(g.TEXTURE0),g.bindFramebuffer(g.FRAMEBUFFER,null),g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null),g.bindFramebuffer(g.READ_FRAMEBUFFER,null),g.useProgram(null),g.lineWidth(1),g.scissor(0,0,g.canvas.width,g.canvas.height),g.viewport(0,0,g.canvas.width,g.canvas.height),ut={},ei=null,Bi={},Se={},Ie=new WeakMap,He=[],At=null,Pe=!1,ee=null,V=null,ct=null,Ye=null,Ee=null,bt=null,qe=null,yt=new p.Ilk(0,0,0),kt=0,se=!1,oe=null,Ze=null,Tt=null,Jt=null,ot=null,Po.set(0,0,g.canvas.width,g.canvas.height),ar.set(0,0,g.canvas.width,g.canvas.height),$.reset(),fe.reset(),ae.reset()}return{buffers:{color:$,depth:fe,stencil:ae},enable:Pt,disable:si,bindFramebuffer:Zi,drawBuffers:yi,useProgram:kr,setBlending:Ja,setMaterial:Fi,setFlipSided:Wt,setCullFace:ai,setLineWidth:Dr,setPolygonOffset:oi,setScissorTest:er,activeTexture:ha,bindTexture:Wr,unbindTexture:te,compressedTexImage2D:H,compressedTexImage3D:We,texImage2D:fi,texImage3D:gn,updateUBOMapping:Un,uniformBlockBinding:Fn,texStorage2D:Cn,texStorage3D:ci,texSubImage2D:wt,texSubImage3D:on,compressedTexSubImage2D:gt,compressedTexSubImage3D:ti,scissor:Vn,viewport:Ii,reset:Pi}}function Ls(g,R,_,U,q,$,fe){const ae=R.has("WEBGL_multisampled_render_to_texture")?R.get("WEBGL_multisampled_render_to_texture"):null,rt=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),ze=new p.FM8,ut=new WeakMap;let Se;const Ie=new WeakMap;let He=!1;try{He=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(te){}function At(te,H){return He?new OffscreenCanvas(te,H):(0,p.cac)("canvas")}function Pe(te,H,We){let wt=1;const on=Wr(te);if((on.width>We||on.height>We)&&(wt=We/Math.max(on.width,on.height)),wt<1)if(typeof HTMLImageElement!="undefined"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&te instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&te instanceof ImageBitmap||typeof VideoFrame!="undefined"&&te instanceof VideoFrame){const gt=Math.floor(wt*on.width),ti=Math.floor(wt*on.height);Se===void 0&&(Se=At(gt,ti));const Cn=H?At(gt,ti):Se;return Cn.width=gt,Cn.height=ti,Cn.getContext("2d").drawImage(te,0,0,gt,ti),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+on.width+"x"+on.height+") to ("+gt+"x"+ti+")."),Cn}else return"data"in te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+on.width+"x"+on.height+")."),te;return te}function ee(te){return te.generateMipmaps}function V(te){g.generateMipmap(te)}function ct(te){return te.isWebGLCubeRenderTarget?g.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?g.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?g.TEXTURE_2D_ARRAY:g.TEXTURE_2D}function Ye(te,H,We,wt,on=!1){if(te!==null){if(g[te]!==void 0)return g[te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let gt=H;if(H===g.RED&&(We===g.FLOAT&&(gt=g.R32F),We===g.HALF_FLOAT&&(gt=g.R16F),We===g.UNSIGNED_BYTE&&(gt=g.R8)),H===g.RED_INTEGER&&(We===g.UNSIGNED_BYTE&&(gt=g.R8UI),We===g.UNSIGNED_SHORT&&(gt=g.R16UI),We===g.UNSIGNED_INT&&(gt=g.R32UI),We===g.BYTE&&(gt=g.R8I),We===g.SHORT&&(gt=g.R16I),We===g.INT&&(gt=g.R32I)),H===g.RG&&(We===g.FLOAT&&(gt=g.RG32F),We===g.HALF_FLOAT&&(gt=g.RG16F),We===g.UNSIGNED_BYTE&&(gt=g.RG8)),H===g.RG_INTEGER&&(We===g.UNSIGNED_BYTE&&(gt=g.RG8UI),We===g.UNSIGNED_SHORT&&(gt=g.RG16UI),We===g.UNSIGNED_INT&&(gt=g.RG32UI),We===g.BYTE&&(gt=g.RG8I),We===g.SHORT&&(gt=g.RG16I),We===g.INT&&(gt=g.RG32I)),H===g.RGB_INTEGER&&(We===g.UNSIGNED_BYTE&&(gt=g.RGB8UI),We===g.UNSIGNED_SHORT&&(gt=g.RGB16UI),We===g.UNSIGNED_INT&&(gt=g.RGB32UI),We===g.BYTE&&(gt=g.RGB8I),We===g.SHORT&&(gt=g.RGB16I),We===g.INT&&(gt=g.RGB32I)),H===g.RGBA_INTEGER&&(We===g.UNSIGNED_BYTE&&(gt=g.RGBA8UI),We===g.UNSIGNED_SHORT&&(gt=g.RGBA16UI),We===g.UNSIGNED_INT&&(gt=g.RGBA32UI),We===g.BYTE&&(gt=g.RGBA8I),We===g.SHORT&&(gt=g.RGBA16I),We===g.INT&&(gt=g.RGBA32I)),H===g.RGB&&(We===g.UNSIGNED_INT_5_9_9_9_REV&&(gt=g.RGB9_E5),We===g.UNSIGNED_INT_10F_11F_11F_REV&&(gt=g.R11F_G11F_B10F)),H===g.RGBA){const ti=on?p.l6D:p.epp.getTransfer(wt);We===g.FLOAT&&(gt=g.RGBA32F),We===g.HALF_FLOAT&&(gt=g.RGBA16F),We===g.UNSIGNED_BYTE&&(gt=ti===p.j17?g.SRGB8_ALPHA8:g.RGBA8),We===g.UNSIGNED_SHORT_4_4_4_4&&(gt=g.RGBA4),We===g.UNSIGNED_SHORT_5_5_5_1&&(gt=g.RGB5_A1)}return(gt===g.R16F||gt===g.R32F||gt===g.RG16F||gt===g.RG32F||gt===g.RGBA16F||gt===g.RGBA32F)&&R.get("EXT_color_buffer_float"),gt}function Ee(te,H){let We;return te?H===null||H===p.JQ4||H===p.wJv?We=g.DEPTH24_STENCIL8:H===p.VzW?We=g.DEPTH32F_STENCIL8:H===p.LsT&&(We=g.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):H===null||H===p.JQ4||H===p.wJv?We=g.DEPTH_COMPONENT24:H===p.VzW?We=g.DEPTH_COMPONENT32F:H===p.LsT&&(We=g.DEPTH_COMPONENT16),We}function bt(te,H){return ee(te)===!0||te.isFramebufferTexture&&te.minFilter!==p.TyD&&te.minFilter!==p.wem?Math.log2(Math.max(H.width,H.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?H.mipmaps.length:1}function qe(te){const H=te.target;H.removeEventListener("dispose",qe),kt(H),H.isVideoTexture&&ut.delete(H)}function yt(te){const H=te.target;H.removeEventListener("dispose",yt),oe(H)}function kt(te){const H=U.get(te);if(H.__webglInit===void 0)return;const We=te.source,wt=Ie.get(We);if(wt){const on=wt[H.__cacheKey];on.usedTimes--,on.usedTimes===0&&se(te),Object.keys(wt).length===0&&Ie.delete(We)}U.remove(te)}function se(te){const H=U.get(te);g.deleteTexture(H.__webglTexture);const We=te.source,wt=Ie.get(We);delete wt[H.__cacheKey],fe.memory.textures--}function oe(te){const H=U.get(te);if(te.depthTexture&&(te.depthTexture.dispose(),U.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let wt=0;wt<6;wt++){if(Array.isArray(H.__webglFramebuffer[wt]))for(let on=0;on<H.__webglFramebuffer[wt].length;on++)g.deleteFramebuffer(H.__webglFramebuffer[wt][on]);else g.deleteFramebuffer(H.__webglFramebuffer[wt]);H.__webglDepthbuffer&&g.deleteRenderbuffer(H.__webglDepthbuffer[wt])}else{if(Array.isArray(H.__webglFramebuffer))for(let wt=0;wt<H.__webglFramebuffer.length;wt++)g.deleteFramebuffer(H.__webglFramebuffer[wt]);else g.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&g.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&g.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let wt=0;wt<H.__webglColorRenderbuffer.length;wt++)H.__webglColorRenderbuffer[wt]&&g.deleteRenderbuffer(H.__webglColorRenderbuffer[wt]);H.__webglDepthRenderbuffer&&g.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const We=te.textures;for(let wt=0,on=We.length;wt<on;wt++){const gt=U.get(We[wt]);gt.__webglTexture&&(g.deleteTexture(gt.__webglTexture),fe.memory.textures--),U.remove(We[wt])}U.remove(te)}let Ze=0;function Tt(){Ze=0}function Jt(){const te=Ze;return te>=q.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+q.maxTextures),Ze+=1,te}function ot(te){const H=[];return H.push(te.wrapS),H.push(te.wrapT),H.push(te.wrapR||0),H.push(te.magFilter),H.push(te.minFilter),H.push(te.anisotropy),H.push(te.internalFormat),H.push(te.format),H.push(te.type),H.push(te.generateMipmaps),H.push(te.premultiplyAlpha),H.push(te.flipY),H.push(te.unpackAlignment),H.push(te.colorSpace),H.join()}function Zt(te,H){const We=U.get(te);if(te.isVideoTexture&&er(te),te.isRenderTargetTexture===!1&&te.isExternalTexture!==!0&&te.version>0&&We.__version!==te.version){const wt=te.image;if(wt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(wt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Vt(We,te,H);return}}else te.isExternalTexture&&(We.__webglTexture=te.sourceTexture?te.sourceTexture:null);_.bindTexture(g.TEXTURE_2D,We.__webglTexture,g.TEXTURE0+H)}function Lt(te,H){const We=U.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&We.__version!==te.version){Vt(We,te,H);return}_.bindTexture(g.TEXTURE_2D_ARRAY,We.__webglTexture,g.TEXTURE0+H)}function vn(te,H){const We=U.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&We.__version!==te.version){Vt(We,te,H);return}_.bindTexture(g.TEXTURE_3D,We.__webglTexture,g.TEXTURE0+H)}function Rt(te,H){const We=U.get(te);if(te.version>0&&We.__version!==te.version){Pt(We,te,H);return}_.bindTexture(g.TEXTURE_CUBE_MAP,We.__webglTexture,g.TEXTURE0+H)}const ei={[p.rpg]:g.REPEAT,[p.uWy]:g.CLAMP_TO_EDGE,[p.OoA]:g.MIRRORED_REPEAT},Bi={[p.TyD]:g.NEAREST,[p.YLQ]:g.NEAREST_MIPMAP_NEAREST,[p.aH4]:g.NEAREST_MIPMAP_LINEAR,[p.wem]:g.LINEAR,[p.qyh]:g.LINEAR_MIPMAP_NEAREST,[p.D1R]:g.LINEAR_MIPMAP_LINEAR},sn={[p.xoQ]:g.NEVER,[p.T6w]:g.ALWAYS,[p.D67]:g.LESS,[p.M$G]:g.LEQUAL,[p.F1y]:g.EQUAL,[p.Jjb]:g.GEQUAL,[p.Zen]:g.GREATER,[p.O78]:g.NOTEQUAL};function Zr(te,H){if(H.type===p.VzW&&R.has("OES_texture_float_linear")===!1&&(H.magFilter===p.wem||H.magFilter===p.qyh||H.magFilter===p.aH4||H.magFilter===p.D1R||H.minFilter===p.wem||H.minFilter===p.qyh||H.minFilter===p.aH4||H.minFilter===p.D1R)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),g.texParameteri(te,g.TEXTURE_WRAP_S,ei[H.wrapS]),g.texParameteri(te,g.TEXTURE_WRAP_T,ei[H.wrapT]),(te===g.TEXTURE_3D||te===g.TEXTURE_2D_ARRAY)&&g.texParameteri(te,g.TEXTURE_WRAP_R,ei[H.wrapR]),g.texParameteri(te,g.TEXTURE_MAG_FILTER,Bi[H.magFilter]),g.texParameteri(te,g.TEXTURE_MIN_FILTER,Bi[H.minFilter]),H.compareFunction&&(g.texParameteri(te,g.TEXTURE_COMPARE_MODE,g.COMPARE_REF_TO_TEXTURE),g.texParameteri(te,g.TEXTURE_COMPARE_FUNC,sn[H.compareFunction])),R.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===p.TyD||H.minFilter!==p.aH4&&H.minFilter!==p.D1R||H.type===p.VzW&&R.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||U.get(H).__currentAnisotropy){const We=R.get("EXT_texture_filter_anisotropic");g.texParameterf(te,We.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,q.getMaxAnisotropy())),U.get(H).__currentAnisotropy=H.anisotropy}}}function Po(te,H){let We=!1;te.__webglInit===void 0&&(te.__webglInit=!0,H.addEventListener("dispose",qe));const wt=H.source;let on=Ie.get(wt);on===void 0&&(on={},Ie.set(wt,on));const gt=ot(H);if(gt!==te.__cacheKey){on[gt]===void 0&&(on[gt]={texture:g.createTexture(),usedTimes:0},fe.memory.textures++,We=!0),on[gt].usedTimes++;const ti=on[te.__cacheKey];ti!==void 0&&(on[te.__cacheKey].usedTimes--,ti.usedTimes===0&&se(H)),te.__cacheKey=gt,te.__webglTexture=on[gt].texture}return We}function ar(te,H,We){return Math.floor(Math.floor(te/We)/H)}function Gr(te,H,We,wt){const gt=te.updateRanges;if(gt.length===0)_.texSubImage2D(g.TEXTURE_2D,0,0,0,H.width,H.height,We,wt,H.data);else{gt.sort((gn,Vn)=>gn.start-Vn.start);let ti=0;for(let gn=1;gn<gt.length;gn++){const Vn=gt[ti],Ii=gt[gn],Un=Vn.start+Vn.count,Fn=ar(Ii.start,H.width,4),Pi=ar(Vn.start,H.width,4);Ii.start<=Un+1&&Fn===Pi&&ar(Ii.start+Ii.count-1,H.width,4)===Fn?Vn.count=Math.max(Vn.count,Ii.start+Ii.count-Vn.start):(++ti,gt[ti]=Ii)}gt.length=ti+1;const Cn=g.getParameter(g.UNPACK_ROW_LENGTH),ci=g.getParameter(g.UNPACK_SKIP_PIXELS),fi=g.getParameter(g.UNPACK_SKIP_ROWS);g.pixelStorei(g.UNPACK_ROW_LENGTH,H.width);for(let gn=0,Vn=gt.length;gn<Vn;gn++){const Ii=gt[gn],Un=Math.floor(Ii.start/4),Fn=Math.ceil(Ii.count/4),Pi=Un%H.width,_e=Math.floor(Un/H.width),pn=Fn,Nn=1;g.pixelStorei(g.UNPACK_SKIP_PIXELS,Pi),g.pixelStorei(g.UNPACK_SKIP_ROWS,_e),_.texSubImage2D(g.TEXTURE_2D,0,Pi,_e,pn,Nn,We,wt,H.data)}te.clearUpdateRanges(),g.pixelStorei(g.UNPACK_ROW_LENGTH,Cn),g.pixelStorei(g.UNPACK_SKIP_PIXELS,ci),g.pixelStorei(g.UNPACK_SKIP_ROWS,fi)}}function Vt(te,H,We){let wt=g.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(wt=g.TEXTURE_2D_ARRAY),H.isData3DTexture&&(wt=g.TEXTURE_3D);const on=Po(te,H),gt=H.source;_.bindTexture(wt,te.__webglTexture,g.TEXTURE0+We);const ti=U.get(gt);if(gt.version!==ti.__version||on===!0){_.activeTexture(g.TEXTURE0+We);const Cn=p.epp.getPrimaries(p.epp.workingColorSpace),ci=H.colorSpace===p.aCh?null:p.epp.getPrimaries(H.colorSpace),fi=H.colorSpace===p.aCh||Cn===ci?g.NONE:g.BROWSER_DEFAULT_WEBGL;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,H.flipY),g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),g.pixelStorei(g.UNPACK_ALIGNMENT,H.unpackAlignment),g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,fi);let gn=Pe(H.image,!1,q.maxTextureSize);gn=ha(H,gn);const Vn=$.convert(H.format,H.colorSpace),Ii=$.convert(H.type);let Un=Ye(H.internalFormat,Vn,Ii,H.colorSpace,H.isVideoTexture);Zr(wt,H);let Fn;const Pi=H.mipmaps,_e=H.isVideoTexture!==!0,pn=ti.__version===void 0||on===!0,Nn=gt.dataReady,ni=bt(H,gn);if(H.isDepthTexture)Un=Ee(H.format===p.brP,H.type),pn&&(_e?_.texStorage2D(g.TEXTURE_2D,1,Un,gn.width,gn.height):_.texImage2D(g.TEXTURE_2D,0,Un,gn.width,gn.height,0,Vn,Ii,null));else if(H.isDataTexture)if(Pi.length>0){_e&&pn&&_.texStorage2D(g.TEXTURE_2D,ni,Un,Pi[0].width,Pi[0].height);for(let cn=0,$t=Pi.length;cn<$t;cn++)Fn=Pi[cn],_e?Nn&&_.texSubImage2D(g.TEXTURE_2D,cn,0,0,Fn.width,Fn.height,Vn,Ii,Fn.data):_.texImage2D(g.TEXTURE_2D,cn,Un,Fn.width,Fn.height,0,Vn,Ii,Fn.data);H.generateMipmaps=!1}else _e?(pn&&_.texStorage2D(g.TEXTURE_2D,ni,Un,gn.width,gn.height),Nn&&Gr(H,gn,Vn,Ii)):_.texImage2D(g.TEXTURE_2D,0,Un,gn.width,gn.height,0,Vn,Ii,gn.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){_e&&pn&&_.texStorage3D(g.TEXTURE_2D_ARRAY,ni,Un,Pi[0].width,Pi[0].height,gn.depth);for(let cn=0,$t=Pi.length;cn<$t;cn++)if(Fn=Pi[cn],H.format!==p.wk1)if(Vn!==null)if(_e){if(Nn)if(H.layerUpdates.size>0){const ui=(0,p.EcG)(Fn.width,Fn.height,H.format,H.type);for(const Ji of H.layerUpdates){const pa=Fn.data.subarray(Ji*ui/Fn.data.BYTES_PER_ELEMENT,(Ji+1)*ui/Fn.data.BYTES_PER_ELEMENT);_.compressedTexSubImage3D(g.TEXTURE_2D_ARRAY,cn,0,0,Ji,Fn.width,Fn.height,1,Vn,pa)}H.clearLayerUpdates()}else _.compressedTexSubImage3D(g.TEXTURE_2D_ARRAY,cn,0,0,0,Fn.width,Fn.height,gn.depth,Vn,Fn.data)}else _.compressedTexImage3D(g.TEXTURE_2D_ARRAY,cn,Un,Fn.width,Fn.height,gn.depth,0,Fn.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else _e?Nn&&_.texSubImage3D(g.TEXTURE_2D_ARRAY,cn,0,0,0,Fn.width,Fn.height,gn.depth,Vn,Ii,Fn.data):_.texImage3D(g.TEXTURE_2D_ARRAY,cn,Un,Fn.width,Fn.height,gn.depth,0,Vn,Ii,Fn.data)}else{_e&&pn&&_.texStorage2D(g.TEXTURE_2D,ni,Un,Pi[0].width,Pi[0].height);for(let cn=0,$t=Pi.length;cn<$t;cn++)Fn=Pi[cn],H.format!==p.wk1?Vn!==null?_e?Nn&&_.compressedTexSubImage2D(g.TEXTURE_2D,cn,0,0,Fn.width,Fn.height,Vn,Fn.data):_.compressedTexImage2D(g.TEXTURE_2D,cn,Un,Fn.width,Fn.height,0,Fn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_e?Nn&&_.texSubImage2D(g.TEXTURE_2D,cn,0,0,Fn.width,Fn.height,Vn,Ii,Fn.data):_.texImage2D(g.TEXTURE_2D,cn,Un,Fn.width,Fn.height,0,Vn,Ii,Fn.data)}else if(H.isDataArrayTexture)if(_e){if(pn&&_.texStorage3D(g.TEXTURE_2D_ARRAY,ni,Un,gn.width,gn.height,gn.depth),Nn)if(H.layerUpdates.size>0){const cn=(0,p.EcG)(gn.width,gn.height,H.format,H.type);for(const $t of H.layerUpdates){const ui=gn.data.subarray($t*cn/gn.data.BYTES_PER_ELEMENT,($t+1)*cn/gn.data.BYTES_PER_ELEMENT);_.texSubImage3D(g.TEXTURE_2D_ARRAY,0,0,0,$t,gn.width,gn.height,1,Vn,Ii,ui)}H.clearLayerUpdates()}else _.texSubImage3D(g.TEXTURE_2D_ARRAY,0,0,0,0,gn.width,gn.height,gn.depth,Vn,Ii,gn.data)}else _.texImage3D(g.TEXTURE_2D_ARRAY,0,Un,gn.width,gn.height,gn.depth,0,Vn,Ii,gn.data);else if(H.isData3DTexture)_e?(pn&&_.texStorage3D(g.TEXTURE_3D,ni,Un,gn.width,gn.height,gn.depth),Nn&&_.texSubImage3D(g.TEXTURE_3D,0,0,0,0,gn.width,gn.height,gn.depth,Vn,Ii,gn.data)):_.texImage3D(g.TEXTURE_3D,0,Un,gn.width,gn.height,gn.depth,0,Vn,Ii,gn.data);else if(H.isFramebufferTexture){if(pn)if(_e)_.texStorage2D(g.TEXTURE_2D,ni,Un,gn.width,gn.height);else{let cn=gn.width,$t=gn.height;for(let ui=0;ui<ni;ui++)_.texImage2D(g.TEXTURE_2D,ui,Un,cn,$t,0,Vn,Ii,null),cn>>=1,$t>>=1}}else if(Pi.length>0){if(_e&&pn){const cn=Wr(Pi[0]);_.texStorage2D(g.TEXTURE_2D,ni,Un,cn.width,cn.height)}for(let cn=0,$t=Pi.length;cn<$t;cn++)Fn=Pi[cn],_e?Nn&&_.texSubImage2D(g.TEXTURE_2D,cn,0,0,Vn,Ii,Fn):_.texImage2D(g.TEXTURE_2D,cn,Un,Vn,Ii,Fn);H.generateMipmaps=!1}else if(_e){if(pn){const cn=Wr(gn);_.texStorage2D(g.TEXTURE_2D,ni,Un,cn.width,cn.height)}Nn&&_.texSubImage2D(g.TEXTURE_2D,0,0,0,Vn,Ii,gn)}else _.texImage2D(g.TEXTURE_2D,0,Un,Vn,Ii,gn);ee(H)&&V(wt),ti.__version=gt.version,H.onUpdate&&H.onUpdate(H)}te.__version=H.version}function Pt(te,H,We){if(H.image.length!==6)return;const wt=Po(te,H),on=H.source;_.bindTexture(g.TEXTURE_CUBE_MAP,te.__webglTexture,g.TEXTURE0+We);const gt=U.get(on);if(on.version!==gt.__version||wt===!0){_.activeTexture(g.TEXTURE0+We);const ti=p.epp.getPrimaries(p.epp.workingColorSpace),Cn=H.colorSpace===p.aCh?null:p.epp.getPrimaries(H.colorSpace),ci=H.colorSpace===p.aCh||ti===Cn?g.NONE:g.BROWSER_DEFAULT_WEBGL;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,H.flipY),g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),g.pixelStorei(g.UNPACK_ALIGNMENT,H.unpackAlignment),g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,ci);const fi=H.isCompressedTexture||H.image[0].isCompressedTexture,gn=H.image[0]&&H.image[0].isDataTexture,Vn=[];for(let $t=0;$t<6;$t++)!fi&&!gn?Vn[$t]=Pe(H.image[$t],!0,q.maxCubemapSize):Vn[$t]=gn?H.image[$t].image:H.image[$t],Vn[$t]=ha(H,Vn[$t]);const Ii=Vn[0],Un=$.convert(H.format,H.colorSpace),Fn=$.convert(H.type),Pi=Ye(H.internalFormat,Un,Fn,H.colorSpace),_e=H.isVideoTexture!==!0,pn=gt.__version===void 0||wt===!0,Nn=on.dataReady;let ni=bt(H,Ii);Zr(g.TEXTURE_CUBE_MAP,H);let cn;if(fi){_e&&pn&&_.texStorage2D(g.TEXTURE_CUBE_MAP,ni,Pi,Ii.width,Ii.height);for(let $t=0;$t<6;$t++){cn=Vn[$t].mipmaps;for(let ui=0;ui<cn.length;ui++){const Ji=cn[ui];H.format!==p.wk1?Un!==null?_e?Nn&&_.compressedTexSubImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,ui,0,0,Ji.width,Ji.height,Un,Ji.data):_.compressedTexImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,ui,Pi,Ji.width,Ji.height,0,Ji.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_e?Nn&&_.texSubImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,ui,0,0,Ji.width,Ji.height,Un,Fn,Ji.data):_.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,ui,Pi,Ji.width,Ji.height,0,Un,Fn,Ji.data)}}}else{if(cn=H.mipmaps,_e&&pn){cn.length>0&&ni++;const $t=Wr(Vn[0]);_.texStorage2D(g.TEXTURE_CUBE_MAP,ni,Pi,$t.width,$t.height)}for(let $t=0;$t<6;$t++)if(gn){_e?Nn&&_.texSubImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,0,0,0,Vn[$t].width,Vn[$t].height,Un,Fn,Vn[$t].data):_.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,0,Pi,Vn[$t].width,Vn[$t].height,0,Un,Fn,Vn[$t].data);for(let ui=0;ui<cn.length;ui++){const pa=cn[ui].image[$t].image;_e?Nn&&_.texSubImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,ui+1,0,0,pa.width,pa.height,Un,Fn,pa.data):_.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,ui+1,Pi,pa.width,pa.height,0,Un,Fn,pa.data)}}else{_e?Nn&&_.texSubImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,0,0,0,Un,Fn,Vn[$t]):_.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,0,Pi,Un,Fn,Vn[$t]);for(let ui=0;ui<cn.length;ui++){const Ji=cn[ui];_e?Nn&&_.texSubImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,ui+1,0,0,Un,Fn,Ji.image[$t]):_.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+$t,ui+1,Pi,Un,Fn,Ji.image[$t])}}}ee(H)&&V(g.TEXTURE_CUBE_MAP),gt.__version=on.version,H.onUpdate&&H.onUpdate(H)}te.__version=H.version}function si(te,H,We,wt,on,gt){const ti=$.convert(We.format,We.colorSpace),Cn=$.convert(We.type),ci=Ye(We.internalFormat,ti,Cn,We.colorSpace),fi=U.get(H),gn=U.get(We);if(gn.__renderTarget=H,!fi.__hasExternalTextures){const Vn=Math.max(1,H.width>>gt),Ii=Math.max(1,H.height>>gt);on===g.TEXTURE_3D||on===g.TEXTURE_2D_ARRAY?_.texImage3D(on,gt,ci,Vn,Ii,H.depth,0,ti,Cn,null):_.texImage2D(on,gt,ci,Vn,Ii,0,ti,Cn,null)}_.bindFramebuffer(g.FRAMEBUFFER,te),oi(H)?ae.framebufferTexture2DMultisampleEXT(g.FRAMEBUFFER,wt,on,gn.__webglTexture,0,Dr(H)):(on===g.TEXTURE_2D||on>=g.TEXTURE_CUBE_MAP_POSITIVE_X&&on<=g.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&g.framebufferTexture2D(g.FRAMEBUFFER,wt,on,gn.__webglTexture,gt),_.bindFramebuffer(g.FRAMEBUFFER,null)}function Zi(te,H,We){if(g.bindRenderbuffer(g.RENDERBUFFER,te),H.depthBuffer){const wt=H.depthTexture,on=wt&&wt.isDepthTexture?wt.type:null,gt=Ee(H.stencilBuffer,on),ti=H.stencilBuffer?g.DEPTH_STENCIL_ATTACHMENT:g.DEPTH_ATTACHMENT,Cn=Dr(H);oi(H)?ae.renderbufferStorageMultisampleEXT(g.RENDERBUFFER,Cn,gt,H.width,H.height):We?g.renderbufferStorageMultisample(g.RENDERBUFFER,Cn,gt,H.width,H.height):g.renderbufferStorage(g.RENDERBUFFER,gt,H.width,H.height),g.framebufferRenderbuffer(g.FRAMEBUFFER,ti,g.RENDERBUFFER,te)}else{const wt=H.textures;for(let on=0;on<wt.length;on++){const gt=wt[on],ti=$.convert(gt.format,gt.colorSpace),Cn=$.convert(gt.type),ci=Ye(gt.internalFormat,ti,Cn,gt.colorSpace),fi=Dr(H);We&&oi(H)===!1?g.renderbufferStorageMultisample(g.RENDERBUFFER,fi,ci,H.width,H.height):oi(H)?ae.renderbufferStorageMultisampleEXT(g.RENDERBUFFER,fi,ci,H.width,H.height):g.renderbufferStorage(g.RENDERBUFFER,ci,H.width,H.height)}}g.bindRenderbuffer(g.RENDERBUFFER,null)}function yi(te,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(_.bindFramebuffer(g.FRAMEBUFFER,te),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const wt=U.get(H.depthTexture);wt.__renderTarget=H,(!wt.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),Zt(H.depthTexture,0);const on=wt.__webglTexture,gt=Dr(H);if(H.depthTexture.format===p.qkB)oi(H)?ae.framebufferTexture2DMultisampleEXT(g.FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.TEXTURE_2D,on,0,gt):g.framebufferTexture2D(g.FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.TEXTURE_2D,on,0);else if(H.depthTexture.format===p.brP)oi(H)?ae.framebufferTexture2DMultisampleEXT(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.TEXTURE_2D,on,0,gt):g.framebufferTexture2D(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.TEXTURE_2D,on,0);else throw new Error("Unknown depthTexture format")}function kr(te){const H=U.get(te),We=te.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==te.depthTexture){const wt=te.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),wt){const on=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,wt.removeEventListener("dispose",on)};wt.addEventListener("dispose",on),H.__depthDisposeCallback=on}H.__boundDepthTexture=wt}if(te.depthTexture&&!H.__autoAllocateDepthBuffer){if(We)throw new Error("target.depthTexture not supported in Cube render targets");const wt=te.texture.mipmaps;wt&&wt.length>0?yi(H.__webglFramebuffer[0],te):yi(H.__webglFramebuffer,te)}else if(We){H.__webglDepthbuffer=[];for(let wt=0;wt<6;wt++)if(_.bindFramebuffer(g.FRAMEBUFFER,H.__webglFramebuffer[wt]),H.__webglDepthbuffer[wt]===void 0)H.__webglDepthbuffer[wt]=g.createRenderbuffer(),Zi(H.__webglDepthbuffer[wt],te,!1);else{const on=te.stencilBuffer?g.DEPTH_STENCIL_ATTACHMENT:g.DEPTH_ATTACHMENT,gt=H.__webglDepthbuffer[wt];g.bindRenderbuffer(g.RENDERBUFFER,gt),g.framebufferRenderbuffer(g.FRAMEBUFFER,on,g.RENDERBUFFER,gt)}}else{const wt=te.texture.mipmaps;if(wt&&wt.length>0?_.bindFramebuffer(g.FRAMEBUFFER,H.__webglFramebuffer[0]):_.bindFramebuffer(g.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=g.createRenderbuffer(),Zi(H.__webglDepthbuffer,te,!1);else{const on=te.stencilBuffer?g.DEPTH_STENCIL_ATTACHMENT:g.DEPTH_ATTACHMENT,gt=H.__webglDepthbuffer;g.bindRenderbuffer(g.RENDERBUFFER,gt),g.framebufferRenderbuffer(g.FRAMEBUFFER,on,g.RENDERBUFFER,gt)}}_.bindFramebuffer(g.FRAMEBUFFER,null)}function ds(te,H,We){const wt=U.get(te);H!==void 0&&si(wt.__webglFramebuffer,te,te.texture,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,0),We!==void 0&&kr(te)}function ye(te){const H=te.texture,We=U.get(te),wt=U.get(H);te.addEventListener("dispose",yt);const on=te.textures,gt=te.isWebGLCubeRenderTarget===!0,ti=on.length>1;if(ti||(wt.__webglTexture===void 0&&(wt.__webglTexture=g.createTexture()),wt.__version=H.version,fe.memory.textures++),gt){We.__webglFramebuffer=[];for(let Cn=0;Cn<6;Cn++)if(H.mipmaps&&H.mipmaps.length>0){We.__webglFramebuffer[Cn]=[];for(let ci=0;ci<H.mipmaps.length;ci++)We.__webglFramebuffer[Cn][ci]=g.createFramebuffer()}else We.__webglFramebuffer[Cn]=g.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){We.__webglFramebuffer=[];for(let Cn=0;Cn<H.mipmaps.length;Cn++)We.__webglFramebuffer[Cn]=g.createFramebuffer()}else We.__webglFramebuffer=g.createFramebuffer();if(ti)for(let Cn=0,ci=on.length;Cn<ci;Cn++){const fi=U.get(on[Cn]);fi.__webglTexture===void 0&&(fi.__webglTexture=g.createTexture(),fe.memory.textures++)}if(te.samples>0&&oi(te)===!1){We.__webglMultisampledFramebuffer=g.createFramebuffer(),We.__webglColorRenderbuffer=[],_.bindFramebuffer(g.FRAMEBUFFER,We.__webglMultisampledFramebuffer);for(let Cn=0;Cn<on.length;Cn++){const ci=on[Cn];We.__webglColorRenderbuffer[Cn]=g.createRenderbuffer(),g.bindRenderbuffer(g.RENDERBUFFER,We.__webglColorRenderbuffer[Cn]);const fi=$.convert(ci.format,ci.colorSpace),gn=$.convert(ci.type),Vn=Ye(ci.internalFormat,fi,gn,ci.colorSpace,te.isXRRenderTarget===!0),Ii=Dr(te);g.renderbufferStorageMultisample(g.RENDERBUFFER,Ii,Vn,te.width,te.height),g.framebufferRenderbuffer(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0+Cn,g.RENDERBUFFER,We.__webglColorRenderbuffer[Cn])}g.bindRenderbuffer(g.RENDERBUFFER,null),te.depthBuffer&&(We.__webglDepthRenderbuffer=g.createRenderbuffer(),Zi(We.__webglDepthRenderbuffer,te,!0)),_.bindFramebuffer(g.FRAMEBUFFER,null)}}if(gt){_.bindTexture(g.TEXTURE_CUBE_MAP,wt.__webglTexture),Zr(g.TEXTURE_CUBE_MAP,H);for(let Cn=0;Cn<6;Cn++)if(H.mipmaps&&H.mipmaps.length>0)for(let ci=0;ci<H.mipmaps.length;ci++)si(We.__webglFramebuffer[Cn][ci],te,H,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+Cn,ci);else si(We.__webglFramebuffer[Cn],te,H,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+Cn,0);ee(H)&&V(g.TEXTURE_CUBE_MAP),_.unbindTexture()}else if(ti){for(let Cn=0,ci=on.length;Cn<ci;Cn++){const fi=on[Cn],gn=U.get(fi);let Vn=g.TEXTURE_2D;(te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(Vn=te.isWebGL3DRenderTarget?g.TEXTURE_3D:g.TEXTURE_2D_ARRAY),_.bindTexture(Vn,gn.__webglTexture),Zr(Vn,fi),si(We.__webglFramebuffer,te,fi,g.COLOR_ATTACHMENT0+Cn,Vn,0),ee(fi)&&V(Vn)}_.unbindTexture()}else{let Cn=g.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(Cn=te.isWebGL3DRenderTarget?g.TEXTURE_3D:g.TEXTURE_2D_ARRAY),_.bindTexture(Cn,wt.__webglTexture),Zr(Cn,H),H.mipmaps&&H.mipmaps.length>0)for(let ci=0;ci<H.mipmaps.length;ci++)si(We.__webglFramebuffer[ci],te,H,g.COLOR_ATTACHMENT0,Cn,ci);else si(We.__webglFramebuffer,te,H,g.COLOR_ATTACHMENT0,Cn,0);ee(H)&&V(Cn),_.unbindTexture()}te.depthBuffer&&kr(te)}function Ja(te){const H=te.textures;for(let We=0,wt=H.length;We<wt;We++){const on=H[We];if(ee(on)){const gt=ct(te),ti=U.get(on).__webglTexture;_.bindTexture(gt,ti),V(gt),_.unbindTexture()}}}const Fi=[],Wt=[];function ai(te){if(te.samples>0){if(oi(te)===!1){const H=te.textures,We=te.width,wt=te.height;let on=g.COLOR_BUFFER_BIT;const gt=te.stencilBuffer?g.DEPTH_STENCIL_ATTACHMENT:g.DEPTH_ATTACHMENT,ti=U.get(te),Cn=H.length>1;if(Cn)for(let fi=0;fi<H.length;fi++)_.bindFramebuffer(g.FRAMEBUFFER,ti.__webglMultisampledFramebuffer),g.framebufferRenderbuffer(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0+fi,g.RENDERBUFFER,null),_.bindFramebuffer(g.FRAMEBUFFER,ti.__webglFramebuffer),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0+fi,g.TEXTURE_2D,null,0);_.bindFramebuffer(g.READ_FRAMEBUFFER,ti.__webglMultisampledFramebuffer);const ci=te.texture.mipmaps;ci&&ci.length>0?_.bindFramebuffer(g.DRAW_FRAMEBUFFER,ti.__webglFramebuffer[0]):_.bindFramebuffer(g.DRAW_FRAMEBUFFER,ti.__webglFramebuffer);for(let fi=0;fi<H.length;fi++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(on|=g.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(on|=g.STENCIL_BUFFER_BIT)),Cn){g.framebufferRenderbuffer(g.READ_FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.RENDERBUFFER,ti.__webglColorRenderbuffer[fi]);const gn=U.get(H[fi]).__webglTexture;g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,gn,0)}g.blitFramebuffer(0,0,We,wt,0,0,We,wt,on,g.NEAREST),rt===!0&&(Fi.length=0,Wt.length=0,Fi.push(g.COLOR_ATTACHMENT0+fi),te.depthBuffer&&te.resolveDepthBuffer===!1&&(Fi.push(gt),Wt.push(gt),g.invalidateFramebuffer(g.DRAW_FRAMEBUFFER,Wt)),g.invalidateFramebuffer(g.READ_FRAMEBUFFER,Fi))}if(_.bindFramebuffer(g.READ_FRAMEBUFFER,null),_.bindFramebuffer(g.DRAW_FRAMEBUFFER,null),Cn)for(let fi=0;fi<H.length;fi++){_.bindFramebuffer(g.FRAMEBUFFER,ti.__webglMultisampledFramebuffer),g.framebufferRenderbuffer(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0+fi,g.RENDERBUFFER,ti.__webglColorRenderbuffer[fi]);const gn=U.get(H[fi]).__webglTexture;_.bindFramebuffer(g.FRAMEBUFFER,ti.__webglFramebuffer),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0+fi,g.TEXTURE_2D,gn,0)}_.bindFramebuffer(g.DRAW_FRAMEBUFFER,ti.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&rt){const H=te.stencilBuffer?g.DEPTH_STENCIL_ATTACHMENT:g.DEPTH_ATTACHMENT;g.invalidateFramebuffer(g.DRAW_FRAMEBUFFER,[H])}}}function Dr(te){return Math.min(q.maxSamples,te.samples)}function oi(te){const H=U.get(te);return te.samples>0&&R.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function er(te){const H=fe.render.frame;ut.get(te)!==H&&(ut.set(te,H),te.update())}function ha(te,H){const We=te.colorSpace,wt=te.format,on=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||We!==p.GUF&&We!==p.aCh&&(p.epp.getTransfer(We)===p.j17?(wt!==p.wk1||on!==p.ywz)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",We)),H}function Wr(te){return typeof HTMLImageElement!="undefined"&&te instanceof HTMLImageElement?(ze.width=te.naturalWidth||te.width,ze.height=te.naturalHeight||te.height):typeof VideoFrame!="undefined"&&te instanceof VideoFrame?(ze.width=te.displayWidth,ze.height=te.displayHeight):(ze.width=te.width,ze.height=te.height),ze}this.allocateTextureUnit=Jt,this.resetTextureUnits=Tt,this.setTexture2D=Zt,this.setTexture2DArray=Lt,this.setTexture3D=vn,this.setTextureCube=Rt,this.rebindTextures=ds,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=Ja,this.updateMultisampleRenderTarget=ai,this.setupDepthRenderbuffer=kr,this.setupFrameBufferTexture=si,this.useMultisampledRTT=oi}function Us(g,R){function _(U,q=p.aCh){let $;const fe=p.epp.getTransfer(q);if(U===p.ywz)return g.UNSIGNED_BYTE;if(U===p.k0A)return g.UNSIGNED_SHORT_4_4_4_4;if(U===p.irR)return g.UNSIGNED_SHORT_5_5_5_1;if(U===p.tQZ)return g.UNSIGNED_INT_5_9_9_9_REV;if(U===p.dVD)return g.UNSIGNED_INT_10F_11F_11F_REV;if(U===p.T95)return g.BYTE;if(U===p.iAb)return g.SHORT;if(U===p.LsT)return g.UNSIGNED_SHORT;if(U===p.Kz5)return g.INT;if(U===p.JQ4)return g.UNSIGNED_INT;if(U===p.VzW)return g.FLOAT;if(U===p.cLu)return g.HALF_FLOAT;if(U===p.OTo)return g.ALPHA;if(U===p.UCm)return g.RGB;if(U===p.wk1)return g.RGBA;if(U===p.qkB)return g.DEPTH_COMPONENT;if(U===p.brP)return g.DEPTH_STENCIL;if(U===p.hEm)return g.RED;if(U===p.D9w)return g.RED_INTEGER;if(U===p.av9)return g.RG;if(U===p.CtA)return g.RG_INTEGER;if(U===p.E2K)return g.RGBA_INTEGER;if(U===p.wuA||U===p.BFQ||U===p.v3W||U===p.ILR)if(fe===p.j17)if($=R.get("WEBGL_compressed_texture_s3tc_srgb"),$!==null){if(U===p.wuA)return $.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(U===p.BFQ)return $.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(U===p.v3W)return $.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(U===p.ILR)return $.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if($=R.get("WEBGL_compressed_texture_s3tc"),$!==null){if(U===p.wuA)return $.COMPRESSED_RGB_S3TC_DXT1_EXT;if(U===p.BFQ)return $.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(U===p.v3W)return $.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(U===p.ILR)return $.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(U===p._AM||U===p.vCx||U===p.eaV||U===p.CaW)if($=R.get("WEBGL_compressed_texture_pvrtc"),$!==null){if(U===p._AM)return $.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(U===p.vCx)return $.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(U===p.eaV)return $.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(U===p.CaW)return $.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(U===p.fto||U===p.l0P||U===p.ekQ)if($=R.get("WEBGL_compressed_texture_etc"),$!==null){if(U===p.fto||U===p.l0P)return fe===p.j17?$.COMPRESSED_SRGB8_ETC2:$.COMPRESSED_RGB8_ETC2;if(U===p.ekQ)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:$.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(U===p.ptH||U===p.jZA||U===p.y2t||U===p.gi4||U===p.Djp||U===p.BG$||U===p.NYV||U===p.xJs||U===p.pKu||U===p.GG6||U===p.Gih||U===p.FUD||U===p.iiP||U===p.SvJ)if($=R.get("WEBGL_compressed_texture_astc"),$!==null){if(U===p.ptH)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:$.COMPRESSED_RGBA_ASTC_4x4_KHR;if(U===p.jZA)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:$.COMPRESSED_RGBA_ASTC_5x4_KHR;if(U===p.y2t)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:$.COMPRESSED_RGBA_ASTC_5x5_KHR;if(U===p.gi4)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:$.COMPRESSED_RGBA_ASTC_6x5_KHR;if(U===p.Djp)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:$.COMPRESSED_RGBA_ASTC_6x6_KHR;if(U===p.BG$)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:$.COMPRESSED_RGBA_ASTC_8x5_KHR;if(U===p.NYV)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:$.COMPRESSED_RGBA_ASTC_8x6_KHR;if(U===p.xJs)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:$.COMPRESSED_RGBA_ASTC_8x8_KHR;if(U===p.pKu)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:$.COMPRESSED_RGBA_ASTC_10x5_KHR;if(U===p.GG6)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:$.COMPRESSED_RGBA_ASTC_10x6_KHR;if(U===p.Gih)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:$.COMPRESSED_RGBA_ASTC_10x8_KHR;if(U===p.FUD)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:$.COMPRESSED_RGBA_ASTC_10x10_KHR;if(U===p.iiP)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:$.COMPRESSED_RGBA_ASTC_12x10_KHR;if(U===p.SvJ)return fe===p.j17?$.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:$.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(U===p.bsb||U===p.f2y||U===p.QO2)if($=R.get("EXT_texture_compression_bptc"),$!==null){if(U===p.bsb)return fe===p.j17?$.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:$.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(U===p.f2y)return $.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(U===p.QO2)return $.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(U===p.HdW||U===p.vuL||U===p.ZTh||U===p.lGU)if($=R.get("EXT_texture_compression_rgtc"),$!==null){if(U===p.HdW)return $.COMPRESSED_RED_RGTC1_EXT;if(U===p.vuL)return $.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(U===p.ZTh)return $.COMPRESSED_RED_GREEN_RGTC2_EXT;if(U===p.lGU)return $.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return U===p.wJv?g.UNSIGNED_INT_24_8:g[U]!==void 0?g[U]:null}return{convert:_}}const Bs=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ta=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class pd{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(R,_){if(this.texture===null){const U=new p.xnb(R.texture);(R.depthNear!==_.depthNear||R.depthFar!==_.depthFar)&&(this.depthNear=R.depthNear,this.depthFar=R.depthFar),this.texture=U}}getMesh(R){if(this.texture!==null&&this.mesh===null){const _=R.cameras[0].viewport,U=new p.jyz({vertexShader:Bs,fragmentShader:Ta,uniforms:{depthColor:{value:this.texture},depthWidth:{value:_.z},depthHeight:{value:_.w}}});this.mesh=new p.Kj0(new p._12(20,20),U)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class bo extends p.pBf{constructor(R,_){super();const U=this;let q=null,$=1,fe=null,ae="local-floor",rt=1,ze=null,ut=null,Se=null,Ie=null,He=null,At=null;const Pe=typeof XRWebGLBinding!="undefined",ee=new pd,V={},ct=_.getContextAttributes();let Ye=null,Ee=null;const bt=[],qe=[],yt=new p.FM8;let kt=null;const se=new p.cPb;se.viewport=new p.Ltg;const oe=new p.cPb;oe.viewport=new p.Ltg;const Ze=[se,oe],Tt=new p.HkE;let Jt=null,ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Vt){let Pt=bt[Vt];return Pt===void 0&&(Pt=new p.NiX,bt[Vt]=Pt),Pt.getTargetRaySpace()},this.getControllerGrip=function(Vt){let Pt=bt[Vt];return Pt===void 0&&(Pt=new p.NiX,bt[Vt]=Pt),Pt.getGripSpace()},this.getHand=function(Vt){let Pt=bt[Vt];return Pt===void 0&&(Pt=new p.NiX,bt[Vt]=Pt),Pt.getHandSpace()};function Zt(Vt){const Pt=qe.indexOf(Vt.inputSource);if(Pt===-1)return;const si=bt[Pt];si!==void 0&&(si.update(Vt.inputSource,Vt.frame,ze||fe),si.dispatchEvent({type:Vt.type,data:Vt.inputSource}))}function Lt(){q.removeEventListener("select",Zt),q.removeEventListener("selectstart",Zt),q.removeEventListener("selectend",Zt),q.removeEventListener("squeeze",Zt),q.removeEventListener("squeezestart",Zt),q.removeEventListener("squeezeend",Zt),q.removeEventListener("end",Lt),q.removeEventListener("inputsourceschange",vn);for(let Vt=0;Vt<bt.length;Vt++){const Pt=qe[Vt];Pt!==null&&(qe[Vt]=null,bt[Vt].disconnect(Pt))}Jt=null,ot=null,ee.reset();for(const Vt in V)delete V[Vt];R.setRenderTarget(Ye),He=null,Ie=null,Se=null,q=null,Ee=null,Gr.stop(),U.isPresenting=!1,R.setPixelRatio(kt),R.setSize(yt.width,yt.height,!1),U.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Vt){$=Vt,U.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Vt){ae=Vt,U.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return ze||fe},this.setReferenceSpace=function(Vt){ze=Vt},this.getBaseLayer=function(){return Ie!==null?Ie:He},this.getBinding=function(){return Se===null&&Pe&&(Se=new XRWebGLBinding(q,_)),Se},this.getFrame=function(){return At},this.getSession=function(){return q},this.setSession=function(Vt){return yf(this,null,function*(){if(q=Vt,q!==null){if(Ye=R.getRenderTarget(),q.addEventListener("select",Zt),q.addEventListener("selectstart",Zt),q.addEventListener("selectend",Zt),q.addEventListener("squeeze",Zt),q.addEventListener("squeezestart",Zt),q.addEventListener("squeezeend",Zt),q.addEventListener("end",Lt),q.addEventListener("inputsourceschange",vn),ct.xrCompatible!==!0&&(yield _.makeXRCompatible()),kt=R.getPixelRatio(),R.getSize(yt),Pe&&"createProjectionLayer"in XRWebGLBinding.prototype){let si=null,Zi=null,yi=null;ct.depth&&(yi=ct.stencil?_.DEPTH24_STENCIL8:_.DEPTH_COMPONENT24,si=ct.stencil?p.brP:p.qkB,Zi=ct.stencil?p.wJv:p.JQ4);const kr={colorFormat:_.RGBA8,depthFormat:yi,scaleFactor:$};Se=this.getBinding(),Ie=Se.createProjectionLayer(kr),q.updateRenderState({layers:[Ie]}),R.setPixelRatio(1),R.setSize(Ie.textureWidth,Ie.textureHeight,!1),Ee=new p.dd2(Ie.textureWidth,Ie.textureHeight,{format:p.wk1,type:p.ywz,depthTexture:new p.$YQ(Ie.textureWidth,Ie.textureHeight,Zi,void 0,void 0,void 0,void 0,void 0,void 0,si),stencilBuffer:ct.stencil,colorSpace:R.outputColorSpace,samples:ct.antialias?4:0,resolveDepthBuffer:Ie.ignoreDepthValues===!1,resolveStencilBuffer:Ie.ignoreDepthValues===!1})}else{const si={antialias:ct.antialias,alpha:!0,depth:ct.depth,stencil:ct.stencil,framebufferScaleFactor:$};He=new XRWebGLLayer(q,_,si),q.updateRenderState({baseLayer:He}),R.setPixelRatio(1),R.setSize(He.framebufferWidth,He.framebufferHeight,!1),Ee=new p.dd2(He.framebufferWidth,He.framebufferHeight,{format:p.wk1,type:p.ywz,colorSpace:R.outputColorSpace,stencilBuffer:ct.stencil,resolveDepthBuffer:He.ignoreDepthValues===!1,resolveStencilBuffer:He.ignoreDepthValues===!1})}Ee.isXRRenderTarget=!0,this.setFoveation(rt),ze=null,fe=yield q.requestReferenceSpace(ae),Gr.setContext(q),Gr.start(),U.isPresenting=!0,U.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(q!==null)return q.environmentBlendMode},this.getDepthTexture=function(){return ee.getDepthTexture()};function vn(Vt){for(let Pt=0;Pt<Vt.removed.length;Pt++){const si=Vt.removed[Pt],Zi=qe.indexOf(si);Zi>=0&&(qe[Zi]=null,bt[Zi].disconnect(si))}for(let Pt=0;Pt<Vt.added.length;Pt++){const si=Vt.added[Pt];let Zi=qe.indexOf(si);if(Zi===-1){for(let kr=0;kr<bt.length;kr++)if(kr>=qe.length){qe.push(si),Zi=kr;break}else if(qe[kr]===null){qe[kr]=si,Zi=kr;break}if(Zi===-1)break}const yi=bt[Zi];yi&&yi.connect(si)}}const Rt=new p.Pa4,ei=new p.Pa4;function Bi(Vt,Pt,si){Rt.setFromMatrixPosition(Pt.matrixWorld),ei.setFromMatrixPosition(si.matrixWorld);const Zi=Rt.distanceTo(ei),yi=Pt.projectionMatrix.elements,kr=si.projectionMatrix.elements,ds=yi[14]/(yi[10]-1),ye=yi[14]/(yi[10]+1),Ja=(yi[9]+1)/yi[5],Fi=(yi[9]-1)/yi[5],Wt=(yi[8]-1)/yi[0],ai=(kr[8]+1)/kr[0],Dr=ds*Wt,oi=ds*ai,er=Zi/(-Wt+ai),ha=er*-Wt;if(Pt.matrixWorld.decompose(Vt.position,Vt.quaternion,Vt.scale),Vt.translateX(ha),Vt.translateZ(er),Vt.matrixWorld.compose(Vt.position,Vt.quaternion,Vt.scale),Vt.matrixWorldInverse.copy(Vt.matrixWorld).invert(),yi[10]===-1)Vt.projectionMatrix.copy(Pt.projectionMatrix),Vt.projectionMatrixInverse.copy(Pt.projectionMatrixInverse);else{const Wr=ds+er,te=ye+er,H=Dr-ha,We=oi+(Zi-ha),wt=Ja*ye/te*Wr,on=Fi*ye/te*Wr;Vt.projectionMatrix.makePerspective(H,We,wt,on,Wr,te),Vt.projectionMatrixInverse.copy(Vt.projectionMatrix).invert()}}function sn(Vt,Pt){Pt===null?Vt.matrixWorld.copy(Vt.matrix):Vt.matrixWorld.multiplyMatrices(Pt.matrixWorld,Vt.matrix),Vt.matrixWorldInverse.copy(Vt.matrixWorld).invert()}this.updateCamera=function(Vt){if(q===null)return;let Pt=Vt.near,si=Vt.far;ee.texture!==null&&(ee.depthNear>0&&(Pt=ee.depthNear),ee.depthFar>0&&(si=ee.depthFar)),Tt.near=oe.near=se.near=Pt,Tt.far=oe.far=se.far=si,(Jt!==Tt.near||ot!==Tt.far)&&(q.updateRenderState({depthNear:Tt.near,depthFar:Tt.far}),Jt=Tt.near,ot=Tt.far),Tt.layers.mask=Vt.layers.mask|6,se.layers.mask=Tt.layers.mask&3,oe.layers.mask=Tt.layers.mask&5;const Zi=Vt.parent,yi=Tt.cameras;sn(Tt,Zi);for(let kr=0;kr<yi.length;kr++)sn(yi[kr],Zi);yi.length===2?Bi(Tt,se,oe):Tt.projectionMatrix.copy(se.projectionMatrix),Zr(Vt,Tt,Zi)};function Zr(Vt,Pt,si){si===null?Vt.matrix.copy(Pt.matrixWorld):(Vt.matrix.copy(si.matrixWorld),Vt.matrix.invert(),Vt.matrix.multiply(Pt.matrixWorld)),Vt.matrix.decompose(Vt.position,Vt.quaternion,Vt.scale),Vt.updateMatrixWorld(!0),Vt.projectionMatrix.copy(Pt.projectionMatrix),Vt.projectionMatrixInverse.copy(Pt.projectionMatrixInverse),Vt.isPerspectiveCamera&&(Vt.fov=p.I3e*2*Math.atan(1/Vt.projectionMatrix.elements[5]),Vt.zoom=1)}this.getCamera=function(){return Tt},this.getFoveation=function(){if(!(Ie===null&&He===null))return rt},this.setFoveation=function(Vt){rt=Vt,Ie!==null&&(Ie.fixedFoveation=Vt),He!==null&&He.fixedFoveation!==void 0&&(He.fixedFoveation=Vt)},this.hasDepthSensing=function(){return ee.texture!==null},this.getDepthSensingMesh=function(){return ee.getMesh(Tt)},this.getCameraTexture=function(Vt){return V[Vt]};let Po=null;function ar(Vt,Pt){if(ut=Pt.getViewerPose(ze||fe),At=Pt,ut!==null){const si=ut.views;He!==null&&(R.setRenderTargetFramebuffer(Ee,He.framebuffer),R.setRenderTarget(Ee));let Zi=!1;si.length!==Tt.cameras.length&&(Tt.cameras.length=0,Zi=!0);for(let ye=0;ye<si.length;ye++){const Ja=si[ye];let Fi=null;if(He!==null)Fi=He.getViewport(Ja);else{const ai=Se.getViewSubImage(Ie,Ja);Fi=ai.viewport,ye===0&&(R.setRenderTargetTextures(Ee,ai.colorTexture,ai.depthStencilTexture),R.setRenderTarget(Ee))}let Wt=Ze[ye];Wt===void 0&&(Wt=new p.cPb,Wt.layers.enable(ye),Wt.viewport=new p.Ltg,Ze[ye]=Wt),Wt.matrix.fromArray(Ja.transform.matrix),Wt.matrix.decompose(Wt.position,Wt.quaternion,Wt.scale),Wt.projectionMatrix.fromArray(Ja.projectionMatrix),Wt.projectionMatrixInverse.copy(Wt.projectionMatrix).invert(),Wt.viewport.set(Fi.x,Fi.y,Fi.width,Fi.height),ye===0&&(Tt.matrix.copy(Wt.matrix),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale)),Zi===!0&&Tt.cameras.push(Wt)}const yi=q.enabledFeatures;if(yi&&yi.includes("depth-sensing")&&q.depthUsage=="gpu-optimized"&&Pe){Se=U.getBinding();const ye=Se.getDepthInformation(si[0]);ye&&ye.isValid&&ye.texture&&ee.init(ye,q.renderState)}if(yi&&yi.includes("camera-access")&&Pe){R.state.unbindTexture(),Se=U.getBinding();for(let ye=0;ye<si.length;ye++){const Ja=si[ye].camera;if(Ja){let Fi=V[Ja];Fi||(Fi=new p.xnb,V[Ja]=Fi);const Wt=Se.getCameraImage(Ja);Fi.sourceTexture=Wt}}}}for(let si=0;si<bt.length;si++){const Zi=qe[si],yi=bt[si];Zi!==null&&yi!==void 0&&yi.update(Zi,Pt,ze||fe)}Po&&Po(Vt,Pt),Pt.detectedPlanes&&U.dispatchEvent({type:"planesdetected",data:Pt}),At=null}const Gr=new he;Gr.setAnimationLoop(ar),this.setAnimationLoop=function(Vt){Po=Vt},this.dispose=function(){}}}const Wl=new p.USm,Jf=new p.yGw;function Nf(g,R){function _(ee,V){ee.matrixAutoUpdate===!0&&ee.updateMatrix(),V.value.copy(ee.matrix)}function U(ee,V){V.color.getRGB(ee.fogColor.value,(0,p.oDz)(g)),V.isFog?(ee.fogNear.value=V.near,ee.fogFar.value=V.far):V.isFogExp2&&(ee.fogDensity.value=V.density)}function q(ee,V,ct,Ye,Ee){V.isMeshBasicMaterial||V.isMeshLambertMaterial?$(ee,V):V.isMeshToonMaterial?($(ee,V),Se(ee,V)):V.isMeshPhongMaterial?($(ee,V),ut(ee,V)):V.isMeshStandardMaterial?($(ee,V),Ie(ee,V),V.isMeshPhysicalMaterial&&He(ee,V,Ee)):V.isMeshMatcapMaterial?($(ee,V),At(ee,V)):V.isMeshDepthMaterial?$(ee,V):V.isMeshDistanceMaterial?($(ee,V),Pe(ee,V)):V.isMeshNormalMaterial?$(ee,V):V.isLineBasicMaterial?(fe(ee,V),V.isLineDashedMaterial&&ae(ee,V)):V.isPointsMaterial?rt(ee,V,ct,Ye):V.isSpriteMaterial?ze(ee,V):V.isShadowMaterial?(ee.color.value.copy(V.color),ee.opacity.value=V.opacity):V.isShaderMaterial&&(V.uniformsNeedUpdate=!1)}function $(ee,V){ee.opacity.value=V.opacity,V.color&&ee.diffuse.value.copy(V.color),V.emissive&&ee.emissive.value.copy(V.emissive).multiplyScalar(V.emissiveIntensity),V.map&&(ee.map.value=V.map,_(V.map,ee.mapTransform)),V.alphaMap&&(ee.alphaMap.value=V.alphaMap,_(V.alphaMap,ee.alphaMapTransform)),V.bumpMap&&(ee.bumpMap.value=V.bumpMap,_(V.bumpMap,ee.bumpMapTransform),ee.bumpScale.value=V.bumpScale,V.side===p._Li&&(ee.bumpScale.value*=-1)),V.normalMap&&(ee.normalMap.value=V.normalMap,_(V.normalMap,ee.normalMapTransform),ee.normalScale.value.copy(V.normalScale),V.side===p._Li&&ee.normalScale.value.negate()),V.displacementMap&&(ee.displacementMap.value=V.displacementMap,_(V.displacementMap,ee.displacementMapTransform),ee.displacementScale.value=V.displacementScale,ee.displacementBias.value=V.displacementBias),V.emissiveMap&&(ee.emissiveMap.value=V.emissiveMap,_(V.emissiveMap,ee.emissiveMapTransform)),V.specularMap&&(ee.specularMap.value=V.specularMap,_(V.specularMap,ee.specularMapTransform)),V.alphaTest>0&&(ee.alphaTest.value=V.alphaTest);const ct=R.get(V),Ye=ct.envMap,Ee=ct.envMapRotation;Ye&&(ee.envMap.value=Ye,Wl.copy(Ee),Wl.x*=-1,Wl.y*=-1,Wl.z*=-1,Ye.isCubeTexture&&Ye.isRenderTargetTexture===!1&&(Wl.y*=-1,Wl.z*=-1),ee.envMapRotation.value.setFromMatrix4(Jf.makeRotationFromEuler(Wl)),ee.flipEnvMap.value=Ye.isCubeTexture&&Ye.isRenderTargetTexture===!1?-1:1,ee.reflectivity.value=V.reflectivity,ee.ior.value=V.ior,ee.refractionRatio.value=V.refractionRatio),V.lightMap&&(ee.lightMap.value=V.lightMap,ee.lightMapIntensity.value=V.lightMapIntensity,_(V.lightMap,ee.lightMapTransform)),V.aoMap&&(ee.aoMap.value=V.aoMap,ee.aoMapIntensity.value=V.aoMapIntensity,_(V.aoMap,ee.aoMapTransform))}function fe(ee,V){ee.diffuse.value.copy(V.color),ee.opacity.value=V.opacity,V.map&&(ee.map.value=V.map,_(V.map,ee.mapTransform))}function ae(ee,V){ee.dashSize.value=V.dashSize,ee.totalSize.value=V.dashSize+V.gapSize,ee.scale.value=V.scale}function rt(ee,V,ct,Ye){ee.diffuse.value.copy(V.color),ee.opacity.value=V.opacity,ee.size.value=V.size*ct,ee.scale.value=Ye*.5,V.map&&(ee.map.value=V.map,_(V.map,ee.uvTransform)),V.alphaMap&&(ee.alphaMap.value=V.alphaMap,_(V.alphaMap,ee.alphaMapTransform)),V.alphaTest>0&&(ee.alphaTest.value=V.alphaTest)}function ze(ee,V){ee.diffuse.value.copy(V.color),ee.opacity.value=V.opacity,ee.rotation.value=V.rotation,V.map&&(ee.map.value=V.map,_(V.map,ee.mapTransform)),V.alphaMap&&(ee.alphaMap.value=V.alphaMap,_(V.alphaMap,ee.alphaMapTransform)),V.alphaTest>0&&(ee.alphaTest.value=V.alphaTest)}function ut(ee,V){ee.specular.value.copy(V.specular),ee.shininess.value=Math.max(V.shininess,1e-4)}function Se(ee,V){V.gradientMap&&(ee.gradientMap.value=V.gradientMap)}function Ie(ee,V){ee.metalness.value=V.metalness,V.metalnessMap&&(ee.metalnessMap.value=V.metalnessMap,_(V.metalnessMap,ee.metalnessMapTransform)),ee.roughness.value=V.roughness,V.roughnessMap&&(ee.roughnessMap.value=V.roughnessMap,_(V.roughnessMap,ee.roughnessMapTransform)),V.envMap&&(ee.envMapIntensity.value=V.envMapIntensity)}function He(ee,V,ct){ee.ior.value=V.ior,V.sheen>0&&(ee.sheenColor.value.copy(V.sheenColor).multiplyScalar(V.sheen),ee.sheenRoughness.value=V.sheenRoughness,V.sheenColorMap&&(ee.sheenColorMap.value=V.sheenColorMap,_(V.sheenColorMap,ee.sheenColorMapTransform)),V.sheenRoughnessMap&&(ee.sheenRoughnessMap.value=V.sheenRoughnessMap,_(V.sheenRoughnessMap,ee.sheenRoughnessMapTransform))),V.clearcoat>0&&(ee.clearcoat.value=V.clearcoat,ee.clearcoatRoughness.value=V.clearcoatRoughness,V.clearcoatMap&&(ee.clearcoatMap.value=V.clearcoatMap,_(V.clearcoatMap,ee.clearcoatMapTransform)),V.clearcoatRoughnessMap&&(ee.clearcoatRoughnessMap.value=V.clearcoatRoughnessMap,_(V.clearcoatRoughnessMap,ee.clearcoatRoughnessMapTransform)),V.clearcoatNormalMap&&(ee.clearcoatNormalMap.value=V.clearcoatNormalMap,_(V.clearcoatNormalMap,ee.clearcoatNormalMapTransform),ee.clearcoatNormalScale.value.copy(V.clearcoatNormalScale),V.side===p._Li&&ee.clearcoatNormalScale.value.negate())),V.dispersion>0&&(ee.dispersion.value=V.dispersion),V.iridescence>0&&(ee.iridescence.value=V.iridescence,ee.iridescenceIOR.value=V.iridescenceIOR,ee.iridescenceThicknessMinimum.value=V.iridescenceThicknessRange[0],ee.iridescenceThicknessMaximum.value=V.iridescenceThicknessRange[1],V.iridescenceMap&&(ee.iridescenceMap.value=V.iridescenceMap,_(V.iridescenceMap,ee.iridescenceMapTransform)),V.iridescenceThicknessMap&&(ee.iridescenceThicknessMap.value=V.iridescenceThicknessMap,_(V.iridescenceThicknessMap,ee.iridescenceThicknessMapTransform))),V.transmission>0&&(ee.transmission.value=V.transmission,ee.transmissionSamplerMap.value=ct.texture,ee.transmissionSamplerSize.value.set(ct.width,ct.height),V.transmissionMap&&(ee.transmissionMap.value=V.transmissionMap,_(V.transmissionMap,ee.transmissionMapTransform)),ee.thickness.value=V.thickness,V.thicknessMap&&(ee.thicknessMap.value=V.thicknessMap,_(V.thicknessMap,ee.thicknessMapTransform)),ee.attenuationDistance.value=V.attenuationDistance,ee.attenuationColor.value.copy(V.attenuationColor)),V.anisotropy>0&&(ee.anisotropyVector.value.set(V.anisotropy*Math.cos(V.anisotropyRotation),V.anisotropy*Math.sin(V.anisotropyRotation)),V.anisotropyMap&&(ee.anisotropyMap.value=V.anisotropyMap,_(V.anisotropyMap,ee.anisotropyMapTransform))),ee.specularIntensity.value=V.specularIntensity,ee.specularColor.value.copy(V.specularColor),V.specularColorMap&&(ee.specularColorMap.value=V.specularColorMap,_(V.specularColorMap,ee.specularColorMapTransform)),V.specularIntensityMap&&(ee.specularIntensityMap.value=V.specularIntensityMap,_(V.specularIntensityMap,ee.specularIntensityMapTransform))}function At(ee,V){V.matcap&&(ee.matcap.value=V.matcap)}function Pe(ee,V){const ct=R.get(V).light;ee.referencePosition.value.setFromMatrixPosition(ct.matrixWorld),ee.nearDistance.value=ct.shadow.camera.near,ee.farDistance.value=ct.shadow.camera.far}return{refreshFogUniforms:U,refreshMaterialUniforms:q}}function Dc(g,R,_,U){let q={},$={},fe=[];const ae=g.getParameter(g.MAX_UNIFORM_BUFFER_BINDINGS);function rt(ct,Ye){const Ee=Ye.program;U.uniformBlockBinding(ct,Ee)}function ze(ct,Ye){let Ee=q[ct.id];Ee===void 0&&(At(ct),Ee=ut(ct),q[ct.id]=Ee,ct.addEventListener("dispose",ee));const bt=Ye.program;U.updateUBOMapping(ct,bt);const qe=R.render.frame;$[ct.id]!==qe&&(Ie(ct),$[ct.id]=qe)}function ut(ct){const Ye=Se();ct.__bindingPointIndex=Ye;const Ee=g.createBuffer(),bt=ct.__size,qe=ct.usage;return g.bindBuffer(g.UNIFORM_BUFFER,Ee),g.bufferData(g.UNIFORM_BUFFER,bt,qe),g.bindBuffer(g.UNIFORM_BUFFER,null),g.bindBufferBase(g.UNIFORM_BUFFER,Ye,Ee),Ee}function Se(){for(let ct=0;ct<ae;ct++)if(fe.indexOf(ct)===-1)return fe.push(ct),ct;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Ie(ct){const Ye=q[ct.id],Ee=ct.uniforms,bt=ct.__cache;g.bindBuffer(g.UNIFORM_BUFFER,Ye);for(let qe=0,yt=Ee.length;qe<yt;qe++){const kt=Array.isArray(Ee[qe])?Ee[qe]:[Ee[qe]];for(let se=0,oe=kt.length;se<oe;se++){const Ze=kt[se];if(He(Ze,qe,se,bt)===!0){const Tt=Ze.__offset,Jt=Array.isArray(Ze.value)?Ze.value:[Ze.value];let ot=0;for(let Zt=0;Zt<Jt.length;Zt++){const Lt=Jt[Zt],vn=Pe(Lt);typeof Lt=="number"||typeof Lt=="boolean"?(Ze.__data[0]=Lt,g.bufferSubData(g.UNIFORM_BUFFER,Tt+ot,Ze.__data)):Lt.isMatrix3?(Ze.__data[0]=Lt.elements[0],Ze.__data[1]=Lt.elements[1],Ze.__data[2]=Lt.elements[2],Ze.__data[3]=0,Ze.__data[4]=Lt.elements[3],Ze.__data[5]=Lt.elements[4],Ze.__data[6]=Lt.elements[5],Ze.__data[7]=0,Ze.__data[8]=Lt.elements[6],Ze.__data[9]=Lt.elements[7],Ze.__data[10]=Lt.elements[8],Ze.__data[11]=0):(Lt.toArray(Ze.__data,ot),ot+=vn.storage/Float32Array.BYTES_PER_ELEMENT)}g.bufferSubData(g.UNIFORM_BUFFER,Tt,Ze.__data)}}}g.bindBuffer(g.UNIFORM_BUFFER,null)}function He(ct,Ye,Ee,bt){const qe=ct.value,yt=Ye+"_"+Ee;if(bt[yt]===void 0)return typeof qe=="number"||typeof qe=="boolean"?bt[yt]=qe:bt[yt]=qe.clone(),!0;{const kt=bt[yt];if(typeof qe=="number"||typeof qe=="boolean"){if(kt!==qe)return bt[yt]=qe,!0}else if(kt.equals(qe)===!1)return kt.copy(qe),!0}return!1}function At(ct){const Ye=ct.uniforms;let Ee=0;const bt=16;for(let yt=0,kt=Ye.length;yt<kt;yt++){const se=Array.isArray(Ye[yt])?Ye[yt]:[Ye[yt]];for(let oe=0,Ze=se.length;oe<Ze;oe++){const Tt=se[oe],Jt=Array.isArray(Tt.value)?Tt.value:[Tt.value];for(let ot=0,Zt=Jt.length;ot<Zt;ot++){const Lt=Jt[ot],vn=Pe(Lt),Rt=Ee%bt,ei=Rt%vn.boundary,Bi=Rt+ei;Ee+=ei,Bi!==0&&bt-Bi<vn.storage&&(Ee+=bt-Bi),Tt.__data=new Float32Array(vn.storage/Float32Array.BYTES_PER_ELEMENT),Tt.__offset=Ee,Ee+=vn.storage}}}const qe=Ee%bt;return qe>0&&(Ee+=bt-qe),ct.__size=Ee,ct.__cache={},this}function Pe(ct){const Ye={boundary:0,storage:0};return typeof ct=="number"||typeof ct=="boolean"?(Ye.boundary=4,Ye.storage=4):ct.isVector2?(Ye.boundary=8,Ye.storage=8):ct.isVector3||ct.isColor?(Ye.boundary=16,Ye.storage=12):ct.isVector4?(Ye.boundary=16,Ye.storage=16):ct.isMatrix3?(Ye.boundary=48,Ye.storage=48):ct.isMatrix4?(Ye.boundary=64,Ye.storage=64):ct.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ct),Ye}function ee(ct){const Ye=ct.target;Ye.removeEventListener("dispose",ee);const Ee=fe.indexOf(Ye.__bindingPointIndex);fe.splice(Ee,1),g.deleteBuffer(q[Ye.id]),delete q[Ye.id],delete $[Ye.id]}function V(){for(const ct in q)g.deleteBuffer(q[ct]);fe=[],q={},$={}}return{bind:rt,update:ze,dispose:V}}class sc{constructor(R={}){const{canvas:_=(0,p.O5A)(),context:U=null,depth:q=!0,stencil:$=!1,alpha:fe=!1,antialias:ae=!1,premultipliedAlpha:rt=!0,preserveDrawingBuffer:ze=!1,powerPreference:ut="default",failIfMajorPerformanceCaveat:Se=!1,reversedDepthBuffer:Ie=!1}=R;this.isWebGLRenderer=!0;let He;if(U!==null){if(typeof WebGLRenderingContext!="undefined"&&U instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");He=U.getContextAttributes().alpha}else He=fe;const At=new Uint32Array(4),Pe=new Int32Array(4);let ee=null,V=null;const ct=[],Ye=[];this.domElement=_,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=p.uL9,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const Ee=this;let bt=!1;this._outputColorSpace=p.KI_;let qe=0,yt=0,kt=null,se=-1,oe=null;const Ze=new p.Ltg,Tt=new p.Ltg;let Jt=null;const ot=new p.Ilk(0);let Zt=0,Lt=_.width,vn=_.height,Rt=1,ei=null,Bi=null;const sn=new p.Ltg(0,0,Lt,vn),Zr=new p.Ltg(0,0,Lt,vn);let Po=!1;const ar=new p.iWj;let Gr=!1,Vt=!1;const Pt=new p.yGw,si=new p.Pa4,Zi=new p.Ltg,yi={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let kr=!1;function ds(){return kt===null?Rt:1}let ye=U;function Ja(Y,Be){return _.getContext(Y,Be)}try{const Y={alpha:!0,depth:q,stencil:$,antialias:ae,premultipliedAlpha:rt,preserveDrawingBuffer:ze,powerPreference:ut,failIfMajorPerformanceCaveat:Se};if("setAttribute"in _&&_.setAttribute("data-engine",`three.js r${p.UZH}`),_.addEventListener("webglcontextlost",Nn,!1),_.addEventListener("webglcontextrestored",ni,!1),_.addEventListener("webglcontextcreationerror",cn,!1),ye===null){const Be="webgl2";if(ye=Ja(Be,Y),ye===null)throw Ja(Be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let Fi,Wt,ai,Dr,oi,er,ha,Wr,te,H,We,wt,on,gt,ti,Cn,ci,fi,gn,Vn,Ii,Un,Fn,Pi;function _e(){Fi=new Fd(ye),Fi.init(),Un=new Us(ye,Fi),Wt=new Hr(ye,Fi,R,Un),ai=new mc(ye,Fi),Wt.reversedDepthBuffer&&Ie&&ai.buffers.depth.setReversed(!0),Dr=new bf(ye),oi=new hu,er=new Ls(ye,Fi,ai,oi,Wt,Un,Dr),ha=new ir(Ee),Wr=new zl(Ee),te=new mn(ye),Fn=new Gn(ye,te),H=new xf(ye,te,Dr,Fn),We=new Hd(ye,H,te,Dr),gn=new zd(ye,Wt,er),Cn=new Tr(oi),wt=new Du(Ee,ha,Wr,Fi,Wt,Fn,Cn),on=new Nf(Ee,oi),gt=new ac,ti=new Oc(Fi),fi=new Xn(Ee,ha,Wr,ai,We,He,rt),ci=new fl(Ee,We,Wt),Pi=new Dc(ye,Dr,Wt,ai),Vn=new gi(ye,Fi,Dr),Ii=new Sf(ye,Fi,Dr),Dr.programs=wt.programs,Ee.capabilities=Wt,Ee.extensions=Fi,Ee.properties=oi,Ee.renderLists=gt,Ee.shadowMap=ci,Ee.state=ai,Ee.info=Dr}_e();const pn=new bo(Ee,ye);this.xr=pn,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const Y=Fi.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){const Y=Fi.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return Rt},this.setPixelRatio=function(Y){Y!==void 0&&(Rt=Y,this.setSize(Lt,vn,!1))},this.getSize=function(Y){return Y.set(Lt,vn)},this.setSize=function(Y,Be,pt=!0){if(pn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Lt=Y,vn=Be,_.width=Math.floor(Y*Rt),_.height=Math.floor(Be*Rt),pt===!0&&(_.style.width=Y+"px",_.style.height=Be+"px"),this.setViewport(0,0,Y,Be)},this.getDrawingBufferSize=function(Y){return Y.set(Lt*Rt,vn*Rt).floor()},this.setDrawingBufferSize=function(Y,Be,pt){Lt=Y,vn=Be,Rt=pt,_.width=Math.floor(Y*pt),_.height=Math.floor(Be*pt),this.setViewport(0,0,Y,Be)},this.getCurrentViewport=function(Y){return Y.copy(Ze)},this.getViewport=function(Y){return Y.copy(sn)},this.setViewport=function(Y,Be,pt,dt){Y.isVector4?sn.set(Y.x,Y.y,Y.z,Y.w):sn.set(Y,Be,pt,dt),ai.viewport(Ze.copy(sn).multiplyScalar(Rt).round())},this.getScissor=function(Y){return Y.copy(Zr)},this.setScissor=function(Y,Be,pt,dt){Y.isVector4?Zr.set(Y.x,Y.y,Y.z,Y.w):Zr.set(Y,Be,pt,dt),ai.scissor(Tt.copy(Zr).multiplyScalar(Rt).round())},this.getScissorTest=function(){return Po},this.setScissorTest=function(Y){ai.setScissorTest(Po=Y)},this.setOpaqueSort=function(Y){ei=Y},this.setTransparentSort=function(Y){Bi=Y},this.getClearColor=function(Y){return Y.copy(fi.getClearColor())},this.setClearColor=function(){fi.setClearColor(...arguments)},this.getClearAlpha=function(){return fi.getClearAlpha()},this.setClearAlpha=function(){fi.setClearAlpha(...arguments)},this.clear=function(Y=!0,Be=!0,pt=!0){let dt=0;if(Y){let Ve=!1;if(kt!==null){const un=kt.texture.format;Ve=un===p.E2K||un===p.CtA||un===p.D9w}if(Ve){const un=kt.texture.type,Bn=un===p.ywz||un===p.JQ4||un===p.LsT||un===p.wJv||un===p.k0A||un===p.irR,ri=fi.getClearColor(),qn=fi.getClearAlpha(),Mi=ri.r,zi=ri.g,Si=ri.b;Bn?(At[0]=Mi,At[1]=zi,At[2]=Si,At[3]=qn,ye.clearBufferuiv(ye.COLOR,0,At)):(Pe[0]=Mi,Pe[1]=zi,Pe[2]=Si,Pe[3]=qn,ye.clearBufferiv(ye.COLOR,0,Pe))}else dt|=ye.COLOR_BUFFER_BIT}Be&&(dt|=ye.DEPTH_BUFFER_BIT),pt&&(dt|=ye.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ye.clear(dt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){_.removeEventListener("webglcontextlost",Nn,!1),_.removeEventListener("webglcontextrestored",ni,!1),_.removeEventListener("webglcontextcreationerror",cn,!1),fi.dispose(),gt.dispose(),ti.dispose(),oi.dispose(),ha.dispose(),Wr.dispose(),We.dispose(),Fn.dispose(),Pi.dispose(),wt.dispose(),pn.dispose(),pn.removeEventListener("sessionstart",jl),pn.removeEventListener("sessionend",Yd),Yo.stop()};function Nn(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),bt=!0}function ni(){console.log("THREE.WebGLRenderer: Context Restored."),bt=!1;const Y=Dr.autoReset,Be=ci.enabled,pt=ci.autoUpdate,dt=ci.needsUpdate,Ve=ci.type;_e(),Dr.autoReset=Y,ci.enabled=Be,ci.autoUpdate=pt,ci.needsUpdate=dt,ci.type=Ve}function cn(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function $t(Y){const Be=Y.target;Be.removeEventListener("dispose",$t),ui(Be)}function ui(Y){Ji(Y),oi.remove(Y)}function Ji(Y){const Be=oi.get(Y).programs;Be!==void 0&&(Be.forEach(function(pt){wt.releaseProgram(pt)}),Y.isShaderMaterial&&wt.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,Be,pt,dt,Ve,un){Be===null&&(Be=yi);const Bn=Ve.isMesh&&Ve.matrixWorld.determinant()<0,ri=Qd(Y,Be,pt,dt,Ve);ai.setMaterial(dt,Bn);let qn=pt.index,Mi=1;if(dt.wireframe===!0){if(qn=H.getWireframeAttribute(pt),qn===void 0)return;Mi=2}const zi=pt.drawRange,Si=pt.attributes.position;let wr=zi.start*Mi,wa=(zi.start+zi.count)*Mi;un!==null&&(wr=Math.max(wr,un.start*Mi),wa=Math.min(wa,(un.start+un.count)*Mi)),qn!==null?(wr=Math.max(wr,0),wa=Math.min(wa,qn.count)):Si!=null&&(wr=Math.max(wr,0),wa=Math.min(wa,Si.count));const _o=wa-wr;if(_o<0||_o===1/0)return;Fn.setup(Ve,dt,ri,pt,qn);let Da,Pa=Vn;if(qn!==null&&(Da=te.get(qn),Pa=Ii,Pa.setIndex(Da)),Ve.isMesh)dt.wireframe===!0?(ai.setLineWidth(dt.wireframeLinewidth*ds()),Pa.setMode(ye.LINES)):Pa.setMode(ye.TRIANGLES);else if(Ve.isLine){let Ti=dt.linewidth;Ti===void 0&&(Ti=1),ai.setLineWidth(Ti*ds()),Ve.isLineSegments?Pa.setMode(ye.LINES):Ve.isLineLoop?Pa.setMode(ye.LINE_LOOP):Pa.setMode(ye.LINE_STRIP)}else Ve.isPoints?Pa.setMode(ye.POINTS):Ve.isSprite&&Pa.setMode(ye.TRIANGLES);if(Ve.isBatchedMesh)if(Ve._multiDrawInstances!==null)(0,p.O4K)("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Pa.renderMultiDrawInstances(Ve._multiDrawStarts,Ve._multiDrawCounts,Ve._multiDrawCount,Ve._multiDrawInstances);else if(Fi.get("WEBGL_multi_draw"))Pa.renderMultiDraw(Ve._multiDrawStarts,Ve._multiDrawCounts,Ve._multiDrawCount);else{const Ti=Ve._multiDrawStarts,vo=Ve._multiDrawCounts,Qr=Ve._multiDrawCount,nl=qn?te.get(qn).bytesPerElement:1,Uc=oi.get(dt).currentProgram.getUniforms();for(let il=0;il<Qr;il++)Uc.setValue(ye,"_gl_DrawID",il),Pa.render(Ti[il]/nl,vo[il])}else if(Ve.isInstancedMesh)Pa.renderInstances(wr,_o,Ve.count);else if(pt.isInstancedBufferGeometry){const Ti=pt._maxInstanceCount!==void 0?pt._maxInstanceCount:1/0,vo=Math.min(pt.instanceCount,Ti);Pa.renderInstances(wr,_o,vo)}else Pa.render(wr,_o)};function pa(Y,Be,pt){Y.transparent===!0&&Y.side===p.ehD&&Y.forceSinglePass===!1?(Y.side=p._Li,Y.needsUpdate=!0,lc(Y,Be,pt),Y.side=p.Wl3,Y.needsUpdate=!0,lc(Y,Be,pt),Y.side=p.ehD):lc(Y,Be,pt)}this.compile=function(Y,Be,pt=null){pt===null&&(pt=Y),V=ti.get(pt),V.init(Be),Ye.push(V),pt.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Be.layers)&&(V.pushLight(Ve),Ve.castShadow&&V.pushShadow(Ve))}),Y!==pt&&Y.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Be.layers)&&(V.pushLight(Ve),Ve.castShadow&&V.pushShadow(Ve))}),V.setupLights();const dt=new Set;return Y.traverse(function(Ve){if(!(Ve.isMesh||Ve.isPoints||Ve.isLine||Ve.isSprite))return;const un=Ve.material;if(un)if(Array.isArray(un))for(let Bn=0;Bn<un.length;Bn++){const ri=un[Bn];pa(ri,pt,Ve),dt.add(ri)}else pa(un,pt,Ve),dt.add(un)}),V=Ye.pop(),dt},this.compileAsync=function(Y,Be,pt=null){const dt=this.compile(Y,Be,pt);return new Promise(Ve=>{function un(){if(dt.forEach(function(Bn){oi.get(Bn).currentProgram.isReady()&&dt.delete(Bn)}),dt.size===0){Ve(Y);return}setTimeout(un,10)}Fi.get("KHR_parallel_shader_compile")!==null?un():setTimeout(un,10)})};let ia=null;function fs(Y){ia&&ia(Y)}function jl(){Yo.stop()}function Yd(){Yo.start()}const Yo=new he;Yo.setAnimationLoop(fs),typeof self!="undefined"&&Yo.setContext(self),this.setAnimationLoop=function(Y){ia=Y,pn.setAnimationLoop(Y),Y===null?Yo.stop():Yo.start()},pn.addEventListener("sessionstart",jl),pn.addEventListener("sessionend",Yd),this.render=function(Y,Be){if(Be!==void 0&&Be.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(bt===!0)return;if(Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),Be.parent===null&&Be.matrixWorldAutoUpdate===!0&&Be.updateMatrixWorld(),pn.enabled===!0&&pn.isPresenting===!0&&(pn.cameraAutoUpdate===!0&&pn.updateCamera(Be),Be=pn.getCamera()),Y.isScene===!0&&Y.onBeforeRender(Ee,Y,Be,kt),V=ti.get(Y,Ye.length),V.init(Be),Ye.push(V),Pt.multiplyMatrices(Be.projectionMatrix,Be.matrixWorldInverse),ar.setFromProjectionMatrix(Pt,p._RZ,Be.reversedDepth),Vt=this.localClippingEnabled,Gr=Cn.init(this.clippingPlanes,Vt),ee=gt.get(Y,ct.length),ee.init(),ct.push(ee),pn.enabled===!0&&pn.isPresenting===!0){const un=Ee.xr.getDepthSensingMesh();un!==null&&vc(un,Be,-1/0,Ee.sortObjects)}vc(Y,Be,0,Ee.sortObjects),ee.finish(),Ee.sortObjects===!0&&ee.sort(ei,Bi),kr=pn.enabled===!1||pn.isPresenting===!1||pn.hasDepthSensing()===!1,kr&&fi.addToRenderList(ee,Y),this.info.render.frame++,Gr===!0&&Cn.beginShadows();const pt=V.state.shadowsArray;ci.render(pt,Y,Be),Gr===!0&&Cn.endShadows(),this.info.autoReset===!0&&this.info.reset();const dt=ee.opaque,Ve=ee.transmissive;if(V.setupLights(),Be.isArrayCamera){const un=Be.cameras;if(Ve.length>0)for(let Bn=0,ri=un.length;Bn<ri;Bn++){const qn=un[Bn];qd(dt,Ve,Y,qn)}kr&&fi.render(Y);for(let Bn=0,ri=un.length;Bn<ri;Bn++){const qn=un[Bn];vu(ee,Y,qn,qn.viewport)}}else Ve.length>0&&qd(dt,Ve,Y,Be),kr&&fi.render(Y),vu(ee,Y,Be);kt!==null&&yt===0&&(er.updateMultisampleRenderTarget(kt),er.updateRenderTargetMipmap(kt)),Y.isScene===!0&&Y.onAfterRender(Ee,Y,Be),Fn.resetDefaultState(),se=-1,oe=null,Ye.pop(),Ye.length>0?(V=Ye[Ye.length-1],Gr===!0&&Cn.setGlobalState(Ee.clippingPlanes,V.state.camera)):V=null,ct.pop(),ct.length>0?ee=ct[ct.length-1]:ee=null};function vc(Y,Be,pt,dt){if(Y.visible===!1)return;if(Y.layers.test(Be.layers)){if(Y.isGroup)pt=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(Be);else if(Y.isLight)V.pushLight(Y),Y.castShadow&&V.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||ar.intersectsSprite(Y)){dt&&Zi.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(Pt);const Bn=We.update(Y),ri=Y.material;ri.visible&&ee.push(Y,Bn,ri,pt,Zi.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(!Y.frustumCulled||ar.intersectsObject(Y))){const Bn=We.update(Y),ri=Y.material;if(dt&&(Y.boundingSphere!==void 0?(Y.boundingSphere===null&&Y.computeBoundingSphere(),Zi.copy(Y.boundingSphere.center)):(Bn.boundingSphere===null&&Bn.computeBoundingSphere(),Zi.copy(Bn.boundingSphere.center)),Zi.applyMatrix4(Y.matrixWorld).applyMatrix4(Pt)),Array.isArray(ri)){const qn=Bn.groups;for(let Mi=0,zi=qn.length;Mi<zi;Mi++){const Si=qn[Mi],wr=ri[Si.materialIndex];wr&&wr.visible&&ee.push(Y,Bn,wr,pt,Zi.z,Si)}}else ri.visible&&ee.push(Y,Bn,ri,pt,Zi.z,null)}}const un=Y.children;for(let Bn=0,ri=un.length;Bn<ri;Bn++)vc(un[Bn],Be,pt,dt)}function vu(Y,Be,pt,dt){const Ve=Y.opaque,un=Y.transmissive,Bn=Y.transparent;V.setupLightsView(pt),Gr===!0&&Cn.setGlobalState(Ee.clippingPlanes,pt),dt&&ai.viewport(Ze.copy(dt)),Ve.length>0&&Ml(Ve,Be,pt),un.length>0&&Ml(un,Be,pt),Bn.length>0&&Ml(Bn,Be,pt),ai.buffers.depth.setTest(!0),ai.buffers.depth.setMask(!0),ai.buffers.color.setMask(!0),ai.setPolygonOffset(!1)}function qd(Y,Be,pt,dt){if((pt.isScene===!0?pt.overrideMaterial:null)!==null)return;V.state.transmissionRenderTarget[dt.id]===void 0&&(V.state.transmissionRenderTarget[dt.id]=new p.dd2(1,1,{generateMipmaps:!0,type:Fi.has("EXT_color_buffer_half_float")||Fi.has("EXT_color_buffer_float")?p.cLu:p.ywz,minFilter:p.D1R,samples:4,stencilBuffer:$,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:p.epp.workingColorSpace}));const un=V.state.transmissionRenderTarget[dt.id],Bn=dt.viewport||Ze;un.setSize(Bn.z*Ee.transmissionResolutionScale,Bn.w*Ee.transmissionResolutionScale);const ri=Ee.getRenderTarget(),qn=Ee.getActiveCubeFace(),Mi=Ee.getActiveMipmapLevel();Ee.setRenderTarget(un),Ee.getClearColor(ot),Zt=Ee.getClearAlpha(),Zt<1&&Ee.setClearColor(16777215,.5),Ee.clear(),kr&&fi.render(pt);const zi=Ee.toneMapping;Ee.toneMapping=p.uL9;const Si=dt.viewport;if(dt.viewport!==void 0&&(dt.viewport=void 0),V.setupLightsView(dt),Gr===!0&&Cn.setGlobalState(Ee.clippingPlanes,dt),Ml(Y,pt,dt),er.updateMultisampleRenderTarget(un),er.updateRenderTargetMipmap(un),Fi.has("WEBGL_multisampled_render_to_texture")===!1){let wr=!1;for(let wa=0,_o=Be.length;wa<_o;wa++){const Da=Be[wa],Pa=Da.object,Ti=Da.geometry,vo=Da.material,Qr=Da.group;if(vo.side===p.ehD&&Pa.layers.test(dt.layers)){const nl=vo.side;vo.side=p._Li,vo.needsUpdate=!0,gu(Pa,pt,dt,Ti,vo,Qr),vo.side=nl,vo.needsUpdate=!0,wr=!0}}wr===!0&&(er.updateMultisampleRenderTarget(un),er.updateRenderTargetMipmap(un))}Ee.setRenderTarget(ri,qn,Mi),Ee.setClearColor(ot,Zt),Si!==void 0&&(dt.viewport=Si),Ee.toneMapping=zi}function Ml(Y,Be,pt){const dt=Be.isScene===!0?Be.overrideMaterial:null;for(let Ve=0,un=Y.length;Ve<un;Ve++){const Bn=Y[Ve],ri=Bn.object,qn=Bn.geometry,Mi=Bn.group;let zi=Bn.material;zi.allowOverride===!0&&dt!==null&&(zi=dt),ri.layers.test(pt.layers)&&gu(ri,Be,pt,qn,zi,Mi)}}function gu(Y,Be,pt,dt,Ve,un){Y.onBeforeRender(Ee,Be,pt,dt,Ve,un),Y.modelViewMatrix.multiplyMatrices(pt.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),Ve.onBeforeRender(Ee,Be,pt,dt,Y,un),Ve.transparent===!0&&Ve.side===p.ehD&&Ve.forceSinglePass===!1?(Ve.side=p._Li,Ve.needsUpdate=!0,Ee.renderBufferDirect(pt,Be,dt,Ve,Y,un),Ve.side=p.Wl3,Ve.needsUpdate=!0,Ee.renderBufferDirect(pt,Be,dt,Ve,Y,un),Ve.side=p.ehD):Ee.renderBufferDirect(pt,Be,dt,Ve,Y,un),Y.onAfterRender(Ee,Be,pt,dt,Ve,un)}function lc(Y,Be,pt){Be.isScene!==!0&&(Be=yi);const dt=oi.get(Y),Ve=V.state.lights,un=V.state.shadowsArray,Bn=Ve.state.version,ri=wt.getParameters(Y,Ve.state,un,Be,pt),qn=wt.getProgramCacheKey(ri);let Mi=dt.programs;dt.environment=Y.isMeshStandardMaterial?Be.environment:null,dt.fog=Be.fog,dt.envMap=(Y.isMeshStandardMaterial?Wr:ha).get(Y.envMap||dt.environment),dt.envMapRotation=dt.environment!==null&&Y.envMap===null?Be.environmentRotation:Y.envMapRotation,Mi===void 0&&(Y.addEventListener("dispose",$t),Mi=new Map,dt.programs=Mi);let zi=Mi.get(qn);if(zi!==void 0){if(dt.currentProgram===zi&&dt.lightsStateVersion===Bn)return Jd(Y,ri),zi}else ri.uniforms=wt.getUniforms(Y),Y.onBeforeCompile(ri,Ee),zi=wt.acquireProgram(ri,qn),Mi.set(qn,zi),dt.uniforms=ri.uniforms;const Si=dt.uniforms;return(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(Si.clippingPlanes=Cn.uniform),Jd(Y,ri),dt.needsLights=eh(Y),dt.lightsStateVersion=Bn,dt.needsLights&&(Si.ambientLightColor.value=Ve.state.ambient,Si.lightProbe.value=Ve.state.probe,Si.directionalLights.value=Ve.state.directional,Si.directionalLightShadows.value=Ve.state.directionalShadow,Si.spotLights.value=Ve.state.spot,Si.spotLightShadows.value=Ve.state.spotShadow,Si.rectAreaLights.value=Ve.state.rectArea,Si.ltc_1.value=Ve.state.rectAreaLTC1,Si.ltc_2.value=Ve.state.rectAreaLTC2,Si.pointLights.value=Ve.state.point,Si.pointLightShadows.value=Ve.state.pointShadow,Si.hemisphereLights.value=Ve.state.hemi,Si.directionalShadowMap.value=Ve.state.directionalShadowMap,Si.directionalShadowMatrix.value=Ve.state.directionalShadowMatrix,Si.spotShadowMap.value=Ve.state.spotShadowMap,Si.spotLightMatrix.value=Ve.state.spotLightMatrix,Si.spotLightMap.value=Ve.state.spotLightMap,Si.pointShadowMap.value=Ve.state.pointShadowMap,Si.pointShadowMatrix.value=Ve.state.pointShadowMatrix),dt.currentProgram=zi,dt.uniformsList=null,zi}function Qf(Y){if(Y.uniformsList===null){const Be=Y.currentProgram.getUniforms();Y.uniformsList=Rc.seqWithValue(Be.seq,Y.uniforms)}return Y.uniformsList}function Jd(Y,Be){const pt=oi.get(Y);pt.outputColorSpace=Be.outputColorSpace,pt.batching=Be.batching,pt.batchingColor=Be.batchingColor,pt.instancing=Be.instancing,pt.instancingColor=Be.instancingColor,pt.instancingMorph=Be.instancingMorph,pt.skinning=Be.skinning,pt.morphTargets=Be.morphTargets,pt.morphNormals=Be.morphNormals,pt.morphColors=Be.morphColors,pt.morphTargetsCount=Be.morphTargetsCount,pt.numClippingPlanes=Be.numClippingPlanes,pt.numIntersection=Be.numClipIntersection,pt.vertexAlphas=Be.vertexAlphas,pt.vertexTangents=Be.vertexTangents,pt.toneMapping=Be.toneMapping}function Qd(Y,Be,pt,dt,Ve){Be.isScene!==!0&&(Be=yi),er.resetTextureUnits();const un=Be.fog,Bn=dt.isMeshStandardMaterial?Be.environment:null,ri=kt===null?Ee.outputColorSpace:kt.isXRRenderTarget===!0?kt.texture.colorSpace:p.GUF,qn=(dt.isMeshStandardMaterial?Wr:ha).get(dt.envMap||Bn),Mi=dt.vertexColors===!0&&!!pt.attributes.color&&pt.attributes.color.itemSize===4,zi=!!pt.attributes.tangent&&(!!dt.normalMap||dt.anisotropy>0),Si=!!pt.morphAttributes.position,wr=!!pt.morphAttributes.normal,wa=!!pt.morphAttributes.color;let _o=p.uL9;dt.toneMapped&&(kt===null||kt.isXRRenderTarget===!0)&&(_o=Ee.toneMapping);const Da=pt.morphAttributes.position||pt.morphAttributes.normal||pt.morphAttributes.color,Pa=Da!==void 0?Da.length:0,Ti=oi.get(dt),vo=V.state.lights;if(Gr===!0&&(Vt===!0||Y!==oe)){const qo=Y===oe&&dt.id===se;Cn.setState(dt,Y,qo)}let Qr=!1;dt.version===Ti.__version?(Ti.needsLights&&Ti.lightsStateVersion!==vo.state.version||Ti.outputColorSpace!==ri||Ve.isBatchedMesh&&Ti.batching===!1||!Ve.isBatchedMesh&&Ti.batching===!0||Ve.isBatchedMesh&&Ti.batchingColor===!0&&Ve.colorTexture===null||Ve.isBatchedMesh&&Ti.batchingColor===!1&&Ve.colorTexture!==null||Ve.isInstancedMesh&&Ti.instancing===!1||!Ve.isInstancedMesh&&Ti.instancing===!0||Ve.isSkinnedMesh&&Ti.skinning===!1||!Ve.isSkinnedMesh&&Ti.skinning===!0||Ve.isInstancedMesh&&Ti.instancingColor===!0&&Ve.instanceColor===null||Ve.isInstancedMesh&&Ti.instancingColor===!1&&Ve.instanceColor!==null||Ve.isInstancedMesh&&Ti.instancingMorph===!0&&Ve.morphTexture===null||Ve.isInstancedMesh&&Ti.instancingMorph===!1&&Ve.morphTexture!==null||Ti.envMap!==qn||dt.fog===!0&&Ti.fog!==un||Ti.numClippingPlanes!==void 0&&(Ti.numClippingPlanes!==Cn.numPlanes||Ti.numIntersection!==Cn.numIntersection)||Ti.vertexAlphas!==Mi||Ti.vertexTangents!==zi||Ti.morphTargets!==Si||Ti.morphNormals!==wr||Ti.morphColors!==wa||Ti.toneMapping!==_o||Ti.morphTargetsCount!==Pa)&&(Qr=!0):(Qr=!0,Ti.__version=dt.version);let nl=Ti.currentProgram;Qr===!0&&(nl=lc(dt,Be,Ve));let Uc=!1,il=!1,yu=!1;const Ba=nl.getUniforms(),zs=Ti.uniforms;if(ai.useProgram(nl.program)&&(Uc=!0,il=!0,yu=!0),dt.id!==se&&(se=dt.id,il=!0),Uc||oe!==Y){ai.buffers.depth.getReversed()&&Y.reversedDepth!==!0&&(Y._reversedDepth=!0,Y.updateProjectionMatrix()),Ba.setValue(ye,"projectionMatrix",Y.projectionMatrix),Ba.setValue(ye,"viewMatrix",Y.matrixWorldInverse);const Rs=Ba.map.cameraPosition;Rs!==void 0&&Rs.setValue(ye,si.setFromMatrixPosition(Y.matrixWorld)),Wt.logarithmicDepthBuffer&&Ba.setValue(ye,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),(dt.isMeshPhongMaterial||dt.isMeshToonMaterial||dt.isMeshLambertMaterial||dt.isMeshBasicMaterial||dt.isMeshStandardMaterial||dt.isShaderMaterial)&&Ba.setValue(ye,"isOrthographic",Y.isOrthographicCamera===!0),oe!==Y&&(oe=Y,il=!0,yu=!0)}if(Ve.isSkinnedMesh){Ba.setOptional(ye,Ve,"bindMatrix"),Ba.setOptional(ye,Ve,"bindMatrixInverse");const qo=Ve.skeleton;qo&&(qo.boneTexture===null&&qo.computeBoneTexture(),Ba.setValue(ye,"boneTexture",qo.boneTexture,er))}Ve.isBatchedMesh&&(Ba.setOptional(ye,Ve,"batchingTexture"),Ba.setValue(ye,"batchingTexture",Ve._matricesTexture,er),Ba.setOptional(ye,Ve,"batchingIdTexture"),Ba.setValue(ye,"batchingIdTexture",Ve._indirectTexture,er),Ba.setOptional(ye,Ve,"batchingColorTexture"),Ve._colorsTexture!==null&&Ba.setValue(ye,"batchingColorTexture",Ve._colorsTexture,er));const Hs=pt.morphAttributes;if((Hs.position!==void 0||Hs.normal!==void 0||Hs.color!==void 0)&&gn.update(Ve,pt,nl),(il||Ti.receiveShadow!==Ve.receiveShadow)&&(Ti.receiveShadow=Ve.receiveShadow,Ba.setValue(ye,"receiveShadow",Ve.receiveShadow)),dt.isMeshGouraudMaterial&&dt.envMap!==null&&(zs.envMap.value=qn,zs.flipEnvMap.value=qn.isCubeTexture&&qn.isRenderTargetTexture===!1?-1:1),dt.isMeshStandardMaterial&&dt.envMap===null&&Be.environment!==null&&(zs.envMapIntensity.value=Be.environmentIntensity),il&&(Ba.setValue(ye,"toneMappingExposure",Ee.toneMappingExposure),Ti.needsLights&&md(zs,yu),un&&dt.fog===!0&&on.refreshFogUniforms(zs,un),on.refreshMaterialUniforms(zs,dt,Rt,vn,V.state.transmissionRenderTarget[Y.id]),Rc.upload(ye,Qf(Ti),zs,er)),dt.isShaderMaterial&&dt.uniformsNeedUpdate===!0&&(Rc.upload(ye,Qf(Ti),zs,er),dt.uniformsNeedUpdate=!1),dt.isSpriteMaterial&&Ba.setValue(ye,"center",Ve.center),Ba.setValue(ye,"modelViewMatrix",Ve.modelViewMatrix),Ba.setValue(ye,"normalMatrix",Ve.normalMatrix),Ba.setValue(ye,"modelMatrix",Ve.matrixWorld),dt.isShaderMaterial||dt.isRawShaderMaterial){const qo=dt.uniformsGroups;for(let Rs=0,Fu=qo.length;Rs<Fu;Rs++){const jr=qo[Rs];Pi.update(jr,nl),Pi.bind(jr,nl)}}return nl}function md(Y,Be){Y.ambientLightColor.needsUpdate=Be,Y.lightProbe.needsUpdate=Be,Y.directionalLights.needsUpdate=Be,Y.directionalLightShadows.needsUpdate=Be,Y.pointLights.needsUpdate=Be,Y.pointLightShadows.needsUpdate=Be,Y.spotLights.needsUpdate=Be,Y.spotLightShadows.needsUpdate=Be,Y.rectAreaLights.needsUpdate=Be,Y.hemisphereLights.needsUpdate=Be}function eh(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return qe},this.getActiveMipmapLevel=function(){return yt},this.getRenderTarget=function(){return kt},this.setRenderTargetTextures=function(Y,Be,pt){const dt=oi.get(Y);dt.__autoAllocateDepthBuffer=Y.resolveDepthBuffer===!1,dt.__autoAllocateDepthBuffer===!1&&(dt.__useRenderToTexture=!1),oi.get(Y.texture).__webglTexture=Be,oi.get(Y.depthTexture).__webglTexture=dt.__autoAllocateDepthBuffer?void 0:pt,dt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Y,Be){const pt=oi.get(Y);pt.__webglFramebuffer=Be,pt.__useDefaultFramebuffer=Be===void 0};const vd=ye.createFramebuffer();this.setRenderTarget=function(Y,Be=0,pt=0){kt=Y,qe=Be,yt=pt;let dt=!0,Ve=null,un=!1,Bn=!1;if(Y){const qn=oi.get(Y);if(qn.__useDefaultFramebuffer!==void 0)ai.bindFramebuffer(ye.FRAMEBUFFER,null),dt=!1;else if(qn.__webglFramebuffer===void 0)er.setupRenderTarget(Y);else if(qn.__hasExternalTextures)er.rebindTextures(Y,oi.get(Y.texture).__webglTexture,oi.get(Y.depthTexture).__webglTexture);else if(Y.depthBuffer){const Si=Y.depthTexture;if(qn.__boundDepthTexture!==Si){if(Si!==null&&oi.has(Si)&&(Y.width!==Si.image.width||Y.height!==Si.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");er.setupDepthRenderbuffer(Y)}}const Mi=Y.texture;(Mi.isData3DTexture||Mi.isDataArrayTexture||Mi.isCompressedArrayTexture)&&(Bn=!0);const zi=oi.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(Array.isArray(zi[Be])?Ve=zi[Be][pt]:Ve=zi[Be],un=!0):Y.samples>0&&er.useMultisampledRTT(Y)===!1?Ve=oi.get(Y).__webglMultisampledFramebuffer:Array.isArray(zi)?Ve=zi[pt]:Ve=zi,Ze.copy(Y.viewport),Tt.copy(Y.scissor),Jt=Y.scissorTest}else Ze.copy(sn).multiplyScalar(Rt).floor(),Tt.copy(Zr).multiplyScalar(Rt).floor(),Jt=Po;if(pt!==0&&(Ve=vd),ai.bindFramebuffer(ye.FRAMEBUFFER,Ve)&&dt&&ai.drawBuffers(Y,Ve),ai.viewport(Ze),ai.scissor(Tt),ai.setScissorTest(Jt),un){const qn=oi.get(Y.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+Be,qn.__webglTexture,pt)}else if(Bn){const qn=Be;for(let Mi=0;Mi<Y.textures.length;Mi++){const zi=oi.get(Y.textures[Mi]);ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0+Mi,zi.__webglTexture,pt,qn)}}else if(Y!==null&&pt!==0){const qn=oi.get(Y.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,qn.__webglTexture,pt)}se=-1},this.readRenderTargetPixels=function(Y,Be,pt,dt,Ve,un,Bn,ri=0){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let qn=oi.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&Bn!==void 0&&(qn=qn[Bn]),qn){ai.bindFramebuffer(ye.FRAMEBUFFER,qn);try{const Mi=Y.textures[ri],zi=Mi.format,Si=Mi.type;if(!Wt.textureFormatReadable(zi)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Wt.textureTypeReadable(Si)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Be>=0&&Be<=Y.width-dt&&pt>=0&&pt<=Y.height-Ve&&(Y.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+ri),ye.readPixels(Be,pt,dt,Ve,Un.convert(zi),Un.convert(Si),un))}finally{const Mi=kt!==null?oi.get(kt).__webglFramebuffer:null;ai.bindFramebuffer(ye.FRAMEBUFFER,Mi)}}},this.readRenderTargetPixelsAsync=function(Y,Be,pt,dt,Ve,un,Bn,ri=0){return yf(this,null,function*(){if(!(Y&&Y.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qn=oi.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&Bn!==void 0&&(qn=qn[Bn]),qn)if(Be>=0&&Be<=Y.width-dt&&pt>=0&&pt<=Y.height-Ve){ai.bindFramebuffer(ye.FRAMEBUFFER,qn);const Mi=Y.textures[ri],zi=Mi.format,Si=Mi.type;if(!Wt.textureFormatReadable(zi))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Wt.textureTypeReadable(Si))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const wr=ye.createBuffer();ye.bindBuffer(ye.PIXEL_PACK_BUFFER,wr),ye.bufferData(ye.PIXEL_PACK_BUFFER,un.byteLength,ye.STREAM_READ),Y.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+ri),ye.readPixels(Be,pt,dt,Ve,Un.convert(zi),Un.convert(Si),0);const wa=kt!==null?oi.get(kt).__webglFramebuffer:null;ai.bindFramebuffer(ye.FRAMEBUFFER,wa);const _o=ye.fenceSync(ye.SYNC_GPU_COMMANDS_COMPLETE,0);return ye.flush(),yield(0,p.Qey)(ye,_o,4),ye.bindBuffer(ye.PIXEL_PACK_BUFFER,wr),ye.getBufferSubData(ye.PIXEL_PACK_BUFFER,0,un),ye.deleteBuffer(wr),ye.deleteSync(_o),un}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(Y,Be=null,pt=0){const dt=Math.pow(2,-pt),Ve=Math.floor(Y.image.width*dt),un=Math.floor(Y.image.height*dt),Bn=Be!==null?Be.x:0,ri=Be!==null?Be.y:0;er.setTexture2D(Y,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,pt,0,0,Bn,ri,Ve,un),ai.unbindTexture()};const Fs=ye.createFramebuffer(),Lc=ye.createFramebuffer();this.copyTextureToTexture=function(Y,Be,pt=null,dt=null,Ve=0,un=null){un===null&&(Ve!==0?((0,p.O4K)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),un=Ve,Ve=0):un=0);let Bn,ri,qn,Mi,zi,Si,wr,wa,_o;const Da=Y.isCompressedTexture?Y.mipmaps[un]:Y.image;if(pt!==null)Bn=pt.max.x-pt.min.x,ri=pt.max.y-pt.min.y,qn=pt.isBox3?pt.max.z-pt.min.z:1,Mi=pt.min.x,zi=pt.min.y,Si=pt.isBox3?pt.min.z:0;else{const Hs=Math.pow(2,-Ve);Bn=Math.floor(Da.width*Hs),ri=Math.floor(Da.height*Hs),Y.isDataArrayTexture?qn=Da.depth:Y.isData3DTexture?qn=Math.floor(Da.depth*Hs):qn=1,Mi=0,zi=0,Si=0}dt!==null?(wr=dt.x,wa=dt.y,_o=dt.z):(wr=0,wa=0,_o=0);const Pa=Un.convert(Be.format),Ti=Un.convert(Be.type);let vo;Be.isData3DTexture?(er.setTexture3D(Be,0),vo=ye.TEXTURE_3D):Be.isDataArrayTexture||Be.isCompressedArrayTexture?(er.setTexture2DArray(Be,0),vo=ye.TEXTURE_2D_ARRAY):(er.setTexture2D(Be,0),vo=ye.TEXTURE_2D),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,Be.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Be.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,Be.unpackAlignment);const Qr=ye.getParameter(ye.UNPACK_ROW_LENGTH),nl=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),Uc=ye.getParameter(ye.UNPACK_SKIP_PIXELS),il=ye.getParameter(ye.UNPACK_SKIP_ROWS),yu=ye.getParameter(ye.UNPACK_SKIP_IMAGES);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,Da.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,Da.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,Mi),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,zi),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,Si);const Ba=Y.isDataArrayTexture||Y.isData3DTexture,zs=Be.isDataArrayTexture||Be.isData3DTexture;if(Y.isDepthTexture){const Hs=oi.get(Y),qo=oi.get(Be),Rs=oi.get(Hs.__renderTarget),Fu=oi.get(qo.__renderTarget);ai.bindFramebuffer(ye.READ_FRAMEBUFFER,Rs.__webglFramebuffer),ai.bindFramebuffer(ye.DRAW_FRAMEBUFFER,Fu.__webglFramebuffer);for(let jr=0;jr<qn;jr++)Ba&&(ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,oi.get(Y).__webglTexture,Ve,Si+jr),ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,oi.get(Be).__webglTexture,un,_o+jr)),ye.blitFramebuffer(Mi,zi,Bn,ri,wr,wa,Bn,ri,ye.DEPTH_BUFFER_BIT,ye.NEAREST);ai.bindFramebuffer(ye.READ_FRAMEBUFFER,null),ai.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else if(Ve!==0||Y.isRenderTargetTexture||oi.has(Y)){const Hs=oi.get(Y),qo=oi.get(Be);ai.bindFramebuffer(ye.READ_FRAMEBUFFER,Fs),ai.bindFramebuffer(ye.DRAW_FRAMEBUFFER,Lc);for(let Rs=0;Rs<qn;Rs++)Ba?ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Hs.__webglTexture,Ve,Si+Rs):ye.framebufferTexture2D(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,Hs.__webglTexture,Ve),zs?ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,qo.__webglTexture,un,_o+Rs):ye.framebufferTexture2D(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,qo.__webglTexture,un),Ve!==0?ye.blitFramebuffer(Mi,zi,Bn,ri,wr,wa,Bn,ri,ye.COLOR_BUFFER_BIT,ye.NEAREST):zs?ye.copyTexSubImage3D(vo,un,wr,wa,_o+Rs,Mi,zi,Bn,ri):ye.copyTexSubImage2D(vo,un,wr,wa,Mi,zi,Bn,ri);ai.bindFramebuffer(ye.READ_FRAMEBUFFER,null),ai.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else zs?Y.isDataTexture||Y.isData3DTexture?ye.texSubImage3D(vo,un,wr,wa,_o,Bn,ri,qn,Pa,Ti,Da.data):Be.isCompressedArrayTexture?ye.compressedTexSubImage3D(vo,un,wr,wa,_o,Bn,ri,qn,Pa,Da.data):ye.texSubImage3D(vo,un,wr,wa,_o,Bn,ri,qn,Pa,Ti,Da):Y.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,un,wr,wa,Bn,ri,Pa,Ti,Da.data):Y.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,un,wr,wa,Da.width,Da.height,Pa,Da.data):ye.texSubImage2D(ye.TEXTURE_2D,un,wr,wa,Bn,ri,Pa,Ti,Da);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,Qr),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,nl),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,Uc),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,il),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,yu),un===0&&Be.generateMipmaps&&ye.generateMipmap(vo),ai.unbindTexture()},this.initRenderTarget=function(Y){oi.get(Y).__webglFramebuffer===void 0&&er.setupRenderTarget(Y)},this.initTexture=function(Y){Y.isCubeTexture?er.setTextureCube(Y,0):Y.isData3DTexture?er.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?er.setTexture2DArray(Y,0):er.setTexture2D(Y,0),ai.unbindTexture()},this.resetState=function(){qe=0,yt=0,kt=null,ai.reset(),Fn.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return p._RZ}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(R){this._outputColorSpace=R;const _=this.getContext();_.drawingBufferColorSpace=p.epp._getDrawingBufferColorSpace(R),_.unpackColorSpace=p.epp._getUnpackColorSpace()}}}}]);
}());